"use strict";(self.webpackChunktraining_log=self.webpackChunktraining_log||[]).push([[179],{2011:(ct,Se,P)=>{P.d(Se,{Dh:()=>fe,GT:()=>me,cc:()=>Me,hO:()=>ze,on:()=>$,pX:()=>ne,xv:()=>ue});var u=P(5e3),X=P(127),F=P(5813);ct=P.hmd(ct);const le=["ngOnDestroy"],ne=(Ce,it,We,Ae={})=>new Proxy(Ce,{get:(be,Ee)=>We.runOutsideAngular(()=>{var je;if(Ce[Ee])return(null===(je=null==Ae?void 0:Ae.spy)||void 0===je?void 0:je.get)&&Ae.spy.get(Ee,Ce[Ee]),Ce[Ee];if(le.indexOf(Ee)>-1)return()=>{};const Ue=it.toPromise().then(se=>{const Y=se&&se[Ee];return"function"==typeof Y?Y.bind(se):Y&&Y.then?Y.then(oe=>We.run(()=>oe)):We.run(()=>Y)});return new Proxy(()=>{},{get:(se,Y)=>Ue[Y],apply:(se,Y,oe)=>Ue.then(_e=>{var ae;const Re=_e&&_e(...oe);return(null===(ae=null==Ae?void 0:Ae.spy)||void 0===ae?void 0:ae.apply)&&Ae.spy.apply(Ee,oe,Re),Re})})})}),me=(Ce,it)=>{it.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Ae=>{Object.defineProperty(Ce.prototype,Ae,Object.getOwnPropertyDescriptor(We.prototype||We,Ae))})})};class te{constructor(it){return it}}const fe=new u.OlP("angularfire2.app.options"),ue=new u.OlP("angularfire2.app.name");function $(Ce,it,We){const be="object"==typeof We&&We||{};be.name=be.name||"string"==typeof We&&We||"[DEFAULT]";const je=X.Z.apps.filter(Ue=>Ue&&Ue.name===be.name)[0]||it.runOutsideAngular(()=>X.Z.initializeApp(Ce,be));try{JSON.stringify(Ce)!==JSON.stringify(je.options)&&z("error",`${je.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new te(je)}const z=(Ce,...it)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Ce](...it)},ee={provide:te,useFactory:$,deps:[fe,u.R0b,[new u.FiY,ue]]};let ze=(()=>{class Ce{constructor(We){X.Z.registerVersion("angularfire",F.q4.full,"core"),X.Z.registerVersion("angularfire",F.q4.full,"app-compat"),X.Z.registerVersion("angular",u.q4F.full,We.toString())}static initializeApp(We,Ae){return{ngModule:Ce,providers:[{provide:fe,useValue:We},{provide:ue,useValue:Ae}]}}}return Ce.\u0275fac=function(We){return new(We||Ce)(u.LFG(u.Lbi))},Ce.\u0275mod=u.oAB({type:Ce}),Ce.\u0275inj=u.cJS({providers:[ee]}),Ce})();function Me(Ce,it,We,Ae,be){const[,Ee,je]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===Ce)||[];if(Ee)return function Oe(Ce,it){try{return Ce.toString()===it.toString()}catch(We){return Ce===it}}(be,je)||(ge("error",`${it} was already initialized on the ${We} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:be,was:je})),Ee;{const Ue=Ae();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Ue,be]),Ue}}const Ve=!!ct.hot,ge=(Ce,...it)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Ce](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ct,Se,P)=>{P.d(Se,{q4:()=>mu,iC:()=>_u,HU:()=>gu,vb:()=>Af,JM:()=>cl});var u=P(5e3),X=P(5867),F=P(5861),le=P(9681),ne=P(2090),me=P(4859),te=P(1877);const fe="@firebase/installations",z="w:0.5.8",ee="FIS_v2",Ce=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function We({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ae(I){return{token:I.token,requestStatus:2,expiresIn:oe(I.expiresIn),creationTime:Date.now()}}function be(I,T){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,F.Z)(function*(I,T){const H=(yield T.json()).error;return Ce.create("request-failed",{requestName:I,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function je({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Ue(I,{refreshToken:T}){const R=je(I);return R.append("Authorization",function _e(I){return`${ee} ${I}`}(T)),R}function se(I){return Y.apply(this,arguments)}function Y(){return(Y=(0,F.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function oe(I){return Number(I.replace("s","000"))}function ae(I,T){return Re.apply(this,arguments)}function Re(){return(Re=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:R}){const H=We(I),Z=je(I),re=T.getImmediate({optional:!0});if(re){const vt=yield re.getHeartbeatsHeader();vt&&Z.append("x-firebase-client",vt)}const Ye={method:"POST",headers:Z,body:JSON.stringify({fid:R,authVersion:ee,appId:I.appId,sdkVersion:z})},ot=yield se(()=>fetch(H,Ye));if(ot.ok){const vt=yield ot.json();return{fid:vt.fid||R,registrationStatus:2,refreshToken:vt.refreshToken,authToken:Ae(vt.authToken)}}throw yield be("Create Installation",ot)})).apply(this,arguments)}function ce(I){return new Promise(T=>{setTimeout(T,I)})}const en=/^[cdef][\w-]{21}$/;function ut(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function _t(I){return function Ct(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return en.test(R)?R:""}catch(I){return""}}function gn(I){return`${I.appName}!${I.appId}`}const _n=new Map;function Ur(I,T){const R=gn(I);tn(R,T),function zt(I,T){const R=function nr(){return!_i&&"BroadcastChannel"in self&&(_i=new BroadcastChannel("[Firebase] FID Change"),_i.onmessage=I=>{tn(I.data.key,I.data.fid)}),_i}();R&&R.postMessage({key:I,fid:T}),function io(){0===_n.size&&_i&&(_i.close(),_i=null)}()}(R,T)}function tn(I,T){const R=_n.get(I);if(R)for(const H of R)H(T)}let _i=null;const Gi="firebase-installations-store";let Cs=null;function cs(){return Cs||(Cs=(0,ne.X3)("firebase-installations-database",1,(I,T)=>{0===T&&I.createObjectStore(Gi)})),Cs}function ht(I,T){return ir.apply(this,arguments)}function ir(){return(ir=(0,F.Z)(function*(I,T){const R=gn(I),Z=(yield cs()).transaction(Gi,"readwrite"),re=Z.objectStore(Gi),ke=yield re.get(R);return yield re.put(T,R),yield Z.complete,(!ke||ke.fid!==T.fid)&&Ur(I,T.fid),T})).apply(this,arguments)}function hi(I){return ni.apply(this,arguments)}function ni(){return(ni=(0,F.Z)(function*(I){const T=gn(I),H=(yield cs()).transaction(Gi,"readwrite");yield H.objectStore(Gi).delete(T),yield H.complete})).apply(this,arguments)}function Er(I,T){return ro.apply(this,arguments)}function ro(){return(ro=(0,F.Z)(function*(I,T){const R=gn(I),Z=(yield cs()).transaction(Gi,"readwrite"),re=Z.objectStore(Gi),ke=yield re.get(R),Ye=T(ke);return void 0===Ye?yield re.delete(R):yield re.put(Ye,R),yield Z.complete,Ye&&(!ke||ke.fid!==Ye.fid)&&Ur(I,Ye.fid),Ye})).apply(this,arguments)}function En(I){return fi.apply(this,arguments)}function fi(){return(fi=(0,F.Z)(function*(I){let T;const R=yield Er(I.appConfig,H=>{const Z=Ds(H),re=ba(I,Z);return T=re.registrationPromise,re.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function Ds(I){return qt(I||{fid:ut(),registrationStatus:0})}function ba(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ce.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},H=function $t(I,T){return st.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:H}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:bt(I)}:{installationEntry:T}}function st(){return(st=(0,F.Z)(function*(I,T){try{const R=yield ae(I,T);return ht(I.appConfig,R)}catch(R){throw it(R)&&409===R.customData.serverCode?yield hi(I.appConfig):yield ht(I.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function bt(I){return yi.apply(this,arguments)}function yi(){return(yi=(0,F.Z)(function*(I){let T=yield us(I.appConfig);for(;1===T.registrationStatus;)yield ce(100),T=yield us(I.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:H}=yield En(I);return H||R}return T})).apply(this,arguments)}function us(I){return Er(I,T=>{if(!T)throw Ce.create("installation-not-found");return qt(T)})}function qt(I){return function Bo(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ai(I,T){return vi.apply(this,arguments)}function vi(){return(vi=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:T},R){const H=ft(I,R),Z=Ue(I,R),re=T.getImmediate({optional:!0});if(re){const vt=yield re.getHeartbeatsHeader();vt&&Z.append("x-firebase-client",vt)}const Ye={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:z,appId:I.appId}})},ot=yield se(()=>fetch(H,Ye));if(ot.ok)return Ae(yield ot.json());throw yield be("Generate Auth Token",ot)})).apply(this,arguments)}function ft(I,{fid:T}){return`${We(I)}/${T}/authTokens:generate`}function Mi(I){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,F.Z)(function*(I,T=!1){let R;const H=yield Er(I.appConfig,re=>{if(!Ft(re))throw Ce.create("not-registered");const ke=re.authToken;if(!T&&G(ke))return re;if(1===ke.requestStatus)return R=Ke(I,T),re;{if(!navigator.onLine)throw Ce.create("app-offline");const Ye=q(re);return R=pt(I,Ye),Ye}});return R?yield R:H.authToken})).apply(this,arguments)}function Ke(I,T){return Te.apply(this,arguments)}function Te(){return(Te=(0,F.Z)(function*(I,T){let R=yield Je(I.appConfig);for(;1===R.authToken.requestStatus;)yield ce(100),R=yield Je(I.appConfig);const H=R.authToken;return 0===H.requestStatus?Mi(I,T):H})).apply(this,arguments)}function Je(I){return Er(I,T=>{if(!Ft(T))throw Ce.create("not-registered");return function de(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function pt(I,T){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,F.Z)(function*(I,T){try{const R=yield Ai(I,T),H=Object.assign(Object.assign({},T),{authToken:R});return yield ht(I.appConfig,H),R}catch(R){if(!it(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const H=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield ht(I.appConfig,H)}else yield hi(I.appConfig);throw R}})).apply(this,arguments)}function Ft(I){return void 0!==I&&2===I.registrationStatus}function G(I){return 2===I.requestStatus&&!function U(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function q(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function He(){return(He=(0,F.Z)(function*(I){const T=I,{installationEntry:R,registrationPromise:H}=yield En(T);return H?H.catch(console.error):Mi(T).catch(console.error),R.fid})).apply(this,arguments)}function Xt(){return(Xt=(0,F.Z)(function*(I,T=!1){const R=I;return yield xi(R),(yield Mi(R,T)).token})).apply(this,arguments)}function xi(I){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,F.Z)(function*(I){const{registrationPromise:T}=yield En(I);T&&(yield T)})).apply(this,arguments)}function ii(I){return Ce.create("missing-app-config-values",{valueName:I})}const Za="installations",Ne=I=>{const T=I.getProvider("app").getImmediate(),R=function Is(I){if(!I||!I.options)throw ii("App Configuration");if(!I.name)throw ii("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!I.options[R])throw ii(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,le._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Ot=I=>{const T=I.getProvider("app").getImmediate(),R=(0,le._getProvider)(T,Za).getImmediate();return{getId:()=>function J(I){return He.apply(this,arguments)}(R),getToken:Z=>function yt(I){return Xt.apply(this,arguments)}(R,Z)}};(function wn(){(0,le._registerComponent)(new me.wA(Za,Ne,"PUBLIC")),(0,le._registerComponent)(new me.wA("installations-internal",Ot,"PRIVATE"))})(),(0,le.registerVersion)(fe,"0.5.8"),(0,le.registerVersion)(fe,"0.5.8","esm2017");const wi="@firebase/remote-config",$n=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vf{constructor(T,R,H,Z){this.client=T,this.storage=R,this.storageCache=H,this.logger=Z}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-R,Z=H<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Z}.`),Z}fetch(T){var R=this;return(0,F.Z)(function*(){const[H,Z]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Z&&R.isCachedDataFresh(T.cacheMaxAgeMillis,H))return Z;T.eTag=Z&&Z.eTag;const re=yield R.client.fetch(T),ke=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&ke.push(R.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(ke),re})()}}function vd(I=navigator){return I.languages&&I.languages[0]||I.language}class Fl{constructor(T,R,H,Z,re,ke){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=H,this.projectId=Z,this.apiKey=re,this.appId=ke}fetch(T){var R=this;return(0,F.Z)(function*(){const[H,Z]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ot={sdk_version:R.sdkVersion,app_instance_id:H,app_instance_id_token:Z,app_id:R.appId,language_code:vd()},vt={method:"POST",headers:Ye,body:JSON.stringify(ot)},Wt=fetch(ke,vt),Dt=new Promise((Yi,hr)=>{T.signal.addEventListener(()=>{const Wr=new Error("The operation was aborted.");Wr.name="AbortError",hr(Wr)})});let Wn;try{yield Promise.race([Wt,Dt]),Wn=yield Wt}catch(Yi){let hr="fetch-client-network";throw"AbortError"===Yi.name&&(hr="fetch-timeout"),$n.create(hr,{originalErrorMessage:Yi.message})}let Rn=Wn.status;const hl=Wn.headers.get("ETag")||void 0;let Oa,dr;if(200===Wn.status){let Yi;try{Yi=yield Wn.json()}catch(hr){throw $n.create("fetch-client-parse",{originalErrorMessage:hr.message})}Oa=Yi.entries,dr=Yi.state}if("INSTANCE_STATE_UNSPECIFIED"===dr?Rn=500:"NO_CHANGE"===dr?Rn=304:("NO_TEMPLATE"===dr||"EMPTY_CONFIG"===dr)&&(Oa={}),304!==Rn&&200!==Rn)throw $n.create("fetch-status",{httpStatus:Rn});return{status:Rn,eTag:hl,config:Oa}})()}}class qm{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,F.Z)(function*(){const H=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,H)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:H}){var Z=this;return(0,F.Z)(function*(){yield function Yn(I,T){return new Promise((R,H)=>{const Z=Math.max(T-Date.now(),0),re=setTimeout(R,Z);I.addEventListener(()=>{clearTimeout(re),H($n.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const re=yield Z.client.fetch(T);return yield Z.storage.deleteThrottleMetadata(),re}catch(re){if(!function wd(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(re))throw re;const ke={throttleEndTimeMillis:Date.now()+(0,ne.$s)(H),backoffCount:H+1};return yield Z.storage.setThrottleMetadata(ke),Z.attemptFetch(T,ke)}})()}}class Hc{constructor(T,R,H,Z,re){this.app=T,this._client=R,this._storageCache=H,this._storage=Z,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Uc(I,T){const R=I.target.error||void 0;return $n.create(T,{originalErrorMessage:R&&R.message})}const co="app_namespace_store";class Zm{constructor(T,R,H,Z=function Ym(){return new Promise((I,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=H=>{T(Uc(H,"storage-open"))},R.onsuccess=H=>{I(H.target.result)},R.onupgradeneeded=H=>{0===H.oldVersion&&H.target.result.createObjectStore(co,{keyPath:"compositeKey"})}}catch(R){T($n.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=T,this.appName=R,this.namespace=H,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,F.Z)(function*(){const H=yield R.openDbPromise;return new Promise((Z,re)=>{const Ye=H.transaction([co],"readonly").objectStore(co),ot=R.createCompositeKey(T);try{const vt=Ye.get(ot);vt.onerror=Wt=>{re(Uc(Wt,"storage-get"))},vt.onsuccess=Wt=>{const Dt=Wt.target.result;Z(Dt?Dt.value:void 0)}}catch(vt){re($n.create("storage-get",{originalErrorMessage:vt&&vt.message}))}})})()}set(T,R){var H=this;return(0,F.Z)(function*(){const Z=yield H.openDbPromise;return new Promise((re,ke)=>{const ot=Z.transaction([co],"readwrite").objectStore(co),vt=H.createCompositeKey(T);try{const Wt=ot.put({compositeKey:vt,value:R});Wt.onerror=Dt=>{ke(Uc(Dt,"storage-set"))},Wt.onsuccess=()=>{re()}}catch(Wt){ke($n.create("storage-set",{originalErrorMessage:Wt&&Wt.message}))}})})()}delete(T){var R=this;return(0,F.Z)(function*(){const H=yield R.openDbPromise;return new Promise((Z,re)=>{const Ye=H.transaction([co],"readwrite").objectStore(co),ot=R.createCompositeKey(T);try{const vt=Ye.delete(ot);vt.onerror=Wt=>{re(Uc(Wt,"storage-delete"))},vt.onsuccess=()=>{Z()}}catch(vt){re($n.create("storage-delete",{originalErrorMessage:vt&&vt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Ed{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,F.Z)(function*(){const R=T.storage.getLastFetchStatus(),H=T.storage.getLastSuccessfulFetchTimestampMillis(),Z=T.storage.getActiveConfig(),re=yield R;re&&(T.lastFetchStatus=re);const ke=yield H;ke&&(T.lastSuccessfulFetchTimestampMillis=ke);const Ye=yield Z;Ye&&(T.activeConfig=Ye)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Uo(){return wf.apply(this,arguments)}function wf(){return(wf=(0,F.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Ca(){(0,le._registerComponent)(new me.wA("remote-config",function I(T,{instanceIdentifier:R}){const H=T.getProvider("app").getImmediate(),Z=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw $n.create("registration-window");if(!(0,ne.hl)())throw $n.create("indexed-db-unavailable");const{projectId:re,apiKey:ke,appId:Ye}=H.options;if(!re)throw $n.create("registration-project-id");if(!ke)throw $n.create("registration-api-key");if(!Ye)throw $n.create("registration-app-id");const ot=new Zm(Ye,H.name,R=R||"firebase"),vt=new Ed(ot),Wt=new te.Yd(wi);Wt.logLevel=te.in.ERROR;const Dt=new Fl(Z,le.SDK_VERSION,R,re,ke,Ye),Wn=new qm(Dt,ot),Rn=new vf(Wn,ot,vt,Wt),hl=new Hc(H,Rn,vt,ot,Wt);return function Ei(I){const T=(0,ne.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(hl),hl},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(wi,"0.3.7"),(0,le.registerVersion)(wi,"0.3.7","esm2017")}();const jc="/firebase-messaging-sw.js",uo="/firebase-cloud-messaging-push-scope",sr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",jo="google.c.a.c_id",Xa="google.c.a.c_l",Cd="google.c.a.ts",Qm="google.c.a.e";var ho=(()=>{return(I=ho||(ho={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ho;var I})();function Dr(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vl(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(R),Z=new Uint8Array(H.length);for(let re=0;re<H.length;++re)Z[re]=H.charCodeAt(re);return Z}const Bl="fcm_token_details_db",Ci="fcm_token_object_Store";function bf(I){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Bl))return null;let T=null;return(yield(0,ne.X3)(Bl,5,function(){var H=(0,F.Z)(function*(Z,re,ke,Ye){var ot;if(re<2||!Z.objectStoreNames.contains(Ci))return;const vt=Ye.objectStore(Ci),Wt=yield vt.index("fcmSenderId").get(I);if(yield vt.clear(),Wt)if(2===re){const Dt=Wt;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;T={token:Dt.fcmToken,createTime:null!==(ot=Dt.createTime)&&void 0!==ot?ot:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:Dr(Dt.vapidKey)}}}else if(3===re){const Dt=Wt;T={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Dr(Dt.auth),p256dh:Dr(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Dr(Dt.vapidKey)}}}else if(4===re){const Dt=Wt;T={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Dr(Dt.auth),p256dh:Dr(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Dr(Dt.vapidKey)}}}});return function(Z,re,ke,Ye){return H.apply(this,arguments)}}())).close(),yield(0,ne.Lj)(Bl),yield(0,ne.Lj)("fcm_vapid_details_db"),yield(0,ne.Lj)("undefined"),Dd(T)?T:null}),Hl.apply(this,arguments)}function Dd(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const xs="firebase-messaging-store";let Ja=null;function $c(){return Ja||(Ja=(0,ne.X3)("firebase-messaging-database",1,(I,T)=>{0===T&&I.createObjectStore(xs)})),Ja}function Cn(I){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,F.Z)(function*(I){const T=zo(I),H=yield(yield $c()).transaction(xs).objectStore(xs).get(T);if(H)return H;{const Z=yield bf(I.appConfig.senderId);if(Z)return yield fo(I,Z),Z}})).apply(this,arguments)}function fo(I,T){return dn.apply(this,arguments)}function dn(){return(dn=(0,F.Z)(function*(I,T){const R=zo(I),Z=(yield $c()).transaction(xs,"readwrite");return yield Z.objectStore(xs).put(T,R),yield Z.complete,T})).apply(this,arguments)}function Id(I){return Go.apply(this,arguments)}function Go(){return(Go=(0,F.Z)(function*(I){const T=zo(I),H=(yield $c()).transaction(xs,"readwrite");yield H.objectStore(xs).delete(T),yield H.complete})).apply(this,arguments)}function zo({appConfig:I}){return I.appId}const qn=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function el(I,T){return jr.apply(this,arguments)}function jr(){return(jr=(0,F.Z)(function*(I,T){const R=yield mo(I),H=mt(T),Z={method:"POST",headers:R,body:JSON.stringify(H)};let re;try{re=yield(yield fetch(or(I.appConfig),Z)).json()}catch(ke){throw qn.create("token-subscribe-failed",{errorInfo:ke})}if(re.error)throw qn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw qn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function Oi(I,T){return po.apply(this,arguments)}function po(){return(po=(0,F.Z)(function*(I,T){const R=yield mo(I),H=mt(T.subscriptionOptions),Z={method:"PATCH",headers:R,body:JSON.stringify(H)};let re;try{re=yield(yield fetch(`${or(I.appConfig)}/${T.token}`,Z)).json()}catch(ke){throw qn.create("token-update-failed",{errorInfo:ke})}if(re.error)throw qn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw qn.create("token-update-no-token");return re.token})).apply(this,arguments)}function ks(I,T){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,F.Z)(function*(I,T){const H={method:"DELETE",headers:yield mo(I)};try{const re=yield(yield fetch(`${or(I.appConfig)}/${T}`,H)).json();if(re.error)throw qn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(Z){throw qn.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function or({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function mo(I){return go.apply(this,arguments)}function go(){return(go=(0,F.Z)(function*({appConfig:I,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function mt({p256dh:I,auth:T,endpoint:R,vapidKey:H}){const Z={web:{endpoint:R,auth:T,p256dh:I}};return H!==sr&&(Z.web.applicationPubKey=H),Z}const jl=6048e5;function tl(I){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,F.Z)(function*(I){const T=yield Kc(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Dr(T.getKey("auth")),p256dh:Dr(T.getKey("p256dh"))},H=yield Cn(I.firebaseDependencies);if(H){if(Sa(H.subscriptionOptions,R))return Date.now()>=H.createTime+jl?qc(I,{token:H.token,createTime:Date.now(),subscriptionOptions:R}):H.token;try{yield ks(I.firebaseDependencies,H.token)}catch(Z){console.warn(Z)}return De(I.firebaseDependencies,R)}return De(I.firebaseDependencies,R)})).apply(this,arguments)}function zl(I){return $l.apply(this,arguments)}function $l(){return($l=(0,F.Z)(function*(I){const T=yield Cn(I.firebaseDependencies);T&&(yield ks(I.firebaseDependencies,T.token),yield Id(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function qc(I,T){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,F.Z)(function*(I,T){try{const R=yield Oi(I.firebaseDependencies,T),H=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield fo(I.firebaseDependencies,H),R}catch(R){throw yield zl(I),R}})).apply(this,arguments)}function De(I,T){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,F.Z)(function*(I,T){const H={token:yield el(I,T),createTime:Date.now(),subscriptionOptions:T};return yield fo(I,H),H.token})).apply(this,arguments)}function Kc(I,T){return In.apply(this,arguments)}function In(){return(In=(0,F.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vl(T)})})).apply(this,arguments)}function Sa(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function Ta(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function ar(I,T){if(!T.notification)return;I.notification={};const R=T.notification.title;R&&(I.notification.title=R);const H=T.notification.body;H&&(I.notification.body=H);const Z=T.notification.image;Z&&(I.notification.image=Z)}(T,I),function Yc(I,T){!T.data||(I.data=T.data)}(T,I),function Zc(I,T){if(!T.fcmOptions)return;I.fcmOptions={};const R=T.fcmOptions.link;R&&(I.fcmOptions.link=R);const H=T.fcmOptions.analytics_label;H&&(I.fcmOptions.analyticsLabel=H)}(T,I),T}function Sd(I){return"object"==typeof I&&!!I&&jo in I}function Qc(I,T){const R=[];for(let H=0;H<I.length;H++)R.push(I.charAt(H)),H<T.length&&R.push(T.charAt(H));return R.join("")}function _o(I){return qn.create("missing-app-config-values",{valueName:I})}Qc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Qc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Di{constructor(T,R,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function ql(I){if(!I||!I.options)throw _o("App Configuration Object");if(!I.name)throw _o("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const H of T)if(!R[H])throw _o(H);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Z,installations:R,analyticsProvider:H}}_delete(){return Promise.resolve()}}function Ir(I){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(jc,{scope:uo}),I.swRegistration.update().catch(()=>{})}catch(T){throw qn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function yo(I,T){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,F.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield Ir(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw qn.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Xc(I,T){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,F.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=sr)})).apply(this,arguments)}function Jc(){return(Jc=(0,F.Z)(function*(I,T){if(!navigator)throw qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qn.create("permission-blocked");return yield Xc(I,null==T?void 0:T.vapidKey),yield yo(I,null==T?void 0:T.serviceWorkerRegistration),tl(I)})).apply(this,arguments)}function nl(I,T,R){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,F.Z)(function*(I,T,R){const H=eu(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:R[jo],message_name:R[Xa],message_time:R[Cd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function eu(I){switch(I){case ho.NOTIFICATION_CLICKED:return"notification_open";case ho.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Td(){return(Td=(0,F.Z)(function*(I,T){const R=T.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===ho.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ta(R)):I.onMessageHandler.next(Ta(R)));const H=R.data;Sd(H)&&"1"===H[Qm]&&(yield nl(I,R.messageType,H))})).apply(this,arguments)}const nu="@firebase/messaging",Ad=I=>{const T=new Di(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function tu(I,T){return Td.apply(this,arguments)}(T,R)),T},qo=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:H=>function Yl(I,T){return Jc.apply(this,arguments)}(T,H)}};function xd(){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,F.Z)(function*(){try{yield(0,ne.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Md(){(0,le._registerComponent)(new me.wA("messaging",Ad,"PUBLIC")),(0,le._registerComponent)(new me.wA("messaging-internal",qo,"PRIVATE")),(0,le.registerVersion)(nu,"0.9.12"),(0,le.registerVersion)(nu,"0.9.12","esm2017")}();const ru="analytics",nv="firebase_id",il="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zl="https://www.googletagmanager.com/gtag/js",Zn=new te.Yd("@firebase/analytics");function Rd(I){return Promise.all(I.map(T=>T.catch(R=>R)))}function Xm(I,T){const R=document.createElement("script");R.src=`${Zl}?l=${I}&id=${T}`,R.async=!0,document.head.appendChild(R)}function Ma(I,T,R,H,Z,re){return Od.apply(this,arguments)}function Od(){return(Od=(0,F.Z)(function*(I,T,R,H,Z,re){const ke=H[Z];try{if(ke)yield T[ke];else{const ot=(yield Rd(R)).find(vt=>vt.measurementId===Z);ot&&(yield T[ot.appId])}}catch(Ye){Zn.error(Ye)}I("config",Z,re)})).apply(this,arguments)}function ou(I,T,R,H,Z){return hs.apply(this,arguments)}function hs(){return(hs=(0,F.Z)(function*(I,T,R,H,Z){try{let re=[];if(Z&&Z.send_to){let ke=Z.send_to;Array.isArray(ke)||(ke=[ke]);const Ye=yield Rd(R);for(const ot of ke){const vt=Ye.find(Dt=>Dt.measurementId===ot),Wt=vt&&T[vt.appId];if(!Wt){re=[];break}re.push(Wt)}}0===re.length&&(re=Object.values(T)),yield Promise.all(re),I("event",H,Z||{})}catch(re){Zn.error(re)}})).apply(this,arguments)}function Jm(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(Zl))return T;return null}const an=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),rl=new class cu{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ko(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Pd(I){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,F.Z)(function*(I){var T;const{appId:R,apiKey:H}=I,Z={method:"GET",headers:Ko(H)},re=il.replace("{app-id}",R),ke=yield fetch(re,Z);if(200!==ke.status&&304!==ke.status){let Ye="";try{const ot=yield ke.json();(null===(T=ot.error)||void 0===T?void 0:T.message)&&(Ye=ot.error.message)}catch(ot){}throw an.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:Ye})}return ke.json()})).apply(this,arguments)}function Yo(I){return hn.apply(this,arguments)}function hn(){return(hn=(0,F.Z)(function*(I,T=rl,R){const{appId:H,apiKey:Z,measurementId:re}=I.options;if(!H)throw an.create("no-app-id");if(!Z){if(re)return{measurementId:re,appId:H};throw an.create("no-api-key")}const ke=T.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Xl;return setTimeout((0,F.Z)(function*(){Ye.abort()}),void 0!==R?R:6e4),Mt({appId:H,apiKey:Z,measurementId:re},ke,Ye,T)})).apply(this,arguments)}function Mt(I,T,R){return bo.apply(this,arguments)}function bo(){return(bo=(0,F.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:R},H,Z=rl){const{appId:re,measurementId:ke}=I;try{yield eg(H,T)}catch(Ye){if(ke)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:re,measurementId:ke};throw Ye}try{const Ye=yield Pd(I);return Z.deleteThrottleMetadata(re),Ye}catch(Ye){if(!Ql(Ye)){if(Z.deleteThrottleMetadata(re),ke)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:re,measurementId:ke};throw Ye}const ot=503===Number(Ye.customData.httpStatus)?(0,ne.$s)(R,Z.intervalMillis,30):(0,ne.$s)(R,Z.intervalMillis),vt={throttleEndTimeMillis:Date.now()+ot,backoffCount:R+1};return Z.setThrottleMetadata(re,vt),Zn.debug(`Calling attemptFetch again in ${ot} millis`),Mt(I,vt,H,Z)}})).apply(this,arguments)}function eg(I,T){return new Promise((R,H)=>{const Z=Math.max(T-Date.now(),0),re=setTimeout(R,Z);I.addEventListener(()=>{clearTimeout(re),H(an.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ql(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Xl{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Fd(){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,F.Z)(function*(){if(!(0,ne.hl)())return Zn.warn(an.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return Zn.warn(an.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function ri(){return(ri=(0,F.Z)(function*(I,T,R,H,Z,re,ke){var Ye;const ot=Yo(I);ot.then(Rn=>{R[Rn.measurementId]=Rn.appId,I.options.measurementId&&Rn.measurementId!==I.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Rn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rn=>Zn.error(Rn)),T.push(ot);const vt=Fd().then(Rn=>{if(Rn)return H.getId()}),[Wt,Dt]=yield Promise.all([ot,vt]);Jm()||Xm(re,Wt.measurementId),Z("js",new Date);const Wn=null!==(Ye=null==ke?void 0:ke.config)&&void 0!==Ye?Ye:{};return Wn.origin="firebase",Wn.update=!0,null!=Dt&&(Wn[nv]=Dt),Z("config",Wt.measurementId,Wn),Wt.measurementId})).apply(this,arguments)}class xa{constructor(T){this.app=T}_delete(){return delete lr[this.app.options.appId],Promise.resolve()}}let lr={},Qo=[];const uu={};let Tr,Eo,Xo="dataLayer",si=!1;function zr(I,T,R){!function du(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((H,Z)=>`(${Z+1}) ${H}`).join(" "),R=an.create("invalid-analytics-context",{errorInfo:T});Zn.warn(R.message)}}();const H=I.options.appId;if(!H)throw an.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw an.create("no-api-key");Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=lr[H])throw an.create("already-exists",{id:H});if(!si){!function Os(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(Xo);const{wrappedGtag:re,gtagCore:ke}=function Nd(I,T,R,H,Z){let re=function(...ke){window[H].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(re=window[Z]),window[Z]=function au(I,T,R,H){function re(){return(re=(0,F.Z)(function*(ke,Ye,ot){try{"event"===ke?yield ou(I,T,R,Ye,ot):"config"===ke?yield Ma(I,T,R,H,Ye,ot):I("set",Ye)}catch(vt){Zn.error(vt)}})).apply(this,arguments)}return function Z(ke,Ye,ot){return re.apply(this,arguments)}}(re,I,T,R),{gtagCore:re,wrappedGtag:window[Z]}}(lr,Qo,uu,Xo,"gtag");Eo=re,Tr=ke,si=!0}return lr[H]=function Sr(I,T,R,H,Z,re,ke){return ri.apply(this,arguments)}(I,Qo,uu,T,Tr,Xo,R),new xa(I)}function sl(){return(sl=(0,F.Z)(function*(I,T,R,H,Z){if(Z&&Z.global)I("event",R,H);else{const re=yield T;I("event",R,Object.assign(Object.assign({},H),{send_to:re}))}})).apply(this,arguments)}function ta(){return ec.apply(this,arguments)}function ec(){return(ec=(0,F.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}const pu="@firebase/analytics";!function Df(){(0,le._registerComponent)(new me.wA(ru,(T,{options:R})=>zr(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,le._registerComponent)(new me.wA("analytics-internal",function I(T){try{const R=T.getProvider(ru).getImmediate();return{logEvent:(H,Z,re)=>function Bd(I,T,R,H){I=(0,ne.m9)(I),function Ld(I,T,R,H,Z){return sl.apply(this,arguments)}(Eo,lr[I.app.options.appId],T,R,H).catch(Z=>Zn.error(Z))}(R,H,Z,re)}}catch(R){throw an.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,le.registerVersion)(pu,"0.7.8"),(0,le.registerVersion)(pu,"0.7.8","esm2017")}();var Ud=P(4408),If=P(7565);const tc=new class kn extends If.v{}(class ps extends Ud.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(T,R,H):T.flush(this)}});var Wi=P(4986),nc=P(8505),Ki=P(9468),qr=P(5363);const mu=new u.GfV("7.3.0"),Ls="__angularfire_symbol__analyticsIsSupportedValue",cr="__angularfire_symbol__analyticsIsSupported",ur="__angularfire_symbol__remoteConfigIsSupportedValue",al="__angularfire_symbol__remoteConfigIsSupported",ll="__angularfire_symbol__messagingIsSupportedValue",jd="__angularfire_symbol__messagingIsSupported";function cl(I,T,R){if(T){if(1===T.length)return T[0];const re=T.filter(ke=>ke.app===R);if(1===re.length)return re[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[cr]||(globalThis[cr]=ta().then(I=>globalThis[Ls]=I).catch(()=>globalThis[Ls]=!1)),globalThis[jd]||(globalThis[jd]=xd().then(I=>globalThis[ll]=I).catch(()=>globalThis[ll]=!1)),globalThis[al]||(globalThis[al]=Uo().then(I=>globalThis[ur]=I).catch(()=>globalThis[ur]=!1));const Af=(I,T)=>{const R=T?[T]:(0,X.C6)(),H=[];return R.forEach(Z=>{Z.container.getProvider(I).instances.forEach(ke=>{H.includes(ke)||H.push(ke)})}),H};function na(){}class ul{constructor(T,R=tc){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,H){const Z=this.zone;return this.delegate.schedule(function(ke){Z.runGuarded(()=>{T.apply(this,[ke])})},R,H)}}class Mf{constructor(T){this.zone=T,this.task=null}call(T,R){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",na,{},na,na)),R.pipe((0,nc.b)({next:H,complete:H,error:H})).subscribe(T).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gu=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new ul(Zone.current)),this.insideAngular=R.run(()=>new ul(Zone.current,Wi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(u.LFG(u.R0b))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Vs(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function _u(I){return Vs(),function Bs(I){return function(R){return(R=R.lift(new Mf(I.ngZone))).pipe((0,Ki.R)(I.outsideAngular),(0,qr.Q)(I.insideAngular))}}(Vs())(I)}},2090:(ct,Se,P)=>{P.d(Se,{$s:()=>Bo,BH:()=>Me,DV:()=>zt,Dv:()=>ro,G6:()=>se,GJ:()=>as,L:()=>ue,LL:()=>Ct,Lj:()=>Ht,Mn:()=>je,Pz:()=>_t,Sg:()=>Oe,UG:()=>Ce,UI:()=>nr,US:()=>te,Wj:()=>Ds,X3:()=>pt,Yr:()=>Ue,ZB:()=>ee,ZR:()=>ce,b$:()=>Ae,cI:()=>ut,d:()=>be,dS:()=>$t,eu:()=>oe,g5:()=>le,gK:()=>En,gQ:()=>cs,h$:()=>fe,hl:()=>Y,hu:()=>F,jU:()=>it,lb:()=>ba,m9:()=>ft,ne:()=>ht,p$:()=>z,pd:()=>Cs,r3:()=>tn,ru:()=>We,tV:()=>$,uI:()=>ge,ug:()=>st,vZ:()=>io,w1:()=>Ee,w9:()=>on,xO:()=>ls,xb:()=>_i,z$:()=>Ve,zI:()=>_e,zd:()=>Gi});var u=P(5861);const F=function(G,U){if(!G)throw le(U)},le=function(G){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+G)},ne=function(G){const U=[];let q=0;for(let de=0;de<G.length;de++){let J=G.charCodeAt(de);J<128?U[q++]=J:J<2048?(U[q++]=J>>6|192,U[q++]=63&J|128):55296==(64512&J)&&de+1<G.length&&56320==(64512&G.charCodeAt(de+1))?(J=65536+((1023&J)<<10)+(1023&G.charCodeAt(++de)),U[q++]=J>>18|240,U[q++]=J>>12&63|128,U[q++]=J>>6&63|128,U[q++]=63&J|128):(U[q++]=J>>12|224,U[q++]=J>>6&63|128,U[q++]=63&J|128)}return U},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,U){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let J=0;J<G.length;J+=3){const He=G[J],yt=J+1<G.length,Xt=yt?G[J+1]:0,xi=J+2<G.length,Yt=xi?G[J+2]:0;let vn=(15&Xt)<<2|Yt>>6,pi=63&Yt;xi||(pi=64,yt||(vn=64)),de.push(q[He>>2],q[(3&He)<<4|Xt>>4],q[vn],q[pi])}return de.join("")},encodeString(G,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(G):this.encodeByteArray(ne(G),U)},decodeString(G,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(G):function(G){const U=[];let q=0,de=0;for(;q<G.length;){const J=G[q++];if(J<128)U[de++]=String.fromCharCode(J);else if(J>191&&J<224){const He=G[q++];U[de++]=String.fromCharCode((31&J)<<6|63&He)}else if(J>239&&J<365){const xi=((7&J)<<18|(63&G[q++])<<12|(63&G[q++])<<6|63&G[q++])-65536;U[de++]=String.fromCharCode(55296+(xi>>10)),U[de++]=String.fromCharCode(56320+(1023&xi))}else{const He=G[q++],yt=G[q++];U[de++]=String.fromCharCode((15&J)<<12|(63&He)<<6|63&yt)}}return U.join("")}(this.decodeStringToByteArray(G,U))},decodeStringToByteArray(G,U){this.init_();const q=U?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let J=0;J<G.length;){const He=q[G.charAt(J++)],Xt=J<G.length?q[G.charAt(J)]:0;++J;const Yt=J<G.length?q[G.charAt(J)]:64;++J;const Rt=J<G.length?q[G.charAt(J)]:64;if(++J,null==He||null==Xt||null==Yt||null==Rt)throw Error();de.push(He<<2|Xt>>4),64!==Yt&&(de.push(Xt<<4&240|Yt>>2),64!==Rt&&de.push(Yt<<6&192|Rt))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},fe=function(G){const U=ne(G);return te.encodeByteArray(U,!0)},ue=function(G){return fe(G).replace(/\./g,"")},$=function(G){try{return te.decodeString(G,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function z(G){return ee(void 0,G)}function ee(G,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return U}for(const q in U)!U.hasOwnProperty(q)||!ze(q)||(G[q]=ee(G[q],U[q]));return G}function ze(G){return"__proto__"!==G}class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,q)=>{this.resolve=U,this.reject=q})}wrapCallback(U){return(q,de)=>{q?this.reject(q):this.resolve(de),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(q):U(q,de))}}}function Oe(G,U){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=U||"demo-project",J=G.iat||0,He=G.sub||G.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:J,exp:J+3600,auth_time:J,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},G);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(yt)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(G){return!1}}function it(){return"object"==typeof self&&self.self===self}function We(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Ae(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function be(){return Ve().indexOf("Electron/")>=0}function Ee(){const G=Ve();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function je(){return Ve().indexOf("MSAppHost/")>=0}function Ue(){return!1}function se(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y(){return"object"==typeof indexedDB}function oe(){return new Promise((G,U)=>{try{let q=!0;const de="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(de);J.onsuccess=()=>{J.result.close(),q||self.indexedDB.deleteDatabase(de),G(!0)},J.onupgradeneeded=()=>{q=!1},J.onerror=()=>{var He;U((null===(He=J.error)||void 0===He?void 0:He.message)||"")}}catch(q){U(q)}})}function _e(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ce extends Error{constructor(U,q,de){super(q),this.code=U,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ct.prototype.create)}}class Ct{constructor(U,q,de){this.service=U,this.serviceName=q,this.errors=de}create(U,...q){const de=q[0]||{},J=`${this.service}/${U}`,He=this.errors[U],yt=He?function en(G,U){return G.replace(zn,(q,de)=>{const J=U[de];return null!=J?String(J):`<${de}?>`})}(He,de):"Error";return new ce(J,`${this.serviceName}: ${yt} (${J}).`,de)}}const zn=/\{\$([^}]+)}/g;function ut(G){return JSON.parse(G)}function _t(G){return JSON.stringify(G)}const gn=function(G){let U={},q={},de={},J="";try{const He=G.split(".");U=ut($(He[0])||""),q=ut($(He[1])||""),J=He[2],de=q.d||{},delete q.d}catch(He){}return{header:U,claims:q,data:de,signature:J}},on=function(G){const q=gn(G).claims;return!!q&&"object"==typeof q&&q.hasOwnProperty("iat")},as=function(G){const U=gn(G).claims;return"object"==typeof U&&!0===U.admin};function tn(G,U){return Object.prototype.hasOwnProperty.call(G,U)}function zt(G,U){if(Object.prototype.hasOwnProperty.call(G,U))return G[U]}function _i(G){for(const U in G)if(Object.prototype.hasOwnProperty.call(G,U))return!1;return!0}function nr(G,U,q){const de={};for(const J in G)Object.prototype.hasOwnProperty.call(G,J)&&(de[J]=U.call(q,G[J],J,G));return de}function io(G,U){if(G===U)return!0;const q=Object.keys(G),de=Object.keys(U);for(const J of q){if(!de.includes(J))return!1;const He=G[J],yt=U[J];if(ji(He)&&ji(yt)){if(!io(He,yt))return!1}else if(He!==yt)return!1}for(const J of de)if(!q.includes(J))return!1;return!0}function ji(G){return null!==G&&"object"==typeof G}function ls(G){const U=[];for(const[q,de]of Object.entries(G))Array.isArray(de)?de.forEach(J=>{U.push(encodeURIComponent(q)+"="+encodeURIComponent(J))}):U.push(encodeURIComponent(q)+"="+encodeURIComponent(de));return U.length?"&"+U.join("&"):""}function Gi(G){const U={};return G.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[J,He]=de.split("=");U[decodeURIComponent(J)]=decodeURIComponent(He)}}),U}function Cs(G){const U=G.indexOf("?");if(!U)return"";const q=G.indexOf("#",U);return G.substring(U,q>0?q:void 0)}class cs{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let U=1;U<this.blockSize;++U)this.pad_[U]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(U,q){q||(q=0);const de=this.W_;if("string"==typeof U)for(let Rt=0;Rt<16;Rt++)de[Rt]=U.charCodeAt(q)<<24|U.charCodeAt(q+1)<<16|U.charCodeAt(q+2)<<8|U.charCodeAt(q+3),q+=4;else for(let Rt=0;Rt<16;Rt++)de[Rt]=U[q]<<24|U[q+1]<<16|U[q+2]<<8|U[q+3],q+=4;for(let Rt=16;Rt<80;Rt++){const vn=de[Rt-3]^de[Rt-8]^de[Rt-14]^de[Rt-16];de[Rt]=4294967295&(vn<<1|vn>>>31)}let Yt,Vn,J=this.chain_[0],He=this.chain_[1],yt=this.chain_[2],Xt=this.chain_[3],xi=this.chain_[4];for(let Rt=0;Rt<80;Rt++){Rt<40?Rt<20?(Yt=Xt^He&(yt^Xt),Vn=1518500249):(Yt=He^yt^Xt,Vn=1859775393):Rt<60?(Yt=He&yt|Xt&(He|yt),Vn=2400959708):(Yt=He^yt^Xt,Vn=3395469782);const vn=(J<<5|J>>>27)+Yt+xi+Vn+de[Rt]&4294967295;xi=Xt,Xt=yt,yt=4294967295&(He<<30|He>>>2),He=J,J=vn}this.chain_[0]=this.chain_[0]+J&4294967295,this.chain_[1]=this.chain_[1]+He&4294967295,this.chain_[2]=this.chain_[2]+yt&4294967295,this.chain_[3]=this.chain_[3]+Xt&4294967295,this.chain_[4]=this.chain_[4]+xi&4294967295}update(U,q){if(null==U)return;void 0===q&&(q=U.length);const de=q-this.blockSize;let J=0;const He=this.buf_;let yt=this.inbuf_;for(;J<q;){if(0===yt)for(;J<=de;)this.compress_(U,J),J+=this.blockSize;if("string"==typeof U){for(;J<q;)if(He[yt]=U.charCodeAt(J),++yt,++J,yt===this.blockSize){this.compress_(He),yt=0;break}}else for(;J<q;)if(He[yt]=U[J],++yt,++J,yt===this.blockSize){this.compress_(He),yt=0;break}}this.inbuf_=yt,this.total_+=q}digest(){const U=[];let q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let J=this.blockSize-1;J>=56;J--)this.buf_[J]=255&q,q/=256;this.compress_(this.buf_);let de=0;for(let J=0;J<5;J++)for(let He=24;He>=0;He-=8)U[de]=this.chain_[J]>>He&255,++de;return U}}function ht(G,U){const q=new ir(G,U);return q.subscribe.bind(q)}class ir{constructor(U,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{U(this)}).catch(de=>{this.error(de)})}next(U){this.forEachObserver(q=>{q.next(U)})}error(U){this.forEachObserver(q=>{q.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,q,de){let J;if(void 0===U&&void 0===q&&void 0===de)throw new Error("Missing Observer.");J=function ni(G,U){if("object"!=typeof G||null===G)return!1;for(const q of U)if(q in G&&"function"==typeof G[q])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:q,complete:de},void 0===J.next&&(J.next=Er),void 0===J.error&&(J.error=Er),void 0===J.complete&&(J.complete=Er);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch(yt){}}),this.observers.push(J),He}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,U)}sendOne(U,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{q(this.observers[U])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Er(){}const ro=function(G,U,q,de){let J;if(de<U?J="at least "+U:de>q&&(J=0===q?"none":"no more than "+q),J)throw new Error(G+" failed: Was called with "+de+(1===de?" argument.":" arguments.")+" Expects "+J+".")};function En(G,U){return`${G} failed: ${U} argument `}function Ds(G,U,q,de){if((!de||q)&&"function"!=typeof q)throw new Error(En(G,U)+"must be a valid function.")}function ba(G,U,q,de){if((!de||q)&&("object"!=typeof q||null===q))throw new Error(En(G,U)+"must be a valid context object.")}const $t=function(G){const U=[];let q=0;for(let de=0;de<G.length;de++){let J=G.charCodeAt(de);if(J>=55296&&J<=56319){const He=J-55296;de++,F(de<G.length,"Surrogate pair missing trail surrogate."),J=65536+(He<<10)+(G.charCodeAt(de)-56320)}J<128?U[q++]=J:J<2048?(U[q++]=J>>6|192,U[q++]=63&J|128):J<65536?(U[q++]=J>>12|224,U[q++]=J>>6&63|128,U[q++]=63&J|128):(U[q++]=J>>18|240,U[q++]=J>>12&63|128,U[q++]=J>>6&63|128,U[q++]=63&J|128)}return U},st=function(G){let U=0;for(let q=0;q<G.length;q++){const de=G.charCodeAt(q);de<128?U++:de<2048?U+=2:de>=55296&&de<=56319?(U+=4,q++):U+=3}return U};function Bo(G,U=1e3,q=2){const de=U*Math.pow(q,G),J=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+J)}function ft(G){return G&&G._delegate?G._delegate:G}function Mi(G,U){return new Promise((q,de)=>{G.onsuccess=J=>{q(J.target.result)},G.onerror=J=>{var He;de(`${U}: ${null===(He=J.target.error)||void 0===He?void 0:He.message}`)}})}class Vt{constructor(U){this._db=U,this.objectStoreNames=this._db.objectStoreNames}transaction(U,q="readonly"){return new Ke(this._db.transaction.call(this._db,U,q))}createObjectStore(U,q){return new Te(this._db.createObjectStore(U,q))}close(){this._db.close()}}class Ke{constructor(U){this._transaction=U,this.complete=new Promise((q,de)=>{this._transaction.oncomplete=function(){q()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(U){return new Te(this._transaction.objectStore(U))}}class Te{constructor(U){this._store=U}index(U){return new Je(this._store.index(U))}createIndex(U,q,de){return new Je(this._store.createIndex(U,q,de))}get(U){return Mi(this._store.get(U),"Error reading from IndexedDB")}put(U,q){return Mi(this._store.put(U,q),"Error writing to IndexedDB")}delete(U){return Mi(this._store.delete(U),"Error deleting from IndexedDB")}clear(){return Mi(this._store.clear(),"Error clearing IndexedDB object store")}}class Je{constructor(U){this._index=U}get(U){return Mi(this._index.get(U),"Error reading from IndexedDB")}}function pt(G,U,q){return new Promise((de,J)=>{try{const He=indexedDB.open(G,U);He.onsuccess=yt=>{de(new Vt(yt.target.result))},He.onerror=yt=>{var Xt;J(`Error opening indexedDB: ${null===(Xt=yt.target.error)||void 0===Xt?void 0:Xt.message}`)},He.onupgradeneeded=yt=>{q(new Vt(He.result),yt.oldVersion,yt.newVersion,new Ke(He.transaction))}}catch(He){J(`Error opening indexedDB: ${He.message}`)}})}function Ht(G){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(function*(G){return new Promise((U,q)=>{try{const de=indexedDB.deleteDatabase(G);de.onsuccess=()=>{U()},de.onerror=J=>{var He;q(`Error deleting indexedDB database "${G}": ${null===(He=J.target.error)||void 0===He?void 0:He.message}`)}}catch(de){q(`Error deleting indexedDB database "${G}": ${de.message}`)}})})).apply(this,arguments)}},1592:(ct,Se,P)=>{var u=P(5e3);let X=null;function F(){return X}const te=new u.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ue(){return(0,u.LFG)(z)}()},providedIn:"platform"}),n})(),z=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const i=F().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=F().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){ee()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){ee()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ze(){return new z((0,u.LFG)(te))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,u.LFG)(te).location;return new We((0,u.LFG)(fe),e&&e.origin||"")}()},providedIn:"root"}),n})();const it=new u.OlP("appBaseHref");let We=(()=>{class n extends ge{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ve(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,a){const c=this.prepareExternalUrl(r+Ve(a));this._platformLocation.pushState(t,i,c)}replaceState(t,i,r,a){const c=this.prepareExternalUrl(r+Ve(a));this._platformLocation.replaceState(t,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fe),u.LFG(it,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n{constructor(t,i){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Oe(Ue(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ve(i))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Me,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(u.LFG(ge),u.LFG(fe))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ee(){return new be((0,u.LFG)(ge),(0,u.LFG)(fe))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}let Ss=(()=>{class n{constructor(t,i,r,a){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ao{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bi=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,a,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ao(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===a?void 0:a);else if(null!==a){const h=i.get(a);i.move(h,c),Ts(h,r)}});for(let r=0,a=i.length;r<a;r++){const h=i.get(r).context;h.index=r,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Ts(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ts(n,e){n.context.$implicit=e.item}let Ei=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new un,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ol("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ol("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class un{constructor(){this.$implicit=null,this.ngIf=null}}function Ol(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class Nl{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let zi=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),ki=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new Nl(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(zi,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Bc=(()=>{class n{constructor(t,i,r){r._addDefault(new Nl(t,i))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(zi,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchDefault",""]]}),n})();class wd{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class qm{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}onDestroy(e){}}const Ms=new qm,Wm=new wd;let Hc=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if((0,u.QGY)(t))return Ms;if((0,u.F4k)(t))return Wm;throw function Yn(n,e){return new u.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1}),n})(),$i=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const ho="browser";function Ci(n){return"server"===n}class fo extends class Ia extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){X||(X=n)}(new fo)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Id(){return dn=dn||document.querySelector("base"),dn?dn.getAttribute("href"):null}();return null==t?null:function zo(n){Go=Go||document.createElement("a"),Go.setAttribute("href",n);const e=Go.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){dn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ea(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,a]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Go,dn=null;const Ri=new u.OlP("TRANSITION_ID"),el=[{provide:u.ip1,useFactory:function qn(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const i=F(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<r.length;a++)i.remove(r[a])})}},deps:[Ri,te,u.zs3],multi:!0}];class jr{static init(){(0,u.VLi)(new jr)}addToWindow(e){u.dqk.getAngularTestability=(i,r=!0)=>{const a=e.findTestabilityInTree(i,r);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(i=>{const r=u.dqk.getAllAngularTestabilities();let a=r.length,c=!1;const h=function(m){c=c||m,a--,0==a&&i(c)};r.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Oi=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const po=new u.OlP("EventManagerPlugins");let ks=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let a=0;a<r.length;a++){const c=r[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(po),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Ul{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=F().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let or=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),mo=(()=>{class n extends or{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,r.push(i.appendChild(c))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(go),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(go))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function go(n){F().remove(n)}const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jl=/%COMP%/g;function De(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?De(n,r,t):(r=r.replace(jl,n),t.push(r))}return t}function Lt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let In=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Sa(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case u.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Yc(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case u.ifc.ShadowDom:return new Zc(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=De(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ks),u.LFG(mo),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Sa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const a=mt[r];a?e.setAttributeNS(a,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=mt[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,i,r&u.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lt(i)):this.eventManager.addEventListener(e,t,Lt(i))}}class Yc extends Sa{constructor(e,t,i,r){super(e),this.component=i;const a=De(r+"-"+i.id,i.styles,[]);t.addStyles(a),this.contentAttr=function qc(n){return"_ngcontent-%COMP%".replace(jl,n)}(r+"-"+i.id),this.hostAttr=function Wc(n){return"_nghost-%COMP%".replace(jl,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Zc extends Sa{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=De(r.id,r.styles,[]);for(let c=0;c<a.length;c++){const h=document.createElement("style");h.textContent=a[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Sd=(()=>{class n extends Ul{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Qc=["alt","control","meta","shift"],_o={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Di={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ir={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wl=(()=>{class n extends Ul{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const a=n.parseEventName(i),c=n.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=n._normalizeKey(i.pop());let c="";if(Qc.forEach(m=>{const y=i.indexOf(m);y>-1&&(i.splice(y,1),c+=m+".")}),c+=a,0!=i.length||0===a.length)return null;const h={};return h.domEventName=r,h.fullKey=c,h}static getEventFullKey(t){let i="",r=function yo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Di.hasOwnProperty(e)&&(e=Di[e]))}return _o[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Qc.forEach(a=>{a!=r&&Ir[a](t)&&(i+=a+".")}),i+=r,i}static eventCallback(t,i,r){return a=>{n.getEventFullKey(a)===t&&r.runGuarded(()=>i(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Jc=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:ho},{provide:u.g9A,useValue:function Gr(){fo.makeCurrent(),jr.init()},multi:!0},{provide:te,useFactory:function Kl(){return(0,u.RDi)(document),document},deps:[]}]),nl=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Xc(){return new u.qLn},deps:[]},{provide:po,useClass:Sd,multi:!0,deps:[te,u.R0b,u.Lbi]},{provide:po,useClass:Wl,multi:!0,deps:[te]},{provide:In,useClass:In,deps:[ks,mo,u.AFp]},{provide:u.FYo,useExisting:In},{provide:or,useExisting:mo},{provide:mo,useClass:mo,deps:[te]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:ks,useClass:ks,deps:[po,u.R0b]},{provide:class Cn{},useClass:Oi,deps:[]}];let Aa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Ri,useExisting:u.AFp},el]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:nl,imports:[$i,u.hGG]}),n})();"undefined"!=typeof window&&window;let hs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new(t||n):u.LFG(Nd),i},providedIn:"root"}),n})(),Nd=(()=>{class n extends hs{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case u.q3G.NONE:return i;case u.q3G.HTML:return(0,u.qzn)(i,"HTML")?(0,u.z3N)(i):(0,u.EiD)(this._doc,String(i)).toString();case u.q3G.STYLE:return(0,u.qzn)(i,"Style")?(0,u.z3N)(i):i;case u.q3G.SCRIPT:if((0,u.qzn)(i,"Script"))return(0,u.z3N)(i);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.yhl)(i),(0,u.qzn)(i,"URL")?(0,u.z3N)(i):(0,u.mCW)(String(i));case u.q3G.RESOURCE_URL:if((0,u.qzn)(i,"ResourceURL"))return(0,u.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function au(n){return new Nd(n.get(te))}(u.LFG(u.zs3)),i},providedIn:"root"}),n})();var fs=P(8996),an=P(8306);const{isArray:lu}=Array,{getPrototypeOf:Ns,prototype:cu,keys:rl}=Object;function Ko(n){if(1===n.length){const e=n[0];if(lu(e))return{args:e,keys:null};if(function Pd(n){return n&&"object"==typeof n&&Ns(n)===cu}(e)){const t=rl(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var Qt=P(8421),Yo=P(3269),hn=P(5403),Mt=P(4004);const{isArray:bo}=Array;function Ql(n){return(0,Mt.U)(e=>function eg(n,e){return bo(e)?n(...e):n(e)}(n,e))}function Xl(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Fd(...n){const e=(0,Yo.jO)(n),{args:t,keys:i}=Ko(n),r=new an.y(a=>{const{length:c}=t;if(!c)return void a.complete();const h=new Array(c);let m=c,y=c;for(let C=0;C<c;C++){let S=!1;(0,Qt.Xf)(t[C]).subscribe((0,hn.x)(a,x=>{S||(S=!0,y--),h[C]=x},()=>m--,void 0,()=>{(!m||!S)&&(y||a.next(i?Xl(i,h):h),a.complete())}))}});return e?r.pipe(Ql(e)):r}let Zo=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Sr=(()=>{class n extends Zo{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const ri=new u.OlP("NgValueAccessor"),Qo={provide:ri,useExisting:(0,u.Gpc)(()=>ka),multi:!0},Xo=new u.OlP("CompositionEventMode");let ka=(()=>{class n extends Zo{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function uu(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Xo,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&u.NdJ("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[u._Bn([Qo]),u.qOj]}),n})();function Tr(n){return null==n||0===n.length}function Eo(n){return null!=n&&"number"==typeof n.length}const si=new u.OlP("NgValidators"),Jo=new u.OlP("NgAsyncValidators"),du=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class zr{static min(e){return function Ld(n){return e=>{if(Tr(e.value)||Tr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function sl(n){return e=>{if(Tr(e.value)||Tr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function hu(n){return Tr(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function $r(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function fu(n){return Tr(n.value)||du.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function ea(n){return e=>Tr(e.value)||!Eo(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function ol(n){return e=>Eo(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Ps(n){if(!n)return Fs;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Tr(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return Hn(e)}static composeAsync(e){return tg(e)}}function Fs(n){return null}function Ar(n){return null!=n}function Vd(n){const e=(0,u.QGY)(n)?(0,fs.D)(n):n;return(0,u.CqO)(e),e}function Jl(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ta(n,e){return e.map(t=>t(n))}function Ef(n){return n.map(e=>function ec(n){return!n.validate}(e)?e:t=>e.validate(t))}function Hn(n){if(!n)return null;const e=n.filter(Ar);return 0==e.length?null:function(t){return Jl(ta(t,e))}}function Cf(n){return null!=n?Hn(Ef(n)):null}function tg(n){if(!n)return null;const e=n.filter(Ar);return 0==e.length?null:function(t){return Fd(ta(t,e).map(Vd)).pipe((0,Mt.U)(Jl))}}function Bd(n){return null!=n?tg(Ef(n)):null}function pu(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Hd(n){return n._rawValidators}function Df(n){return n._rawAsyncValidators}function Ud(n){return n?Array.isArray(n)?n:[n]:[]}function ps(n,e){return Array.isArray(n)?n.includes(e):n===e}function If(n,e){const t=Ud(e);return Ud(n).forEach(r=>{ps(t,r)||t.push(r)}),t}function kn(n,e){return Ud(e).filter(t=>!ps(n,t))}class tc{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Cf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Bd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Pi extends tc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Wi extends tc{get formDirective(){return null}get path(){return null}}class nc{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}let mu=(()=>{class n extends nc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Pi,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&u.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[u.qOj]}),n})(),Ls=(()=>{class n extends nc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Wi,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&u.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[u.qOj]}),n})();function Fi(n,e){Bs(n,e),e.valueAccessor.writeValue(n.value),function yu(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&T(n,e)})}(n,e),function R(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function I(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&T(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function _u(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function dl(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Co(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ra(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bs(n,e){const t=Hd(n);null!==e.validator?n.setValidators(pu(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=Df(n);null!==e.asyncValidator?n.setAsyncValidators(pu(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Ra(e._rawValidators,r),Ra(e._rawAsyncValidators,r)}function Co(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=Hd(n);if(Array.isArray(r)&&r.length>0){const a=r.filter(c=>c!==e.validator);a.length!==r.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const r=Df(n);if(Array.isArray(r)&&r.length>0){const a=r.filter(c=>c!==e.asyncValidator);a.length!==r.length&&(t=!0,n.setAsyncValidators(a))}}}const i=()=>{};return Ra(e._rawValidators,i),Ra(e._rawAsyncValidators,i),t}function T(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function H(n,e){Bs(n,e)}function Dt(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Rn(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const dr="VALID",Yi="INVALID",hr="PENDING",Wr="DISABLED";function zd(n){return($d(n)?n.validators:n)||null}function vu(n){return Array.isArray(n)?Cf(n):n||null}function Na(n,e){return($d(e)?e.asyncValidators:n)||null}function xf(n){return Array.isArray(n)?Bd(n):n||null}function $d(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const ig=n=>n instanceof iv,Do=n=>n instanceof Rf;function rg(n){return ig(n)?n.value:n.getRawValue()}function sg(n,e){const t=Do(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new u.vHH(1e3,"");if(!i[e])throw new u.vHH(1001,"")}function kf(n,e){Do(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new u.vHH(1002,"")})}class rc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=vu(this._rawValidators),this._composedAsyncValidatorFn=xf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===dr}get invalid(){return this.status===Yi}get pending(){return this.status==hr}get disabled(){return this.status===Wr}get enabled(){return this.status!==Wr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=vu(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=xf(e)}addValidators(e){this.setValidators(If(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(If(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kn(e,this._rawAsyncValidators))}hasValidator(e){return ps(this._rawValidators,e)}hasAsyncValidator(e){return ps(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wr,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dr,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dr||this.status===hr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wr:dr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hr,this._hasOwnPendingAsyncValidator=!0;const t=Vd(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function ng(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=Do(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof rv)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Wr:this.errors?Yi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hr)?hr:this._anyControlsHaveStatus(Yi)?Yi:dr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$d(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class iv extends rc{constructor(e=null,t,i){super(zd(t),Na(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$d(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Rn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Rn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Rf extends rc{constructor(e,t,i){super(zd(t),Na(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){kf(this,e),Object.keys(e).forEach(i=>{sg(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=rg(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,a)=>{i=t(i,r,a)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class rv extends rc{constructor(e,t,i){super(zd(t),Na(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){kf(this,e),e.forEach((i,r)=>{sg(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>rg(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const sv={provide:Wi,useExisting:(0,u.Gpc)(()=>Fa)},Pa=(()=>Promise.resolve(null))();let Fa=(()=>{class n extends Wi{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new Rf({},Cf(t),Bd(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Pa.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Fi(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Pa.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Pa.then(()=>{const i=this._findContainer(t.path),r=new Rf({});H(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Pa.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Pa.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Dt(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(si,10),u.Y36(Jo,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([sv]),u.qOj]}),n})();const ag={provide:Pi,useExisting:(0,u.Gpc)(()=>ia)},qd=(()=>Promise.resolve(null))();let ia=(()=>{class n extends Pi{constructor(t,i,r,a,c){super(),this._changeDetectorRef=c,this.control=new iv,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Wn(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(a=>{a.constructor===ka?t=a:function Wt(n){return Object.getPrototypeOf(n.constructor)===Sr}(a)?i=a:r=a}),r||i||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function vt(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Fi(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){qd.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;qd.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(t){return this._parent?function ic(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Wi,9),u.Y36(si,10),u.Y36(Jo,10),u.Y36(ri,10),u.Y36(u.sBO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([ag]),u.qOj,u.TTD]}),n})(),lg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const ov={provide:ri,useExisting:(0,u.Gpc)(()=>Ff),multi:!0};let Ff=(()=>{class n extends Sr{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&u.NdJ("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[u._Bn([ov]),u.qOj]}),n})(),ms=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const dg={provide:Wi,useExisting:(0,u.Gpc)(()=>bu)};let bu=(()=>{class n extends Wi{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Co(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Fi(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){dl(t.control||null,t,!1),Rn(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,Dt(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(dl(i||null,t),ig(r)&&(Fi(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);H(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function Z(n,e){return Co(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Bs(this.form,this),this._oldForm&&Co(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(si,10),u.Y36(Jo,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([dg]),u.qOj,u.TTD]}),n})(),sE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ms]]}),n})(),Su=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[sE]}),n})();var oi=P(4986);function Tn(...n){const e=(0,Yo.yG)(n);return(0,fs.D)(n,e)}var Kr=P(6451),pr=P(3099),ai=P(4482);function Yr(n,e){return(0,ai.e)((t,i)=>{let r=null,a=0,c=!1;const h=()=>c&&!r&&i.complete();t.subscribe((0,hn.x)(i,m=>{null==r||r.unsubscribe();let y=0;const C=a++;(0,Qt.Xf)(n(m,C)).subscribe(r=(0,hn.x)(i,S=>i.next(e?e(m,S,C,y++):S),()=>{r=null,h()}))},()=>{c=!0,h()}))})}function pv(n,e,t,i,r){return(a,c)=>{let h=t,m=e,y=0;a.subscribe((0,hn.x)(c,C=>{const S=y++;m=h?n(m,C,S):(h=!0,C),i&&c.next(m)},r&&(()=>{h&&c.next(m),c.complete()})))}}function La(n,e){return(0,ai.e)(pv(n,e,arguments.length>=2,!0))}var _l=P(4671);function Tu(n,e=_l.y){return n=null!=n?n:Cg,(0,ai.e)((t,i)=>{let r,a=!0;t.subscribe((0,hn.x)(i,c=>{const h=e(c);(a||!n(r,h))&&(a=!1,r=h,i.next(c))}))})}function Cg(n,e){return n===e}var Dg=P(5032),An=P(5813),Li=P(2011),Wf=(P(820),P(3942)),Mn=P(4859),ye=P(5861),Zr=P(9681),N=P(2090),mi=P(1877);const lc="@firebase/database";let eh="";function Sg(n){eh=n}class Kf{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class mv{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Tg=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Kf(e)}}catch(e){}return new mv},yl=Tg("localStorage"),Yf=Tg("sessionStorage"),v=new mi.Yd("@firebase/database"),p=function(){let n=1;return function(){return n++}}(),_=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const i=t.digest();return N.US.encodeByteArray(i)},b=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=b.apply(null,i):e+="object"==typeof i?(0,N.Pz)(i):i,e+=" "}return e};let A=null,O=!0;const W=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(v.logLevel=mi.in.VERBOSE,A=v.log.bind(v),e&&Yf.set("logging_enabled",!0)):"function"==typeof n?A=n:(A=null,Yf.remove("logging_enabled"))},ie=function(...n){if(!0===O&&(O=!1,null===A&&!0===Yf.get("logging_enabled")&&W(!0)),A){const e=b.apply(null,n);A(e)}},Le=function(n){return function(...e){ie(n,...e)}},Ze=function(...n){const e="FIREBASE INTERNAL ERROR: "+b(...n);v.error(e)},at=function(...n){const e=`FIREBASE FATAL ERROR: ${b(...n)}`;throw v.error(e),new Error(e)},qe=function(...n){const e="FIREBASE WARNING: "+b(...n);v.warn(e)},mr=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},_s="[MIN_NAME]",xr="[MAX_NAME]",ra=function(n,e){if(n===e)return 0;if(n===_s||e===xr)return-1;if(e===_s||n===xr)return 1;{const t=Qf(n),i=Qf(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},gv=function(n,e){return n===e?0:n<e?-1:1},ys=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Pz)(e))},cc=function(n){if("object"!=typeof n||null===n)return(0,N.Pz)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,N.Pz)(e[i]),t+=":",t+=cc(n[e[i]]);return t+="}",t},th=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Mu=function(n){(0,N.hu)(!mr(n),"Invalid JSON number");const i=1023;let r,a,c,h,m;0===n?(a=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),a=h+i,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(m=52;m;m-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(m=11;m;m-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(r?1:0),y.reverse();const C=y.join("");let S="";for(m=0;m<64;m+=8){let x=parseInt(C.substr(m,8),2).toString(16);1===x.length&&(x="0"+x),S+=x}return S.toLowerCase()},uT=new RegExp("^-?(0*)\\d{1,10}$"),aE=-2147483648,vv=2147483647,Qf=function(n){if(uT.test(n)){const e=Number(n);if(e>=aE&&e<=vv)return e}return null},uc=function(n){try{n()}catch(e){setTimeout(()=>{throw qe("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},xu=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class dT{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){qe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class hT{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ie("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qe(e)}}let nh=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Jf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ev="websocket",Mg="long_polling";class xg{constructor(e,t,i,r,a=!1,c="",h=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ep(n,e,t){let i;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===Ev)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Mg)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function kg(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return li(t,(a,c)=>{r.push(a+"="+c)}),i+r.join("&")}class hE{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const tp={},Rg={};function np(n){const e=n.toString();return tp[e]||(tp[e]=new hE),tp[e]}class fT{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&uc(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ih{constructor(e,t,i,r,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Le(e),this.stats_=np(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),ep(t,Mg,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new fT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Iv((...a)=>{const[c,h,m,y,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=m;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Jf.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ih.forceAllow_=!0}static forceDisallow(){ih.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!ih.forceAllow_&&(ih.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,N.h$)(t),r=th(i,1840);for(let a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Iv{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Iv.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){ie("frame writing exception"),h.stack&&ie(h.stack),ie(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ie("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{ie("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let rp=null;"undefined"!=typeof MozWebSocket?rp=MozWebSocket:"undefined"!=typeof WebSocket&&(rp=WebSocket);let sp=(()=>{class n{constructor(t,i,r,a,c,h,m){this.connId=t,this.applicationId=r,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Le(this.connId),this.stats_=np(i),this.connURL=n.connectionURL_(i,h,m,a),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,a){const c={v:"5"};return!(0,N.Yr)()&&"undefined"!=typeof location&&location.hostname&&Jf.test(location.hostname)&&(c.r="f"),i&&(c.s=i),r&&(c.ls=r),a&&(c.ac=a),ep(t,Ev,c)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yl.set("previous_websocket_failure",!0);try{if((0,N.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${eh}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new rp(this.connURL,[],a)}else this.mySock=new rp(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(r){this.log_("Error instantiating WebSocket.");const a=r.message||r.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const a=r.message||r.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==rp&&!n.forceDisallow_}static previouslyFailed(){return yl.isInMemoryStorage||!0===yl.get("previous_websocket_failure")}markConnectionHealthy(){yl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,N.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,N.Pz)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=th(i,16384);r.length>1&&this.sendString_(String(r.length));for(let a=0;a<r.length;a++)this.sendString_(r[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class St{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ih,sp]}initTransports_(e){const t=sp&&sp.isAvailable();let i=t&&!sp.previouslyFailed();if(e.webSocketOnly&&(t||qe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[sp];else{const r=this.transports_=[];for(const a of St.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class IT{constructor(e,t,i,r,a,c,h,m,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=m,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Le("c:"+this.id+":"),this.transportManager_=new St(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=xu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ys("t",e),i=ys("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ys("t",e),i=ys("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ys("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?Ze("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ze("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&qe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),xu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class op{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class ap{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let a=0;a<r.length;a++)if(r[a].callback===t&&(!i||i===r[a].context))return void r.splice(a,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class rh extends ap{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new rh}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Dn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function fn(){return new Dn("")}function Kt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function hc(n){return n.pieces_.length-n.pieceNum_}function xn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Dn(n.pieces_,e)}function Hg(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function lp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function ST(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Dn(e,0)}function jn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Dn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Dn(t,0)}function Ut(n){return n.pieceNum_>=n.pieces_.length}function Qr(n,e){const t=Kt(n),i=Kt(e);if(null===t)return e;if(t===i)return Qr(xn(n),xn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Av(n,e){const t=lp(n,0),i=lp(e,0);for(let r=0;r<t.length&&r<i.length;r++){const a=ra(t[r],i[r]);if(0!==a)return a}return t.length===i.length?0:t.length<i.length?-1:1}function CE(n,e){if(hc(n)!==hc(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function sa(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(hc(n)>hc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class xO{constructor(e,t){this.errorPrefix_=t,this.parts_=lp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,N.ug)(this.parts_[i]);TT(this)}}function TT(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+sh(n))}function sh(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class DE extends ap{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new DE}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ug=1e3;let cp,wl=(()=>{class n extends op{constructor(t,i,r,a,c,h,m,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Le("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ug,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");DE.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&rh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const a=++this.requestNumber_,c={r:a,a:t,b:i};this.log_((0,N.Pz)(c)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[a]=r)}get(t){this.initConnection_();const i=new N.BH,r={p:t._path.toString(),q:t._queryObject},a={action:"g",request:r,onComplete:h=>{const m=h.d;"ok"===h.s?(this.onDataUpdate_(r.p,m,!1,null),i.resolve(m)):i.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||a!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),i.promise}listen(t,i,r,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:i,query:t,tag:r};this.listens.get(h).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),a=i._queryIdentifier;this.log_("Listen on "+r+" for "+a);const c={p:r};t.tag&&(c.q=i._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,m=>{const y=m.d,C=m.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(a))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(r,a),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const r=(0,N.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const a='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();qe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,N.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+a),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,a)&&this.connected_&&this.sendUnlisten_(r,a,t._queryObject,i)}sendUnlisten_(t,i,r,a){this.log_("Unlisten on "+t+" for "+i);const c={p:t};a&&(c.q=r,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,a){const c={p:i,d:r};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,i,r,a){this.putInternal("p",t,i,r,a)}merge(t,i,r,a){this.putInternal("m",t,i,r,a)}putInternal(t,i,r,a,c){this.initConnection_();const h={p:i,d:r};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Pz)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):Ze("Unrecognized action received from server: "+(0,N.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ug,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ug,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ug),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,y=null;const C=function(){y?y.close():(m=!0,a())};t.realtime_={close:C,sendRequest:function(V){(0,N.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(V)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,B]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);m?ie("getToken() completed but was canceled"):(ie("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=B&&B.token,y=new IT(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,a,K=>{qe(K+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),m||(t.repoInfo_.nodeAdmin&&qe(V),C())}}})()}interrupt(t){ie("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ie("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ug,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(c=>cc(c)).join("$"):"default";const a=this.removeListen_(t,r);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,i){const r=new Dn(t).toString();let a;if(this.listens.has(r)){const c=this.listens.get(r);a=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else a=void 0;return a}onAuthRevoked_(t,i){ie("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){ie("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,N.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+eh.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=rh.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zt(e,t)}}class oa{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Zt(_s,e),r=new Zt(_s,t);return 0!==this.compare(i,r)}minPost(){return Zt.MIN}}class SE extends oa{static get __EMPTY_NODE(){return cp}static set __EMPTY_NODE(e){cp=e}compare(e,t){return ra(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(xr,cp)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zt(e,cp)}toString(){return".key"}}const To=new SE;class Gg{constructor(e,t,i,r,a=null){this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?i(e.key,t):1,r&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let dp,Ao=(()=>{class n{constructor(t,i,r,a,c){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=a?a:vs.EMPTY_NODE,this.right=null!=c?c:vs.EMPTY_NODE}copy(t,i,r,a,c){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let a=this;const c=r(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,i,r),null):0===c?a.copy(null,i,null,null,null):a.copy(null,null,null,null,a.right.insert(t,i,r)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return vs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,a;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return vs.EMPTY_NODE;a=r.right.min_(),r=r.copy(a.key,a.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class vs{constructor(e,t=vs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new vs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ao.BLACK,null,null))}remove(e){return new vs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ao.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Gg(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Gg(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Gg(this.root_,null,this.comparator_,!0,e)}}function up(n,e){return ra(n.name,e.name)}function pc(n,e){return ra(n,e)}vs.EMPTY_NODE=new class MT{copy(e,t,i,r,a){return this}insert(e,t,i){return new Ao(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ah=function(n){return"number"==typeof n?"number:"+Mu(n):"string:"+n},ku=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===dp||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===dp||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let TE,kv,zg,Ru=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ku(this.priorityNode_)}static set __childrenNodeConstructor(t){TE=t}static get __childrenNodeConstructor(){return TE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ut(t)?this:".priority"===Kt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Kt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,N.hu)(".priority"!==r||1===hc(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(xn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+ah(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?Mu(this.value_):this.value_,this.lazyHash_=_(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,N.hu)(a>=0,"Unknown leaf type: "+i),(0,N.hu)(c>=0,"Unknown leaf type: "+r),a===c?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const On=new class $g extends oa{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),a=i.compareTo(r);return 0===a?ra(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(xr,new Ru("[PRIORITY-POST]",zg))}makePost(e,t){const i=kv(e);return new Zt(t,new Ru("[PRIORITY-POST]",i))}toString(){return".priority"}},ME=Math.log(2);class NO{constructor(e){this.count=parseInt(Math.log(e+1)/ME,10),this.current_=this.count-1;const r=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hp=function(n,e,t,i){n.sort(e);const r=function(m,y){const C=y-m;let S,x;if(0===C)return null;if(1===C)return S=n[m],x=t?t(S):S,new Ao(x,S.node,Ao.BLACK,null,null);{const V=parseInt(C/2,10)+m,B=r(m,V),K=r(V+1,y);return S=n[V],x=t?t(S):S,new Ao(x,S.node,Ao.BLACK,B,K)}},h=function(m){let y=null,C=null,S=n.length;const x=function(B,K){const ve=S-B,Xe=S;S-=B;const rt=r(ve+1,Xe),et=n[ve],nt=t?t(et):et;V(new Ao(nt,et.node,K,null,rt))},V=function(B){y?(y.left=B,y=B):(C=B,y=B)};for(let B=0;B<m.count;++B){const K=m.nextBitIsOne(),ve=Math.pow(2,m.count-(B+1));K?x(ve,Ao.BLACK):(x(ve,Ao.BLACK),x(ve,Ao.RED))}return C}(new NO(n.length));return new vs(i||e,h)};let qg;const lh={};class Va{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(lh&&On,"ChildrenNode.ts has not been loaded"),qg=qg||new Va({".priority":lh},{".priority":On}),qg}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof vs?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==To,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const a=t.getIterator(Zt.Wrap);let h,c=a.getNext();for(;c;)r=r||e.isDefinedOn(c.node),i.push(c),c=a.getNext();h=r?hp(i,e.getCompare()):lh;const m=e.toString(),y=Object.assign({},this.indexSet_);y[m]=e;const C=Object.assign({},this.indexes_);return C[m]=h,new Va(C,y)}addToIndexes(e,t){const i=(0,N.UI)(this.indexes_,(r,a)=>{const c=(0,N.DV)(this.indexSet_,a);if((0,N.hu)(c,"Missing index implementation for "+a),r===lh){if(c.isDefinedOn(e.node)){const h=[],m=t.getIterator(Zt.Wrap);let y=m.getNext();for(;y;)y.name!==e.name&&h.push(y),y=m.getNext();return h.push(e),hp(h,c.getCompare())}return lh}{const h=t.get(e.name);let m=r;return h&&(m=m.remove(new Zt(e.name,h))),m.insert(e,e.node)}});return new Va(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,N.UI)(this.indexes_,r=>{if(r===lh)return r;{const a=t.get(e.name);return a?r.remove(new Zt(e.name,a)):r}});return new Va(i,this.indexSet_)}}let fp,Nt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ku(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fp||(fp=new n(new vs(pc),null,Va.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fp}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?fp:i}}getChild(t){const i=Kt(t);return null===i?this:this.getImmediateChild(i).getChild(xn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,N.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Zt(t,i);let a,c;i.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(r,this.children_)):(a=this.children_.insert(t,i),c=this.indexMap_.addToIndexes(r,this.children_));const h=a.isEmpty()?fp:this.priorityNode_;return new n(a,h,c)}}updateChild(t,i){const r=Kt(t);if(null===r)return i;{(0,N.hu)(".priority"!==Kt(t)||1===hc(t),".priority must be the last token in a path");const a=this.getImmediateChild(r).updateChild(xn(t),i);return this.updateImmediateChild(r,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,a=0,c=!0;if(this.forEachChild(On,(h,m)=>{i[h]=m.val(t),r++,c&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*r){const h=[];for(const m in i)h[m]=i[m];return h}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+ah(this.getPriority().val())+":"),this.forEachChild(On,(i,r)=>{const a=r.hash();""!==a&&(t+=":"+i+":"+a)}),this.lazyHash_=""===t?"":_(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const a=this.resolveIndex_(r);if(a){const c=a.getPredecessorKey(new Zt(t,i));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Zt(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Zt(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(a=>i(a.name,a.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Zt.Wrap);let c=a.peek();for(;null!=c&&i.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Zt.Wrap);let c=a.peek();for(;null!=c&&i.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===pp?-1:0}withIndex(t){if(t===To||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===To||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(On),a=i.getIterator(On);let c=r.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=r.getNext(),h=a.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===To?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const pp=new class Us extends Nt{constructor(){super(new vs(pc),Nt.EMPTY_NODE,Va.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Nt.EMPTY_NODE}isEmpty(){return!1}};function ci(n,e=null){if(null===n)return Nt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ru(n,ci(e));if(n instanceof Array){let t=Nt.EMPTY_NODE;return li(n,(i,r)=>{if((0,N.r3)(n,i)&&"."!==i.substring(0,1)){const a=ci(r);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(i,a))}}),t.updatePriority(ci(e))}{const t=[];let i=!1;if(li(n,(c,h)=>{if("."!==c.substring(0,1)){const m=ci(h);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new Zt(c,m)))}}),0===t.length)return Nt.EMPTY_NODE;const a=hp(t,up,c=>c.name,pc);if(i){const c=hp(t,On.getCompare());return new Nt(a,ci(e),new Va({".priority":c},{".priority":On}))}return new Nt(a,ci(e),Va.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(_s,Nt.EMPTY_NODE)},MAX:{value:new Zt(xr,pp)}}),SE.__EMPTY_NODE=Nt.EMPTY_NODE,Ru.__childrenNodeConstructor=Nt,function oh(n){dp=n}(pp),function AE(n){zg=n}(pp),function Rv(n){kv=n}(ci);class xE extends oa{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!Ut(e)&&".priority"!==Kt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),a=i.compareTo(r);return 0===a?ra(e.name,t.name):a}makePost(e,t){const i=ci(e),r=Nt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Zt(t,r)}maxPost(){const e=Nt.EMPTY_NODE.updateChild(this.indexPath_,pp);return new Zt(xr,e)}toString(){return lp(this.indexPath_,0).join("/")}}const RE=new class kE extends oa{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?ra(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(e,t){const i=ci(e);return new Zt(t,i)}toString(){return".value"}},ch="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",kT=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const a=new Array(8);for(r=7;r>=0;r--)a[r]=ch.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=ch.charAt(e[r]);return(0,N.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),NE=function(n){if(n===""+vv)return"-";const e=Qf(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return xr;const a=ch.charAt(ch.indexOf(t[i])+1);return t[i]=a,t.slice(0,i+1).join("")},Nv=function(n){if(n===""+aE)return _s;const e=Qf(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+vv:(delete t[t.length-1],t.join("")):(t[t.length-1]=ch.charAt(ch.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function PE(n){return{type:"value",snapshotNode:n}}function Ou(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function gp(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function _p(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Wg{constructor(e){this.index_=e}updateChild(e,t,i,r,a,c){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(gp(t,h)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Ou(t,i)):c.trackChildChange(_p(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(On,(r,a)=>{t.hasChild(r)||i.trackChildChange(gp(r,a))}),t.isLeafNode()||t.forEachChild(On,(r,a)=>{if(e.hasChild(r)){const c=e.getImmediateChild(r);c.equals(a)||i.trackChildChange(_p(r,a,c))}else i.trackChildChange(Ou(r,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Nt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class yp{constructor(e){this.indexedFilter_=new Wg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=yp.getStartPost_(e),this.endPost_=yp.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,a,c){return this.matches(new Zt(t,i))||(i=Nt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,a,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Nt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Nt.EMPTY_NODE);const a=this;return t.forEachChild(On,(c,h)=>{a.matches(new Zt(c,h))||(r=r.updateImmediateChild(c,Nt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Ba{constructor(e){this.rangedFilter_=new yp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,a,c){return this.rangedFilter_.matches(new Zt(t,i))||(i=Nt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,a,c):this.fullLimitUpdateChild_(e,t,i,a,c)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Nt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;r=Nt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;r=r.updateImmediateChild(h.name,h.node),c++}}else{let a,c,h,m;if(r=t.withIndex(this.index_),r=r.updatePriority(Nt.EMPTY_NODE),this.reverse_){m=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(x,V)=>S(V,x)}else m=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,C=!1;for(;m.hasNext();){const S=m.getNext();!C&&h(a,S)<=0&&(C=!0),C&&y<this.limit_&&h(S,c)<=0?y++:r=r.updateImmediateChild(S.name,Nt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(x,V)=>S(V,x)}else c=this.index_.getCompare();const h=e;(0,N.hu)(h.numChildren()===this.limit_,"");const m=new Zt(t,i),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let x=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=r.getChildAfterChild(this.index_,x,this.reverse_);const V=null==x?1:c(x,m);if(C&&!i.isEmpty()&&V>=0)return null!=a&&a.trackChildChange(_p(t,i,S)),h.updateImmediateChild(t,i);{null!=a&&a.trackChildChange(gp(t,S));const K=h.updateImmediateChild(t,Nt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=a&&a.trackChildChange(Ou(x.name,x.node)),K.updateImmediateChild(x.name,x.node)):K}}return i.isEmpty()?e:C&&c(y,m)>=0?(null!=a&&(a.trackChildChange(gp(y.name,y.node)),a.trackChildChange(Ou(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(y.name,Nt.EMPTY_NODE)):e}}class uh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=On}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_s}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===On}copy(){const e=new uh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Kg(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function Pv(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function dh(n,e){const t=n.copy();return t.index_=e,t}function LE(n){const e={};if(n.isDefault())return e;let t;return n.index_===On?t="$priority":n.index_===RE?t="$value":n.index_===To?t="$key":((0,N.hu)(n.index_ instanceof xE,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Pz)(t),n.startSet_&&(e.startAt=(0,N.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,N.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,N.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,N.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function VE(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==On&&(e.i=n.index_.toString()),e}class Nu extends op{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Le("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Nu.getListenId_(e,i),h={};this.listens_[c]=h;const m=LE(e._queryParams);this.restRequest_(a+".json",m,(y,C)=>{let S=C;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(a,S,!1,i),(0,N.DV)(this.listens_,c)===h){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(x,null)}})}unlisten(e,t){const i=Nu.getListenId_(e,t);delete this.listens_[i]}get(e){const t=LE(e._queryParams),i=e._path.toString(),r=new N.BH;return this.restRequest_(i+".json",t,(a,c)=>{let h=c;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,a])=>{r&&r.accessToken&&(t.auth=r.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,N.cI)(h.responseText)}catch(y){qe("Failed to parse JSON response for "+c+": "+h.responseText)}i(null,m)}else 401!==h.status&&404!==h.status&&qe("Got unsuccessful REST response for "+c+" Status: "+h.status),i(h.status);i=null}},h.open("GET",c,!0),h.send()})}}class Fv{constructor(){this.rootNode_=Nt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Yg(){return{value:null,children:new Map}}function mc(n,e,t){if(Ut(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Kt(e);n.children.has(i)||n.children.set(i,Yg()),mc(n.children.get(i),e=xn(e),t)}}function vp(n,e){if(Ut(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(On,(i,r)=>{mc(n,new Dn(i),r)}),vp(n,e)}}if(n.children.size>0){const t=Kt(e);return e=xn(e),n.children.has(t)&&vp(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Zg(n,e,t){null!==n.value?t(e,n.value):function FT(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{Zg(r,new Dn(e.toString()+"/"+i),t)})}class LT{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&li(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class BE{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new LT(e);const i=1e4+2e4*Math.random();xu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;li(e,(r,a)=>{a>0&&(0,N.r3)(this.statsToReport_,r)&&(t[r]=a,i=!0)}),i&&this.server_.reportStats(t),xu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var js=(()=>{return(n=js||(js={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",js;var n})();function e_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Mo{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=js.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ut(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dn(e));return new Mo(fn(),t,this.revert)}}return(0,N.hu)(Kt(this.path)===e,"operationForChild called for unrelated child."),new Mo(xn(this.path),this.affectedTree,this.revert)}}class gc{constructor(e,t){this.source=e,this.path=t,this.type=js.LISTEN_COMPLETE}operationForChild(e){return Ut(this.path)?new gc(this.source,fn()):new gc(this.source,xn(this.path))}}class Pu{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=js.OVERWRITE}operationForChild(e){return Ut(this.path)?new Pu(this.source,fn(),this.snap.getImmediateChild(e)):new Pu(this.source,xn(this.path),this.snap)}}class hh{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=js.MERGE}operationForChild(e){if(Ut(this.path)){const t=this.children.subtree(new Dn(e));return t.isEmpty()?null:t.value?new Pu(this.source,fn(),t.value):new hh(this.source,fn(),t)}return(0,N.hu)(Kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hh(this.source,xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Fu{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ut(e))return this.isFullyInitialized()&&!this.filtered_;const t=Kt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Lv{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Lu(n,e,t,i,r,a){const c=i.filter(h=>h.type===t);c.sort((h,m)=>function BT(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const i=new Zt(e.childName,e.snapshotNode),r=new Zt(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,h,m)),c.forEach(h=>{const m=function wp(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);r.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(m,n.query_))})})}function fh(n,e){return{eventCache:n,serverCache:e}}function ph(n,e,t,i){return fh(new Fu(e,t,i),n.serverCache)}function Vv(n,e,t,i){return fh(n.eventCache,new Fu(e,t,i))}function bp(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Vu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Ep;class Nn{constructor(e,t=(()=>(Ep||(Ep=new vs(gv)),Ep))()){this.value=e,this.children=t}static fromObject(e){let t=new Nn(null);return li(e,(i,r)=>{t=t.set(new Dn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:fn(),value:this.value};if(Ut(e))return null;{const i=Kt(e),r=this.children.get(i);if(null!==r){const a=r.findRootMostMatchingPathAndValue(xn(e),t);return null!=a?{path:jn(new Dn(i),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ut(e))return this;{const t=Kt(e),i=this.children.get(t);return null!==i?i.subtree(xn(e)):new Nn(null)}}set(e,t){if(Ut(e))return new Nn(t,this.children);{const i=Kt(e),a=(this.children.get(i)||new Nn(null)).set(xn(e),t),c=this.children.insert(i,a);return new Nn(this.value,c)}}remove(e){if(Ut(e))return this.children.isEmpty()?new Nn(null):new Nn(null,this.children);{const t=Kt(e),i=this.children.get(t);if(i){const r=i.remove(xn(e));let a;return a=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&a.isEmpty()?new Nn(null):new Nn(this.value,a)}return this}}get(e){if(Ut(e))return this.value;{const t=Kt(e),i=this.children.get(t);return i?i.get(xn(e)):null}}setTree(e,t){if(Ut(e))return t;{const i=Kt(e),a=(this.children.get(i)||new Nn(null)).setTree(xn(e),t);let c;return c=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new Nn(this.value,c)}}fold(e){return this.fold_(fn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,a)=>{i[r]=a.fold_(jn(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,fn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Ut(e))return null;{const a=Kt(e),c=this.children.get(a);return c?c.findOnPath_(xn(e),jn(t,a),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,fn(),t)}foreachOnPath_(e,t,i){if(Ut(e))return this;{this.value&&i(t,this.value);const r=Kt(e),a=this.children.get(r);return a?a.foreachOnPath_(xn(e),jn(t,r),i):new Nn(null)}}foreach(e){this.foreach_(fn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(jn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class xo{constructor(e){this.writeTree_=e}static empty(){return new xo(new Nn(null))}}function Ha(n,e,t){if(Ut(e))return new xo(new Nn(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let a=i.value;const c=Qr(r,e);return a=a.updateChild(c,t),new xo(n.writeTree_.set(r,a))}{const r=new Nn(t),a=n.writeTree_.setTree(e,r);return new xo(a)}}}function t_(n,e,t){let i=n;return li(t,(r,a)=>{i=Ha(i,jn(e,r),a)}),i}function UE(n,e){if(Ut(e))return xo.empty();{const t=n.writeTree_.setTree(e,new Nn(null));return new xo(t)}}function Bv(n,e){return null!=ko(n,e)}function ko(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Qr(t.path,e)):null}function jE(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(On,(i,r)=>{e.push(new Zt(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Zt(i,r.value))}),e}function _c(n,e){if(Ut(e))return n;{const t=ko(n,e);return new xo(null!=t?new Nn(t):n.writeTree_.subtree(e))}}function Hv(n){return n.writeTree_.isEmpty()}function mh(n,e){return aa(fn(),n.writeTree_,e)}function aa(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,a)=>{".priority"===r?((0,N.hu)(null!==a.value,"Priority writes must always be leaf nodes"),i=a.value):t=aa(jn(n,r),a,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(jn(n,".priority"),i)),t}}function gh(n,e){return WT(e,n)}function UT(n,e){if(n.snap)return sa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&sa(jn(n.path,t),e))return!0;return!1}function GT(n){return n.visible}function WE(n,e,t){let i=xo.empty();for(let r=0;r<n.length;++r){const a=n[r];if(e(a)){const c=a.path;let h;if(a.snap)sa(t,c)?(h=Qr(t,c),i=Ha(i,h,a.snap)):sa(c,t)&&(h=Qr(c,t),i=Ha(i,fn(),a.snap.getChild(h)));else{if(!a.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(sa(t,c))h=Qr(t,c),i=t_(i,h,a.children);else if(sa(c,t))if(h=Qr(c,t),Ut(h))i=t_(i,fn(),a.children);else{const m=(0,N.DV)(a.children,Kt(h));if(m){const y=m.getChild(xn(h));i=Ha(i,fn(),y)}}}}}return i}function Uv(n,e,t,i,r){if(i||r){const a=_c(n.visibleWrites,e);return!r&&Hv(a)?t:r||null!=t||Bv(a,fn())?mh(WE(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(sa(y.path,e)||sa(e,y.path))},e),t||Nt.EMPTY_NODE):null}{const a=ko(n.visibleWrites,e);if(null!=a)return a;{const c=_c(n.visibleWrites,e);return Hv(c)?t:null!=t||Bv(c,fn())?mh(c,t||Nt.EMPTY_NODE):null}}}function _h(n,e,t,i){return Uv(n.writeTree,n.treePath,e,t,i)}function jv(n,e){return function LO(n,e,t){let i=Nt.EMPTY_NODE;const r=ko(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(On,(a,c)=>{i=i.updateImmediateChild(a,c)}),i;if(t){const a=_c(n.visibleWrites,e);return t.forEachChild(On,(c,h)=>{const m=mh(_c(a,new Dn(c)),h);i=i.updateImmediateChild(c,m)}),jE(a).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return jE(_c(n.visibleWrites,e)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,e)}function Gv(n,e,t,i){return function KE(n,e,t,i,r){(0,N.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const a=jn(e,t);if(Bv(n.visibleWrites,a))return null;{const c=_c(n.visibleWrites,a);return Hv(c)?r.getChild(t):mh(c,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function Cp(n,e){return function $T(n,e){return ko(n.visibleWrites,e)}(n.writeTree,jn(n.treePath,e))}function Gs(n,e,t){return function zT(n,e,t,i){const r=jn(e,t),a=ko(n.visibleWrites,r);return null!=a?a:i.isCompleteForChild(t)?mh(_c(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function qT(n,e){return WT(jn(n.treePath,e),n.writeTree)}function WT(n,e){return{treePath:n,writeTree:e}}class YE{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const a=r.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(i,_p(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(i,gp(i,r.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(i,Ou(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,_p(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const zv=new class ZE{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class $v{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Fu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gs(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Vu(this.viewCache_),a=function HO(n,e,t,i,r,a){return function VO(n,e,t,i,r,a,c){let h;const m=_c(n.visibleWrites,e),y=ko(m,fn());if(null!=y)h=y;else{if(null==t)return[];h=mh(m,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const C=[],S=c.getCompare(),x=a?h.getReverseIteratorFrom(i,c):h.getIteratorFrom(i,c);let V=x.getNext();for(;V&&C.length<r;)0!==S(V,i)&&C.push(V),V=x.getNext();return C}}(n.writeTree,n.treePath,e,t,i,r,a)}(this.writes_,r,t,1,i,e);return 0===a.length?null:a[0]}}function n_(n,e,t,i,r,a){const c=e.eventCache;if(null!=Cp(i,t))return e;{let h,m;if(Ut(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Vu(e),S=jv(i,y instanceof Nt?y:Nt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const y=_h(i,Vu(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=Kt(t);if(".priority"===y){(0,N.hu)(1===hc(t),"Can't have a priority with additional path components");const C=c.getNode();m=e.serverCache.getNode();const S=Gv(i,t,C,m);h=null!=S?n.filter.updatePriority(C,S):c.getNode()}else{const C=xn(t);let S;if(c.isCompleteForChild(y)){m=e.serverCache.getNode();const x=Gv(i,t,c.getNode(),m);S=null!=x?c.getNode().getImmediateChild(y).updateChild(C,x):c.getNode().getImmediateChild(y)}else S=Gs(i,y,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),y,S,C,r,a):c.getNode()}}return ph(e,h,c.isFullyInitialized()||Ut(t),n.filter.filtersNodes())}}function i_(n,e,t,i,r,a,c,h){const m=e.serverCache;let y;const C=c?n.filter:n.filter.getIndexedFilter();if(Ut(t))y=C.updateFullNode(m.getNode(),i,null);else if(C.filtersNodes()&&!m.isFiltered()){const V=m.getNode().updateChild(t,i);y=C.updateFullNode(m.getNode(),V,null)}else{const V=Kt(t);if(!m.isCompleteForPath(t)&&hc(t)>1)return e;const B=xn(t),ve=m.getNode().getImmediateChild(V).updateChild(B,i);y=".priority"===V?C.updatePriority(m.getNode(),ve):C.updateChild(m.getNode(),V,ve,B,zv,null)}const S=Vv(e,y,m.isFullyInitialized()||Ut(t),C.filtersNodes());return n_(n,S,t,r,new $v(r,S,a),h)}function Wv(n,e,t,i,r,a,c){const h=e.eventCache;let m,y;const C=new $v(r,e,a);if(Ut(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,c),m=ph(e,y,!0,n.filter.filtersNodes());else{const S=Kt(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),i),m=ph(e,y,h.isFullyInitialized(),h.isFiltered());else{const x=xn(t),V=h.getNode().getImmediateChild(S);let B;if(Ut(x))B=i;else{const K=C.getCompleteChild(S);B=null!=K?".priority"===Hg(x)&&K.getChild(ST(x)).isEmpty()?K:K.updateChild(x,i):Nt.EMPTY_NODE}m=V.equals(B)?e:ph(e,n.filter.updateChild(h.getNode(),S,B,x,C,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function XE(n,e){return n.eventCache.isCompleteForChild(e)}function JE(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Kv(n,e,t,i,r,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,m=e;y=Ut(t)?i:new Nn(null).setTree(t,i);const C=e.serverCache.getNode();return y.children.inorderTraversal((S,x)=>{if(C.hasChild(S)){const B=JE(0,e.serverCache.getNode().getImmediateChild(S),x);m=i_(n,m,new Dn(S),B,r,a,c,h)}}),y.children.inorderTraversal((S,x)=>{const V=!e.serverCache.isCompleteForChild(S)&&void 0===x.value;if(!C.hasChild(S)&&!V){const K=JE(0,e.serverCache.getNode().getImmediateChild(S),x);m=i_(n,m,new Dn(S),K,r,a,c,h)}}),m}class Dp{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Wg(i.getIndex()),a=function RT(n){return n.loadsAllData()?new Wg(n.getIndex()):n.hasLimit()?new Ba(n):new yp(n)}(i);this.processor_=function UO(n){return{filter:n}}(a);const c=t.serverCache,h=t.eventCache,m=r.updateFullNode(Nt.EMPTY_NODE,c.getNode(),null),y=a.updateFullNode(Nt.EMPTY_NODE,h.getNode(),null),C=new Fu(m,c.isFullyInitialized(),r.filtersNodes()),S=new Fu(y,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=fh(S,C),this.eventGenerator_=new Lv(this.query_)}get query(){return this.query_}}function Yv(n,e){const t=Vu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ut(e)&&!t.getImmediateChild(Kt(e)).isEmpty())?t.getChild(e):null}function la(n){return 0===n.eventRegistrations_.length}function gr(n,e,t){const i=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,r);c&&i.push(c)})}if(e){let r=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(a+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function yc(n,e,t,i){e.type===js.MERGE&&null!==e.source.queryId&&((0,N.hu)(Vu(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(bp(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,a=function qv(n,e,t,i,r){const a=new YE;let c,h;if(t.type===js.OVERWRITE){const y=t;y.source.fromUser?c=Wv(n,e,y.path,y.snap,i,r,a):((0,N.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!Ut(y.path),c=i_(n,e,y.path,y.snap,i,r,h,a))}else if(t.type===js.MERGE){const y=t;y.source.fromUser?c=function YT(n,e,t,i,r,a,c){let h=e;return i.foreach((m,y)=>{const C=jn(t,m);XE(e,Kt(C))&&(h=Wv(n,h,C,y,r,a,c))}),i.foreach((m,y)=>{const C=jn(t,m);XE(e,Kt(C))||(h=Wv(n,h,C,y,r,a,c))}),h}(n,e,y.path,y.children,i,r,a):((0,N.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=Kv(n,e,y.path,y.children,i,r,h,a))}else if(t.type===js.ACK_USER_WRITE){const y=t;c=y.revert?function ZT(n,e,t,i,r,a){let c;if(null!=Cp(i,t))return e;{const h=new $v(i,e,r),m=e.eventCache.getNode();let y;if(Ut(t)||".priority"===Kt(t)){let C;if(e.serverCache.isFullyInitialized())C=_h(i,Vu(e));else{const S=e.serverCache.getNode();(0,N.hu)(S instanceof Nt,"serverChildren would be complete if leaf node"),C=jv(i,S)}C=C,y=n.filter.updateFullNode(m,C,a)}else{const C=Kt(t);let S=Gs(i,C,e.serverCache);null==S&&e.serverCache.isCompleteForChild(C)&&(S=m.getImmediateChild(C)),y=null!=S?n.filter.updateChild(m,C,S,xn(t),h,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,Nt.EMPTY_NODE,xn(t),h,a):m,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=_h(i,Vu(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=Cp(i,fn()),ph(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,i,r,a):function r_(n,e,t,i,r,a,c){if(null!=Cp(r,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=i.value){if(Ut(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return i_(n,e,t,m.getNode().getChild(t),r,a,h,c);if(Ut(t)){let y=new Nn(null);return m.getNode().forEachChild(To,(C,S)=>{y=y.set(new Dn(C),S)}),Kv(n,e,t,y,r,a,h,c)}return e}{let y=new Nn(null);return i.foreach((C,S)=>{const x=jn(t,C);m.isCompleteForPath(x)&&(y=y.set(C,m.getNode().getChild(x)))}),Kv(n,e,t,y,r,a,h,c)}}(n,e,y.path,y.affectedTree,i,r,a)}else{if(t.type!==js.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);c=function yh(n,e,t,i,r){const a=e.serverCache;return n_(n,Vv(e,a.getNode(),a.isFullyInitialized()||Ut(t),a.isFiltered()),t,i,zv,r)}(n,e,t.path,i,a)}const m=a.getChanges();return function KT(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=bp(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&t.push(PE(bp(e)))}}(e,c,m),{viewCache:c,changes:m}}(n.processor_,r,e,t,i);return function QE(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,N.hu)(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,zs(n,a.changes,a.viewCache.eventCache.getNode(),null)}function zs(n,e,t,i){return function HE(n,e,t,i){const r=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function FE(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Lu(n,r,"child_removed",e,i,t),Lu(n,r,"child_added",e,i,t),Lu(n,r,"child_moved",a,i,t),Lu(n,r,"child_changed",e,i,t),Lu(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let vh,Tp;class Bu{constructor(){this.views=new Map}}function vc(n,e,t,i){const r=e.source.queryId;if(null!==r){const a=n.views.get(r);return(0,N.hu)(null!=a,"SyncTree gave us an op for an invalid query."),yc(a,e,t,i)}{let a=[];for(const c of n.views.values())a=a.concat(yc(c,e,t,i));return a}}function Hu(n,e,t,i,r){const c=n.views.get(e._queryIdentifier);if(!c){let h=_h(t,r?i:null),m=!1;h?m=!0:i instanceof Nt?(h=jv(t,i),m=!1):(h=Nt.EMPTY_NODE,m=!1);const y=fh(new Fu(h,m,!1),new Fu(i,r,!1));return new Dp(e,y)}return c}function Uu(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function bl(n,e){let t=null;for(const i of n.views.values())t=t||Yv(i,e);return t}function Zv(n,e){return e._queryParams.loadsAllData()?Sp(n):n.views.get(e._queryIdentifier)}function Qv(n,e){return null!=Zv(n,e)}function El(n){return null!=Sp(n)}function Sp(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let nC=1;class iC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nn(null),this.pendingWriteTree_=function BO(){return{visibleWrites:xo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function o_(n,e,t,i,r){return function GE(n,e,t,i,r){(0,N.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Ha(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?wc(n,new Pu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cl(n,e,t=!1){const i=function $E(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function qE(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,a=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&UT(h,i.path)?r=!1:sa(i.path,h.path)&&(a=!0)),c--}return!!r&&(a?(function jT(n){n.visibleWrites=WE(n.allWrites,GT,fn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=UE(n.visibleWrites,i.path):li(i.children,m=>{n.visibleWrites=UE(n.visibleWrites,jn(i.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Nn(null);return null!=i.snap?a=a.set(fn(),!0):li(i.children,c=>{a=a.set(new Dn(c),!0)}),wc(n,new Mo(i.path,a,t))}return[]}function Ih(n,e,t){return wc(n,new Pu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Xv(n,e,t,i){const r=e._path,a=n.syncPointTree_.get(r);let c=[];if(a&&("default"===e._queryIdentifier||Qv(a,e))){const h=function Dh(n,e,t,i){const r=e._queryIdentifier,a=[];let c=[];const h=El(n);if("default"===r)for(const[m,y]of n.views.entries())c=c.concat(gr(y,t,i)),la(y)&&(n.views.delete(m),y.query._queryParams.loadsAllData()||a.push(y.query));else{const m=n.views.get(r);m&&(c=c.concat(gr(m,t,i)),la(m)&&(n.views.delete(r),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!El(n)&&a.push(new(function bh(){return(0,N.hu)(vh,"Reference.ts has not been loaded"),vh}())(e._repo,e._path)),{removed:a,events:c}}(a,e,t,i);(function Eh(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const m=h.removed;c=h.events;const y=-1!==m.findIndex(S=>S._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(r,(S,x)=>El(x));if(y&&!C){const S=n.syncPointTree_.subtree(r);if(!S.isEmpty()){const x=function sA(n){return n.fold((e,t,i)=>{if(t&&El(t))return[Sp(t)];{let r=[];return t&&(r=Uu(t)),li(i,(a,c)=>{r=r.concat(c)}),r}})}(S);for(let V=0;V<x.length;++V){const B=x[V],K=B.query,ve=rA(n,B);n.listenProvider_.startListening(Ua(K),ew(n,K),ve.hashFn,ve.onComplete)}}}!C&&m.length>0&&!i&&(y?n.listenProvider_.stopListening(Ua(e),null):m.forEach(S=>{const x=n.queryToTagMap.get(tw(S));n.listenProvider_.stopListening(Ua(S),x)})),function oA(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=tw(i),a=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(a)}}}(n,m)}return c}function oC(n,e,t){const i=e._path;let r=null,a=!1;n.syncPointTree_.foreachOnPath(i,(S,x)=>{const V=Qr(S,i);r=r||bl(x,V),a=a||El(x)});let h,c=n.syncPointTree_.get(i);c?(a=a||El(c),r=r||bl(c,fn())):(c=new Bu,n.syncPointTree_=n.syncPointTree_.set(i,c)),null!=r?h=!0:(h=!1,r=Nt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((x,V)=>{const B=bl(V,fn());B&&(r=r.updateImmediateChild(x,B))}));const m=Qv(c,e);if(!m&&!e._queryParams.loadsAllData()){const S=tw(e);(0,N.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const x=function cC(){return nC++}();n.queryToTagMap.set(S,x),n.tagToQueryMap.set(x,S)}let C=function Ch(n,e,t,i,r,a){const c=Hu(n,e,i,r,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function Ip(n,e){n.eventRegistrations_.push(e)}(c,t),function s_(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(On,(a,c)=>{i.push(Ou(a,c))}),t.isFullyInitialized()&&i.push(PE(t.getNode())),zs(n,i,t.getNode(),e)}(c,t)}(c,e,t,gh(n.pendingWriteTree_,i),r,h);if(!m&&!a){const S=Zv(c,e);C=C.concat(function aA(n,e,t){const i=e._path,r=ew(n,e),a=rA(n,t),c=n.listenProvider_.startListening(Ua(e),r,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,N.hu)(!El(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((y,C,S)=>{if(!Ut(y)&&C&&El(C))return[Sp(C).query];{let x=[];return C&&(x=x.concat(Uu(C).map(V=>V.query))),li(S,(V,B)=>{x=x.concat(B)}),x}});for(let y=0;y<m.length;++y){const C=m[y];n.listenProvider_.stopListening(Ua(C),ew(n,C))}}return c}(n,e,S))}return C}function Jv(n,e,t){const r=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=bl(h,Qr(c,e));if(y)return y});return Uv(r,e,a,t,!0)}function wc(n,e){return a_(e,n.syncPointTree_,null,gh(n.pendingWriteTree_,fn()))}function a_(n,e,t,i){if(Ut(n.path))return aC(n,e,t,i);{const r=e.get(fn());null==t&&null!=r&&(t=bl(r,fn()));let a=[];const c=Kt(n.path),h=n.operationForChild(c),m=e.children.get(c);if(m&&h){const y=t?t.getImmediateChild(c):null,C=qT(i,c);a=a.concat(a_(h,m,y,C))}return r&&(a=a.concat(vc(r,n,i,t))),a}}function aC(n,e,t,i){const r=e.get(fn());null==t&&null!=r&&(t=bl(r,fn()));let a=[];return e.children.inorderTraversal((c,h)=>{const m=t?t.getImmediateChild(c):null,y=qT(i,c),C=n.operationForChild(c);C&&(a=a.concat(aC(C,h,m,y)))}),r&&(a=a.concat(vc(r,n,i,t))),a}function rA(n,e){const t=e.query,i=ew(n,t);return{hashFn:()=>(function QT(n){return n.viewCache_.serverCache.getNode()}(e)||Nt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function rC(n,e,t){const i=nw(n,t);if(i){const r=l_(i),a=r.path,c=r.queryId,h=Qr(a,e);return lC(n,a,new gc(e_(c),h))}return[]}(n,t._path,i):function tA(n,e){return wc(n,new gc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function yv(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return Xv(n,t,null,a)}}}}function ew(n,e){const t=tw(e);return n.queryToTagMap.get(t)}function tw(n){return n._path.toString()+"$"+n._queryIdentifier}function nw(n,e){return n.tagToQueryMap.get(e)}function l_(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Dn(n.substr(0,e))}}function lC(n,e,t){const i=n.syncPointTree_.get(e);return(0,N.hu)(i,"Missing sync point for query tag that we're tracking"),vc(i,t,gh(n.pendingWriteTree_,e),null)}function Ua(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function tC(){return(0,N.hu)(Tp,"Reference.ts has not been loaded"),Tp}())(n._repo,n._path):n}class c_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new c_(t)}node(){return this.node_}}class Sh{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=jn(this.path_,e);return new Sh(this.syncTree_,t)}node(){return Jv(this.syncTree_,this.path_)}}const iw=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?cA(n[".sv"],e,t):"object"==typeof n[".sv"]?uA(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},cA=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},uA=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,N.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,N.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},uC=function(n,e,t,i){return sw(e,new Sh(t,n),i)},rw=function(n,e,t){return sw(n,new c_(e),t)};function sw(n,e,t){const i=n.getPriority().val(),r=iw(i,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=iw(c.getValue(),e,t);return h!==c.getValue()||r!==c.getPriority().val()?new Ru(h,ci(r)):n}{const c=n;return a=c,r!==c.getPriority().val()&&(a=a.updatePriority(new Ru(r))),c.forEachChild(On,(h,m)=>{const y=sw(m,e.getImmediateChild(h),t);y!==m&&(a=a.updateImmediateChild(h,y))}),a}}class u_{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function d_(n,e){let t=e instanceof Dn?e:new Dn(e),i=n,r=Kt(t);for(;null!==r;){const a=(0,N.DV)(i.node.children,r)||{children:{},childCount:0};i=new u_(r,i,a),t=xn(t),r=Kt(t)}return i}function bc(n){return n.node.value}function h_(n,e){n.node.value=e,p_(n)}function f_(n){return n.node.childCount>0}function Th(n,e){li(n.node.children,(t,i)=>{e(new u_(t,n,i))})}function dC(n,e,t,i){t&&!i&&e(n),Th(n,r=>{dC(r,e,!0,i)}),t&&i&&e(n)}function Dl(n){return new Dn(null===n.parent?n.name:Dl(n.parent)+"/"+n.name)}function p_(n){null!==n.parent&&function ow(n,e,t){const i=function jO(n){return void 0===bc(n)&&!f_(n)}(t),r=(0,N.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,p_(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,p_(n))}(n.parent,n.name,n)}const aw=/[\[\].#$\/\u0000-\u001F\u007F]/,dA=/[\[\].#$\u0000-\u001F\u007F]/,Ah=10485760,ju=function(n){return"string"==typeof n&&0!==n.length&&!aw.test(n)},m_=function(n){return"string"==typeof n&&0!==n.length&&!dA.test(n)},Ap=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!mr(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},$s=function(n,e,t,i){i&&void 0===e||Ec((0,N.gK)(n,"value"),e,t)},Ec=function(n,e,t){const i=t instanceof Dn?new xO(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+sh(i));if("function"==typeof e)throw new Error(n+"contains a function "+sh(i)+" with contents = "+e.toString());if(mr(e))throw new Error(n+"contains "+e.toString()+" "+sh(i));if("string"==typeof e&&e.length>Ah/3&&(0,N.ug)(e)>Ah)throw new Error(n+"contains a string greater than "+Ah+" utf8 bytes "+sh(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,a=!1;if(li(e,(c,h)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!ju(c)))throw new Error(n+" contains an invalid key ("+c+") "+sh(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function kO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),TT(n)})(i,c),Ec(n,h,i),function RO(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&a)throw new Error(n+' contains ".value" child '+sh(i)+" in addition to actual children.")}},cw=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const a=[];li(e,(c,h)=>{const m=new Dn(c);if(Ec(r,h,jn(t,m)),".priority"===Hg(m)&&!Ap(h))throw new Error(r+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const a=lp(i);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!ju(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Av);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&sa(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,a)},Mp=function(n,e,t){if(!t||void 0!==e){if(mr(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ap(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mh=function(n,e,t,i){if(!(i&&void 0===t||ju(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xh=function(n,e,t,i){if(!(i&&void 0===t||m_(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qs=function(n,e){if(".info"===Kt(e))throw new Error(n+" failed = Can't modify data under /.info/")},hC=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ju(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),m_(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class fC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xp(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],a=r.getPath();null!==t&&!CE(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(r)}t&&n.eventLists_.push(t)}function kp(n,e,t){xp(n,t),pC(n,i=>CE(i,e))}function Ws(n,e,t){xp(n,t),pC(n,i=>sa(i,e)||sa(e,i))}function pC(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(mC(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function mC(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();A&&ie("event: "+t.toString()),uc(i)}}}const dw="repo_interrupt";class hw{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Yg(),this.transactionQueueTree_=new u_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fw(n){const t=n.infoData_.getNode(new Dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function kh(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:fw(n)})}function pw(n,e,t,i,r){n.dataUpdateCount++;const a=new Dn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(r)if(i){const m=(0,N.UI)(t,y=>ci(y));c=function nA(n,e,t,i){const r=nw(n,i);if(r){const a=l_(r),c=a.path,h=a.queryId,m=Qr(c,e),y=Nn.fromObject(t);return lC(n,c,new hh(e_(h),m,y))}return[]}(n.serverSyncTree_,a,m,r)}else{const m=ci(t);c=function sC(n,e,t,i){const r=nw(n,i);if(null!=r){const a=l_(r),c=a.path,h=a.queryId,m=Qr(c,e);return lC(n,c,new Pu(e_(h),m,t))}return[]}(n.serverSyncTree_,a,m,r)}else if(i){const m=(0,N.UI)(t,y=>ci(y));c=function eA(n,e,t){const i=Nn.fromObject(t);return wc(n,new hh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,a,m)}else{const m=ci(t);c=Ih(n.serverSyncTree_,a,m)}let h=a;c.length>0&&(h=zu(n,a)),Ws(n.eventQueue_,h,c)}function mw(n,e){g_(n,"connected",e),!1===e&&function vC(n){Gu(n,"onDisconnectEvents");const e=kh(n),t=Yg();Zg(n.onDisconnect_,fn(),(r,a)=>{const c=uC(r,a,n.serverSyncTree_,e);mc(t,r,c)});let i=[];Zg(t,fn(),(r,a)=>{i=i.concat(Ih(n.serverSyncTree_,r,a));const c=yw(n,r);zu(n,c)}),n.onDisconnect_=Yg(),Ws(n.eventQueue_,fn(),i)}(n)}function g_(n,e,t){const i=new Dn("/.info/"+e),r=ci(t);n.infoData_.updateSnapshot(i,r);const a=Ih(n.infoSyncTree_,i,r);Ws(n.eventQueue_,i,a)}function Rp(n){return n.nextWriteId_++}function gw(n,e,t,i,r){Gu(n,"set",{path:e.toString(),value:t,priority:i});const a=kh(n),c=ci(t,i),h=Jv(n.serverSyncTree_,e),m=rw(c,h,a),y=Rp(n),C=o_(n.serverSyncTree_,e,m,y,!0);xp(n.eventQueue_,C),n.server_.put(e.toString(),c.val(!0),(x,V)=>{const B="ok"===x;B||qe("set at "+e+" failed: "+x);const K=Cl(n.serverSyncTree_,y,!B);Ws(n.eventQueue_,e,K),Ks(0,r,x,V)});const S=yw(n,e);zu(n,S),Ws(n.eventQueue_,S,[])}function fA(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&vp(n.onDisconnect_,e),Ks(0,t,i,r)})}function Ii(n,e,t,i){const r=ci(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(a,c)=>{"ok"===a&&mc(n.onDisconnect_,e,r),Ks(0,i,a,c)})}function __(n,e,t){let i;i=".info"===Kt(e._path)?Xv(n.infoSyncTree_,e,t):Xv(n.serverSyncTree_,e,t),kp(n.eventQueue_,e._path,i)}function bC(n){n.persistentConnection_&&n.persistentConnection_.interrupt(dw)}function Gu(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ie(t,...e)}function Ks(n,e,t,i){e&&uc(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let a=r;i&&(a+=": "+i);const c=new Error(a);c.code=r,e(c)}})}function _w(n,e,t){return Jv(n.serverSyncTree_,e,t)||Nt.EMPTY_NODE}function Op(n,e=n.transactionQueueTree_){if(e||w_(n,e),bc(e)){const t=v_(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function _A(n,e,t){const i=t.map(y=>y.currentWriteId),r=_w(n,e,i);let a=r;const c=r.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,N.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const S=Qr(e,C.path);a=a.updateChild(S,C.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,y=>{Gu(n,"transaction put response",{path:m.toString(),status:y});let C=[];if("ok"===y){const S=[];for(let x=0;x<t.length;x++)t[x].status=2,C=C.concat(Cl(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&S.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();w_(n,d_(n.transactionQueueTree_,e)),Op(n,n.transactionQueueTree_),Ws(n.eventQueue_,e,C);for(let x=0;x<S.length;x++)uc(S[x])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{qe("transaction at "+m.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}zu(n,e)}},c)}(n,Dl(e),t)}else f_(e)&&Th(e,t=>{Op(n,t)})}function zu(n,e){const t=y_(n,e),i=Dl(t);return function qO(n,e,t){if(0===e.length)return;const i=[];let r=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],y=Qr(t,m.path);let S,C=!1;if((0,N.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,S=m.abortReason,r=r.concat(Cl(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)C=!0,S="maxretry",r=r.concat(Cl(n.serverSyncTree_,m.currentWriteId,!0));else{const x=_w(n,m.path,c);m.currentInputSnapshot=x;const V=e[h].update(x.val());if(void 0!==V){Ec("transaction failed: Data returned ",V,m.path);let B=ci(V);"object"==typeof V&&null!=V&&(0,N.r3)(V,".priority")||(B=B.updatePriority(x.getPriority()));const ve=m.currentWriteId,Xe=kh(n),rt=rw(B,x,Xe);m.currentOutputSnapshotRaw=B,m.currentOutputSnapshotResolved=rt,m.currentWriteId=Rp(n),c.splice(c.indexOf(ve),1),r=r.concat(o_(n.serverSyncTree_,m.path,rt,m.currentWriteId,m.applyLocally)),r=r.concat(Cl(n.serverSyncTree_,ve,!0))}else C=!0,S="nodata",r=r.concat(Cl(n.serverSyncTree_,m.currentWriteId,!0))}Ws(n.eventQueue_,t,r),r=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&i.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}w_(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)uc(i[h]);Op(n,n.transactionQueueTree_)}(n,v_(n,t),i),i}function y_(n,e){let t,i=n.transactionQueueTree_;for(t=Kt(e);null!==t&&void 0===bc(i);)i=d_(i,t),t=Kt(e=xn(e));return i}function v_(n,e){const t=[];return ca(n,e,t),t.sort((i,r)=>i.order-r.order),t}function ca(n,e,t){const i=bc(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Th(e,r=>{ca(n,r,t)})}function w_(n,e){const t=bc(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,h_(e,t.length>0?t:void 0)}Th(e,i=>{w_(n,i)})}function yw(n,e){const t=Dl(y_(n,e)),i=d_(n.transactionQueueTree_,e);return function GO(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{Ro(n,r)}),Ro(n,i),dC(i,r=>{Ro(n,r)}),t}function Ro(n,e){const t=bc(e);if(t){const i=[];let r=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,N.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,N.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),r=r.concat(Cl(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?h_(e,void 0):t.length=a+1,Ws(n.eventQueue_,Dl(e),r);for(let c=0;c<i.length;c++)uc(i[c])}}const b_=function(n,e){const t=CC(n),i=t.namespace;return"firebase.com"===t.domain&&at(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&at("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new xg(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Dn(t.pathString)}},CC=function(n){let e="",t="",i="",r="",a="",c=!0,h="https",m=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(C,S)),C<S&&(r=function ua(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(a){}e+="/"+r}return e}(n.substring(C,S)));const x=function da(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):qe(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,m=parseInt(e.substring(y+1),10)):y=e.length;const V=e.slice(0,y);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const B=e.indexOf(".");i=e.substring(0,B).toLowerCase(),t=e.substring(B+1),a=i}"ns"in x&&(a=x.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:c,scheme:h,pathString:r,namespace:a}};class DC{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Pz)(this.snapshot.exportVal())}}class IC{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class SC{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class TC{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return fA(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){qs("OnDisconnect.remove",this._path);const e=new N.BH;return Ii(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){qs("OnDisconnect.set",this._path),$s("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return Ii(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){qs("OnDisconnect.setWithPriority",this._path),$s("OnDisconnect.setWithPriority",e,this._path,!1),Mp("OnDisconnect.setWithPriority",t,!1);const i=new N.BH;return function wC(n,e,t,i,r){const a=ci(t,i);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,h)=>{"ok"===c&&mc(n.onDisconnect_,e,a),Ks(0,r,c,h)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){qs("OnDisconnect.update",this._path),cw("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function pA(n,e,t,i){if((0,N.xb)(t))return ie("onDisconnect().update() called with empty data.  Don't do anything."),void Ks(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,a)=>{"ok"===r&&li(t,(c,h)=>{const m=ci(h);mc(n.onDisconnect_,jn(e,c),m)}),Ks(0,i,r,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class kr{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Ut(this._path)?null:Hg(this._path)}get ref(){return new Oo(this._repo,this._path)}get _queryIdentifier(){const e=VE(this._queryParams),t=cc(e);return"{}"===t?"default":t}get _queryObject(){return VE(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof kr))return!1;const t=this._repo===e._repo,i=CE(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function MO(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Cc(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Dc(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===To){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==_s)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==xr)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===On){if(null!=e&&!Ap(e)||null!=t&&!Ap(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof xE||n.getIndex()===RE,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Np(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Oo extends kr{constructor(e,t){super(e,t,new uh,!1)}get parent(){const e=ST(this._path);return null===e?null:new Oo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ic{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Dn(e),i=$u(this.ref,e);return new Ic(this._node.getChild(t),i,On)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Ic(r,$u(this.ref,i),On)))}hasChild(e){const t=new Dn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function vw(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?$u(n._root,e):n._root}function Pp(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=b_(e,n._repo.repoInfo_.nodeAdmin);hC("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&at("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),vw(n,t.path.toString())}function $u(n,e){return null===Kt((n=(0,N.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),xh("child","path",t,!1)):xh("child","path",e,!1),new Oo(n._repo,jn(n._path,e));var t}function Rh(n,e){n=(0,N.m9)(n),qs("set",n._path),$s("set",e,n._path,!1);const t=new N.BH;return gw(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function kC(n,e){cw("update",e,n._path,!1);const t=new N.BH;return function hA(n,e,t,i){Gu(n,"update",{path:e.toString(),value:t});let r=!0;const a=kh(n),c={};if(li(t,(h,m)=>{r=!1,c[h]=uC(jn(e,h),ci(m),n.serverSyncTree_,a)}),r)ie("update() called with empty data.  Don't do anything."),Ks(0,i,"ok",void 0);else{const h=Rp(n),m=function JT(n,e,t,i){!function zE(n,e,t,i){(0,N.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=t_(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=Nn.fromObject(t);return wc(n,new hh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,c,h);xp(n.eventQueue_,m),n.server_.merge(e.toString(),t,(y,C)=>{const S="ok"===y;S||qe("update at "+e+" failed: "+y);const x=Cl(n.serverSyncTree_,h,!S),V=x.length>0?zu(n,e):e;Ws(n.eventQueue_,V,x),Ks(0,i,y,C)}),li(t,y=>{const C=yw(n,jn(e,y));zu(n,C)}),Ws(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function RC(n){return function $O(n,e){const t=function iA(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const S=Qr(y,t);i=i||bl(C,S)});let r=n.syncPointTree_.get(t);r?i=i||bl(r,fn()):(r=new Bu,n.syncPointTree_=n.syncPointTree_.set(t,r));const a=null!=i,c=a?new Fu(i,!0,!1):null;return function XT(n){return bp(n.viewCache_)}(Hu(r,e,gh(n.pendingWriteTree_,e._path),a?c.getNode():Nt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(i=>{const r=ci(i).withIndex(e._queryParams.getIndex()),a=Ih(n.serverSyncTree_,e._path,r);return kp(n.eventQueue_,e._path,a),Promise.resolve(r)},i=>(Gu(n,"get for query "+(0,N.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,N.m9)(n))._repo,n).then(e=>new Ic(e,new Oo(n._repo,n._path),n._queryParams.getIndex()))}class Fp{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new DC("value",this,new Ic(e.snapshotNode,new Oo(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new IC(this,e,t):null}matches(e){return e instanceof Fp&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Lp{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new IC(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const i=$u(new Oo(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new DC(e.type,this,new Ic(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Lp&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Oh(n,e,t,i,r){let a;if("object"==typeof i&&(a=void 0,r=i),"function"==typeof i&&(a=i),r&&r.onlyOnce){const m=t,y=(C,S)=>{__(n._repo,n,h),m(C,S)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new SC(t,a||void 0),h="value"===e?new Fp(c):new Lp(e,c);return function mA(n,e,t){let i;i=".info"===Kt(e._path)?oC(n.infoSyncTree_,e,t):oC(n.serverSyncTree_,e,t),kp(n.eventQueue_,e._path,i)}(n._repo,n,h),()=>__(n._repo,n,h)}function E_(n,e,t,i){return Oh(n,"value",e,t,i)}function bw(n,e,t,i){return Oh(n,"child_added",e,t,i)}function OC(n,e,t,i){return Oh(n,"child_changed",e,t,i)}function NC(n,e,t,i){return Oh(n,"child_moved",e,t,i)}function PC(n,e,t,i){return Oh(n,"child_removed",e,t,i)}function FC(n,e,t){let i=null;const r=t?new SC(t):null;"value"===e?i=new Fp(r):e&&(i=new Lp(e,r)),__(n._repo,n,i)}class ha{}class LC extends ha{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$s("endAt",this._value,e._path,!0);const t=Pv(e._queryParams,this._value,this._key);if(Np(t),Dc(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new kr(e._repo,e._path,t,e._orderByCalled)}}class wA extends ha{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$s("endBefore",this._value,e._path,!1);const t=function PT(n,e,t){let i,r;return n.index_===To?("string"==typeof e&&(e=Nv(e)),r=Pv(n,e,t)):(i=null==t?_s:Nv(t),r=Pv(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Np(t),Dc(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new kr(e._repo,e._path,t,e._orderByCalled)}}class VC extends ha{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$s("startAt",this._value,e._path,!0);const t=Kg(e._queryParams,this._value,this._key);if(Np(t),Dc(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new kr(e._repo,e._path,t,e._orderByCalled)}}class CA extends ha{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$s("startAfter",this._value,e._path,!1);const t=function NT(n,e,t){let i;if(n.index_===To)"string"==typeof e&&(e=NE(e)),i=Kg(n,e,t);else{let r;r=null==t?xr:NE(t),i=Kg(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(Np(t),Dc(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new kr(e._repo,e._path,t,e._orderByCalled)}}class IA extends ha{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new kr(e._repo,e._path,function OT(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class TA extends ha{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new kr(e._repo,e._path,function PO(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class BC extends ha{constructor(e){super(),this._path=e}_apply(e){Cc(e,"orderByChild");const t=new Dn(this._path);if(Ut(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new xE(t),r=dh(e._queryParams,i);return Dc(r),new kr(e._repo,e._path,r,!0)}}class UC extends ha{_apply(e){Cc(e,"orderByKey");const t=dh(e._queryParams,To);return Dc(t),new kr(e._repo,e._path,t,!0)}}class GC extends ha{_apply(e){Cc(e,"orderByPriority");const t=dh(e._queryParams,On);return Dc(t),new kr(e._repo,e._path,t,!0)}}class $C extends ha{_apply(e){Cc(e,"orderByValue");const t=dh(e._queryParams,RE);return Dc(t),new kr(e._repo,e._path,t,!0)}}class WC extends ha{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if($s("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new LC(this._value,this._key)._apply(new VC(this._value,this._key)._apply(e))}}function No(n,...e){let t=(0,N.m9)(n);for(const i of e)t=i._apply(t);return t}(function wh(n){(0,N.hu)(!vh,"__referenceConstructor has already been defined"),vh=n})(Oo),function eC(n){(0,N.hu)(!Tp,"__referenceConstructor has already been defined"),Tp=n}(Oo);const Cw={};function MA(n,e,t,i,r){let a=i||n.options.databaseURL;void 0===a&&(n.options.projectId||at("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ie("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,y,c=b_(a,r),h=c.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(m=!0,a=`http://${y}?ns=${h.namespace}`,c=b_(a,r),h=c.repoInfo):m=!c.repoInfo.secure;const C=r&&m?new nh(nh.OWNER):new hT(n.name,n.options,e);hC("Invalid Firebase Database URL",c),Ut(c.path)||at("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function WO(n,e,t,i){let r=Cw[e.name];r||(r={},Cw[e.name]=r);let a=r[n.toURLString()];return a&&at("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new hw(n,false,t,i),r[n.toURLString()]=a,a}(h,n,C,new dT(n.name,t));return new ZC(S,n)}class ZC{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function _C(n,e,t){if(n.stats_=np(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Nu(n.repoInfo_,(i,r,a,c)=>{pw(n,i,r,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>mw(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Pz)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new wl(n.repoInfo_,e,(i,r,a,c)=>{pw(n,i,r,a,c)},i=>{mw(n,i)},i=>{!function yC(n,e){li(e,(t,i)=>{g_(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function ip(n,e){const t=n.toString();return Rg[t]||(Rg[t]=e()),Rg[t]}(n.repoInfo_,()=>new BE(n.stats_,n.server_)),n.infoData_=new Fv,n.infoSyncTree_=new iC({startListening:(i,r,a,c)=>{let h=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(h=Ih(n.infoSyncTree_,i._path,m),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),g_(n,"connected",!1),n.serverSyncTree_=new iC({startListening:(i,r,a,c)=>(n.server_.listen(i,a,r,(h,m)=>{const y=c(h,m);Ws(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oo(this._repo,fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Dw(n,e){const t=Cw[e];(!t||t[n.key]!==n)&&at(`Database ${e}(${n.repoInfo_}) has already been deleted.`),bC(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&at("Cannot call "+e+" on a deleted database.")}}function RA(n,e){W(n,e)}const OA={".sv":"timestamp"};class ui{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}wl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},wl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function C_(n){Sg(Zr.SDK_VERSION),(0,Zr._registerComponent)(new Mn.wA("database",(e,{instanceIdentifier:t})=>MA(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Zr.registerVersion)(lc,"0.12.8",n),(0,Zr.registerVersion)(lc,"0.12.8","esm2017")}();const XC=new mi.Yd("@firebase/database-compat"),Iw=function(n){XC.warn("FIREBASE WARNING: "+n)};class LA{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),a=>i(a)),r}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let a=0;a<e.length;++a)r[""+a]=e[a];e=r,Iw("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class VA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Po{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),xh("DataSnapshot.child","path",e,!1),new Po(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),xh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Po(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ys(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class _r{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var a;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const c=_r.getCancelAndContextArgs_("Query.on",i,r),h=(y,C)=>{t.call(c.context,new Po(this.database,y),C)};h.userCallback=t,h.context=c.context;const m=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return E_(this._delegate,h,m),t;case"child_added":return bw(this._delegate,h,m),t;case"child_removed":return PC(this._delegate,h,m),t;case"child_changed":return OC(this._delegate,h,m),t;case"child_moved":return NC(this._delegate,h,m),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,FC(this._delegate,e,r)}else FC(this._delegate,e)}get(){return RC(this._delegate).then(e=>new Po(this.database,e))}once(e,t,i,r){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const a=_r.getCancelAndContextArgs_("Query.once",i,r),c=new N.BH,h=(y,C)=>{const S=new Po(this.database,y);t&&t.call(a.context,S,C),c.resolve(S)};h.userCallback=t,h.context=a.context;const m=y=>{a.cancel&&a.cancel.call(a.context,y),c.reject(y)};switch(e){case"value":E_(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":bw(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":PC(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":OC(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":NC(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new _r(this.database,No(this._delegate,function SA(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new IA(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new _r(this.database,No(this._delegate,function AA(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new TA(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new _r(this.database,No(this._delegate,function HC(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xh("orderByChild","path",n,!1),new BC(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new _r(this.database,No(this._delegate,function jC(){return new UC}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new _r(this.database,No(this._delegate,function zC(){return new GC}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new _r(this.database,No(this._delegate,function qC(){return new $C}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new _r(this.database,No(this._delegate,function EA(n=null,e){return Mh("startAt","key",e,!0),new VC(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new _r(this.database,No(this._delegate,function DA(n,e){return Mh("startAfter","key",e,!0),new CA(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new _r(this.database,No(this._delegate,function vA(n,e){return Mh("endAt","key",e,!0),new LC(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new _r(this.database,No(this._delegate,function bA(n,e){return Mh("endBefore","key",e,!0),new wA(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new _r(this.database,No(this._delegate,function Ew(n,e){return Mh("equalTo","key",e,!0),new WC(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof _r))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,N.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,N.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Ys(this.database,new Oo(this._delegate._repo,this._delegate._path))}}class Ys extends _r{constructor(e,t){super(e,new kr(t._repo,t._path,new uh,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ys(this.database,$u(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ys(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new Ys(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const i=Rh(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let a=0;a<e.length;++a)r[""+a]=e[a];e=r,Iw("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qs("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const i=kC(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function xC(n,e,t){if(qs("setWithPriority",n._path),$s("setWithPriority",e,n._path,!1),Mp("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new N.BH;return gw(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),a=>i(a)),r}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function ww(n){return qs("remove",n._path),Rh(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function KO(n,e,t){var i;if(n=(0,N.m9)(n),qs("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==t?void 0:t.applyLocally)||void 0===i||i,a=new N.BH,h=E_(n,()=>{});return function gA(n,e,t,i,r,a){Gu(n,"transaction on "+e);const c={path:e,update:t,onComplete:i,status:null,order:p(),applyLocally:a,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=_w(n,e,void 0);c.currentInputSnapshot=h;const m=c.update(h.val());if(void 0===m)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Ec("transaction failed: Data returned ",m,c.path),c.status=0;const y=d_(n.transactionQueueTree_,e),C=bc(y)||[];let S;C.push(c),h_(y,C),"object"==typeof m&&null!==m&&(0,N.r3)(m,".priority")?(S=(0,N.DV)(m,".priority"),(0,N.hu)(Ap(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Jv(n.serverSyncTree_,e)||Nt.EMPTY_NODE).getPriority().val();const x=kh(n),V=ci(m,S),B=rw(V,h,x);c.currentOutputSnapshotRaw=V,c.currentOutputSnapshotResolved=B,c.currentWriteId=Rp(n);const K=o_(n.serverSyncTree_,e,B,c.currentWriteId,c.applyLocally);Ws(n.eventQueue_,e,K),Op(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,y,C)=>{let S=null;m?a.reject(m):(S=new Ic(C,new Oo(n._repo,n._path),On),a.resolve(new ui(y,S)))},h,r),a.promise}(this._delegate,e,{applyLocally:i}).then(a=>new VA(a.committed,new Po(this.database,a.snapshot)));return t&&r.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),r}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const i=function MC(n,e){n=(0,N.m9)(n),qs("setPriority",n._path),Mp("setPriority",e,!1);const t=new N.BH;return gw(n._repo,jn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const i=function AC(n,e){n=(0,N.m9)(n),qs("push",n._path),$s("push",e,n._path,!0);const t=fw(n._repo),i=kT(t),r=$u(n,i),a=$u(n,i);let c;return c=null!=e?Rh(a,e).then(()=>a):Promise.resolve(a),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,e),r=i.then(c=>new Ys(this.database,c));t&&r.then(()=>t(null),c=>t(c));const a=new Ys(this.database,i);return a.then=r.then.bind(r),a.catch=r.catch.bind(r,void 0),a}onDisconnect(){return qs("Reference.onDisconnect",this._delegate._path),new LA(new TC(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Vp{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,i={}){!function wt(n,e,t,i={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&at("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let a;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&at('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new nh(nh.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,N.Sg)(i.mockUserToken,n.app.options.projectId);a=new nh(c)}!function Nh(n,e,t,i){n.repoInfo_=new xg(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,a)}(this._delegate,e,t,i)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof Ys){const t=Pp(this._delegate,e.toString());return new Ys(this,t)}{const t=vw(this._delegate,e);return new Ys(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const i=Pp(this._delegate,e);return new Ys(this,i)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function xA(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),bC(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function kA(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function EC(n){n.persistentConnection_&&n.persistentConnection_.resume(dw)}(n._repo)}(this._delegate)}}Vp.ServerValue={TIMESTAMP:function D_(){return OA}(),increment:n=>function I_(n){return{".sv":{increment:n}}}(n)};var eD=Object.freeze({__proto__:null,initStandalone:function S_({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:a=!1}){Sg(t);const c=new Mn.zt("auth-internal",new Mn.H0("database-standalone"));return c.setComponent(new Mn.wA("auth-internal",()=>i,"PRIVATE")),{instance:new Vp(MA(n,c,void 0,e,a),n),namespace:r}}});const tD=Vp.ServerValue;!function nD(n){n.INTERNAL.registerComponent(new Mn.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new Vp(r,i)},"PUBLIC").setServiceProps({Reference:Ys,Query:_r,Database:Vp,DataSnapshot:Po,enableLogging:RA,INTERNAL:eD,ServerValue:tD}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(Wf.Z);var nn=P(7579),Sc=P(5363),Bp=P(6063);class BA extends nn.x{constructor(e=1/0,t=1/0,i=Bp.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:a,_windowTime:c}=this;t||(i.push(e),!r&&i.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,a=r.slice();for(let c=0;c<a.length&&!e.closed;c+=i?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,a=(r?1:2)*e;if(e<1/0&&a<i.length&&i.splice(0,i.length-a),!r){const c=t.now();let h=0;for(let m=1;m<i.length&&i[m]<=c;m+=2)h=m;h&&i.splice(0,h+1)}}}function iD(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=null!=n?n:1/0,(0,pr.B)({connector:()=>new BA(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const Sw=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function fa(n,e){return(0,ai.e)((t,i)=>{let r=0;t.subscribe((0,hn.x)(i,a=>n.call(e,a,r++)&&i.next(a)))})}var Fo=P(5698);function UA(n){return(0,ai.e)((e,t)=>{let i=!1;e.subscribe((0,hn.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function rD(n=jA){return(0,ai.e)((e,t)=>{let i=!1;e.subscribe((0,hn.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function jA(){return new Sw}var pa=P(576);function zA(n,e){return(0,pa.m)(e)?Yr(()=>n,e):Yr(()=>n)}var sD=P(9468);P(5867);const oD=new Map,aD={activated:!1,tokenObservers:[]},QA={initialized:!1,enabled:!1};function Vi(n){return oD.get(n)||aD}function ma(n,e){oD.set(n,e)}function Ph(){return QA}class Aw{constructor(e,t,i,r,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=r,r>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function eM(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Xr=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hD(n){if(!Vi(n).activated)throw Xr.create("use-before-activation",{appName:n.name})}function xw(n,e){return kw.apply(this,arguments)}function kw(){return(kw=(0,ye.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const S=yield r.getHeartbeatsHeader();S&&(i["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:i};let c,h;try{c=yield fetch(n,a)}catch(S){throw Xr.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw Xr.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(S){throw Xr.create("fetch-parse-error",{originalErrorMessage:S.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Xr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(m[1]),C=Date.now();return{token:h.attestationToken,expireTimeMillis:C+y,issuedAtTimeMillis:C}})).apply(this,arguments)}function nM(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const jp="firebase-app-check-store";let R_=null;function O_(){return R_||(R_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Xr.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(jp,{keyPath:"compositeKey"})}}catch(t){e(Xr.create("storage-open",{originalErrorMessage:t.message}))}}),R_)}function Gp(){return(Gp=(0,ye.Z)(function*(n,e){const i=(yield O_()).transaction(jp,"readwrite"),a=i.objectStore(jp).put({compositeKey:n,value:e});return new Promise((c,h)=>{a.onsuccess=m=>{c()},i.onerror=m=>{var y;h(Xr.create("storage-set",{originalErrorMessage:null===(y=m.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Fh=new mi.Yd("@firebase/app-check");function oM(n,e){return(0,N.hl)()?function _D(n,e){return function yD(n,e){return Gp.apply(this,arguments)}(function wD(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Fh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bD(){return Ph().enabled}function Wu(){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,ye.Z)(function*(){const n=Ph();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const iN={error:"UNKNOWN_ERROR"};function ED(n){return N.US.encodeString(JSON.stringify(n),!1)}function F_(n){return Nw.apply(this,arguments)}function Nw(){return(Nw=(0,ye.Z)(function*(n,e=!1){const t=n.app;hD(t);const i=Vi(t);let a,r=i.token;if(!r){const m=yield i.cachedTokenPromise;m&&Yu(m)&&(r=m)}if(!e&&r&&Yu(r))return{token:r.token};let h,c=!1;if(bD()){i.exchangeTokenPromise||(i.exchangeTokenPromise=xw(nM(t,yield Wu()),n.heartbeatServiceProvider).then(y=>(i.exchangeTokenPromise=void 0,y)),c=!0);const m=yield i.exchangeTokenPromise;return yield oM(t,m),ma(t,Object.assign(Object.assign({},i),{token:m})),{token:m.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(m=>(i.exchangeTokenPromise=void 0,m)),c=!0),r=yield i.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Fh.warn(m.message):Fh.error(m),a=m}return r?(h={token:r.token},ma(t,Object.assign(Object.assign({},i),{token:r})),yield oM(t,r)):h=zp(a),c&&L_(t,h),h})).apply(this,arguments)}function Fw(n,e){const t=Vi(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ma(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function Lw(n){const{app:e}=n,t=Vi(e);let i=t.tokenRefresher;i||(i=function CD(n){const{app:e}=n;return new Aw((0,ye.Z)(function*(){let i;if(i=Vi(e).token?yield F_(n,!0):yield F_(n),i.error)throw i.error}),()=>!0,()=>{const t=Vi(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),ma(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function L_(n,e){const t=Vi(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function Yu(n){return n.expireTimeMillis-Date.now()>0}function zp(n){return{token:ED(iN),error:n}}class cM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Vi(this.app);for(const t of e)Fw(this.app,t.next);return Promise.resolve()}}const AD="app-check-internal";!function wM(){(0,Zr._registerComponent)(new Mn.wA("app-check",n=>function DD(n,e){return new cM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(AD).initialize()})),(0,Zr._registerComponent)(new Mn.wA(AD,n=>function ID(n){return{getToken:e=>F_(n,e),addTokenListener:e=>function Pw(n,e,t,i){const{app:r}=n,a=Vi(r),c={next:t,error:i,type:e};if(ma(r,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&Yu(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),Lw(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Lw(n))}(n,"INTERNAL",e),removeTokenListener:e=>Fw(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Zr.registerVersion)("@firebase/app-check","0.5.6")}();class $p{constructor(){return(0,An.vb)("app-check")}}"undefined"!=typeof window&&window;var OD=P(127);const Xu=new u.OlP("angularfire2.auth.use-emulator"),jw=new u.OlP("angularfire2.auth.settings"),Gw=new u.OlP("angularfire2.auth.tenant-id"),zw=new u.OlP("angularfire2.auth.langugage-code"),Vh=new u.OlP("angularfire2.auth.use-device-language"),Bh=new u.OlP("angularfire.auth.persistence"),$w=(n,e,t,i,r,a,c,h)=>(0,Li.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),i&&(m.tenantId=i),m.languageCode=r,a&&m.useDeviceLanguage(),c)for(const[y,C]of Object.entries(c))m.settings[y]=C;return h&&m.setPersistence(h),m},[t,i,r,a,c,h]);let qw=(()=>{class n{constructor(t,i,r,a,c,h,m,y,C,S,x,V){const B=new nn.x,K=Tn(void 0).pipe((0,Sc.Q)(c.outsideAngular),Yr(()=>a.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,820)))),(0,Mt.U)(()=>(0,Li.on)(t,a,i)),(0,Mt.U)(ve=>$w(ve,a,h,y,C,S,m,x)),iD({bufferSize:1,refCount:!1}));if(Ci(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Tn(null);else{K.pipe(function GA(n,e){const t=arguments.length>=2;return i=>i.pipe(n?fa((r,a)=>n(r,a,i)):_l.y,(0,Fo.q)(1),t?UA(e):rD(()=>new Sw))}()).subscribe();const Xe=K.pipe(Yr(nt=>nt.getRedirectResult().then(Pt=>Pt,()=>null)),An.iC,iD({bufferSize:1,refCount:!1})),rt=K.pipe(Yr(nt=>new an.y(Pt=>({unsubscribe:a.runOutsideAngular(()=>nt.onAuthStateChanged(Gt=>Pt.next(Gt),Gt=>Pt.error(Gt),()=>Pt.complete()))})))),et=K.pipe(Yr(nt=>new an.y(Pt=>({unsubscribe:a.runOutsideAngular(()=>nt.onIdTokenChanged(Gt=>Pt.next(Gt),Gt=>Pt.error(Gt),()=>Pt.complete()))}))));this.authState=Xe.pipe(zA(rt),(0,sD.R)(c.outsideAngular),(0,Sc.Q)(c.insideAngular)),this.user=Xe.pipe(zA(et),(0,sD.R)(c.outsideAngular),(0,Sc.Q)(c.insideAngular)),this.idToken=this.user.pipe(Yr(nt=>nt?(0,fs.D)(nt.getIdToken()):Tn(null))),this.idTokenResult=this.user.pipe(Yr(nt=>nt?(0,fs.D)(nt.getIdTokenResult()):Tn(null))),this.credential=(0,Kr.T)(Xe,B,this.authState.pipe(fa(nt=>!nt))).pipe((0,Mt.U)(nt=>(null==nt?void 0:nt.user)?nt:null),(0,sD.R)(c.outsideAngular),(0,Sc.Q)(c.insideAngular))}return(0,Li.pX)(this,K,a,{spy:{apply:(ve,Xe,rt)=>{(ve.startsWith("signIn")||ve.startsWith("createUser"))&&rt.then(et=>B.next(et))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Li.Dh),u.LFG(Li.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(An.HU),u.LFG(Xu,8),u.LFG(jw,8),u.LFG(Gw,8),u.LFG(zw,8),u.LFG(Vh,8),u.LFG(Bh,8),u.LFG($p,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Kw(n){return null==n}function PD(n){return"function"==typeof n.set}function FD(n,e){return PD(e)?e:n.ref(e)}function TM(n,e){if(function ND(n){return"string"==typeof n}(n))return e.stringCase();if(PD(n))return e.firebaseCase();if(function Ww(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Ju(n,e,t="on",i=oi.z){return new an.y(r=>{let a=null;return a=n[t](e,(c,h)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:h})}),"once"===t&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Mt.U)(r=>{const{snapshot:a,prevKey:c}=r;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:c,key:h}}),(0,pr.B)())}function Zw(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function Xw(n,e){const{payload:t,prevKey:i,key:r}=e,a=Zw(n,r),c=function Qw(n,e){if(Kw(e))return 0;{const t=Zw(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const y={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,y],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==i&&(n=n.filter(m=>m.payload.key!==t.key)).splice(c,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===r?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function LD(n){return(Kw(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function VD(n,e,t){return function Yw(n,e,t){return Ju(n,"value","once",t).pipe(Yr(i=>{const r=[Tn(i)];return e.forEach(a=>r.push(Ju(n,a,"on",t))),(0,Kr.T)(...r).pipe(La(Xw,[]))}),Tu())}(n,e=LD(e),t)}function BD(n,e,t){const i=(e=LD(e)).map(r=>Ju(n,r,"on",t));return(0,Kr.T)(...i)}function eb(n,e){return function(i,r){return TM(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function UD(n){return function(t){return t?TM(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function tb(n,e){return function(){return Ju(n,"value","on",e)}}const GD=new u.OlP("angularfire2.realtimeDatabaseURL"),zD=new u.OlP("angularfire2.database.use-emulator");let $D=(()=>{class n{constructor(t,i,r,a,c,h,m,y,C,S,x,V,B,K,ve){this.schedulers=h;const Xe=m,rt=(0,Li.on)(t,c,i);y&&$w(rt,c,C,x,V,B,S,K),this.database=(0,Li.cc)(`${rt.name}.database.${r}`,"AngularFireDatabase",rt.name,()=>{const et=c.runOutsideAngular(()=>rt.database(r||void 0));return Xe&&et.useEmulator(...Xe),et},[Xe])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>FD(this.database,t));let a=r;return i&&(a=i(r)),function jD(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:eb(i,"update"),set:eb(i,"set"),push:r=>i.push(r),remove:UD(i),snapshotChanges:r=>VD(n,r,t).pipe(An.iC),stateChanges:r=>BD(n,r,t).pipe(An.iC),auditTrail:r=>function AM(n,e,t){return function Jw(n,e,t){return function HD(n,e){return Ju(n,"value","on",e).pipe((0,Mt.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function Io(...n){const e=(0,Yo.jO)(n);return(0,ai.e)((t,i)=>{const r=n.length,a=new Array(r);let c=n.map(()=>!1),h=!1;for(let m=0;m<r;m++)(0,Qt.Xf)(n[m]).subscribe((0,hn.x)(i,y=>{a[m]=y,!h&&!c[m]&&(c[m]=!0,(h=c.every(_l.y))&&(c=null))},Dg.Z));t.subscribe((0,hn.x)(i,m=>{if(h){const y=[m,...a];i.next(e?e(...y):y)}}))})}(e),(0,Mt.U)(([r,a])=>{const c=r.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:c,loadedKeys:h}}),function Ig(n){return(0,ai.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,hn.x)(t,a=>(i||(i=!n(a,r++)))&&t.next(a)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,Mt.U)(r=>r.actions))}(n,BD(n,e).pipe(La((r,a)=>[...r,a],[])),t)}(n,r,t).pipe(An.iC),valueChanges:(r,a)=>VD(n,r,t).pipe((0,Mt.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),An.iC)}}(a,this)}object(t){return function MM(n,e){return{query:n,snapshotChanges:()=>tb(n,e.schedulers.outsideAngular)().pipe(An.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>tb(n,e.schedulers.outsideAngular)().pipe(An.iC,(0,Mt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>FD(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Li.Dh),u.LFG(Li.xv,8),u.LFG(GD,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(An.HU),u.LFG(zD,8),u.LFG(qw,8),u.LFG(Xu,8),u.LFG(jw,8),u.LFG(Gw,8),u.LFG(zw,8),u.LFG(Vh,8),u.LFG(Bh,8),u.LFG($p,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qD=(()=>{class n{constructor(){OD.Z.registerVersion("angularfire",An.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[$D]}),n})();var WD=P(8189);function Ac(...n){return function Jr(){return(0,WD.J)(1)}()((0,fs.D)(n,(0,Yo.yG)(n)))}function Sl(...n){const e=(0,Yo.yG)(n);return(0,ai.e)((t,i)=>{(e?Ac(n,t,e):Ac(n,t)).subscribe(i)})}function nb(){return(0,ai.e)((n,e)=>{let t,i=!1;n.subscribe((0,hn.x)(e,r=>{const a=t;t=r,i&&e.next([a,r]),i=!0}))})}var tt,fN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Zs={},qp=qp||{},xt=fN||self;function Wp(){}function ib(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var G_="closure_uid_"+(1e9*Math.random()>>>0),KD=0;function z_(n,e,t){return n.call.apply(n.bind,arguments)}function sb(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Rr(n,e,t){return(Rr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?z_:sb).apply(null,arguments)}function Yp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function yr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[r].apply(i,c)}}function Tl(){this.s=this.s,this.o=this.o}var YD={};Tl.prototype.s=!1,Tl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function rb(n){return Object.prototype.hasOwnProperty.call(n,G_)&&n[G_]||(n[G_]=++KD)}(this);delete YD[n]}},Tl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ZD=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},q_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,r="string"==typeof n?n.split(""):n;for(let a=0;a<i;a++)a in r&&e.call(t,r[a],a,n)};function xM(n){return Array.prototype.concat.apply([],arguments)}function ab(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function W_(n){return/^[\s\xa0]*$/.test(n)}var Nr,lb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Or(n,e){return-1!=n.indexOf(e)}function cb(n,e){return n<e?-1:n>e?1:0}e:{var ub=xt.navigator;if(ub){var QD=ub.userAgent;if(QD){Nr=QD;break e}}Nr=""}function db(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function hb(n){const e={};for(const t in n)e[t]=n[t];return e}var XD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fb(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let a=0;a<XD.length;a++)t=XD[a],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function K_(n){return K_[" "](n),n}K_[" "]=Wp;var mb,n,eI=Or(Nr,"Opera"),Hh=Or(Nr,"Trident")||Or(Nr,"MSIE"),tI=Or(Nr,"Edge"),nI=tI||Hh,pb=Or(Nr,"Gecko")&&!(Or(Nr.toLowerCase(),"webkit")&&!Or(Nr,"Edge"))&&!(Or(Nr,"Trident")||Or(Nr,"MSIE"))&&!Or(Nr,"Edge"),pN=Or(Nr.toLowerCase(),"webkit")&&!Or(Nr,"Edge");function kM(){var n=xt.document;return n?n.documentMode:void 0}e:{var iI="",rI=(n=Nr,pb?/rv:([^\);]+)(\)|;)/.exec(n):tI?/Edge\/([\d\.]+)/.exec(n):Hh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pN?/WebKit\/(\S+)/.exec(n):eI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(rI&&(iI=rI?rI[1]:""),Hh){var sI=kM();if(null!=sI&&sI>parseFloat(iI)){mb=String(sI);break e}}mb=iI}var mN={};var oI=xt.document&&Hh&&(kM()||parseInt(mb,10))||void 0,gb=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",Wp,e),xt.removeEventListener("test",Wp,e)}catch(t){}return n}();function vr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function jh(n,e){if(vr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(pb){e:{try{K_(e.nodeName);var r=!0;break e}catch(a){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_N[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&jh.Z.h.call(this)}}vr.prototype.h=function(){this.defaultPrevented=!0},yr(jh,vr);var _N={2:"touch",3:"pen",4:"mouse"};jh.prototype.h=function(){jh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ed="closure_listenable_"+(1e6*Math.random()|0),aI=0;function OM(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=r,this.key=++aI,this.ca=this.fa=!1}function Y_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function _b(n){this.src=n,this.g={},this.h=0}function lI(n,e){var t=e.type;if(t in n.g){var a,i=n.g[t],r=ZD(i,e);(a=0<=r)&&Array.prototype.splice.call(i,r,1),a&&(Y_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function yb(n,e,t,i){for(var r=0;r<n.length;++r){var a=n[r];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==i)return r}return-1}_b.prototype.add=function(n,e,t,i,r){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=yb(n,e,i,r);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new OM(e,this.src,a,!!i,r)).fa=t,n.push(e)),e};var Zp="closure_lm_"+(1e6*Math.random()|0),vb={};function NM(n,e,t,i,r){if(i&&i.once)return cI(n,e,t,i,r);if(Array.isArray(e)){for(var a=0;a<e.length;a++)NM(n,e[a],t,i,r);return null}return t=Qs(t),n&&n[ed]?n.N(e,t,Kp(i)?!!i.capture:!!i,r):PM(n,e,t,!1,i,r)}function PM(n,e,t,i,r,a){if(!e)throw Error("Invalid event type");var c=Kp(r)?!!r.capture:!!r,h=Qp(n);if(h||(n[Zp]=h=new _b(n)),(t=h.add(e,t,i,c,a)).proxy)return t;if(i=function yN(){var e=VM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)gb||(r=c),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(LM(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function cI(n,e,t,i,r){if(Array.isArray(e)){for(var a=0;a<e.length;a++)cI(n,e[a],t,i,r);return null}return t=Qs(t),n&&n[ed]?n.O(e,t,Kp(i)?!!i.capture:!!i,r):PM(n,e,t,!0,i,r)}function FM(n,e,t,i,r){if(Array.isArray(e))for(var a=0;a<e.length;a++)FM(n,e[a],t,i,r);else i=Kp(i)?!!i.capture:!!i,t=Qs(t),n&&n[ed]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=yb(a=n.g[e],t,i,r))&&(Y_(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Qp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=yb(e,t,i,r)),(t=-1<n?e[n]:null)&&wb(t))}function wb(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ed])lI(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(LM(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Qp(e))?(lI(t,n),0==t.h&&(t.src=null,e[Zp]=null)):Y_(n)}}}function LM(n){return n in vb?vb[n]:vb[n]="on"+n}function VM(n,e){if(n.ca)n=!0;else{e=new jh(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&wb(n),n=t.call(i,e)}return n}function Qp(n){return(n=n[Zp])instanceof _b?n:null}var bb="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qs(n){return"function"==typeof n?n:(n[bb]||(n[bb]=function(e){return n.handleEvent(e)}),n[bb])}function Zi(){Tl.call(this),this.i=new _b(this),this.P=this,this.I=null}function Bi(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new vr(e,n);else if(e instanceof vr)e.target=e.target||n;else{var r=e;fb(e=new vr(i,n),r)}if(r=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];r=Z_(c,i,!0,e)&&r}if(r=Z_(c=e.g=n,i,!0,e)&&r,r=Z_(c,i,!1,e)&&r,t)for(a=0;a<t.length;a++)r=Z_(c=e.g=t[a],i,!1,e)&&r}function Z_(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var h=c.listener,m=c.ia||c.src;c.fa&&lI(n.i,c),r=!1!==h.call(m,i)&&r}}return r&&!i.defaultPrevented}yr(Zi,Tl),Zi.prototype[ed]=!0,Zi.prototype.removeEventListener=function(n,e,t,i){FM(this,n,e,t,i)},Zi.prototype.M=function(){if(Zi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Y_(t[i]);delete n.g[e],n.h--}}this.I=null},Zi.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Zi.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Eb=xt.JSON.stringify;function Cb(){var n=Lo;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Sb,Db=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new BM,n=>n.reset());class BM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function dI(n){xt.setTimeout(()=>{throw n},0)}function Ib(n,e){Sb||function HM(){var n=xt.Promise.resolve(void 0);Sb=function(){n.then(UM)}}(),Xp||(Sb(),Xp=!0),Lo.add(n,e)}var Xp=!1,Lo=new class uI{constructor(){this.h=this.g=null}add(e,t){const i=Db.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function UM(){for(var n;n=Cb();){try{n.h.call(n.g)}catch(t){dI(t)}var e=Db;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Xp=!1}function Tb(n,e){Zi.call(this),this.h=n||1,this.g=e||xt,this.j=Rr(this.kb,this),this.l=Date.now()}function Ab(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Q_(n,e,t){if("function"==typeof n)t&&(n=Rr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Rr(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function jM(n){n.g=Q_(()=>{n.g=null,n.i&&(n.i=!1,jM(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}yr(Tb,Zi),(tt=Tb.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Bi(this,"tick"),this.da&&(Ab(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){Tb.Z.M.call(this),Ab(this),delete this.g};class GM extends Tl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jM(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gh(n){Tl.call(this),this.h=n,this.g={}}yr(Gh,Tl);var hI=[];function zM(n,e,t,i){Array.isArray(t)||(t&&(hI[0]=t.toString()),t=hI);for(var r=0;r<t.length;r++){var a=NM(e,t[r],i||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Mb(n){db(n.g,function(e,t){this.g.hasOwnProperty(t)&&wb(e)},n),n.g={}}function X_(){this.g=!0}function td(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var a=r[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<r.length;c++)r[c]=""}}}return Eb(t)}catch(h){return e}}(n,t)+(i?" "+i:"")})}Gh.prototype.M=function(){Gh.Z.M.call(this),Mb(this)},Gh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},X_.prototype.Aa=function(){this.g=!1},X_.prototype.info=function(){};var Mc={},fI=null;function Jp(){return fI=fI||new Zi}function Rb(n){vr.call(this,Mc.Ma,n)}function em(n){const e=Jp();Bi(e,new Rb(e,n))}function pI(n,e){vr.call(this,Mc.STAT_EVENT,n),this.stat=e}function ws(n){const e=Jp();Bi(e,new pI(e,n))}function WM(n,e){vr.call(this,Mc.Na,n),this.size=e}function zh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}Mc.Ma="serverreachability",yr(Rb,vr),Mc.STAT_EVENT="statevent",yr(pI,vr),Mc.Na="timingevent",yr(WM,vr);var J_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},mI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ob(){}function YM(){}Ob.prototype.h=null;var Nb,ey={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function gI(){vr.call(this,"d")}function _I(){vr.call(this,"c")}function nd(){}function tm(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new Gh(this),this.P=vI,this.W=new Tb(n=nI?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new yI}function yI(){this.i=null,this.g="",this.h=!1}yr(gI,vr),yr(_I,vr),yr(nd,Ob),nd.prototype.g=function(){return new XMLHttpRequest},nd.prototype.i=function(){return{}},Nb=new nd;var vI=45e3,Al={},nm={};function im(n,e,t){n.K=1,n.v=sy(Ml(e)),n.s=t,n.U=!0,ty(n,null)}function ty(n,e){n.F=Date.now(),xc(n),n.A=Ml(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),ix(t.h,"t",i),n.C=0,t=n.l.H,n.h=new yI,n.g=FN(n.l,t?e:null,!n.s),0<n.O&&(n.L=new GM(Rr(n.Ia,n,n.g),n.O)),zM(n.V,n.g,"readystatechange",n.gb),e=n.H?hb(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),em(1),function $M(n,e,t,i,r,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),m=0;m<h.length;m++){var y=h[m].split("=");if(1<y.length){var C=y[0];y=y[1];var S=C.split("_");c=2<=S.length&&"type"==S[1]?c+(C+"=")+y+"&":c+(C+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function wI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ny(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=Pb(n,t),r==nm){4==e&&(n.o=4,ws(14),i=!1),td(n.j,n.m,null,"[Incomplete Response]");break}if(r==Al){n.o=4,ws(15),td(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}td(n.j,n.m,r,null),ry(n,r)}wI(n)&&r!=nm&&r!=Al&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ws(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),lx(e),e.L=!0,ws(11))):(td(n.j,n.m,t,"[Invalid Chunked Response]"),$h(n),iy(n))}function Pb(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?nm:(t=Number(e.substring(t,i)),isNaN(t)?Al:(i+=1)+t>e.length?nm:(e=e.substr(i,t),n.C=i+t,e))}function xc(n){n.Y=Date.now()+n.P,ZM(n,n.P)}function ZM(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zh(Rr(n.eb,n),e)}function Fb(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function iy(n){0==n.l.G||n.I||RN(n.l,n)}function $h(n){Fb(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ab(n.W),Mb(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ry(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||E(t.i,n)))if(t.I=n.N,!n.J&&E(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.ta=r[1],0<t.ta-t.U&&37500>r[2]&&t.N&&0==t.A&&!t.v&&(t.v=zh(Rr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;DI(t),EI(t)}ax(t),ws(18)}if(1>=w(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else am(t,11)}else if((n.J||t.g==n)&&DI(t),!W_(e))for(r=t.Ca.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const C=y[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const S=y[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.K=i=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const V=n.g;if(V){const B=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var a=i.i;!a.g&&(Or(B,"spdy")||Or(B,"quic")||Or(B,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(D(a,a.h),a.h=null))}if(i.D){const K=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;K&&(i.sa=K,Pn(i.F,i.D,K))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((i=t).oa=PN(i,i.H?i.la:null,i.W),c.J){M(i.i,c);var h=c,m=i.K;m&&h.setTimeout(m),h.B&&(Fb(h),xc(h)),i.g=c}else xN(i);0<t.l.length&&CI(t)}else"stop"!=y[0]&&"close"!=y[0]||am(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?am(t,7):sx(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}em(4)}catch(y){}}function Lb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ib(n)||"string"==typeof n)q_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ib(n)||"string"==typeof n){t=[];for(var i=n.length,r=0;r<i;r++)t.push(r)}else for(r in t=[],i=0,n)t[i++]=r;i=function QM(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ib(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length;for(var a=0;a<r;a++)e.call(void 0,i[a],t&&t[a],n)}}function qh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof qh)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function Vb(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];kc(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var r={};for(t=e=0;e<n.g.length;)kc(r,i=n.g[e])||(n.g[t++]=i,r[i]=1),e++;n.g.length=t}}function kc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=tm.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==sd(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const C=sd(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>C)&&(3!=C||nI||this.g&&(this.h.h||this.g.ga()||IN(this.g)))){this.I||4!=C||7==e||em(8==e||0>=S?3:2),Fb(this);var t=this.g.ba();this.N=t;t:if(wI(this)){var i=IN(this.g);n="";var r=i.length,a=4==sd(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$h(this),iy(this);var c="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:a&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function qM(n,e,t,i,r,a,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W_(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,ws(12),$h(this),iy(this);break e}td(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ry(this,t)}this.U?(ny(this,C,c),nI&&this.i&&3==C&&(zM(this.V,this.W,"tick",this.fb),this.W.start())):(td(this.j,this.m,c,null),ry(this,c)),4==C&&$h(this),this.i&&!this.I&&(4==C?RN(this.l,this):(this.i=!1,xc(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ws(12)):(this.o=0,ws(13)),$h(this),iy(this)}}}catch(C){}},tt.fb=function(){if(this.g){var n=sd(this.g),e=this.g.ga();this.C<e.length&&(Fb(this),ny(this,n,e),this.i&&4!=n&&xc(this))}},tt.cancel=function(){this.I=!0,$h(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function xb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(em(3),ws(17)),$h(this),this.o=2,iy(this)):ZM(this,this.Y-n)},(tt=qh.prototype).R=function(){Vb(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return Vb(this),this.g.concat()},tt.get=function(n,e){return kc(this.h,n)?this.h[n]:e},tt.set=function(n,e){kc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var r=t[i],a=this.get(r);n.call(e,a,r,this)}};var Bb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function id(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof id){this.g=void 0!==e?e:n.g,rm(this,n.j),this.s=n.s,Wh(this,n.i),Hb(this,n.m),this.l=n.l,e=n.h;var t=new om;t.i=e.i,e.g&&(t.g=new qh(e.g),t.h=e.h),Ub(this,t),this.o=n.o}else n&&(t=String(n).match(Bb))?(this.g=!!e,rm(this,t[1]||"",!0),this.s=oy(t[2]||""),Wh(this,t[3]||"",!0),Hb(this,t[4]),this.l=oy(t[5]||"",!0),Ub(this,t[6]||"",!0),this.o=oy(t[7]||"")):(this.g=!!e,this.h=new om(null,this.g))}function Ml(n){return new id(n)}function rm(n,e,t){n.j=t?oy(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Wh(n,e,t){n.i=t?oy(e,!0):e}function Hb(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ub(n,e,t){e instanceof om?(n.h=e,function o(n,e){e&&!n.j&&(rd(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(tx(this,i),ix(this,r,t))},n)),n.j=e}(n.h,n.g)):(t||(e=sm(e,EN)),n.h=new om(e,n.g))}function Pn(n,e,t){n.h.set(e,t)}function sy(n){return Pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function oy(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sm(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,JM),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function JM(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}id.prototype.toString=function(){var n=[],e=this.j;e&&n.push(sm(e,ex,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(sm(e,ex,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(sm(t,"/"==t.charAt(0)?bN:wN,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",sm(t,CN)),n.join("")};var ex=/[#\/\?@]/g,wN=/[#\?:]/g,bN=/[#\?]/g,EN=/[#\?@]/g,CN=/#/g;function om(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function rd(n){n.g||(n.g=new qh,n.h=0,n.i&&function bI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var a=n[t].substring(0,i);r=n[t].substring(i+1)}else a=n[t];e(a,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function tx(n,e){rd(n),e=s(n,e),kc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,kc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Vb(n)))}function nx(n,e){return rd(n),e=s(n,e),kc(n.g.h,e)}function ix(n,e,t){tx(n,e),0<t.length&&(n.i=null,n.g.set(s(n,e),ab(t)),n.h+=t.length)}function s(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function d(n){this.l=n||f,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=om.prototype).add=function(n,e){rd(this),this.i=null,n=s(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){rd(this),this.g.forEach(function(t,i){q_(t,function(r){n.call(e,r,i,this)},this)},this)},tt.T=function(){rd(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var r=n[i],a=0;a<r.length;a++)t.push(e[i]);return t},tt.R=function(n){rd(this);var e=[];if("string"==typeof n)nx(this,n)&&(e=xM(e,this.g.get(s(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=xM(e,n[t])}return e},tt.set=function(n,e){return rd(this),this.i=null,nx(this,n=s(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],r=encodeURIComponent(String(i));i=this.R(i);for(var a=0;a<i.length;a++){var c=r;""!==i[a]&&(c+="="+encodeURIComponent(String(i[a]))),n.push(c)}}return this.i=n.join("&")};var f=10;function g(n){return!!n.h||!!n.g&&n.g.size>=n.j}function w(n){return n.h?1:n.g?n.g.size:0}function E(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function D(n,e){n.g?n.g.add(e):n.h=e}function M(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function k(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ab(n.i)}function L(){}function j(){this.g=new L}function Q(n,e,t){const i=t||"";try{Lb(n,function(r,a){let c=r;Kp(r)&&(c=Eb(r)),e.push(i+a+"="+encodeURIComponent(c))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Pe(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(a){}}function Be(n){this.l=n.$b||null,this.j=n.ib||!1}function Qe(n,e){Zi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ie,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}d.prototype.cancel=function(){if(this.i=k(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},L.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},L.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},yr(Be,Ob),Be.prototype.g=function(){return new Qe(this.l,this.j)},Be.prototype.i=function(n){return function(){return n}}({}),yr(Qe,Zi);var Ie=0;function gt(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Bt(n){n.readyState=4,n.l=null,n.j=null,n.A=null,rn(n)}function rn(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=Qe.prototype).open=function(n,e){if(this.readyState!=Ie)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,rn(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bt(this)),this.readyState=Ie},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,rn(this)),this.g&&(this.readyState=3,rn(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==xt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gt(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bt(this):rn(this),3==this.readyState&&gt(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Bt(this))},tt.Ta=function(n){this.g&&(this.response=n,Bt(this))},tt.ha=function(){this.g&&Bt(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Qe.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Xs=xt.JSON.parse;function Fn(n){Zi.call(this),this.headers=new qh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ay,this.K=this.L=!1}yr(Fn,Zi);var ay="",jb=/^https?$/i,Gb=["POST","PUT"];function $b(n){return"content-type"==n.toLowerCase()}function ly(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,cy(n),Kh(n)}function cy(n){n.D||(n.D=!0,Bi(n,"complete"),Bi(n,"error"))}function uy(n){if(n.h&&void 0!==qp&&(!n.C[1]||4!=sd(n)||2!=n.ba()))if(n.v&&4==sd(n))Q_(n.Fa,0,n);else if(Bi(n,"readystatechange"),4==sd(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===h){var r=String(n.H).match(Bb)[1]||null;if(!r&&xt.self&&xt.self.location){var a=xt.self.location.protocol;r=a.substr(0,a.length-1)}i=!jb.test(r?r.toLowerCase():"")}t=i}if(t)Bi(n,"complete"),Bi(n,"success");else{n.m=6;try{var c=2<sd(n)?n.g.statusText:""}catch(m){c=""}n.j=c+" ["+n.ba()+"]",cy(n)}}finally{Kh(n)}}}function Kh(n,e){if(n.g){DN(n);const t=n.g,i=n.C[0]?Wp:null;n.g=null,n.C=null,e||Bi(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function DN(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function sd(n){return n.g?n.g.readyState:0}function IN(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ay:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function rx(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function XB(n){let e="";return db(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pn(n,e,t))}function qb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function SN(n){this.za=0,this.l=[],this.h=new X_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=qb("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=qb("baseRetryDelayMs",5e3,n),this.$a=qb("retryDelaySeedMs",1e4,n),this.Ya=qb("forwardChannelMaxRetries",2,n),this.ra=qb("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new d(n&&n.concurrentRequestLimit),this.Ca=new j,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function sx(n){if(TN(n),3==n.G){var e=n.V++,t=Ml(n.F);Pn(t,"SID",n.J),Pn(t,"RID",e),Pn(t,"TYPE","terminate"),Wb(n,t),(e=new tm(n,n.h,e,void 0)).K=2,e.v=sy(Ml(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=FN(e.l,null),e.g.ea(e.v)),e.F=Date.now(),xc(e)}NN(n)}function EI(n){n.g&&(lx(n),n.g.cancel(),n.g=null)}function TN(n){EI(n),n.u&&(xt.clearTimeout(n.u),n.u=null),DI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function ox(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&CI(n)}function CI(n){g(n.i)||n.m||(n.m=!0,Ib(n.Ha,n),n.C=0)}function AN(n,e){var t;t=e?e.m:n.V++;const i=Ml(n.F);Pn(i,"SID",n.J),Pn(i,"RID",t),Pn(i,"AID",n.U),Wb(n,i),n.o&&n.s&&rx(i,n.o,n.s),t=new tm(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=MN(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),D(n.i,t),im(t,i,e)}function Wb(n,e){n.j&&Lb({},function(t,i){Pn(e,i,t)})}function MN(n,e,t){t=Math.min(n.l.length,t);var i=n.j?Rr(n.j.Oa,n.j,n):null;e:{var r=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=r[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let y=r[m].h;const C=r[m].g;if(y-=a,0>y)a=Math.max(0,r[m].h-100),h=!1;else try{Q(C,c,"req"+y+"_")}catch(S){i&&i(C)}}if(h){i=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function xN(n){n.g||n.u||(n.Y=1,Ib(n.Ga,n),n.A=0)}function ax(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=zh(Rr(n.Ga,n),ON(n,n.A)),n.A++,0))}function lx(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function kN(n){n.g=new tm(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ml(n.oa);Pn(e,"RID","rpc"),Pn(e,"SID",n.J),Pn(e,"CI",n.N?"0":"1"),Pn(e,"AID",n.U),Wb(n,e),Pn(e,"TYPE","xmlhttp"),n.o&&n.s&&rx(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=sy(Ml(e)),t.s=null,t.U=!0,ty(t,n)}function DI(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function RN(n,e){var t=null;if(n.g==e){DI(n),lx(n),n.g=null;var i=2}else{if(!E(n.i,e))return;t=e.D,M(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;Bi(i=Jp(),new WM(i,t,e,r)),CI(n)}else xN(n);else if(3==(r=e.o)||0==r&&0<n.I||!(1==i&&function JB(n,e){return!(w(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=zh(Rr(n.Ha,n,e),ON(n,n.C)),n.C++,0)))}(n,e)||2==i&&ax(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:am(n,5);break;case 4:am(n,10);break;case 3:am(n,6);break;default:am(n,2)}}function ON(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function am(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=Rr(n.jb,n);t||(t=new id("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||rm(t,"https"),sy(t)),function we(n,e){const t=new X_;if(xt.Image){const i=new Image;i.onload=Yp(Pe,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Yp(Pe,t,i,"TestLoadImage: error",!1,e),i.onabort=Yp(Pe,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Yp(Pe,t,i,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else ws(2);n.G=0,n.j&&n.j.va(e),NN(n),TN(n)}function NN(n){n.G=0,n.I=-1,n.j&&((0!=k(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ab(n.l),n.l.length=0),n.j.ua())}function PN(n,e,t){let i=function XM(n){return n instanceof id?Ml(n):new id(n,void 0)}(t);if(""!=i.i)e&&Wh(i,e+"."+i.i),Hb(i,i.m);else{const r=xt.location;i=function vN(n,e,t,i){var r=new id(null,void 0);return n&&rm(r,n),e&&Wh(r,e),t&&Hb(r,t),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return n.aa&&db(n.aa,function(r,a){Pn(i,a,r)}),t=n.sa,(e=n.D)&&t&&Pn(i,e,t),Pn(i,"VER",n.ma),Wb(n,i),i}function FN(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Fn(t&&n.Ba&&!n.qa?new Be({ib:!0}):n.qa)).L=n.H,e}function LN(){}function II(){if(Hh&&!(10<=Number(oI)))throw Error("Environmental error: no available transport.")}function ga(n,e){Zi.call(this),this.g=new SN(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!W_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!W_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new dy(this)}function VN(n){gI.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function BN(){_I.call(this),this.status=1}function dy(n){this.g=n}(tt=Fn.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Nb.g(),this.C=function KM(n){return n.h||(n.h=n.i())}(this.u?this.u:Nb),this.g.onreadystatechange=Rr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void ly(this,a)}n=t||"";const r=new qh(this.headers);i&&Lb(i,function(a,c){r.set(c,a)}),i=function ob(n){e:{var e=$b;const t=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<t;r++)if(r in i&&e.call(void 0,i[r],r,n)){e=r;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(r.T()),t=xt.FormData&&n instanceof xt.FormData,!(0<=ZD(Gb,e))||i||t||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{DN(this),0<this.B&&((this.K=function zb(n){return Hh&&function gN(){return function JD(n){var e=mN;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=lb(String(mb)).split("."),t=lb("9").split("."),i=Math.max(e.length,t.length);for(let c=0;0==n&&c<i;c++){var r=e[c]||"",a=t[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==r[0].length&&0==a[0].length)break;n=cb(0==r[1].length?0:parseInt(r[1],10),0==a[1].length?0:parseInt(a[1],10))||cb(0==r[2].length,0==a[2].length)||cb(r[2],a[2]),r=r[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rr(this.pa,this)):this.A=Q_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){ly(this,a)}},tt.pa=function(){void 0!==qp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bi(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Bi(this,"complete"),Bi(this,"abort"),Kh(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kh(this,!0)),Fn.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?uy(this):this.cb())},tt.cb=function(){uy(this)},tt.ba=function(){try{return 2<sd(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Xs(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=SN.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new tm(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=hb(a),fb(a,this.P)):a=this.P),null===this.o&&(r.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=MN(this,r,e),Pn(t=Ml(this.F),"RID",n),Pn(t,"CVER",22),this.D&&Pn(t,"X-HTTP-Session-Id",this.D),Wb(this,t),this.o&&a&&rx(t,this.o,a),D(this.i,r),this.Ra&&Pn(t,"TYPE","init"),this.ja?(Pn(t,"$req",e),Pn(t,"SID","null"),r.$=!0,im(r,t,null)):im(r,t,e),this.G=2}}else 3==this.G&&(n?AN(this,n):0==this.l.length||g(this.i)||AN(this))},tt.Ga=function(){if(this.u=null,kN(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=zh(Rr(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ws(10),EI(this),kN(this))},tt.ab=function(){null!=this.v&&(this.v=null,EI(this),ax(this),ws(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ws(2)):(this.h.info("Failed to ping google.com"),ws(1))},(tt=LN.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},II.prototype.g=function(n,e){return new ga(n,e)},yr(ga,Zi),ga.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ib(Rr(n.hb,n,e))),ws(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=PN(n,null,n.W),CI(n)},ga.prototype.close=function(){sx(this.g)},ga.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,ox(this.g,e)}else this.v?((e={}).__data__=Eb(n),ox(this.g,e)):ox(this.g,n)},ga.prototype.M=function(){this.g.j=null,delete this.j,sx(this.g),delete this.g,ga.Z.M.call(this)},yr(VN,gI),yr(BN,_I),yr(dy,LN),dy.prototype.xa=function(){Bi(this.g,"a")},dy.prototype.wa=function(n){Bi(this.g,new VN(n))},dy.prototype.va=function(n){Bi(this.g,new BN(n))},dy.prototype.ua=function(){Bi(this.g,"b")},II.prototype.createWebChannel=II.prototype.g,ga.prototype.send=ga.prototype.u,ga.prototype.open=ga.prototype.m,ga.prototype.close=ga.prototype.close,J_.NO_ERROR=0,J_.TIMEOUT=8,J_.HTTP_ERROR=6,mI.COMPLETE="complete",YM.EventType=ey,ey.OPEN="a",ey.CLOSE="b",ey.ERROR="c",ey.MESSAGE="d",Zi.prototype.listen=Zi.prototype.N,Fn.prototype.listenOnce=Fn.prototype.O,Fn.prototype.getLastError=Fn.prototype.La,Fn.prototype.getLastErrorCode=Fn.prototype.Da,Fn.prototype.getStatus=Fn.prototype.ba,Fn.prototype.getResponseJson=Fn.prototype.Qa,Fn.prototype.getResponseText=Fn.prototype.ga,Fn.prototype.send=Fn.prototype.ea;var e2=Zs.createWebChannelTransport=function(){return new II},t2=Zs.getStatEventTarget=function(){return Jp()},cx=Zs.ErrorCode=J_,n2=Zs.EventType=mI,r2=Zs.Event=Mc,HN=Zs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},s2=Zs.FetchXmlHttpFactory=Be,SI=Zs.WebChannel=YM,o2=Zs.XhrIo=Fn;const UN="@firebase/firestore";class es{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let hy="9.6.11";const Yh=new mi.Yd("@firebase/firestore");function ux(){return Yh.logLevel}function Fe(n,...e){if(Yh.logLevel<=mi.in.DEBUG){const t=e.map(dx);Yh.debug(`Firestore (${hy}): ${n}`,...t)}}function Qi(n,...e){if(Yh.logLevel<=mi.in.ERROR){const t=e.map(dx);Yh.error(`Firestore (${hy}): ${n}`,...t)}}function Kb(n,...e){if(Yh.logLevel<=mi.in.WARN){const t=e.map(dx);Yh.warn(`Firestore (${hy}): ${n}`,...t)}}function dx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${hy}) INTERNAL ASSERTION FAILED: `+n;throw Qi(e),new Error(e)}function kt(n,e){n||lt()}function $e(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(es.UNAUTHENTICATED))}shutdown(){}}class u2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class d2{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const a=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let c=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Pr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,ye.Z)(function*(){yield y.promise,yield a(i.currentUser)}))},m=y=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Pr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(kt("string"==typeof i.accessToken),new jN(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new es(e)}}class h2{constructor(e,t,i){this.type="FirstParty",this.user=es.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class f2{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new h2(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p2{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=a=>{null!=a.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,Fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const r=a=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?r(a):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.p=t.token,new GN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class _a{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.I(i),this.T=i=>t.writeSequenceNumber(i))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function m2(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}_a.A=-1;class zN{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=m2(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%e.length))}return i}}function jt(n,e){return n<e?-1:n>e?1:0}function fy(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function $N(n){return n+"\0"}class Hi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hi.fromMillis(Date.now())}static fromDate(e){return Hi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Hi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Hi(0,0))}static max(){return new It(new Hi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function qN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Yb{constructor(e,t,i){void 0===t?t=0:t>e.length&&lt(),void 0===i?i=e.length-t:i>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Yb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yb?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=e.get(r),c=t.get(r);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends Yb{construct(e,t,i){return new pn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(he.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const g2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends Yb{construct(e,t,i){return new Fr(e,t,i)}static isValidIdentifier(e){return g2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fr(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(0===i.length)throw new xe(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;r<e.length;){const h=e[r];if("\\"===h){if(r+1===e.length)throw new xe(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new xe(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,r+=2}else"`"===h?(c=!c,r++):"."!==h||c?(i+=h,r++):(a(),r++)}if(a(),c)throw new xe(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(t)}static emptyPath(){return new Fr([])}}class py{constructor(e){this.fields=e,e.sort(Fr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fy(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let a=0;a<i.length;++a)r+=String.fromCharCode(i[a]);return r}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const y2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zh(n){if(kt(!!n),"string"==typeof n){let e=0;const t=y2.exec(n);if(kt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Si(n.seconds),nanos:Si(n.nanos)}}function Si(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function cm(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function hx(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function KN(n){const e=n.mapValue.fields.__previous_value__;return hx(e)?KN(e):e}function Zb(n){const e=Zh(n.mapValue.fields.__local_write_time__.timestampValue);return new Hi(e.seconds,e.nanos)}class v2{constructor(e,t,i,r,a,c,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class od{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new od("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof od&&e.projectId===this.projectId&&e.database===this.database}}function um(n){return null==n}function Qb(n){return 0===n&&1/n==-1/0}function YN(n){return"number"==typeof n&&Number.isInteger(n)&&!Qb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(pn.fromString(e))}static fromName(e){return new Ge(pn.fromString(e).popFirst(5))}static empty(){return new Ge(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new pn(e.slice()))}}const ZN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},QN={nullValue:"NULL_VALUE"};function dm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hx(n)?4:tP(n)?9:10:lt()}function Rc(n,e){if(n===e)return!0;const t=dm(n);if(t!==dm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zb(n).isEqual(Zb(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const a=Zh(i.timestampValue),c=Zh(r.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,cm(n.bytesValue).isEqual(cm(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Si(i.geoPointValue.latitude)===Si(r.geoPointValue.latitude)&&Si(i.geoPointValue.longitude)===Si(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Si(i.integerValue)===Si(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const a=Si(i.doubleValue),c=Si(r.doubleValue);return a===c?Qb(a)===Qb(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return fy(n.arrayValue.values||[],e.arrayValue.values||[],Rc);case 10:return function(i,r){const a=i.mapValue.fields||{},c=r.mapValue.fields||{};if(qN(a)!==qN(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!Rc(a[h],c[h])))return!1;return!0}(n,e);default:return lt()}var r}function Xb(n,e){return void 0!==(n.values||[]).find(t=>Rc(t,e))}function Qh(n,e){if(n===e)return 0;const t=dm(n),i=dm(e);if(t!==i)return jt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(r,a){const c=Si(r.integerValue||r.doubleValue),h=Si(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return XN(n.timestampValue,e.timestampValue);case 4:return XN(Zb(n),Zb(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(r,a){const c=cm(r),h=cm(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(r,a){const c=r.split("/"),h=a.split("/");for(let m=0;m<c.length&&m<h.length;m++){const y=jt(c[m],h[m]);if(0!==y)return y}return jt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,a){const c=jt(Si(r.latitude),Si(a.latitude));return 0!==c?c:jt(Si(r.longitude),Si(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,a){const c=r.values||[],h=a.values||[];for(let m=0;m<c.length&&m<h.length;++m){const y=Qh(c[m],h[m]);if(y)return y}return jt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,a){const c=r.fields||{},h=Object.keys(c),m=a.fields||{},y=Object.keys(m);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const S=jt(h[C],y[C]);if(0!==S)return S;const x=Qh(c[h[C]],m[y[C]]);if(0!==x)return x}return jt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw lt()}}function XN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=Zh(n),i=Zh(e),r=jt(t.seconds,i.seconds);return 0!==r?r:jt(t.nanos,i.nanos)}function my(n){return fx(n)}function fx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Zh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?cm(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",a=!0;for(const c of i.values||[])a?a=!1:r+=",",r+=fx(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let a="{",c=!0;for(const h of r)c?c=!1:a+=",",a+=`${h}:${fx(i.fields[h])}`;return a+"}"}(n.mapValue):lt();var e}function hm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function px(n){return!!n&&"integerValue"in n}function Jb(n){return!!n&&"arrayValue"in n}function JN(n){return!!n&&"nullValue"in n}function eP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function TI(n){return!!n&&"mapValue"in n}function e0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return lm(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=e0(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=e0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tP(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function w2(n){return"nullValue"in n?QN:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hm(od.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function b2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hm(od.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ZN:lt()}function nP(n,e){return void 0===n?e:void 0===e||Qh(n,e)>0?n:e}function iP(n,e){return void 0===n?e:void 0===e||Qh(n,e)<0?n:e}class bs{constructor(e){this.value=e}static empty(){return new bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!TI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=e0(t)}setAll(e){let t=Fr.emptyPath(),i={},r=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,i,r),i={},r=[],t=h.popLast()}c?i[h.lastSegment()]=e0(c):r.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());TI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];TI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){lm(t,(r,a)=>e[r]=a);for(const r of i)delete e[r]}clone(){return new bs(e0(this.value))}}function rP(n){const e=[];return lm(n.fields,(t,i)=>{const r=new Fr([t]);if(TI(i)){const a=rP(i.mapValue).fields;if(0===a.length)e.push(r);else for(const c of a)e.push(r.child(c))}else e.push(r)}),new py(e)}class Xn{constructor(e,t,i,r,a,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Xn(e,0,It.min(),It.min(),bs.empty(),0)}static newFoundDocument(e,t,i){return new Xn(e,1,t,It.min(),i,0)}static newNoDocument(e,t){return new Xn(e,2,t,It.min(),bs.empty(),0)}static newUnknownDocument(e,t){return new Xn(e,3,t,It.min(),bs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class AI{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function mx(n){return n.fields.find(e=>2===e.kind)}function fm(n){return n.fields.filter(e=>2!==e.kind)}AI.UNKNOWN_ID=-1;class MI{constructor(e,t){this.fieldPath=e,this.kind=t}}class t0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new t0(0,ad.min())}}function sP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=It.fromTimestamp(1e9===i?new Hi(t+1,0):new Hi(t,i));return new ad(r,Ge.empty(),e)}function E2(n){return new ad(n.readTime,n.key,-1)}class ad{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ad(It.min(),Ge.empty(),-1)}static max(){return new ad(It.max(),Ge.empty(),-1)}}function C2(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}class D2{constructor(e,t=null,i=[],r=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=c,this.endAt=h,this.P=null}}function oP(n,e=null,t=[],i=[],r=null,a=null,c=null){return new D2(n,e,t,i,r,a,c)}function pm(n){const e=$e(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+my(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),um(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>my(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>my(i)).join(",")),e.P=t}return e.P}function n0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!O2(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!Rc(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dP(n.startAt,e.startAt)&&dP(n.endAt,e.endAt)}function xI(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function kI(n,e){return n.filters.filter(t=>t instanceof ts&&t.field.isEqual(e))}function aP(n,e,t){let i,r=!0;for(const a of kI(n,e)){let c,h=!0;switch(a.op){case"<":case"<=":c=w2(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,h=!1;break;case"!=":case"not-in":c=QN}nP(i,c)===c&&(i=c,r=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];nP(i,c)===c&&(i=c,r=t.inclusive);break}return{value:i,inclusive:r}}function lP(n,e,t){let i,r=!0;for(const a of kI(n,e)){let c,h=!0;switch(a.op){case">=":case">":c=b2(a.value),h=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,h=!1;break;case"!=":case"not-in":c=ZN}iP(i,c)===c&&(i=c,r=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];iP(i,c)===c&&(i=c,r=t.inclusive);break}return{value:i,inclusive:r}}class ts extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,i):new S2(e,t,i):"array-contains"===t?new M2(e,i):"in"===t?new x2(e,i):"not-in"===t?new k2(e,i):"array-contains-any"===t?new R2(e,i):new ts(e,t,i)}static V(e,t,i){return"in"===t?new T2(e,i):new A2(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Qh(t,this.value)):null!==t&&dm(this.value)===dm(t)&&this.v(Qh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class S2 extends ts{constructor(e,t,i){super(e,t,i),this.key=Ge.fromName(i.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class T2 extends ts{constructor(e,t){super(e,"in",t),this.keys=cP(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class A2 extends ts{constructor(e,t){super(e,"not-in",t),this.keys=cP(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cP(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Ge.fromName(i.referenceValue))}class M2 extends ts{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jb(t)&&Xb(t.arrayValue,this.value)}}class x2 extends ts{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xb(this.value.arrayValue,t)}}class k2 extends ts{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xb(this.value.arrayValue,t)}}class R2 extends ts{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Xb(this.value.arrayValue,i))}}class Xh{constructor(e,t){this.position=e,this.inclusive=t}}class gy{constructor(e,t="asc"){this.field=e,this.dir=t}}function O2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function uP(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],c=n.position[r];if(i=a.field.isKeyField()?Ge.comparator(Ge.fromName(c.referenceValue),t.key):Qh(c,t.data.field(a.field)),"desc"===a.dir&&(i*=-1),0!==i)break}return i}function dP(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rc(n.position[t],e.position[t]))return!1;return!0}class ld{constructor(e,t=null,i=[],r=[],a=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=m,this.D=null,this.C=null}}function hP(n,e,t,i,r,a,c,h){return new ld(n,e,t,i,r,a,c,h)}function _y(n){return new ld(n)}function RI(n){return!um(n.limit)&&"F"===n.limitType}function OI(n){return!um(n.limit)&&"L"===n.limitType}function gx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _x(n){for(const e of n.filters)if(e.S())return e.field;return null}function yx(n){return null!==n.collectionGroup}function yy(n){const e=$e(n);if(null===e.D){e.D=[];const t=_x(e),i=gx(e);if(null!==t&&null===i)t.isKeyField()||e.D.push(new gy(t)),e.D.push(new gy(Fr.keyField(),"asc"));else{let r=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(r=!0);if(!r){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new gy(Fr.keyField(),a))}}}return e.D}function ja(n){const e=$e(n);if(!e.C)if("F"===e.limitType)e.C=oP(e.path,e.collectionGroup,yy(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of yy(e))t.push(new gy(a.field,"desc"===a.dir?"asc":"desc"));const i=e.endAt?new Xh(e.endAt.position,!e.endAt.inclusive):null,r=e.startAt?new Xh(e.startAt.position,!e.startAt.inclusive):null;e.C=oP(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.C}function fP(n,e,t){return new ld(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function r0(n,e){return n0(ja(n),ja(e))&&n.limitType===e.limitType}function pP(n){return`${pm(ja(n))}|lt:${n.limitType}`}function vx(n){return`Query(target=${function I2(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${my(i.value)}`;var i}).join(", ")}]`),um(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>my(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>my(t)).join(",")),`Target(${e})`}(ja(n))}; limitType=${n.limitType})`}function wx(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):Ge.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,a,c){const h=uP(r,a,c);return r.inclusive?h<=0:h<0}(t.startAt,yy(t),i)||t.endAt&&!function(r,a,c){const h=uP(r,a,c);return r.inclusive?h>=0:h>0}(t.endAt,yy(t),i)));var t,i}function mP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gP(n){return(e,t)=>{let i=!1;for(const r of yy(n)){const a=N2(r,e,t);if(0!==a)return a;i=i||r.field.isKeyField()}return 0}}function N2(n,e,t){const i=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(r,a,c){const h=a.data.field(r),m=c.data.field(r);return null!==h&&null!==m?Qh(h,m):lt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return lt()}}function _P(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qb(e)?"-0":e}}function yP(n){return{integerValue:""+n}}function vP(n,e){return YN(e)?yP(e):_P(n,e)}class NI{constructor(){this._=void 0}}function P2(n,e,t){return n instanceof vy?function(i,r){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(a.fields.__previous_value__=r),{mapValue:a}}(t,e):n instanceof mm?bP(n,e):n instanceof gm?EP(n,e):function(i,r){const a=wP(i,r),c=CP(a)+CP(i.k);return px(a)&&px(i.k)?yP(c):_P(i.M,c)}(n,e)}function F2(n,e,t){return n instanceof mm?bP(n,e):n instanceof gm?EP(n,e):t}function wP(n,e){return n instanceof wy?px(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class vy extends NI{}class mm extends NI{constructor(e){super(),this.elements=e}}function bP(n,e){const t=DP(e);for(const i of n.elements)t.some(r=>Rc(r,i))||t.push(i);return{arrayValue:{values:t}}}class gm extends NI{constructor(e){super(),this.elements=e}}function EP(n,e){let t=DP(e);for(const i of n.elements)t=t.filter(r=>!Rc(r,i));return{arrayValue:{values:t}}}class wy extends NI{constructor(e,t){super(),this.M=e,this.k=t}}function CP(n){return Si(n.integerValue||n.doubleValue)}function DP(n){return Jb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class s0{constructor(e,t){this.field=e,this.transform=t}}class V2{constructor(e,t){this.version=e,this.transformResults=t}}class Xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function PI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class FI{}function B2(n,e,t){n instanceof o0?function(i,r,a){const c=i.value.clone(),h=AP(i.fieldTransforms,r,a.transformResults);c.setAll(h),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof _m?function(i,r,a){if(!PI(i.precondition,r))return void r.convertToUnknownDocument(a.version);const c=AP(i.fieldTransforms,r,a.transformResults),h=r.data;h.setAll(TP(i)),h.setAll(c),r.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function bx(n,e,t){var r;n instanceof o0?function(i,r,a){if(!PI(i.precondition,r))return;const c=i.value.clone(),h=MP(i.fieldTransforms,a,r);c.setAll(h),r.convertToFoundDocument(SP(r),c).setHasLocalMutations()}(n,e,t):n instanceof _m?function(i,r,a){if(!PI(i.precondition,r))return;const c=MP(i.fieldTransforms,a,r),h=r.data;h.setAll(TP(i)),h.setAll(c),r.convertToFoundDocument(SP(r),h).setHasLocalMutations()}(n,e,t):PI(n.precondition,r=e)&&r.convertToNoDocument(It.min())}function H2(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=wP(i.transform,r||null);null!=a&&(null==t&&(t=bs.empty()),t.set(i.field,a))}return t||null}function IP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&fy(t,i,(r,a)=>function L2(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof mm&&i instanceof mm||t instanceof gm&&i instanceof gm?fy(t.elements,i.elements,Rc):t instanceof wy&&i instanceof wy?Rc(t.k,i.k):t instanceof vy&&i instanceof vy);var t,i}(r,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}function SP(n){return n.isFoundDocument()?n.version:It.min()}class o0 extends FI{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}}class _m extends FI{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}}function TP(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function AP(n,e,t){const i=new Map;kt(n.length===t.length);for(let r=0;r<t.length;r++){const a=n[r],c=a.transform,h=e.data.field(a.field);i.set(a.field,F2(c,h,t[r]))}return i}function MP(n,e,t){const i=new Map;for(const r of n){const a=r.transform,c=t.data.field(r.field);i.set(r.field,P2(a,c,e))}return i}class a0 extends FI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Ex extends FI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class U2{constructor(e){this.count=e}}var Ji,mn;function xP(n){switch(n){default:return lt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function kP(n){if(void 0===n)return Qi("GRPC error has no .code"),he.UNKNOWN;switch(n){case Ji.OK:return he.OK;case Ji.CANCELLED:return he.CANCELLED;case Ji.UNKNOWN:return he.UNKNOWN;case Ji.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Ji.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Ji.INTERNAL:return he.INTERNAL;case Ji.UNAVAILABLE:return he.UNAVAILABLE;case Ji.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Ji.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Ji.NOT_FOUND:return he.NOT_FOUND;case Ji.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Ji.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Ji.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Ji.ABORTED:return he.ABORTED;case Ji.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Ji.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Ji.DATA_LOSS:return he.DATA_LOSS;default:return lt()}}(mn=Ji||(Ji={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";class Jh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,a]of i)if(this.equalsFn(r,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lm(this.inner,(t,i)=>{for(const[r,a]of i)e(r,a)})}isEmpty(){return WN(this.inner)}size(){return this.innerSize}}class Ui{constructor(e,t){this.comparator=e,this.root=t||ns.EMPTY}insert(e,t){return new Ui(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new Ui(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new LI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new LI(this.root,e,this.comparator,!1)}getReverseIterator(){return new LI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new LI(this.root,e,this.comparator,!0)}}class LI{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=null!=i?i:ns.RED,this.left=null!=r?r:ns.EMPTY,this.right=null!=a?a:ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new ns(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ns.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new ns(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jn{constructor(e){this.comparator=e,this.data=new Ui(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new RP(this.data.getIterator())}getIteratorFrom(e){return new RP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(0!==this.comparator(r,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Jn(this.comparator);return t.data=e,t}}class RP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function by(n){return n.hasNext()?n.getNext():void 0}const j2=new Ui(Ge.comparator);function Ga(){return j2}const G2=new Ui(Ge.comparator);function Cx(){return G2}function l0(){return new Jh(n=>n.toString(),(n,e)=>n.isEqual(e))}const z2=new Ui(Ge.comparator),$2=new Jn(Ge.comparator);function Sn(...n){let e=$2;for(const t of n)e=e.add(t);return e}const q2=new Jn(jt);function VI(){return q2}class c0{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,u0.createSynthesizedTargetChangeForCurrentChange(e,t)),new c0(It.min(),i,VI(),Ga(),Sn())}}class u0{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new u0(wr.EMPTY_BYTE_STRING,t,Sn(),Sn(),Sn())}}class BI{constructor(e,t,i,r){this.O=e,this.removedTargetIds=t,this.key=i,this.F=r}}class OP{constructor(e,t){this.targetId=e,this.$=t}}class NP{constructor(e,t,i=wr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class PP{constructor(){this.B=0,this.L=LP(),this.U=wr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Sn(),t=Sn(),i=Sn();return this.L.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:lt()}}),new u0(this.U,this.q,e,t,i)}J(){this.K=!1,this.L=LP()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class W2{constructor(e){this.nt=e,this.st=new Map,this.it=Ga(),this.rt=FP(),this.ot=new Jn(jt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const i=this.lt(t);switch(e.state){case 0:this.ft(t)&&i.W(e.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(e.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(t);break;case 3:this.ft(t)&&(i.et(),i.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),i.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((i,r)=>{this.ft(r)&&t(r)})}_t(e){const t=e.targetId,i=e.$.count,r=this.wt(t);if(r){const a=r.target;if(xI(a))if(0===i){const c=new Ge(a.path);this.ct(t,c,Xn.newNoDocument(c,It.min()))}else kt(1===i);else this.gt(t)!==i&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,c)=>{const h=this.wt(c);if(h){if(a.current&&xI(h.target)){const m=new Ge(h.target.path);null!==this.it.get(m)||this.It(c,m)||this.ct(c,m,Xn.newNoDocument(m,e))}a.j&&(t.set(c,a.H()),a.J())}});let i=Sn();this.rt.forEach((a,c)=>{let h=!0;c.forEachWhile(m=>{const y=this.wt(m);return!y||2===y.purpose||(h=!1,!1)}),h&&(i=i.add(a))}),this.it.forEach((a,c)=>c.setReadTime(e));const r=new c0(e,t,this.ot,this.it,i);return this.it=Ga(),this.rt=FP(),this.ot=new Jn(jt),r}at(e,t){if(!this.ft(e))return;const i=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,i),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,i){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),i&&(this.it=this.it.insert(t,i))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new PP,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Jn(jt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new PP),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function FP(){return new Ui(Ge.comparator)}function LP(){return new Ui(Ge.comparator)}const K2={asc:"ASCENDING",desc:"DESCENDING"},Y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Z2{constructor(e,t){this.databaseId=e,this.N=t}}function d0(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VP(n,e){return n.N?e.toBase64():e.toUint8Array()}function Q2(n,e){return d0(n,e.toTimestamp())}function Lr(n){return kt(!!n),It.fromTimestamp(function(e){const t=Zh(e);return new Hi(t.seconds,t.nanos)}(n))}function Dx(n,e){return(t=n,new pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function BP(n){const e=pn.fromString(n);return kt(KP(e)),e}function h0(n,e){return Dx(n.databaseId,e.path)}function Oc(n,e){const t=BP(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(UP(t))}function Ix(n,e){return Dx(n.databaseId,e)}function HP(n){const e=BP(n);return 4===e.length?pn.emptyPath():UP(e)}function f0(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UP(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jP(n,e,t){return{name:h0(n,e),fields:t.value.mapValue.fields}}function GP(n,e,t){const i=Oc(n,e.name),r=Lr(e.updateTime),a=new bs({mapValue:{fields:e.fields}}),c=Xn.newFoundDocument(i,r,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function p0(n,e){let t;if(e instanceof o0)t={update:jP(n,e.key,e.value)};else if(e instanceof a0)t={delete:h0(n,e.key)};else if(e instanceof _m)t={update:jP(n,e.key,e.data),updateMask:oH(e.fieldMask)};else{if(!(e instanceof Ex))return lt();t={verify:h0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,a){const c=a.transform;if(c instanceof vy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof mm)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof gm)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof wy)return{fieldPath:a.field.canonicalString(),increment:c.k};throw lt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:Q2(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:lt()),t;var r}function Sx(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Xi.updateTime(Lr(r.updateTime)):void 0!==r.exists?Xi.exists(r.exists):Xi.none():Xi.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,c){let h=null;"setToServerValue"in c?(kt("REQUEST_TIME"===c.setToServerValue),h=new vy):"appendMissingElements"in c?h=new mm(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new gm(c.removeAllFromArray.values||[]):"increment"in c?h=new wy(a,c.increment):lt();const m=Fr.fromServerFormat(c.fieldPath);return new s0(m,h)}(n,r)):[];var r;if(e.update){const r=Oc(n,e.update.name),a=new bs({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new py((e.updateMask.fieldPaths||[]).map(y=>Fr.fromServerFormat(y)));return new _m(r,a,c,t,i)}return new o0(r,a,t,i)}if(e.delete){const r=Oc(n,e.delete);return new a0(r,t)}if(e.verify){const r=Oc(n,e.verify);return new Ex(r,t)}return lt()}function zP(n,e){return{documents:[Ix(n,e.path)]}}function $P(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Ix(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ix(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(m){if(0===m.length)return;const y=m.map(C=>function(S){if("=="===S.op){if(eP(S.value))return{unaryFilter:{field:Ey(S.field),op:"IS_NAN"}};if(JN(S.value))return{unaryFilter:{field:Ey(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(eP(S.value))return{unaryFilter:{field:Ey(S.field),op:"IS_NOT_NAN"}};if(JN(S.value))return{unaryFilter:{field:Ey(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ey(S.field),op:iH(S.op),value:S.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);r&&(t.structuredQuery.where=r);const a=function(m){if(0!==m.length)return m.map(y=>{return{field:Ey((C=y).field),direction:nH(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(y=e.limit,n.N||um(y)?y:{value:y});var y,h,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function qP(n){let e=HP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){kt(1===i);const C=t.from[0];C.allDescendants?r=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=WP(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new gy(Cy((S=C).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(C){let S;return S="object"==typeof C?C.value:C,um(S)?null:S}(t.limit));let m=null;var C;t.startAt&&(m=new Xh((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new Xh(C.values||[],!C.before)}(t.endAt)),hP(e,r,c,a,h,"F",m,y)}function WP(n){return n?void 0!==n.unaryFilter?[sH(n)]:void 0!==n.fieldFilter?[rH(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>WP(e)).reduce((e,t)=>e.concat(t)):lt():[]}function nH(n){return K2[n]}function iH(n){return Y2[n]}function Ey(n){return{fieldPath:n.canonicalString()}}function Cy(n){return Fr.fromServerFormat(n.fieldPath)}function rH(n){return ts.create(Cy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function sH(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Cy(n.unaryFilter.field);return ts.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Cy(n.unaryFilter.field);return ts.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Cy(n.unaryFilter.field);return ts.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Cy(n.unaryFilter.field);return ts.create(r,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function oH(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Js(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YP(e)),e=aH(n.get(t),e);return YP(e)}function aH(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function YP(n){return n+"\x01\x01"}function Nc(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const t=e-2,i=[];let r="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&lt(),n.charAt(c+1)){case"\x01":const h=n.substring(a,c);let m;0===r.length?m=h:(r+=h,m=r,r=""),i.push(m);break;case"\x10":r+=n.substring(a,c),r+="\0";break;case"\x11":r+=n.substring(a,c+1);break;default:lt()}a=c+2}return new pn(i)}const ZP=["userId","batchId"];function HI(n,e){return[n,Js(e)]}function QP(n,e,t){return[n,Js(e),t]}const lH={},cH=["prefixPath","collectionGroup","readTime","documentId"],uH=["prefixPath","collectionGroup","documentId"],dH=["collectionGroup","readTime","prefixPath","documentId"],hH=["canonicalId","targetId"],fH=["targetId","path"],pH=["path","targetId"],mH=["collectionId","parent"],gH=["indexId","uid"],_H=["uid","sequenceNumber"],yH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vH=["indexId","uid","orderedDocumentKey"],wH=["userId","collectionPath","documentId"],bH=["userId","collectionPath","largestBatchId"],EH=["userId","collectionGroup","largestBatchId"],XP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CH=[...XP,"documentOverlays"],JP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DH=[...JP,"indexConfiguration","indexState","indexEntries"],e1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,i)=>{t(e)})}static reject(e){return new pe((t,i)=>{i(e)})}static waitFor(e){return new pe((t,i)=>{let r=0,a=0,c=!1;e.forEach(h=>{++r,h.next(()=>{++a,c&&a===r&&t()},m=>i(m))}),c=!0,a===r&&t()})}static or(e){let t=pe.resolve(!1);for(const i of e)t=t.next(r=>r?pe.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,a)=>{i.push(t.call(this,r,a))}),this.waitFor(i)}}class UI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Pr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new m0(e,t.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=Tx(i.target.error);this.At.reject(new m0(e,r))}}static open(e,t,i,r){try{return new UI(t,e.transaction(r,i))}catch(a){throw new m0(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new SH(t)}}class xl{constructor(e,t,i){this.name=e,this.version=t,this.bt=i,12.2===xl.Vt((0,N.z$)())&&Qi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),vm(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,N.hl)())return!1;if(xl.St())return!0;const e=(0,N.z$)(),t=xl.Vt(e),i=0<t&&t<10,r=xl.Dt(e),a=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{i(c.target.result)},a.onblocked=()=>{r(new m0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;r("VersionError"===h.name?new xe(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new xe(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new m0(e,h))},a.onupgradeneeded=c=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=i=>t.Mt(i)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var a=this;return(0,ye.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.Nt(e);const m=UI.open(a.db,e,c?"readonly":"readwrite",i),y=r(m).next(C=>(m.Pt(),C)).catch(C=>(m.abort(C),pe.reject(C))).toPromise();return y.catch(()=>{}),yield m.Rt,y}catch(m){const y="FirebaseError"!==m.name&&h<3;if(Fe("SimpleDb","Transaction failed with error:",m.message,"Retrying:",y),a.close(),!y)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class IH{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return vm(this.Ft.delete())}}class m0 extends xe{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ym(n){return"IndexedDbTransactionError"===n.name}class SH{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),vm(i)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),vm(this.store.add(e))}get(e){return vm(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),vm(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),vm(this.store.count())}qt(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),a=[];return this.Kt(r,(c,h)=>{a.push(h)}).next(()=>a)}{const r=this.store.getAll(i.range);return new pe((a,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new pe((r,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.jt=!1;const r=this.cursor(i);return this.Kt(r,(a,c,h)=>h.delete())}Wt(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.Kt(r,t)}zt(e){const t=this.cursor({});return new pe((i,r)=>{t.onerror=a=>{const c=Tx(a.target.error);r(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():i()}):i()}})}Kt(e,t){const i=[];return new pe((r,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void r();const m=new IH(h),y=t(h.primaryKey,h.value,m);if(y instanceof pe){const C=y.catch(S=>(m.done(),pe.reject(S)));i.push(C)}m.isDone?r():null===m.Lt?h.continue():h.continue(m.Lt)}}).next(()=>pe.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.jt?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vm(n){return new pe((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=Tx(i.target.error);t(r)}})}let n1=!1;function Tx(n){const e=xl.Vt((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return n1||(n1=!0,setTimeout(()=>{throw i},0)),i}}return n}class r1 extends t1{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Vr(n,e){const t=$e(n);return xl.xt(t.Ht,e)}class Ax{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&B2(a,e,i[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&bx(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&bx(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const i=e.get(t.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Sn())}isEqual(e){return this.batchId===e.batchId&&fy(this.mutations,e.mutations,(t,i)=>IP(t,i))&&fy(this.baseMutations,e.baseMutations,(t,i)=>IP(t,i))}}class Mx{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){kt(e.mutations.length===i.length);let r=z2;const a=e.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,i[c].version);return new Mx(e,t,i,r)}}class xx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ef{constructor(e,t,i,r,a=It.min(),c=It.min(),h=wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new ef(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class s1{constructor(e){this.Jt=e}}function o1(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:h0(r=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:d0(r,a.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:wm(e.version)};else{if(!e.isUnknownDocument())return lt();i.unknownDocument={path:t.path.toArray(),version:wm(e.version)}}var r,a;return i}function jI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bm(n){const e=new Hi(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Dy(n,e){const t=(e.baseMutations||[]).map(a=>Sx(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const i=e.mutations.map(a=>Sx(n.Jt,a)),r=Hi.fromMillis(e.localWriteTimeMs);return new Ax(e.batchId,r,t,i)}function g0(n){const e=bm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bm(n.lastLimboFreeSnapshotVersion):It.min();let i;var r;return void 0!==n.query.documents?(kt(1===(r=n.query).documents.length),i=ja(_y(HP(r.documents[0])))):i=ja(qP(n.query)),new ef(i,n.targetId,0,n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken))}function a1(n,e){const t=wm(e.snapshotVersion),i=wm(e.lastLimboFreeSnapshotVersion);let r;r=xI(e.target)?zP(n.Jt,e.target):$P(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pm(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function kx(n){const e=qP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?fP(e,e.limit,"L"):e}function Rx(n,e){return new xx(e.largestBatchId,Sx(n.Jt,e.overlayMutation))}function l1(n,e){const t=e.path.lastSegment();return[n,Js(e.path.popLast()),t]}class AH{getBundleMetadata(e,t){return c1(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:bm(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return c1(e).put({bundleId:(i=t).id,createTime:wm(Lr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return u1(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:kx(r.bundledQuery),readTime:bm(r.readTime)};var r})}saveNamedQuery(e,t){return u1(e).put({name:(i=t).name,readTime:wm(Lr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function c1(n){return Vr(n,"bundles")}function u1(n){return Vr(n,"namedQueries")}class Ox{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Ox(e,t.uid||"")}getOverlay(e,t){return _0(e).get(l1(this.userId,t)).next(i=>i?Rx(this.M,i):null)}saveOverlays(e,t,i){const r=[];return i.forEach((a,c)=>{const h=new xx(t,c);r.push(this.Xt(e,h))}),pe.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(c=>r.add(Js(c.getCollectionPath())));const a=[];return r.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);a.push(_0(e).Qt("collectionPathOverlayIndex",h))}),pe.waitFor(a)}getOverlaysForCollection(e,t,i){const r=l0(),a=Js(t),c=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,Number.POSITIVE_INFINITY],!0);return _0(e).qt("collectionPathOverlayIndex",c).next(h=>{for(const m of h){const y=Rx(this.M,m);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const a=l0();let c;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _0(e).Wt({index:"collectionGroupOverlayIndex",range:h},(m,y,C)=>{const S=Rx(this.M,y);a.size()<r||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):C.done()}).next(()=>a)}Xt(e,t){return _0(e).put(function(i,r,a){const[c,h,m]=l1(r,a.mutation.key);return{userId:r,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:p0(i.Jt,a.mutation)}}(this.M,this.userId,t))}}function _0(n){return Vr(n,"documentOverlays")}class Em{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Si(e.integerValue));else if("doubleValue"in e){const i=Si(e.doubleValue);isNaN(i)?this.ne(t,13):(this.ne(t,15),Qb(i)?t.se(0):t.se(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ne(t,20),"string"==typeof i?t.ie(i):(t.ie(`${i.seconds||""}`),t.se(i.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(cm(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?tP(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):lt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const i=e.fields||{};this.ne(t,55);for(const r of Object.keys(i))this.re(r,t),this.te(i[r],t)}he(e,t){const i=e.values||[];this.ne(t,50);for(const r of i)this.te(r,t)}ae(e,t){this.ne(t,37),Ge.fromName(e).path.forEach(i=>{this.ne(t,60),this.le(i,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function MH(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function d1(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const a=MH(255&t[r]);if(i+=a,8!==a)break}return i}(n);return Math.ceil(e/8)}Em.fe=new Em;class xH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this._e(i.value),i=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.ge(i.value),i=t.next();this.ye()}pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(t<"\ud800"||"\udbff"<t)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{const r=t.codePointAt(0);this._e(240|r>>>18),this._e(128|63&r>>>12),this._e(128|63&r>>>6),this._e(128|63&r)}}this.we()}Ie(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{const r=t.codePointAt(0);this.ge(240|r>>>18),this.ge(128|63&r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r)}}this.ye()}Te(e){const t=this.Ee(e),i=d1(t);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Re(e){const t=this.Ee(e),i=d1(t);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(r){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,r,!1),new Uint8Array(a.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class kH{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class RH{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class y0{constructor(){this.De=new xH,this.Ce=new kH(this.De),this.xe=new RH(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class tf{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new tf(this.indexId,this.documentKey,this.arrayValue,i)}}function Cm(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=h1(n.arrayValue,e.arrayValue),0!==t?t:(t=h1(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function h1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class OH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const i=t;i.S()?this.Fe=i:this.Oe.push(i)}}$e(e){const t=mx(e);if(void 0!==t&&!this.Be(t))return!1;const i=fm(e);let r=0,a=0;for(;r<i.length&&this.Be(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Fe){const c=i[r];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[a++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(a>=this.Me.length||!this.Ue(this.Me[a++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class NH{constructor(){this.qe=new Nx}addToCollectionParentIndex(e,t){return this.qe.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getFieldIndex(e,t){return pe.resolve(null)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}updateCollectionGroup(e,t,i){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class Nx{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Jn(pn.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Jn(pn.comparator)).toArray()}}const Iy=new Uint8Array(0);class PH{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Nx,this.Ge=new Jh(i=>pm(i),(i,r)=>n0(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:i,parent:Js(r)};return f1(e).put(a)}return pe.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[$N(t),""],!1,!0);return f1(e).qt(r).next(a=>{for(const c of a){if(c.collectionId!==t)break;i.push(Nc(c.parent))}return i})}addFieldIndex(e,t){const i=GI(e),r={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;return delete r.indexId,i.add(r).next()}deleteFieldIndex(e,t){const i=GI(e),r=zI(e),a=v0(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=v0(e);let r=!0;const a=new Map;return pe.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(h=>{r&&(r=!!h),a.set(c,h)})).next(()=>{if(r){let c=Sn();const h=[];return pe.forEach(a,(m,y)=>{var C;Fe("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${pm(t)}`);const S=function(et,nt){const Pt=mx(nt);if(void 0===Pt)return null;for(const Gt of kI(et,Pt.fieldPath))switch(Gt.op){case"array-contains-any":return Gt.value.arrayValue.values||[];case"array-contains":return[Gt.value]}return null}(y,m),x=function(et,nt){const Pt=new Map;for(const Gt of fm(nt))for(const bn of kI(et,Gt.fieldPath))switch(bn.op){case"==":case"in":Pt.set(Gt.fieldPath.canonicalString(),bn.value);break;case"not-in":case"!=":return Pt.set(Gt.fieldPath.canonicalString(),bn.value),Array.from(Pt.values())}return null}(y,m),V=function(et,nt){const Pt=[];let Gt=!0;for(const bn of fm(nt)){const os=0===bn.kind?aP(et,bn.fieldPath,et.startAt):lP(et,bn.fieldPath,et.startAt);if(!os.value)return null;Pt.push(os.value),Gt&&(Gt=os.inclusive)}return new Xh(Pt,Gt)}(y,m),B=function(et,nt){const Pt=[];let Gt=!0;for(const bn of fm(nt)){const os=0===bn.kind?lP(et,bn.fieldPath,et.endAt):aP(et,bn.fieldPath,et.endAt);if(!os.value)return null;Pt.push(os.value),Gt&&(Gt=os.inclusive)}return new Xh(Pt,Gt)}(y,m),K=this.je(m,y,V),ve=this.je(m,y,B),Xe=this.We(m,y,x),rt=this.ze(m.indexId,S,K,!!V&&V.inclusive,ve,!!B&&B.inclusive,Xe);return pe.forEach(rt,et=>i.Gt(et,t.limit).next(nt=>{nt.forEach(Pt=>{const Gt=Ge.fromSegments(Pt.documentKey);c.has(Gt)||(c=c.add(Gt),h.push(Gt))})}))}).next(()=>h)}return pe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,i,r,a,c,h){const m=(null!=t?t.length:1)*Math.max(null!=i?i.length:1,null!=a?a.length:1),y=m/(null!=t?t.length:1),C=[];for(let S=0;S<m;++S){const x=t?this.He(t[S/y]):Iy,V=i?this.Je(e,x,i[S%y],r):this.Ye(e),B=a?this.Xe(e,x,a[S%y],c):this.Ye(e+1);C.push(...this.createRange(V,B,h.map(K=>this.Je(e,x,K,!0))))}return C}Je(e,t,i,r){const a=new tf(e,Ge.empty(),t,i);return r?a:a.ke()}Xe(e,t,i,r){const a=new tf(e,Ge.empty(),t,i);return r?a.ke():a}Ye(e){return new tf(e,Ge.empty(),Iy,Iy)}getFieldIndex(e,t){const i=new OH(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(a=>{const c=a.filter(h=>i.$e(h));return c.sort((h,m)=>m.fields.length-h.fields.length),c.length>0?c[0]:null})}Ze(e,t){const i=new y0;for(const r of fm(e)){const a=t.data.field(r.fieldPath);if(null==a)return null;const c=i.Ne(r.kind);Em.fe.Zt(a,c)}return i.Se()}He(e){const t=new y0;return Em.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const i=new y0;return Em.fe.Zt(hm(this.databaseId,t),i.Ne(function(r){const a=fm(r);return 0===a.length?0:a[a.length-1].kind}(e))),i.Se()}We(e,t,i){if(null===i)return[];let r=[];r.push(new y0);let a=0;for(const c of fm(e)){const h=i[a++];for(const m of r)if(this.en(t,c.fieldPath)&&Jb(h))r=this.nn(r,c,h);else{const y=m.Ne(c.kind);Em.fe.Zt(h,y)}}return this.sn(r)}je(e,t,i){return null==i?null:this.We(e,t,i.position)}sn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Se();return t}nn(e,t,i){const r=[...e],a=[];for(const c of i.arrayValue.values||[])for(const h of r){const m=new y0;m.seed(h.Se()),Em.fe.Zt(c,m.Ne(t.kind)),a.push(m)}return a}en(e,t){return!!e.filters.find(i=>i instanceof ts&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=GI(e),r=zI(e);return(t?i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.qt()).next(a=>{const c=[];return pe.forEach(a,h=>r.get([h.indexId,this.uid]).next(m=>{c.push(function(y,C){const S=C?new t0(C.sequenceNumber,new ad(bm(C.readTime),new Ge(Nc(C.documentKey)),C.largestBatchId)):t0.empty(),x=y.fields.map(([V,B])=>new MI(Fr.fromServerFormat(V),B));return new AI(y.indexId,y.collectionGroup,x,S)}(h,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const a=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==a?a:jt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=GI(e),a=zI(e);return this.rn(e).next(c=>r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>pe.forEach(h,m=>{return a.put({indexId:m.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:wm((x=i).readTime),documentKey:Js(x.documentKey.path),largestBatchId:x.largestBatchId});var x})))}updateIndexEntries(e,t){const i=new Map;return pe.forEach(t,(r,a)=>{const c=i.get(r.collectionGroup);return(c?pe.resolve(c):this.getFieldIndexes(e,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),pe.forEach(h,m=>this.on(e,r,m).next(y=>{const C=this.un(a,m);return y.isEqual(C)?pe.resolve():this.an(e,a,m,y,C)}))))})}cn(e,t,i,r){return v0(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(i,t.key),documentKey:t.key.path.toArray()})}hn(e,t,i,r){return v0(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(i,t.key),t.key.path.toArray()])}on(e,t,i){const r=v0(e);let a=new Jn(Cm);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.tn(i,t)])},(c,h)=>{a=a.add(new tf(i.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}un(e,t){let i=new Jn(Cm);const r=this.Ze(t,e);if(null==r)return i;const a=mx(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Jb(c))for(const h of c.arrayValue.values||[])i=i.add(new tf(t.indexId,e.key,this.He(h),r))}else i=i.add(new tf(t.indexId,e.key,Iy,r));return i}an(e,t,i,r,a){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,m,y,C,S){const x=h.getIterator(),V=m.getIterator();let B=by(x),K=by(V);for(;B||K;){let ve=!1,Xe=!1;if(B&&K){const rt=y(B,K);rt<0?Xe=!0:rt>0&&(ve=!0)}else null!=B?Xe=!0:ve=!0;ve?(C(K),K=by(V)):Xe?(S(B),B=by(x)):(B=by(x),K=by(V))}}(r,a,Cm,h=>{c.push(this.cn(e,t,i,h))},h=>{c.push(this.hn(e,t,i,h))}),pe.waitFor(c)}rn(e){let t=1;return zI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,a)=>{a.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((c,h)=>Cm(c,h)).filter((c,h,m)=>!h||0!==Cm(c,m[h-1]));const r=[];r.push(e);for(const c of i){const h=Cm(c,e),m=Cm(c,t);if(0===h)r[0]=e.ke();else if(h>0&&m<0)r.push(c),r.push(c.ke());else if(m>0)break}r.push(t);const a=[];for(let c=0;c<r.length;c+=2)a.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,Iy,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,Iy,[]]));return a}}function f1(n){return Vr(n,"collectionParents")}function v0(n){return Vr(n,"indexEntries")}function GI(n){return Vr(n,"indexConfiguration")}function zI(n){return Vr(n,"indexState")}const p1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vo{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Vo(e,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function m1(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let h=0;const m=i.Wt({range:c},(C,S,x)=>(h++,x.delete()));a.push(m.next(()=>{kt(1===h)}));const y=[];for(const C of t.mutations){const S=QP(e,C.key.path,t.batchId);a.push(r.delete(S)),y.push(C.key)}return pe.waitFor(a).next(()=>y)}function $I(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}Vo.DEFAULT_COLLECTION_PERCENTILE=10,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vo.DEFAULT=new Vo(41943040,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vo.DISABLED=new Vo(-1,0,0);class Px{constructor(e,t,i,r){this.userId=e,this.M=t,this.indexManager=i,this.referenceDelegate=r,this.ln={}}static Yt(e,t,i,r){kt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Px(a,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nf(e).Wt({index:"userMutationsIndex",range:i},(r,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const a=Sy(e),c=nf(e);return c.add({}).next(h=>{kt("number"==typeof h);const m=new Ax(h,t,i,r),y=function(x,V,B){const K=B.baseMutations.map(Xe=>p0(x.Jt,Xe)),ve=B.mutations.map(Xe=>p0(x.Jt,Xe));return{userId:V,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:K,mutations:ve}}(this.M,this.userId,m),C=[];let S=new Jn((x,V)=>jt(x.canonicalString(),V.canonicalString()));for(const x of r){const V=QP(this.userId,x.key.path,h);S=S.add(x.key.path.popLast()),C.push(c.put(y)),C.push(a.put(V,lH))}return S.forEach(x=>{C.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.ln[h]=m.keys()}),pe.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return nf(e).get(t).next(i=>i?(kt(i.userId===this.userId),Dy(this.M,i)):null)}fn(e,t){return this.ln[t]?pe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.ln[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let a=null;return nf(e).Wt({index:"userMutationsIndex",range:r},(c,h,m)=>{h.userId===this.userId&&(kt(h.batchId>=i),a=Dy(this.M,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return nf(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(r,a,c)=>{i=a.batchId,c.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nf(e).qt("userMutationsIndex",t).next(i=>i.map(r=>Dy(this.M,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=HI(this.userId,t.path),r=IDBKeyRange.lowerBound(i),a=[];return Sy(e).Wt({range:r},(c,h,m)=>{const[y,C,S]=c,x=Nc(C);if(y===this.userId&&t.path.isEqual(x))return nf(e).get(S).next(V=>{if(!V)throw lt();kt(V.userId===this.userId),a.push(Dy(this.M,V))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Jn(jt);const r=[];return t.forEach(a=>{const c=HI(this.userId,a.path),h=IDBKeyRange.lowerBound(c),m=Sy(e).Wt({range:h},(y,C,S)=>{const[x,V,B]=y,K=Nc(V);x===this.userId&&a.path.isEqual(K)?i=i.add(B):S.done()});r.push(m)}),pe.waitFor(r).next(()=>this.dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,a=HI(this.userId,i),c=IDBKeyRange.lowerBound(a);let h=new Jn(jt);return Sy(e).Wt({range:c},(m,y,C)=>{const[S,x,V]=m,B=Nc(x);S===this.userId&&i.isPrefixOf(B)?B.length===r&&(h=h.add(V)):C.done()}).next(()=>this.dn(e,h))}dn(e,t){const i=[],r=[];return t.forEach(a=>{r.push(nf(e).get(a).next(c=>{if(null===c)throw lt();kt(c.userId===this.userId),i.push(Dy(this.M,c))}))}),pe.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return m1(e.Ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),pe.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Sy(e).Wt({range:i},(a,c,h)=>{if(a[0]===this.userId){const m=Nc(a[1]);r.push(m)}else h.done()}).next(()=>{kt(0===r.length)})})}containsKey(e,t){return g1(e,this.userId,t)}wn(e){return _1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function g1(n,e,t){const i=HI(e,t.path),r=i[1],a=IDBKeyRange.lowerBound(i);let c=!1;return Sy(n).Wt({range:a,jt:!0},(h,m,y)=>{const[C,S,x]=h;C===e&&S===r&&(c=!0),y.done()}).next(()=>c)}function nf(n){return Vr(n,"mutations")}function Sy(n){return Vr(n,"documentMutations")}function _1(n){return Vr(n,"mutationQueues")}class Dm{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Dm(0)}static yn(){return new Dm(-1)}}class FH{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const i=new Dm(t.highestTargetId);return t.highestTargetId=i.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>It.fromTimestamp(new Hi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.pn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.In(e,r)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(i=>(i.targetCount+=1,this.En(t,i),this.In(e,i))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ty(e).delete(t.targetId)).next(()=>this.pn(e)).next(i=>(kt(i.targetCount>0),i.targetCount-=1,this.In(e,i)))}removeTargets(e,t,i){let r=0;const a=[];return Ty(e).Wt((c,h)=>{const m=g0(h);m.sequenceNumber<=t&&null===i.get(m.targetId)&&(r++,a.push(this.removeTargetData(e,m)))}).next(()=>pe.waitFor(a)).next(()=>r)}forEachTarget(e,t){return Ty(e).Wt((i,r)=>{const a=g0(r);t(a)})}pn(e){return y1(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}In(e,t){return y1(e).put("targetGlobalKey",t)}Tn(e,t){return Ty(e).put(a1(this.M,t))}En(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=pm(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let a=null;return Ty(e).Wt({range:r,index:"queryTargetsIndex"},(c,h,m)=>{const y=g0(h);n0(t,y.target)&&(a=y,m.done())}).next(()=>a)}addMatchingKeys(e,t,i){const r=[],a=rf(e);return t.forEach(c=>{const h=Js(c.path);r.push(a.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(e,i,c))}),pe.waitFor(r)}removeMatchingKeys(e,t,i){const r=rf(e);return pe.forEach(t,a=>{const c=Js(a.path);return pe.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(e,i,a)])})}removeMatchingKeysForTargetId(e,t){const i=rf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=rf(e);let a=Sn();return r.Wt({range:i,jt:!0},(c,h,m)=>{const y=Nc(c[1]),C=new Ge(y);a=a.add(C)}).next(()=>a)}containsKey(e,t){const i=Js(t.path),r=IDBKeyRange.bound([i],[$N(i)],!1,!0);let a=0;return rf(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},([c,h],m,y)=>{0!==c&&(a++,y.done())}).next(()=>a>0)}Et(e,t){return Ty(e).get(t).next(i=>i?g0(i):null)}}function Ty(n){return Vr(n,"targets")}function y1(n){return Vr(n,"targetGlobal")}function rf(n){return Vr(n,"targetDocuments")}function Im(n){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,ye.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==e1)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),Fx.apply(this,arguments)}function v1([n,e],[t,i]){const r=jt(n,t);return 0===r?jt(e,i):r}class LH{constructor(e){this.An=e,this.buffer=new Jn(v1),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();v1(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VH{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const i=this.Vn?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,ye.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(r){ym(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Im(r)}yield t.Sn(e)}))}}class BH{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(_a.A);const i=new LH(t);return this.Dn.forEachTarget(e,r=>i.bn(r.sequenceNumber)).next(()=>this.Dn.xn(e,r=>i.bn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Dn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(p1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p1):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let i,r,a,c,h,m,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),r=this.params.maximumSequenceNumbersToCollect):r=S,c=Date.now(),this.nthSequenceNumber(e,r))).next(S=>(i=S,h=Date.now(),this.removeTargets(e,i,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(S=>(y=Date.now(),ux()<=mi.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${r} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(y-m)+`ms\nTotal Duration: ${y-C}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:S})))}}class HH{constructor(e,t){this.db=e,this.garbageCollector=new BH(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}kn(e){let t=0;return this.xn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(i,r)=>t(r))}addReference(e,t,i){return qI(e,i)}removeReference(e,t,i){return qI(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return qI(e,t)}On(e,t){return function(i,r){let a=!1;return _1(i).zt(c=>g1(i,c,r).next(h=>(h&&(a=!0),pe.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let a=0;return this.Mn(e,(c,h)=>{if(h<=t){const m=this.On(e,c).next(y=>{if(!y)return a++,i.getEntry(e,c).next(()=>(i.removeEntry(c,It.min()),rf(e).delete([0,Js(c.path)])))});r.push(m)}}).next(()=>pe.waitFor(r)).next(()=>i.apply(e)).next(()=>a)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return qI(e,t)}Mn(e,t){const i=rf(e);let r,a=_a.A;return i.Wt({index:"documentTargetsIndex"},([c,h],{path:m,sequenceNumber:y})=>{0===c?(a!==_a.A&&t(new Ge(Nc(r)),a),a=y,r=m):a=_a.A}).next(()=>{a!==_a.A&&t(new Ge(Nc(r)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qI(n,e){return rf(n).put((i=n.currentSequenceNumber,{targetId:0,path:Js(e.path),sequenceNumber:i}));var i}class w1{constructor(){this.changes=new Jh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?pe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UH{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Sm(e).put(i)}removeEntry(e,t,i){return Sm(e).delete(function(r,a){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],jI(a),c[c.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Fn(e,i)))}getEntry(e,t){let i=Xn.newInvalidDocument(t);return Sm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(w0(t))},(r,a)=>{i=this.$n(t,a)}).next(()=>i)}Bn(e,t){let i={size:0,document:Xn.newInvalidDocument(t)};return Sm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(w0(t))},(r,a)=>{i={document:this.$n(t,a),size:$I(a)}}).next(()=>i)}getEntries(e,t){let i=Ga();return this.Ln(e,t,(r,a)=>{const c=this.$n(r,a);i=i.insert(r,c)}).next(()=>i)}Un(e,t){let i=Ga(),r=new Ui(Ge.comparator);return this.Ln(e,t,(a,c)=>{const h=this.$n(a,c);i=i.insert(a,h),r=r.insert(a,$I(c))}).next(()=>({documents:i,qn:r}))}Ln(e,t,i){if(t.isEmpty())return pe.resolve();let r=new Jn(C1);t.forEach(m=>r=r.add(m));const a=IDBKeyRange.bound(w0(r.first()),w0(r.last())),c=r.getIterator();let h=c.getNext();return Sm(e).Wt({index:"documentKeyIndex",range:a},(m,y,C)=>{const S=Ge.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&C1(h,S)<0;)i(h,null),h=c.getNext();h&&h.isEqual(S)&&(i(h,y),h=c.hasNext()?c.getNext():null),h?C.Ut(w0(h)):C.done()}).next(()=>{for(;h;)i(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),jI(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sm(e).qt(IDBKeyRange.bound(r,a,!0)).next(c=>{let h=Ga();for(const m of c){const y=this.$n(Ge.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,i,r){let a=Ga();const c=E1(t,i),h=E1(t,ad.max());return Sm(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(m,y,C)=>{const S=this.$n(Ge.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(S.key,S),a.size===r&&C.done()}).next(()=>a)}newChangeBuffer(e){return new jH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return b1(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}Fn(e,t){return b1(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const i=function TH(n,e){let t;if(e.document)t=GP(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Ge.fromSegments(e.noDocument.path),r=bm(e.noDocument.readTime);t=Xn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const i=Ge.fromSegments(e.unknownDocument.path),r=bm(e.unknownDocument.version);t=Xn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Hi(i[0],i[1]);return It.fromTimestamp(r)}(e.readTime)),t}(this.M,t);if(!i.isNoDocument()||!i.version.isEqual(It.min()))return i}return Xn.newInvalidDocument(e)}}class jH extends w1{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Jh(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Jn((a,c)=>jt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const h=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,h.readTime)),c.isValidDocument()){const m=o1(this.Kn.M,c);r=r.add(a.path.popLast()),i+=$I(m)-h.size,t.push(this.Kn.addEntry(e,a,m))}else if(i-=h.size,this.trackRemovals){const m=o1(this.Kn.M,c.convertToNoDocument(It.min()));t.push(this.Kn.addEntry(e,a,m))}}),r.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,i)),pe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(i=>(this.Gn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:i,qn:r})=>(r.forEach((a,c)=>{this.Gn.set(a,{size:c,readTime:i.get(a).readTime})}),i))}}function b1(n){return Vr(n,"remoteDocumentGlobal")}function Sm(n){return Vr(n,"remoteDocumentsV14")}function w0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function E1(n,e){const t=e.documentKey.path.toArray();return[n,jI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function C1(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let a=0;a<t.length-2&&a<i.length-2;++a)if(r=jt(t[a],i[a]),r)return r;return r=jt(t.length,i.length),r||(r=jt(t[t.length-2],i[i.length-2]),r||jt(t[t.length-1],i[i.length-1]))}class GH{constructor(e){this.M=e}kt(e,t,i,r){const a=new UI("createOrUpgrade",t);var h;i<1&&r>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZP,{unique:!0}),h.createObjectStore("documentMutations"),D1(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=pe.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),D1(e)),c=c.next(()=>function(h){const m=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",y)}(a))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(h,m){return m.store("mutations").qt().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZP,{unique:!0});const C=m.store("mutations"),S=y.map(x=>C.put(x));return pe.waitFor(S)})}(e,a))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(c=c.next(()=>this.Qn(a))),i<6&&r>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),i<7&&r>=7&&(c=c.next(()=>this.Wn(a))),i<8&&r>=8&&(c=c.next(()=>this.zn(e,a))),i<9&&r>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(c=c.next(()=>this.Hn(a))),i<11&&r>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(c=c.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:wH});m.createIndex("collectionPathOverlayIndex",bH,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",EH,{unique:!1})}(e)})),i<13&&r>=13&&(c=c.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:cH});m.createIndex("documentKeyIndex",uH),m.createIndex("collectionGroupIndex",dH)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:gH}).createIndex("sequenceNumberIndex",_H,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:yH}).createIndex("documentKeyIndex",vH,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((i,r)=>{t+=$I(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Qn(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.qt().next(r=>pe.forEach(r,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",c).next(h=>pe.forEach(h,m=>{kt(m.userId===a.userId);const y=Dy(this.M,m);return m1(e,a.userId,y).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const a=[];return i.Wt((c,h)=>{const m=new pn(c),y=[0,Js(m)];a.push(t.get(y).next(C=>C?pe.resolve():t.put({targetId:0,path:Js(m),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>pe.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:mH});const i=t.store("collectionParents"),r=new Nx,a=c=>{if(r.add(c)){const h=c.lastSegment(),m=c.popLast();return i.put({collectionId:h,parent:Js(m)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,h)=>{const m=new pn(c);return a(m.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,h,m],y)=>{const C=Nc(h);return a(C.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((i,r)=>{const a=g0(r),c=a1(this.M,a);return t.put(c)})}Jn(e,t){const i=t.store("remoteDocuments"),r=[];return i.Wt((a,c)=>{const h=t.store("remoteDocumentsV14"),m=(y=c,y.document?new Ge(pn.fromString(y.document.name).popFirst(5)):y.noDocument?Ge.fromSegments(y.noDocument.path):y.unknownDocument?Ge.fromSegments(y.unknownDocument.path):lt()).path.toArray();var y;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(h.put(C))}).next(()=>pe.waitFor(r))}}function D1(n){n.createObjectStore("targetDocuments",{keyPath:fH}).createIndex("documentTargetsIndex",pH,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hH,{unique:!0}),n.createObjectStore("targetGlobal")}const Lx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vx{constructor(e,t,i,r,a,c,h,m,y,C,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Yn=a,this.window=c,this.document=h,this.Xn=y,this.Zn=C,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=x=>Promise.resolve(),!Vx.vt())throw new xe(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HH(this,r),this.hs=t+"main",this.M=new s1(m),this.ls=new xl(this.hs,this.ts,new GH(this.M)),this.fs=new FH(this.referenceDelegate,this.M),this.ds=new UH(this.M),this._s=new AH,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===C&&Qi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(he.FAILED_PRECONDITION,Lx);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new _a(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var i=(0,ye.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ye.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>WI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(ym(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return b0(e).get("owner").next(t=>pe.resolve(this.bs(t)))}Vs(e){return WI(e).delete(this.clientId)}vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Vr(i,"clientMetadata");return r.qt().next(a=>{const c=e.Ds(a,18e5),h=a.filter(m=>-1===c.indexOf(m));return pe.forEach(h,m=>r.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const i of t)e.ws.removeItem(e.Cs(i.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?pe.resolve(!0):b0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(he.FAILED_PRECONDITION,Lx);return!1}}return!(!this.networkEnabled||!this.inForeground)||WI(e).qt().next(i=>void 0===this.Ds(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new r1(t,_a.A);return e.Rs(i).next(()=>e.Vs(i))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(i=>this.Ss(i.updateTimeMs,t)&&!this.xs(i.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>WI(e).qt().next(t=>this.Ds(t,18e5).map(i=>i.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Px.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new PH(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Ox.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,i){Fe("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",a=14===(c=this.ts)?DH:13===c?JP:12===c?CH:11===c?XP:void lt();var c;let h;return this.ls.runTransaction(e,r,a,m=>(h=new r1(m,this.es?this.es.next():_a.A),"readwrite-primary"===t?this.Es(h).next(y=>!!y||this.As(h)).next(y=>{if(!y)throw Qi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(he.FAILED_PRECONDITION,e1);return i(h)}).next(y=>this.Ps(h).next(()=>y)):this.$s(h).next(()=>i(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}$s(e){return b0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(he.FAILED_PRECONDITION,Lx)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return b0(e).put("owner",t)}static vt(){return xl.vt()}Rs(e){const t=b0(e);return t.get("owner").next(i=>this.bs(i)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}Ss(e,t){const i=Date.now();return!(e<i-t||e>i&&(Qi(`Detected an update time that is in the future: ${e} > ${i}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,N.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const i=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Qi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Qi("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function b0(n){return Vr(n,"owner")}function WI(n){return Vr(n,"clientMetadata")}function Bx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class zH{constructor(e,t,i){this.ds=e,this.Bs=t,this.indexManager=i}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(i=>this.Us(e,t,i))}Us(e,t,i){return this.ds.getEntry(e,t).next(r=>{for(const a of i)a.applyToLocalView(r);return r})}qs(e,t){e.forEach((i,r)=>{for(const a of t)a.applyToLocalView(r)})}Ks(e,t){return this.ds.getEntries(e,t).next(i=>this.Gs(e,i).next(()=>i))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(i=>this.qs(t,i))}Qs(e,t,i){return Ge.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.js(e,t.path):yx(t)?this.Ws(e,t,i):this.zs(e,t,i);var r}js(e,t){return this.Ls(e,new Ge(t)).next(i=>{let r=Cx();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Ws(e,t,i){const r=t.collectionGroup;let a=Cx();return this.indexManager.getCollectionParents(e,r).next(c=>pe.forEach(c,h=>{const m=(y=t,C=h.child(r),new ld(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.zs(e,m,i).next(y=>{y.forEach((C,S)=>{a=a.insert(C,S)})})}).next(()=>a))}zs(e,t,i){let r;return this.ds.getAllFromCollection(e,t.path,i).next(a=>(r=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const c of a)for(const h of c.mutations){const m=h.key;let y=r.get(m);null==y&&(y=Xn.newInvalidDocument(m),r=r.insert(m,y)),bx(h,y,c.localWriteTime),y.isFoundDocument()||(r=r.remove(m))}}).next(()=>(r.forEach((a,c)=>{wx(t,c)||(r=r.remove(a))}),r))}}class Hx{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Hs=i,this.Js=r}static Ys(e,t){let i=Sn(),r=Sn();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Hx(e,t.fromCache,i,r)}}class I1{Xs(e){this.Zs=e}Qs(e,t,i,r){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||i.isEqual(It.min())?this.ti(e,t):this.Zs.Ks(e,r).next(a=>{const c=this.ei(t,a);return(RI(t)||OI(t))&&this.ni(t.limitType,c,r,i)?this.ti(e,t):(ux()<=mi.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vx(t)),this.Zs.Qs(e,t,sP(i,-1)).next(h=>(c.forEach(m=>{h=h.insert(m.key,m)}),h)))});var a}ei(e,t){let i=new Jn(gP(e));return t.forEach((r,a)=>{wx(e,a)&&(i=i.add(a))}),i}ni(e,t,i,r){if(i.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ti(e,t){return ux()<=mi.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",vx(t)),this.Zs.Qs(e,t,ad.min())}}class $H{constructor(e,t,i,r){this.persistence=e,this.si=t,this.M=r,this.ii=new Ui(jt),this.ri=new Jh(a=>pm(a),n0),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(i)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new zH(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function S1(n,e,t,i){return new $H(n,e,t,i)}function T1(n,e){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,ye.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.Bs.getAllMutationBatches(i).next(a=>(r=a,t.ai(e),t.Bs.getAllMutationBatches(i))).next(a=>{const c=[],h=[];let m=Sn();for(const y of r){c.push(y.batchId);for(const C of y.mutations)m=m.add(C.key)}for(const y of a){h.push(y.batchId);for(const C of y.mutations)m=m.add(C.key)}return t.ci.Ks(i,m).next(y=>({hi:y,removedBatchIds:c,addedBatchIds:h}))})})}),Ux.apply(this,arguments)}function qH(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),a=t.ui.newChangeBuffer({trackRemovals:!0});return function(c,h,m,y){const C=m.batch,S=C.keys();let x=pe.resolve();return S.forEach(V=>{x=x.next(()=>y.getEntry(h,V)).next(B=>{const K=m.docVersions.get(V);kt(null!==K),B.version.compareTo(K)<0&&(C.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),y.addEntry(B)))})}),x.next(()=>c.Bs.removeMutationBatch(h,C))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.Bs.performConsistencyCheck(i)).next(()=>t.ci.Ks(i,r))})}function A1(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function WH(n,e){const t=$e(n),i=e.snapshotVersion;let r=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.ui.newChangeBuffer({trackRemovals:!0});r=t.ii;const h=[];e.targetChanges.forEach((y,C)=>{const S=r.get(C);if(!S)return;h.push(t.fs.removeMatchingKeys(a,y.removedDocuments,C).next(()=>t.fs.addMatchingKeys(a,y.addedDocuments,C)));let x=S.withSequenceNumber(a.currentSequenceNumber);var V,B,K;e.targetMismatches.has(C)?x=x.withResumeToken(wr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,i)),r=r.insert(C,x),B=x,K=y,(0===(V=S).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(a,x))});let m=Ga();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))}),h.push(M1(a,c,e.documentUpdates).next(y=>{m=y})),!i.isEqual(It.min())){const y=t.fs.getLastRemoteSnapshotVersion(a).next(C=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(y)}return pe.waitFor(h).next(()=>c.apply(a)).next(()=>t.ci.Gs(a,m)).next(()=>m)}).then(a=>(t.ii=r,a))}function M1(n,e,t){let i=Sn();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let a=Ga();return t.forEach((c,h)=>{const m=r.get(c);h.isNoDocument()&&h.version.isEqual(It.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||0===h.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):Fe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",m.version," Watch version:",h.version)}),a})}function KH(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(i,e)))}function Ay(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.fs.getTargetData(i,e).next(a=>a?(r=a,pe.resolve(r)):t.fs.allocateTargetId(i).next(c=>(r=new ef(e,c,0,i.currentSequenceNumber),t.fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ii.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ii=t.ii.insert(i.targetId,i),t.ri.set(e,i.targetId)),i})}function My(n,e,t){return jx.apply(this,arguments)}function jx(){return jx=(0,ye.Z)(function*(n,e,t){const i=$e(n),r=i.ii.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!ym(c))throw c;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.ii=i.ii.remove(e),i.ri.delete(r.target)}),jx.apply(this,arguments)}function KI(n,e,t){const i=$e(n);let r=It.min(),a=Sn();return i.persistence.runTransaction("Execute query","readonly",c=>function(h,m,y){const C=$e(h),S=C.ri.get(y);return void 0!==S?pe.resolve(C.ii.get(S)):C.fs.getTargetData(m,y)}(i,c,ja(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(c,h.targetId).next(m=>{a=m})}).next(()=>i.si.Qs(c,e,t?r:It.min(),t?a:Sn())).next(h=>(R1(i,mP(e),h),{documents:h,li:a})))}function x1(n,e){const t=$e(n),i=$e(t.fs),r=t.ii.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",a=>i.Et(a,e).next(c=>c?c.target:null))}function k1(n,e){const t=$e(n),i=t.oi.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.ui.getAllFromCollectionGroup(r,e,sP(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(R1(t,e,r),r))}function R1(n,e,t){let i=It.min();t.forEach((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.oi.set(e,i)}function Gx(){return Gx=(0,ye.Z)(function*(n,e,t,i){const r=$e(n);let a=Sn(),c=Ga();for(const y of t){const C=e.fi(y.metadata.name);y.document&&(a=a.add(C));const S=e.di(y);S.setReadTime(e._i(y.metadata.readTime)),c=c.insert(C,S)}const h=r.ui.newChangeBuffer({trackRemovals:!0}),m=yield Ay(r,(y=i,ja(_y(pn.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>M1(y,h,c).next(C=>(h.apply(y),C)).next(C=>r.fs.removeMatchingKeysForTargetId(y,m.targetId).next(()=>r.fs.addMatchingKeys(y,a,m.targetId)).next(()=>r.ci.Gs(y,C)).next(()=>C)))}),Gx.apply(this,arguments)}function ZH(n,e){return zx.apply(this,arguments)}function zx(){return zx=(0,ye.Z)(function*(n,e,t=Sn()){const i=yield Ay(n,ja(kx(e.bundledQuery))),r=$e(n);return r.persistence.runTransaction("Save named query","readwrite",a=>{const c=Lr(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r._s.saveNamedQuery(a,e);const h=i.withResumeToken(wr.EMPTY_BYTE_STRING,c);return r.ii=r.ii.insert(h.targetId,h),r.fs.updateTargetData(a,h).next(()=>r.fs.removeMatchingKeysForTargetId(a,i.targetId)).next(()=>r.fs.addMatchingKeys(a,t,i.targetId)).next(()=>r._s.saveNamedQuery(a,e))})}),zx.apply(this,arguments)}class QH{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return pe.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var i;return this.wi.set(t.id,{id:(i=t).id,version:i.version,createTime:Lr(i.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(i=t).name,query:kx(i.bundledQuery),readTime:Lr(i.readTime)}),pe.resolve();var i}}class XH{constructor(){this.overlays=new Ui(Ge.comparator),this.gi=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}saveOverlays(e,t,i){return i.forEach((r,a)=>{this.Xt(e,t,a)}),pe.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.gi.get(i);return void 0!==r&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.gi.delete(i)),pe.resolve()}getOverlaysForCollection(e,t,i){const r=l0(),a=t.length+1,c=new Ge(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&m.largestBatchId>i&&r.set(m.getKey(),m)}return pe.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new Ui((y,C)=>y-C);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let C=a.get(y.largestBatchId);null===C&&(C=l0(),a=a.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=l0(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,C)=>h.set(y,C)),!(h.size()>=r)););return pe.resolve(h)}Xt(e,t,i){if(null===i)return;const r=this.overlays.get(i.key);if(null!==r){const c=this.gi.get(r.largestBatchId).delete(i.key);this.gi.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new xx(t,i));let a=this.gi.get(t);void 0===a&&(a=Sn(),this.gi.set(t,a)),this.gi.set(t,a.add(i.key))}}class $x{constructor(){this.yi=new Jn(Br.pi),this.Ii=new Jn(Br.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const i=new Br(e,t);this.yi=this.yi.add(i),this.Ii=this.Ii.add(i)}Ei(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Ai(new Br(e,t))}Ri(e,t){e.forEach(i=>this.removeReference(i,t))}Pi(e){const t=new Ge(new pn([])),i=new Br(t,e),r=new Br(t,e+1),a=[];return this.Ii.forEachInRange([i,r],c=>{this.Ai(c),a.push(c.key)}),a}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Ge(new pn([])),i=new Br(t,e),r=new Br(t,e+1);let a=Sn();return this.Ii.forEachInRange([i,r],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Br(e,0),i=this.yi.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Br{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Ge.comparator(e.key,t.key)||jt(e.vi,t.vi)}static Ti(e,t){return jt(e.vi,t.vi)||Ge.comparator(e.key,t.key)}}class JH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Jn(Br.pi)}checkEmpty(e){return pe.resolve(0===this.Bs.length)}addMutationBatch(e,t,i,r){const a=this.Si;this.Si++;const c=new Ax(a,t,i,r);this.Bs.push(c);for(const h of r)this.Di=this.Di.add(new Br(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.xi(t+1),a=r<0?0:r;return pe.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return pe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Br(t,0),r=new Br(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([i,r],c=>{const h=this.Ci(c.vi);a.push(h)}),pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Jn(jt);return t.forEach(r=>{const a=new Br(r,0),c=new Br(r,Number.POSITIVE_INFINITY);this.Di.forEachInRange([a,c],h=>{i=i.add(h.vi)})}),pe.resolve(this.Ni(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;Ge.isDocumentKey(a)||(a=a.child(""));const c=new Br(new Ge(a),0);let h=new Jn(jt);return this.Di.forEachWhile(m=>{const y=m.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(m.vi)),!0)},c),pe.resolve(this.Ni(h))}Ni(e){const t=[];return e.forEach(i=>{const r=this.Ci(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){kt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let i=this.Di;return pe.forEach(t.mutations,r=>{const a=new Br(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Di=i})}_n(e){}containsKey(e,t){const i=new Br(t,0),r=this.Di.firstAfterOrEqual(i);return pe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return pe.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class eU{constructor(e){this.Mi=e,this.docs=new Ui(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,c=this.Mi(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return pe.resolve(i?i.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let i=Ga();return t.forEach(r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Xn.newInvalidDocument(r))}),pe.resolve(i)}getAllFromCollection(e,t,i){let r=Ga();const a=new Ge(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||C2(E2(m),i)<=0||(r=r.insert(m.key,m.mutableCopy()))}return pe.resolve(r)}getAllFromCollectionGroup(e,t,i,r){lt()}Oi(e,t){return pe.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new tU(this)}getSize(e){return pe.resolve(this.size)}}class tU extends w1{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Kn.addEntry(e,r)):this.Kn.removeEntry(i)}),pe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class nU{constructor(e){this.persistence=e,this.Fi=new Jh(t=>pm(t),n0),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.$i=0,this.Bi=new $x,this.targetCount=0,this.Li=Dm.gn()}forEachTarget(e,t){return this.Fi.forEach((i,r)=>t(r)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$i&&(this.$i=t),pe.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Dm(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Tn(t),pe.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.Fi.forEach((c,h)=>{h.sequenceNumber<=t&&null===i.get(h.targetId)&&(this.Fi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),pe.waitFor(a).next(()=>r)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const i=this.Fi.get(t)||null;return pe.resolve(i)}addMatchingKeys(e,t,i){return this.Bi.Ei(t,i),pe.resolve()}removeMatchingKeys(e,t,i){this.Bi.Ri(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach(c=>{a.push(r.markPotentiallyOrphaned(e,c))}),pe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Bi.Vi(t);return pe.resolve(i)}containsKey(e,t){return pe.resolve(this.Bi.containsKey(t))}}class iU{constructor(e,t){this.Ui={},this.overlays={},this.es=new _a(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new nU(this),this.indexManager=new NH,this.ds=new eU(i=>this.referenceDelegate.qi(i)),this.M=new s1(t),this._s=new QH(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Ui[e.toKey()];return i||(i=new JH(t,this.referenceDelegate),this.Ui[e.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,i){Fe("MemoryPersistence","Starting transaction:",e);const r=new rU(this.es.next());return this.referenceDelegate.Ki(),i(r).next(a=>this.referenceDelegate.Gi(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Qi(e,t){return pe.or(Object.values(this.Ui).map(i=>()=>i.containsKey(e,t)))}}class rU extends t1{constructor(e){super(),this.currentSequenceNumber=e}}class qx{constructor(e){this.persistence=e,this.ji=new $x,this.Wi=null}static zi(e){return new qx(e)}get Hi(){if(this.Wi)return this.Wi;throw lt()}addReference(e,t,i){return this.ji.addReference(i,t),this.Hi.delete(i.toString()),pe.resolve()}removeReference(e,t,i){return this.ji.removeReference(i,t),this.Hi.add(i.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(r=>this.Hi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(a=>this.Hi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Hi,i=>{const r=Ge.fromPath(i);return this.Ji(e,r).next(a=>{a||t.removeEntry(r,It.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(i=>{i?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return pe.or([()=>pe.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function O1(n,e){return`firestore_clients_${n}_${e}`}function N1(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Wx(n,e){return`firestore_targets_${n}_${e}`}class YI{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Yi(e,t,i){const r=JSON.parse(i);let a,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(a=new xe(r.error.code,r.error.message))),c?new YI(e,t,r.state,a):(Qi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class E0{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Yi(e,t){const i=JSON.parse(t);let r,a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&(a="string"==typeof i.error.message&&"string"==typeof i.error.code,a&&(r=new xe(i.error.code,i.error.message))),a?new E0(e,i.state,r):(Qi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ZI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,a=VI();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=YN(i.activeTargetIds[c]),a=a.add(i.activeTargetIds[c]);return r?new ZI(e,a):(Qi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Kx{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Kx(t.clientId,t.onlineState):(Qi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yx{constructor(){this.activeTargetIds=VI()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zx{constructor(e,t,i,r,a){this.window=e,this.Yn=t,this.persistenceKey=i,this.er=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Ui(jt),this.started=!1,this.rr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=O1(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Yx),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Fs();for(const r of t){if(r===e.er)continue;const a=e.getItem(O1(e.persistenceKey,r));if(a){const c=ZI.Yi(r,a);c&&(e.ir=e.ir.insert(c.clientId,c))}}e.wr();const i=e.storage.getItem(e.dr);if(i){const r=e.mr(i);r&&e.gr(r)}for(const r of e.rr)e.sr(r);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,i){this.pr(e,t,i),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Wx(this.persistenceKey,e));if(i){const r=E0.Yi(e,i);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wx(this.persistenceKey,e))}updateQueryState(e,t,i){this.Er(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Ir(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Fe("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ur)return void Qi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==i.key)if(t.cr.test(i.key)){if(null==i.newValue){const r=t.Pr(i.key);return t.br(r,null)}{const r=t.Vr(i.key,i.newValue);if(r)return t.br(r.clientId,r)}}else if(t.hr.test(i.key)){if(null!==i.newValue){const r=t.vr(i.key,i.newValue);if(r)return t.Sr(r)}}else if(t.lr.test(i.key)){if(null!==i.newValue){const r=t.Dr(i.key,i.newValue);if(r)return t.Cr(r)}}else if(i.key===t.dr){if(null!==i.newValue){const r=t.mr(i.newValue);if(r)return t.gr(r)}}else if(i.key===t.ar){const r=function(a){let c=_a.A;if(null!=a)try{const h=JSON.parse(a);kt("number"==typeof h),c=h}catch(h){Qi("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(i.newValue);r!==_a.A&&t.sequenceNumberHandler(r)}else if(i.key===t._r){const r=t.Nr(i.newValue);yield Promise.all(r.map(a=>t.syncEngine.kr(a)))}}else t.rr.push(i)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,i){const r=new YI(this.currentUser,e,t,i),a=N1(this.persistenceKey,this.currentUser,e);this.setItem(a,r.Xi())}Ir(e){const t=N1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,i){const r=Wx(this.persistenceKey,e),a=new E0(e,t,i);this.setItem(r,a.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const i=this.Pr(e);return ZI.Yi(i,t)}vr(e,t){const i=this.hr.exec(e),r=Number(i[1]);return YI.Yi(new es(void 0!==i[2]?i[2]:null),r,t)}Dr(e,t){const i=this.lr.exec(e),r=Number(i[1]);return E0.Yi(r,t)}mr(e){return Kx.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const i=t?this.ir.insert(e,t):this.ir.remove(e),r=this.yr(this.ir),a=this.yr(i),c=[],h=[];return a.forEach(m=>{r.has(m)||c.push(m)}),r.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.Fr(c,h).then(()=>{this.ir=i})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=VI();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class P1{constructor(){this.$r=new Yx,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,i){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new Yx,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sU{Lr(e){}shutdown(){}}class F1{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const oU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class aU{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class lU extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,i,r,a){const c=this.uo(e,t);Fe("RestConnection","Sending: ",c,i);const h={};return this.ao(h,r,a),this.co(e,c,h,i).then(m=>(Fe("RestConnection","Received: ",m),m),m=>{throw Kb("RestConnection",`${e} failed with error: `,m,"url: ",c,"request:",i),m})}ho(e,t,i,r,a){return this.oo(e,t,i,r,a)}ao(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+hy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,a)=>e[a]=r),i&&i.headers.forEach((r,a)=>e[a]=r)}uo(e,t){return`${this.io}/v1/${t}:${oU[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,i,r){return new Promise((a,c)=>{const h=new o2;h.listenOnce(n2.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case cx.NO_ERROR:const y=h.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(y)),a(y);break;case cx.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),c(new xe(he.DEADLINE_EXCEEDED,"Request time out"));break;case cx.HTTP_ERROR:const C=h.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const x=function(V){const B=V.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(B)>=0?B:he.UNKNOWN}(S.status);c(new xe(x,S.message))}else c(new xe(he.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new xe(he.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(r);h.send(t,"POST",m,i,15)})}lo(e,t,i){const r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=e2(),c=t2(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new s2({})),this.ao(h.initMessageHeaders,t,i),(0,N.uI)()||(0,N.b$)()||(0,N.d)()||(0,N.w1)()||(0,N.Mn)()||(0,N.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=r.join("");Fe("Connection","Creating WebChannel: "+m,h);const y=a.createWebChannel(m,h);let C=!1,S=!1;const x=new aU({Wr:B=>{S?Fe("Connection","Not sending because WebChannel is closed:",B):(C||(Fe("Connection","Opening WebChannel transport."),y.open(),C=!0),Fe("Connection","WebChannel sending:",B),y.send(B))},zr:()=>y.close()}),V=(B,K,ve)=>{B.listen(K,Xe=>{try{ve(Xe)}catch(rt){setTimeout(()=>{throw rt},0)}})};return V(y,SI.EventType.OPEN,()=>{S||Fe("Connection","WebChannel transport opened.")}),V(y,SI.EventType.CLOSE,()=>{S||(S=!0,Fe("Connection","WebChannel transport closed"),x.no())}),V(y,SI.EventType.ERROR,B=>{S||(S=!0,Kb("Connection","WebChannel transport errored:",B),x.no(new xe(he.UNAVAILABLE,"The operation could not be completed")))}),V(y,SI.EventType.MESSAGE,B=>{var K;if(!S){const ve=B.data[0];kt(!!ve);const Xe=ve,rt=Xe.error||(null===(K=Xe[0])||void 0===K?void 0:K.error);if(rt){Fe("Connection","WebChannel received error:",rt);const et=rt.status;let nt=function(Gt){const bn=Ji[Gt];if(void 0!==bn)return kP(bn)}(et),Pt=rt.message;void 0===nt&&(nt=he.INTERNAL,Pt="Unknown error status: "+et+" with message "+rt.message),S=!0,x.no(new xe(nt,Pt)),y.close()}else Fe("Connection","WebChannel received:",ve),x.so(ve)}}),V(c,r2.STAT_EVENT,B=>{B.stat===HN.PROXY?Fe("Connection","Detected buffering proxy"):B.stat===HN.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.eo()},0),x}}function L1(){return"undefined"!=typeof window?window:null}function QI(){return"undefined"!=typeof document?document:null}function C0(n){return new Z2(n,!0)}class Qx{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Yn=e,this.timerId=t,this.fo=i,this._o=r,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),i=Math.max(0,Date.now()-this.po),r=Math.max(0,t-i);r>0&&Fe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class V1{constructor(e,t,i,r,a,c,h,m){this.Yn=e,this.Ro=i,this.Po=r,this.bo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Qx(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,ye.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,ye.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var i=this;return(0,ye.Z)(function*(){i.$o(),i.Bo(),i.Do.cancel(),i.Vo++,4!==e?i.Do.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Qi(t.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),i.Do.Io()):t&&t.code===he.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Lo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Vo===t&&this.qo(i,r)},i=>{e(()=>{const r=new xe(he.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Ko(r)})})}qo(e,t){const i=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{i(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(r=>{i(()=>this.Ko(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}No(){var e=this;this.state=5,this.Do.To((0,ye.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cU extends V1{constructor(e,t,i,r,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,c),this.M=a}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function J2(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:lt(),r=e.targetChange.targetIds||[],a=function(m,y){return m.N?(kt(void 0===y||"string"==typeof y),wr.fromBase64String(y||"")):(kt(void 0===y||y instanceof Uint8Array),wr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(m){const y=void 0===m.code?he.UNKNOWN:kP(m.code);return new xe(y,m.message||"")}(c);t=new NP(i,r,a,h||null)}else if("documentChange"in e){const i=e.documentChange,r=Oc(n,i.document.name),a=Lr(i.document.updateTime),c=new bs({mapValue:{fields:i.document.fields}}),h=Xn.newFoundDocument(r,a,c);t=new BI(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const i=e.documentDelete,r=Oc(n,i.document),a=i.readTime?Lr(i.readTime):It.min(),c=Xn.newNoDocument(r,a);t=new BI([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const i=e.documentRemove,r=Oc(n,i.document);t=new BI([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return lt();{const i=e.filter,a=new U2(i.count||0);t=new OP(i.targetId,a)}}var m;return t}(this.M,e),i=function(r){if(!("targetChange"in r))return It.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?It.min():a.readTime?Lr(a.readTime):It.min()}(e);return this.listener.Qo(t,i)}jo(e){const t={};t.database=f0(this.M),t.addTarget=function(r,a){let c;const h=a.target;return c=xI(h)?{documents:zP(r,h)}:{query:$P(r,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=VP(r,a.resumeToken):a.snapshotVersion.compareTo(It.min())>0&&(c.readTime=d0(r,a.snapshotVersion.toTimestamp())),c}(this.M,e);const i=function tH(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Fo(t)}Wo(e){const t={};t.database=f0(this.M),t.removeTarget=e,this.Fo(t)}}class uU extends V1{constructor(e,t,i,r,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,c),this.M=a,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function eH(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(i,r){let a=Lr(i.updateTime?i.updateTime:r);return a.isEqual(It.min())&&(a=Lr(r)),new V2(a,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Lr(e.commitTime);return this.listener.Yo(i,t)}return kt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=f0(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>p0(this.M,i))};this.Fo(t)}}class dU extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=i,this.M=r,this.tu=!1}eu(){if(this.tu)throw new xe(he.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,i){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.bo.oo(e,t,i,r,a)).catch(r=>{throw"FirebaseError"===r.name?(r.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new xe(he.UNKNOWN,r.toString())})}ho(e,t,i){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.bo.ho(e,t,i,r,a)).catch(r=>{throw"FirebaseError"===r.name?(r.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new xe(he.UNKNOWN,r.toString())})}terminate(){this.tu=!0}}class hU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Qi(t),this.iu=!1):Fe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class fU{constructor(e,t,i,r,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr(h=>{i.enqueueAndForget((0,ye.Z)(function*(){var m;sf(c)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ye.Z)(function*(y){const C=$e(y);C.fu.add(4),yield xy(C),C.wu.set("Unknown"),C.fu.delete(4),yield D0(C)}),function(y){return m.apply(this,arguments)})(c))}))}),this.wu=new hU(i,r)}}function D0(n){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,ye.Z)(function*(n){if(sf(n))for(const e of n.du)yield e(!0)}),Xx.apply(this,arguments)}function xy(n){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,ye.Z)(function*(n){for(const e of n.du)yield e(!1)}),Jx.apply(this,arguments)}function XI(n,e){const t=$e(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),nk(t)?tk(t):Ry(t).xo()&&ek(t,e))}function I0(n,e){const t=$e(n),i=Ry(t);t.lu.delete(e),i.xo()&&B1(t,e),0===t.lu.size&&(i.xo()?i.Mo():sf(t)&&t.wu.set("Unknown"))}function ek(n,e){n.mu.Z(e.targetId),Ry(n).jo(e)}function B1(n,e){n.mu.Z(e),Ry(n).Wo(e)}function tk(n){n.mu=new W2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Ry(n).start(),n.wu.ru()}function nk(n){return sf(n)&&!Ry(n).Co()&&n.lu.size>0}function sf(n){return 0===$e(n).fu.size}function H1(n){n.mu=void 0}function pU(n){return ik.apply(this,arguments)}function ik(){return ik=(0,ye.Z)(function*(n){n.lu.forEach((e,t)=>{ek(n,e)})}),ik.apply(this,arguments)}function mU(n,e){return rk.apply(this,arguments)}function rk(){return rk=(0,ye.Z)(function*(n,e){H1(n),nk(n)?(n.wu.au(e),tk(n)):n.wu.set("Unknown")}),rk.apply(this,arguments)}function gU(n,e,t){return sk.apply(this,arguments)}function sk(){return sk=(0,ye.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof NP&&2===e.state&&e.cause)try{yield(i=(0,ye.Z)(function*(r,a){const c=a.cause;for(const h of a.targetIds)r.lu.has(h)&&(yield r.remoteSyncer.rejectListen(h,c),r.lu.delete(h),r.mu.removeTarget(h))}),function(r,a){return i.apply(this,arguments)})(n,e)}catch(i){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield JI(n,i)}else if(e instanceof BI?n.mu.ut(e):e instanceof OP?n.mu._t(e):n.mu.ht(e),!t.isEqual(It.min()))try{const i=yield A1(n.localStore);t.compareTo(i)>=0&&(yield function(r,a){const c=r.mu.yt(a);return c.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const y=r.lu.get(m);y&&r.lu.set(m,y.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach(h=>{const m=r.lu.get(h);if(!m)return;r.lu.set(h,m.withResumeToken(wr.EMPTY_BYTE_STRING,m.snapshotVersion)),B1(r,h);const y=new ef(m.target,h,1,m.sequenceNumber);ek(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){Fe("RemoteStore","Failed to raise snapshot:",i),yield JI(n,i)}var i}),sk.apply(this,arguments)}function JI(n,e,t){return ok.apply(this,arguments)}function ok(){return ok=(0,ye.Z)(function*(n,e,t){if(!ym(e))throw e;n.fu.add(1),yield xy(n),n.wu.set("Offline"),t||(t=()=>A1(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield D0(n)}))}),ok.apply(this,arguments)}function U1(n,e){return e().catch(t=>JI(n,t,e))}function ky(n){return ak.apply(this,arguments)}function ak(){return ak=(0,ye.Z)(function*(n){const e=$e(n),t=af(e);let i=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;_U(e);)try{const r=yield KH(e.localStore,i);if(null===r){0===e.hu.length&&t.Mo();break}i=r.batchId,yU(e,r)}catch(r){yield JI(e,r)}j1(e)&&G1(e)}),ak.apply(this,arguments)}function _U(n){return sf(n)&&n.hu.length<10}function yU(n,e){n.hu.push(e);const t=af(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function j1(n){return sf(n)&&!af(n).Co()&&n.hu.length>0}function G1(n){af(n).start()}function vU(n){return lk.apply(this,arguments)}function lk(){return lk=(0,ye.Z)(function*(n){af(n).Zo()}),lk.apply(this,arguments)}function wU(n){return ck.apply(this,arguments)}function ck(){return ck=(0,ye.Z)(function*(n){const e=af(n);for(const t of n.hu)e.Jo(t.mutations)}),ck.apply(this,arguments)}function bU(n,e,t){return uk.apply(this,arguments)}function uk(){return uk=(0,ye.Z)(function*(n,e,t){const i=n.hu.shift(),r=Mx.from(i,e,t);yield U1(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield ky(n)}),uk.apply(this,arguments)}function EU(n,e){return dk.apply(this,arguments)}function dk(){return dk=(0,ye.Z)(function*(n,e){var t;e&&af(n).Ho&&(yield(t=(0,ye.Z)(function*(i,r){if(xP(a=r.code)&&a!==he.ABORTED){const c=i.hu.shift();af(i).ko(),yield U1(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield ky(i)}var a}),function(i,r){return t.apply(this,arguments)})(n,e)),j1(n)&&G1(n)}),dk.apply(this,arguments)}function z1(n,e){return hk.apply(this,arguments)}function hk(){return hk=(0,ye.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const i=sf(t);t.fu.add(3),yield xy(t),i&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield D0(t)}),hk.apply(this,arguments)}function fk(n,e){return pk.apply(this,arguments)}function pk(){return pk=(0,ye.Z)(function*(n,e){const t=$e(n);e?(t.fu.delete(2),yield D0(t)):e||(t.fu.add(2),yield xy(t),t.wu.set("Unknown"))}),pk.apply(this,arguments)}function Ry(n){return n.gu||(n.gu=function(e,t,i){const r=$e(e);return r.eu(),new cU(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Hr:pU.bind(null,n),Yr:mU.bind(null,n),Qo:gU.bind(null,n)}),n.du.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.ko(),nk(n)?tk(n):n.wu.set("Unknown")):(yield n.gu.stop(),H1(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function af(n){return n.yu||(n.yu=function(e,t,i){const r=$e(e);return r.eu(),new uU(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Hr:vU.bind(null,n),Yr:EU.bind(null,n),Xo:wU.bind(null,n),Yo:bU.bind(null,n)}),n.du.push(function(){var e=(0,ye.Z)(function*(t){t?(n.yu.ko(),yield ky(n)):(yield n.yu.stop(),n.hu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class mk{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,i,r,a){const c=Date.now()+i,h=new mk(e,t,c,r,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oy(n,e){if(Qi("AsyncQueue",`${e}: ${n}`),ym(n))return new xe(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Ny{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ge.comparator(t.key,i.key):(t,i)=>Ge.comparator(t.key,i.key),this.keyedMap=Cx(),this.sortedSet=new Ui(this.comparator)}static emptySet(e){return new Ny(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ny)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Ny;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class $1{constructor(){this.pu=new Ui(Ge.comparator)}track(e){const t=e.doc.key,i=this.pu.get(t);i?0!==e.type&&3===i.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==i.type?this.pu=this.pu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.pu=this.pu.remove(t):1===e.type&&2===i.type?this.pu=this.pu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):lt():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Py{constructor(e,t,i,r,a,c,h,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,i,r){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new Py(e,t,Ny.emptySet(t),a,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&r0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class CU{constructor(){this.Tu=void 0,this.listeners=[]}}class DU{constructor(){this.queries=new Jh(e=>pP(e),r0),this.onlineState="Unknown",this.Eu=new Set}}function gk(n,e){return _k.apply(this,arguments)}function _k(){return _k=(0,ye.Z)(function*(n,e){const t=$e(n),i=e.query;let r=!1,a=t.queries.get(i);if(a||(r=!0,a=new CU),r)try{a.Tu=yield t.onListen(i)}catch(c){const h=Oy(c,`Initialization of query '${vx(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,a),a.listeners.push(e),e.Au(t.onlineState),a.Tu&&e.Ru(a.Tu)&&wk(t)}),_k.apply(this,arguments)}function yk(n,e){return vk.apply(this,arguments)}function vk(){return vk=(0,ye.Z)(function*(n,e){const t=$e(n),i=e.query;let r=!1;const a=t.queries.get(i);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),r=0===a.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),vk.apply(this,arguments)}function IU(n,e){const t=$e(n);let i=!1;for(const r of e){const c=t.queries.get(r.query);if(c){for(const h of c.listeners)h.Ru(r)&&(i=!0);c.Tu=r}}i&&wk(t)}function SU(n,e,t){const i=$e(n),r=i.queries.get(e);if(r)for(const a of r.listeners)a.onError(t);i.queries.delete(e)}function wk(n){n.Eu.forEach(e=>{e.next()})}class bk{constructor(e,t,i){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=i||{}}Ru(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Py(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Py.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class TU{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class q1{constructor(e){this.M=e}fi(e){return Oc(this.M,e)}di(e){return e.metadata.exists?GP(this.M,e.document,!1):Xn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Lr(e)}}class AU{constructor(e,t,i){this.Nu=e,this.localStore=t,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=W1(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=pn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,i=new q1(this.M);for(const r of e)if(r.metadata.queries){const a=i.fi(r.metadata.name);for(const c of r.metadata.queries){const h=(t.get(c)||Sn()).add(a);t.set(c,h)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function YH(n,e,t,i){return Gx.apply(this,arguments)}(e.localStore,new q1(e.M),e.documents,e.Nu.id),i=e.Mu(e.documents);for(const r of e.queries)yield ZH(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function W1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class K1{constructor(e){this.key=e}}class Y1{constructor(e){this.key=e}}class Z1{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Sn(),this.mutatedKeys=Sn(),this.Uu=gP(e),this.qu=new Ny(this.Uu)}get Ku(){return this.$u}Gu(e,t){const i=t?t.Qu:new $1,r=t?t.qu:this.qu;let a=t?t.mutatedKeys:this.mutatedKeys,c=r,h=!1;const m=RI(this.query)&&r.size===this.query.limit?r.last():null,y=OI(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((C,S)=>{const x=r.get(C),V=wx(this.query,S)?S:null,B=!!x&&this.mutatedKeys.has(x.key),K=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ve=!1;x&&V?x.data.isEqual(V.data)?B!==K&&(i.track({type:3,doc:V}),ve=!0):this.ju(x,V)||(i.track({type:2,doc:V}),ve=!0,(m&&this.Uu(V,m)>0||y&&this.Uu(V,y)<0)&&(h=!0)):!x&&V?(i.track({type:0,doc:V}),ve=!0):x&&!V&&(i.track({type:1,doc:x}),ve=!0,(m||y)&&(h=!0)),ve&&(V?(c=c.add(V),a=K?a.add(C):a.delete(C)):(c=c.delete(C),a=a.delete(C)))}),RI(this.query)||OI(this.query))for(;c.size>this.query.limit;){const C=RI(this.query)?c.last():c.first();c=c.delete(C.key),a=a.delete(C.key),i.track({type:1,doc:C})}return{qu:c,Qu:i,ni:h,mutatedKeys:a}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const a=e.Qu.Iu();a.sort((y,C)=>function(S,x){const V=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return V(S)-V(x)}(y.type,C.type)||this.Uu(y.doc,C.doc)),this.Wu(i);const c=t?this.zu():[],h=0===this.Lu.size&&this.current?1:0,m=h!==this.Bu;return this.Bu=h,0!==a.length||m?{snapshot:new Py(this.query,e.qu,r,a,e.mutatedKeys,0===h,m,!1),Hu:c}:{Hu:c}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new $1,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Sn(),this.qu.forEach(i=>{this.Ju(i.key)&&(this.Lu=this.Lu.add(i.key))});const t=[];return e.forEach(i=>{this.Lu.has(i)||t.push(new Y1(i))}),this.Lu.forEach(i=>{e.has(i)||t.push(new K1(i))}),t}Yu(e){this.$u=e.li,this.Lu=Sn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Py.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class MU{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class xU{constructor(e){this.key=e,this.Zu=!1}}class kU{constructor(e,t,i,r,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.ta={},this.ea=new Jh(h=>pP(h),r0),this.na=new Map,this.sa=new Set,this.ia=new Ui(Ge.comparator),this.ra=new Map,this.oa=new $x,this.ua={},this.aa=new Map,this.ca=Dm.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function RU(n,e){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,ye.Z)(function*(n,e){const t=$k(n);let i,r;const a=t.ea.get(e);if(a)i=a.targetId,t.sharedClientState.addLocalQueryTarget(i),r=a.view.Xu();else{const c=yield Ay(t.localStore,ja(e));t.isPrimaryClient&&XI(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield Ck(t,e,i,"current"===h)}return r}),Ek.apply(this,arguments)}function Ck(n,e,t,i){return Dk.apply(this,arguments)}function Dk(){return Dk=(0,ye.Z)(function*(n,e,t,i){n.la=(C,S,x)=>{return(V=(0,ye.Z)(function*(B,K,ve,Xe){let rt=K.view.Gu(ve);rt.ni&&(rt=yield KI(B.localStore,K.query,!1).then(({documents:Pt})=>K.view.Gu(Pt,rt)));const et=Xe&&Xe.targetChanges.get(K.targetId),nt=K.view.applyChanges(rt,B.isPrimaryClient,et);return Nk(B,K.targetId,nt.Hu),nt.snapshot}),function(B,K,ve,Xe){return V.apply(this,arguments)})(n,C,S,x);var V};const r=yield KI(n.localStore,e,!0),a=new Z1(e,r.li),c=a.Gu(r.documents),h=u0.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),m=a.applyChanges(c,n.isPrimaryClient,h);Nk(n,t,m.Hu);const y=new MU(e,t,a);return n.ea.set(e,y),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),m.snapshot}),Dk.apply(this,arguments)}function OU(n,e){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,ye.Z)(function*(n,e){const t=$e(n),i=t.ea.get(e),r=t.na.get(i.targetId);if(r.length>1)return t.na.set(i.targetId,r.filter(a=>!r0(a,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield My(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),I0(t.remoteStore,i.targetId),Fy(t,i.targetId)}).catch(Im))):(Fy(t,i.targetId),yield My(t.localStore,i.targetId,!0))}),Ik.apply(this,arguments)}function Sk(){return Sk=(0,ye.Z)(function*(n,e,t){const i=qk(n);try{const r=yield function(a,c){const h=$e(a),m=Hi.now(),y=c.reduce((S,x)=>S.add(x.key),Sn());let C;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.ci.Ks(S,y).next(x=>{C=x;const V=[];for(const B of c){const K=H2(B,C.get(B.key));null!=K&&V.push(new _m(B.key,K,rP(K.value.mapValue),Xi.exists(!0)))}return h.Bs.addMutationBatch(S,m,V,c)})).then(S=>(S.applyToLocalDocumentSet(C),{batchId:S.batchId,changes:C}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,c,h){let m=a.ua[a.currentUser.toKey()];m||(m=new Ui(jt)),m=m.insert(c,h),a.ua[a.currentUser.toKey()]=m}(i,r.batchId,t),yield cd(i,r.changes),yield ky(i.remoteStore)}catch(r){const a=Oy(r,"Failed to persist write");t.reject(a)}}),Sk.apply(this,arguments)}function Q1(n,e){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,ye.Z)(function*(n,e){const t=$e(n);try{const i=yield WH(t.localStore,e);e.targetChanges.forEach((r,a)=>{const c=t.ra.get(a);c&&(kt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.Zu=!0:r.modifiedDocuments.size>0?kt(c.Zu):r.removedDocuments.size>0&&(kt(c.Zu),c.Zu=!1))}),yield cd(t,i,e)}catch(i){yield Im(i)}}),Tk.apply(this,arguments)}function X1(n,e,t){const i=$e(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ea.forEach((a,c)=>{const h=c.view.Au(e);h.snapshot&&r.push(h.snapshot)}),function(a,c){const h=$e(a);h.onlineState=c;let m=!1;h.queries.forEach((y,C)=>{for(const S of C.listeners)S.Au(c)&&(m=!0)}),m&&wk(h)}(i.eventManager,e),r.length&&i.ta.Qo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function PU(n,e,t){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,ye.Z)(function*(n,e,t){const i=$e(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ra.get(e),a=r&&r.key;if(a){let c=new Ui(Ge.comparator);c=c.insert(a,Xn.newNoDocument(a,It.min()));const h=Sn().add(a),m=new c0(It.min(),new Map,new Jn(jt),c,h);yield Q1(i,m),i.ia=i.ia.remove(a),i.ra.delete(e),Pk(i)}else yield My(i.localStore,e,!1).then(()=>Fy(i,e,t)).catch(Im)}),Ak.apply(this,arguments)}function FU(n,e){return Mk.apply(this,arguments)}function Mk(){return Mk=(0,ye.Z)(function*(n,e){const t=$e(n),i=e.batch.batchId;try{const r=yield qH(t.localStore,e);Ok(t,i,null),Rk(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield cd(t,r)}catch(r){yield Im(r)}}),Mk.apply(this,arguments)}function LU(n,e,t){return xk.apply(this,arguments)}function xk(){return xk=(0,ye.Z)(function*(n,e,t){const i=$e(n);try{const r=yield function(a,c){const h=$e(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return h.Bs.lookupMutationBatch(m,c).next(C=>(kt(null!==C),y=C.keys(),h.Bs.removeMutationBatch(m,C))).next(()=>h.Bs.performConsistencyCheck(m)).next(()=>h.ci.Ks(m,y))})}(i.localStore,e);Ok(i,e,t),Rk(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield cd(i,r)}catch(r){yield Im(r)}}),xk.apply(this,arguments)}function kk(){return kk=(0,ye.Z)(function*(n,e){const t=$e(n);sf(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(a){const c=$e(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===i)return void e.resolve();const r=t.aa.get(i)||[];r.push(e),t.aa.set(i,r)}catch(i){const r=Oy(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),kk.apply(this,arguments)}function Rk(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function Ok(n,e,t){const i=$e(n);let r=i.ua[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.ua[i.currentUser.toKey()]=r}}function Fy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.na.get(e))n.ea.delete(i),t&&n.ta.fa(i,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(i=>{n.oa.containsKey(i)||J1(n,i)})}function J1(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(I0(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),Pk(n))}function Nk(n,e,t){for(const i of t)i instanceof K1?(n.oa.addReference(i.key,e),BU(n,i)):i instanceof Y1?(Fe("SyncEngine","Document no longer in limbo: "+i.key),n.oa.removeReference(i.key,e),n.oa.containsKey(i.key)||J1(n,i.key)):lt()}function BU(n,e){const t=e.key,i=t.path.canonicalString();n.ia.get(t)||n.sa.has(i)||(Fe("SyncEngine","New document in limbo: "+t),n.sa.add(i),Pk(n))}function Pk(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Ge(pn.fromString(e)),i=n.ca.next();n.ra.set(i,new xU(t)),n.ia=n.ia.insert(t,i),XI(n.remoteStore,new ef(ja(_y(t.path)),i,2,_a.A))}}function cd(n,e,t){return Fk.apply(this,arguments)}function Fk(){return Fk=(0,ye.Z)(function*(n,e,t){const i=$e(n),r=[],a=[],c=[];var h;i.ea.isEmpty()||(i.ea.forEach((h,m)=>{c.push(i.la(m,e,t).then(y=>{if(y){i.isPrimaryClient&&i.sharedClientState.updateQueryState(m.targetId,y.fromCache?"not-current":"current"),r.push(y);const C=Hx.Ys(m.targetId,y);a.push(C)}}))}),yield Promise.all(c),i.ta.Qo(r),yield(h=(0,ye.Z)(function*(m,y){const C=$e(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>pe.forEach(y,x=>pe.forEach(x.Hs,V=>C.persistence.referenceDelegate.addReference(S,x.targetId,V)).next(()=>pe.forEach(x.Js,V=>C.persistence.referenceDelegate.removeReference(S,x.targetId,V)))))}catch(S){if(!ym(S))throw S;Fe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const x=S.targetId;if(!S.fromCache){const V=C.ii.get(x),K=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);C.ii=C.ii.insert(x,K)}}}),function(m,y){return h.apply(this,arguments)})(i.localStore,a))}),Fk.apply(this,arguments)}function HU(n,e){return Lk.apply(this,arguments)}function Lk(){return Lk=(0,ye.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const i=yield T1(t.localStore,e);t.currentUser=e,(r=t).aa.forEach(c=>{c.forEach(h=>{h.reject(new xe(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.aa.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield cd(t,i.hi)}var r}),Lk.apply(this,arguments)}function UU(n,e){const t=$e(n),i=t.ra.get(e);if(i&&i.Zu)return Sn().add(i.key);{let r=Sn();const a=t.na.get(e);if(!a)return r;for(const c of a){const h=t.ea.get(c);r=r.unionWith(h.view.Ku)}return r}}function jU(n,e){return Vk.apply(this,arguments)}function Vk(){return Vk=(0,ye.Z)(function*(n,e){const t=$e(n),i=yield KI(t.localStore,e.query,!0),r=e.view.Yu(i);return t.isPrimaryClient&&Nk(t,e.targetId,r.Hu),r}),Vk.apply(this,arguments)}function GU(n,e){return Bk.apply(this,arguments)}function Bk(){return Bk=(0,ye.Z)(function*(n,e){const t=$e(n);return k1(t.localStore,e).then(i=>cd(t,i))}),Bk.apply(this,arguments)}function zU(n,e,t,i){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,ye.Z)(function*(n,e,t,i){const r=$e(n),a=yield function(c,h){const m=$e(c),y=$e(m.Bs);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.fn(C,h).next(S=>S?m.ci.Ks(C,S):pe.resolve(null)))}(r.localStore,e);var h;null!==a?("pending"===t?yield ky(r.remoteStore):"acknowledged"===t||"rejected"===t?(Ok(r,e,i||null),Rk(r,e),h=e,$e($e(r.localStore).Bs)._n(h)):lt(),yield cd(r,a)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Hk.apply(this,arguments)}function Uk(){return Uk=(0,ye.Z)(function*(n,e){const t=$e(n);if($k(t),qk(t),!0===e&&!0!==t.ha){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield eF(t,i.toArray());t.ha=!0,yield fk(t.remoteStore,!0);for(const a of r)XI(t.remoteStore,a)}else if(!1===e&&!1!==t.ha){const i=[];let r=Promise.resolve();t.na.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(Fy(t,c),My(t.localStore,c,!0))),I0(t.remoteStore,c)}),yield r,yield eF(t,i),function(a){const c=$e(a);c.ra.forEach((h,m)=>{I0(c.remoteStore,m)}),c.oa.bi(),c.ra=new Map,c.ia=new Ui(Ge.comparator)}(t),t.ha=!1,yield fk(t.remoteStore,!1)}}),Uk.apply(this,arguments)}function eF(n,e,t){return jk.apply(this,arguments)}function jk(){return jk=(0,ye.Z)(function*(n,e,t){const i=$e(n),r=[],a=[];for(const c of e){let h;const m=i.na.get(c);if(m&&0!==m.length){h=yield Ay(i.localStore,ja(m[0]));for(const y of m){const C=i.ea.get(y),S=yield jU(i,C);S.snapshot&&a.push(S.snapshot)}}else{const y=yield x1(i.localStore,c);h=yield Ay(i.localStore,y),yield Ck(i,tF(y),c,!1)}r.push(h)}return i.ta.Qo(a),r}),jk.apply(this,arguments)}function tF(n){return hP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qU(n){const e=$e(n);return $e($e(e.localStore).persistence).Fs()}function WU(n,e,t,i){return Gk.apply(this,arguments)}function Gk(){return Gk=(0,ye.Z)(function*(n,e,t,i){const r=$e(n);if(r.ha)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const a=r.na.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield k1(r.localStore,mP(a[0])),h=c0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield cd(r,c,h);break}case"rejected":yield My(r.localStore,e,!0),Fy(r,e,i);break;default:lt()}}),Gk.apply(this,arguments)}function KU(n,e,t){return zk.apply(this,arguments)}function zk(){return zk=(0,ye.Z)(function*(n,e,t){const i=$k(n);if(i.ha){for(const r of e){if(i.na.has(r)){Fe("SyncEngine","Adding an already active target "+r);continue}const a=yield x1(i.localStore,r),c=yield Ay(i.localStore,a);yield Ck(i,tF(a),c.targetId,!1),XI(i.remoteStore,c)}for(const r of t)i.na.has(r)&&(yield My(i.localStore,r,!1).then(()=>{I0(i.remoteStore,r),Fy(i,r)}).catch(Im))}}),zk.apply(this,arguments)}function $k(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PU.bind(null,e),e.ta.Qo=IU.bind(null,e.eventManager),e.ta.fa=SU.bind(null,e.eventManager),e}function qk(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LU.bind(null,e),e}class nF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=C0(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return S1(this.persistence,new I1,e.initialUser,this.M)}wa(e){return new iU(qx.zi,this.M)}_a(e){return new P1}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class iF extends nF{constructor(e,t,i){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ye.Z)(function*(){yield t().call(i,e),yield i.ya.initialize(i,e),yield qk(i.ya.syncEngine),yield ky(i.ya.remoteStore),yield i.persistence.Ts(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}ga(e){return S1(this.persistence,new I1,e.initialUser,this.M)}ma(e){return new VH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Bx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Vo.withCacheSize(this.cacheSizeBytes):Vo.DEFAULT;return new Vx(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,L1(),QI(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new P1}}class ZU extends iF{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ye.Z)(function*(){yield t().call(i,e);const r=i.ya.syncEngine;i.sharedClientState instanceof Zx&&(i.sharedClientState.syncEngine={Mr:zU.bind(null,r),Or:WU.bind(null,r),Fr:KU.bind(null,r),Fs:qU.bind(null,r),kr:GU.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ts(function(){var a=(0,ye.Z)(function*(c){yield function $U(n,e){return Uk.apply(this,arguments)}(i.ya.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):c||i.gcScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}_a(e){const t=L1();if(!Zx.vt(t))throw new xe(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Bx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zx(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Wk{initialize(e,t){var i=this;return(0,ye.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>X1(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=HU.bind(null,i.syncEngine),yield fk(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new DU}createDatastore(e){const t=C0(e.databaseInfo.databaseId),i=new lU(e.databaseInfo);return new dU(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,a=h=>X1(this.syncEngine,h,0),c=F1.vt()?new F1:new sU,new fU(t,i,r,a,c);var t,i,r,a,c}createSyncEngine(e,t){return function(i,r,a,c,h,m,y){const C=new kU(i,r,a,c,h,m);return y&&(C.ha=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const i=$e(t);Fe("RemoteStore","RemoteStore shutting down."),i.fu.add(5),yield xy(i),i._u.shutdown(),i.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function rF(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class eS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QU{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Pr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(i=>{i&&i.xu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const i=e.Ea.decode(t),r=Number(i);isNaN(r)&&e.Pa(`length string (${i}) is not valid number`);const a=yield e.ba(r);return new TU(JSON.parse(a),t.length+r)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,ye.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}ba(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const i=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class XU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ye.Z)(function*(a,c){const h=$e(a),m=f0(h.M)+"/documents",y={documents:c.map(V=>h0(h.M,V))},C=yield h.ho("BatchGetDocuments",m,y),S=new Map;C.forEach(V=>{const B=function X2(n,e){return"found"in e?function(t,i){kt(!!i.found);const r=Oc(t,i.found.name),a=Lr(i.found.updateTime),c=new bs({mapValue:{fields:i.found.fields}});return Xn.newFoundDocument(r,a,c)}(n,e):"missing"in e?function(t,i){kt(!!i.missing),kt(!!i.readTime);const r=Oc(t,i.missing),a=Lr(i.readTime);return Xn.newNoDocument(r,a)}(n,e):lt()}(h.M,V);S.set(B.key.toString(),B)});const x=[];return c.forEach(V=>{const B=S.get(V.toString());kt(!!B),x.push(B)}),x}),function(a,c){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new a0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const a=Ge.fromPath(r);e.mutations.push(new Ex(a,e.precondition(a)))}),yield(i=(0,ye.Z)(function*(r,a){const c=$e(r),h=f0(c.M)+"/documents",m={writes:a.map(y=>p0(c.M,y))};yield c.oo("Commit",h,m)}),function(r,a){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=It.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new xe(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Xi.updateTime(t):Xi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new xe(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xi.updateTime(t)}return Xi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JU{constructor(e,t,i,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=i,this.deferred=r,this.Sa=5,this.Do=new Qx(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,ye.Z)(function*(){const t=new XU(e.datastore),i=e.Ca(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(a=>{e.xa(a)}))}).catch(r=>{e.xa(r)})}))}Ca(e){try{const t=this.updateFunction(e);return!um(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!xP(t)}return!1}}class ej{constructor(e,t,i,r){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=es.UNAUTHENTICATED,this.clientId=zN.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,ye.Z)(function*(h){Fe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(Fe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Oy(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function sF(n,e){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,ye.Z)(function*(a){i.isEqual(a)||(yield T1(e.localStore,a),i=a)});return function(a){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Kk.apply(this,arguments)}function oF(n,e){return Yk.apply(this,arguments)}function Yk(){return Yk=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Zk(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>z1(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,a)=>z1(e.remoteStore,a)),n.onlineComponents=e}),Yk.apply(this,arguments)}function Zk(n){return Qk.apply(this,arguments)}function Qk(){return Qk=(0,ye.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield sF(n,new nF)),n.offlineComponents}),Qk.apply(this,arguments)}function tS(n){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,ye.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield oF(n,new Wk)),n.onlineComponents}),Xk.apply(this,arguments)}function aF(n){return Zk(n).then(e=>e.persistence)}function Jk(n){return Zk(n).then(e=>e.localStore)}function lF(n){return tS(n).then(e=>e.remoteStore)}function eR(n){return tS(n).then(e=>e.syncEngine)}function Ly(n){return tR.apply(this,arguments)}function tR(){return tR=(0,ye.Z)(function*(n){const e=yield tS(n),t=e.eventManager;return t.onListen=RU.bind(null,e.syncEngine),t.onUnlisten=OU.bind(null,e.syncEngine),t}),tR.apply(this,arguments)}function cF(n,e,t={}){const i=new Pr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(r,a,c,h,m){const y=new eS({next:S=>{a.enqueueAndForget(()=>yk(r,C));const x=S.docs.has(c);!x&&S.fromCache?m.reject(new xe(he.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&S.fromCache&&h&&"server"===h.source?m.reject(new xe(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),C=new bk(_y(c.path),y,{includeMetadataChanges:!0,Cu:!0});return gk(r,C)}(yield Ly(n),n.asyncQueue,e,t,i)})),i.promise}function uF(n,e,t={}){const i=new Pr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(r,a,c,h,m){const y=new eS({next:S=>{a.enqueueAndForget(()=>yk(r,C)),S.fromCache&&"server"===h.source?m.reject(new xe(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),C=new bk(c,y,{includeMetadataChanges:!0,Cu:!0});return gk(r,C)}(yield Ly(n),n.asyncQueue,e,t,i)})),i.promise}const dF=new Map;function nR(n,e,t){if(!t)throw new xe(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hF(n,e,t,i){if(!0===e&&!0===i)throw new xe(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fF(n){if(!Ge.isDocumentKey(n))throw new xe(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pF(n){if(Ge.isDocumentKey(n))throw new xe(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nS(n);throw new xe(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mF(n,e){if(e<=0)throw new xe(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class gF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class S0{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gF({}),this._settingsFrozen=!1,e instanceof od?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new xe(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new od(r.options.projectId)}(e))}get app(){if(!this._app)throw new xe(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new c2;switch(t.type){case"gapi":const i=t.client;return kt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new f2(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dF.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),dF.delete(e),t.terminate())}(this),Promise.resolve()}}class ei{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ei(this.firestore,e,this._key)}}class Es{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Es(this.firestore,e,this._query)}}class Pc extends Es{constructor(e,t,i){super(e,t,_y(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ei(this.firestore,null,new Ge(e))}withConverter(e){return new Pc(this.firestore,e,this._path)}}function _F(n,e,...t){if(n=(0,N.m9)(n),nR("collection","path",e),n instanceof S0){const i=pn.fromString(e,...t);return pF(i),new Pc(n,null,i)}{if(!(n instanceof ei||n instanceof Pc))throw new xe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pn.fromString(e,...t));return pF(i),new Pc(n.firestore,null,i)}}function iS(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=zN.R()),nR("doc","path",e),n instanceof S0){const i=pn.fromString(e,...t);return fF(i),new ei(n,null,new Ge(i))}{if(!(n instanceof ei||n instanceof Pc))throw new xe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pn.fromString(e,...t));return fF(i),new ei(n.firestore,n instanceof Pc?n.converter:null,new Ge(i))}}function yF(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof ei||n instanceof Pc)&&(e instanceof ei||e instanceof Pc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vF(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof Es&&e instanceof Es&&n.firestore===e.firestore&&r0(n._query,e._query)&&n.converter===e.converter}class dj{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Qx(this,"async_queue_retry"),this.qa=()=>{const t=QI();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=QI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=QI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Pr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!ym(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(i=>{throw this.$a=i,this.Ba=!1,Qi("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(i)),i}).then(i=>(this.Ba=!1,i))));return this.ka=t,t}enqueueAfterDelay(e,t,i){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const r=mk.createAndSchedule(this,e,t,i,a=>this.ja(a));return this.Fa.push(r),r}Ka(){this.$a&&lt()}verifyOperationInProgress(){}Wa(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function iR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class hj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class di extends S0{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new dj,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||wF(this),this._firestoreClient.terminate()}}function er(n){return n._firestoreClient||wF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wF(n){var e;const t=n._freezeSettings(),i=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new v2(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new ej(n._authCredentials,n._appCheckCredentials,n._queue,i)}function bF(n,e,t){const i=new Pr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield sF(n,t),yield oF(n,e),i.resolve()}catch(r){if(!("FirebaseError"===(a=r).name?a.code===he.FAILED_PRECONDITION||a.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var a})).then(()=>i.promise)}function EF(n){if(n._initialized||n._terminated)throw new xe(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ud{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fc(wr.fromBase64String(e))}catch(t){throw new xe(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fc(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tm{constructor(e){this._methodName=e}}class rS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const Ej=/^__.*__$/;class Cj{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new _m(e,this.data,this.fieldMask,t,this.fieldTransforms):new o0(e,this.data,t,this.fieldTransforms)}}class CF{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new _m(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class sS{constructor(e,t,i,r,a,c){this.settings=e,this.databaseId=t,this.M=i,this.ignoreUndefinedProperties=r,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new sS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:i,ec:!1});return r.nc(e),r}sc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:i,ec:!1});return r.Ya(),r}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return lS(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(DF(this.Xa)&&Ej.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Dj{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=i||C0(e)}ac(e,t,i,r=!1){return new sS({Xa:e,methodName:t,uc:i,path:Fr.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Am(n){const e=n._freezeSettings(),t=C0(n._databaseId);return new Dj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oS(n,e,t,i,r,a={}){const c=n.ac(a.merge||a.mergeFields?2:0,e,t,r);aR("Data must be an object, but it was:",c,i);const h=TF(i,c);let m,y;if(a.merge)m=new py(c.fieldMask),y=c.fieldTransforms;else if(a.mergeFields){const C=[];for(const S of a.mergeFields){const x=lR(e,S,t);if(!c.contains(x))throw new xe(he.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);MF(C,x)||C.push(x)}m=new py(C),y=c.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,y=c.fieldTransforms;return new Cj(new bs(h),m,y)}class T0 extends Tm{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T0}}function IF(n,e,t){return new sS({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class rR extends Tm{_toFieldTransform(e){return new s0(e.path,new vy)}isEqual(e){return e instanceof rR}}class Ij extends Tm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=IF(this,e,!0),i=this.cc.map(a=>Mm(a,t)),r=new mm(i);return new s0(e.path,r)}isEqual(e){return this===e}}class Sj extends Tm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=IF(this,e,!0),i=this.cc.map(a=>Mm(a,t)),r=new gm(i);return new s0(e.path,r)}isEqual(e){return this===e}}class Tj extends Tm{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new wy(e.M,vP(e.M,this.hc));return new s0(e.path,t)}isEqual(e){return this===e}}function sR(n,e,t,i){const r=n.ac(1,e,t);aR("Data must be an object, but it was:",r,i);const a=[],c=bs.empty();lm(i,(m,y)=>{const C=aS(e,m,t);y=(0,N.m9)(y);const S=r.sc(C);if(y instanceof T0)a.push(C);else{const x=Mm(y,S);null!=x&&(a.push(C),c.set(C,x))}});const h=new py(a);return new CF(c,h,r.fieldTransforms)}function oR(n,e,t,i,r,a){const c=n.ac(1,e,t),h=[lR(e,i,t)],m=[r];if(a.length%2!=0)throw new xe(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(lR(e,a[x])),m.push(a[x+1]);const y=[],C=bs.empty();for(let x=h.length-1;x>=0;--x)if(!MF(y,h[x])){const V=h[x];let B=m[x];B=(0,N.m9)(B);const K=c.sc(V);if(B instanceof T0)y.push(V);else{const ve=Mm(B,K);null!=ve&&(y.push(V),C.set(V,ve))}}const S=new py(y);return new CF(C,S,c.fieldTransforms)}function SF(n,e,t,i=!1){return Mm(t,n.ac(i?4:3,e))}function Mm(n,e){if(AF(n=(0,N.m9)(n)))return aR("Unsupported field value:",e,n),TF(n,e);if(n instanceof Tm)return function(t,i){if(!DF(i.Xa))throw i.rc(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.rc(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,i){const r=[];let a=0;for(const c of t){let h=Mm(c,i.ic(a));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),a++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vP(i.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Hi.fromDate(t);return{timestampValue:d0(i.M,r)}}if(t instanceof Hi){const r=new Hi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:d0(i.M,r)}}if(t instanceof rS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fc)return{bytesValue:VP(i.M,t._byteString)};if(t instanceof ei){const r=i.databaseId,a=t.firestore._databaseId;if(!a.isEqual(r))throw i.rc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Dx(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.rc(`Unsupported field value: ${nS(t)}`)}(n,e)}function TF(n,e){const t={};return WN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lm(n,(i,r)=>{const a=Mm(r,e.tc(i));null!=a&&(t[i]=a)}),{mapValue:{fields:t}}}function AF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Hi||n instanceof rS||n instanceof Fc||n instanceof ei||n instanceof Tm)}function aR(n,e,t){if(!AF(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=nS(t);throw e.rc("an object"===i?n+" a custom object":n+" "+i)}var i}function lR(n,e,t){if((e=(0,N.m9)(e))instanceof ud)return e._internalPath;if("string"==typeof e)return aS(n,e);throw lS("Field path arguments must be of type string or ",n,!1,void 0,t)}const Aj=new RegExp("[~\\*/\\[\\]]");function aS(n,e,t){if(e.search(Aj)>=0)throw lS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ud(...e.split("."))._internalPath}catch(i){throw lS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lS(n,e,t,i,r){const a=i&&!i.isEmpty(),c=void 0!==r;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${i}`),c&&(m+=` in document ${r}`),m+=")"),new xe(he.INVALID_ARGUMENT,h+n+m)}function MF(n,e){return n.some(t=>t.isEqual(e))}class A0{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ei(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Mj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Mj extends A0{data(){return super.data()}}function cS(n,e){return"string"==typeof e?aS(n,e):e instanceof ud?e._internalPath:e._delegate._internalPath}class xm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dd extends A0{constructor(e,t,i,r,a,c){super(e,t,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new M0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(cS("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class M0 extends dd{data(e={}){return super.data(e)}}class lf{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new xm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new M0(this._firestore,this._userDataWriter,i.key,i,new xm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new M0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new xm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:a++}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const h=new M0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new xm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return 0!==c.type&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),y=a.indexOf(c.doc.key)),{type:xj(c.type),doc:h,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function xF(n,e){return n instanceof dd&&e instanceof dd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lf&&e instanceof lf&&n._firestore===e._firestore&&vF(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function kF(n){if(OI(n)&&0===n.explicitOrderBy.length)throw new xe(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class x0{}function cf(n,...e){for(const t of e)n=t._apply(n);return n}class kj extends x0{constructor(e,t,i){super(),this.lc=e,this.fc=t,this.dc=i,this.type="where"}_apply(e){const t=Am(e.firestore),i=function(r,a,c,h,m,y,C){let S;if(m.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new xe(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){LF(C,y);const V=[];for(const B of C)V.push(FF(h,r,B));S={arrayValue:{values:V}}}else S=FF(h,r,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||LF(C,y),S=SF(c,"where",C,"in"===y||"not-in"===y);const x=ts.create(m,y,S);return function(V,B){if(B.S()){const ve=_x(V);if(null!==ve&&!ve.isEqual(B.field))throw new xe(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ve.toString()}' and '${B.field.toString()}'`);const Xe=gx(V);null!==Xe&&VF(0,B.field,Xe)}const K=function(ve,Xe){for(const rt of ve.filters)if(Xe.indexOf(rt.op)>=0)return rt.op;return null}(V,function(ve){switch(ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==K)throw new xe(he.INVALID_ARGUMENT,K===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${K.toString()}' filters.`)}(r,x),x}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Es(e.firestore,e.converter,function(r,a){const c=r.filters.concat([a]);return new ld(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class Oj extends x0{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(i,r,a){if(null!==i.startAt)throw new xe(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new xe(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new gy(r,a);return function(h,m){if(null===gx(h)){const y=_x(h);null!==y&&VF(0,y,m.field)}}(i,c),c}(e._query,this.lc,this._c);return new Es(e.firestore,e.converter,function(i,r){const a=i.explicitOrderBy.concat([r]);return new ld(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class RF extends x0{constructor(e,t,i){super(),this.type=e,this.wc=t,this.mc=i}_apply(e){return new Es(e.firestore,e.converter,fP(e._query,this.wc,this.mc))}}class OF extends x0{constructor(e,t,i){super(),this.type=e,this.gc=t,this.yc=i}_apply(e){const t=PF(e,this.type,this.gc,this.yc);return new Es(e.firestore,e.converter,(r=t,new ld((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class NF extends x0{constructor(e,t,i){super(),this.type=e,this.gc=t,this.yc=i}_apply(e){const t=PF(e,this.type,this.gc,this.yc);return new Es(e.firestore,e.converter,(r=t,new ld((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function PF(n,e,t,i){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof A0)return function(r,a,c,h,m){if(!h)throw new xe(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const C of yy(r))if(C.field.isKeyField())y.push(hm(a,h.key));else{const S=h.data.field(C.field);if(hx(S))throw new xe(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const x=C.field.canonicalString();throw new xe(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(S)}return new Xh(y,m)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Am(n.firestore);return function(a,c,h,m,y,C){const S=a.explicitOrderBy;if(y.length>S.length)throw new xe(he.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let V=0;V<y.length;V++){const B=y[V];if(S[V].field.isKeyField()){if("string"!=typeof B)throw new xe(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof B}`);if(!yx(a)&&-1!==B.indexOf("/"))throw new xe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${B}' contains a slash.`);const K=a.path.child(pn.fromString(B));if(!Ge.isDocumentKey(K))throw new xe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${K}' is not because it contains an odd number of segments.`);const ve=new Ge(K);x.push(hm(c,ve))}else{const K=SF(h,m,B);x.push(K)}}return new Xh(x,C)}(n._query,n.firestore._databaseId,r,e,t,i)}}function FF(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new xe(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yx(e)&&-1!==t.indexOf("/"))throw new xe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(pn.fromString(t));if(!Ge.isDocumentKey(i))throw new xe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return hm(n,new Ge(i))}if(t instanceof ei)return hm(n,t._key);throw new xe(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nS(t)}.`)}function LF(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function VF(n,e,t){if(!t.isEqual(e))throw new xe(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class cR{convertValue(e,t="none"){switch(dm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const i={};return lm(e.fields,(r,a)=>{i[r]=this.convertValue(a,t)}),i}convertGeoPoint(e){return new rS(Si(e.latitude),Si(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=KN(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Zb(e));default:return null}}convertTimestamp(e){const t=Zh(e);return new Hi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pn.fromString(e);kt(KP(i));const r=new od(i.get(1),i.get(3)),a=new Ge(i.popFirst(5));return r.isEqual(t)||Qi(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function uS(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Uj extends cR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}class BF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Am(e)}set(e,t,i){this._verifyNotCommitted();const r=uf(e,this._firestore),a=uS(r.converter,t,i),c=oS(this._dataReader,"WriteBatch.set",r._key,a,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,Xi.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const a=uf(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof ud?oR(this._dataReader,"WriteBatch.update",a._key,t,i,r):sR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=uf(e,this._firestore);return this._mutations=this._mutations.concat(new a0(t._key,Xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uf(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new xe(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class km extends cR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}function HF(n,e,t){n=ln(n,ei);const i=ln(n.firestore,di),r=uS(n.converter,e,t);return Vy(i,[oS(Am(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Xi.none())])}function UF(n,e,t,...i){n=ln(n,ei);const r=ln(n.firestore,di),a=Am(r);let c;return c="string"==typeof(e=(0,N.m9)(e))||e instanceof ud?oR(a,"updateDoc",n._key,e,t,i):sR(a,"updateDoc",n._key,e),Vy(r,[c.toMutation(n._key,Xi.exists(!0))])}function jF(n,...e){var t,i,r;n=(0,N.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||iR(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges};if(iR(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(i=S.error)||void 0===i?void 0:i.bind(S),e[c+2]=null===(r=S.complete)||void 0===r?void 0:r.bind(S)}let m,y,C;if(n instanceof ei)y=ln(n.firestore,di),C=_y(n._key.path),m={next:S=>{e[c]&&e[c](uR(y,n,S))},error:e[c+1],complete:e[c+2]};else{const S=ln(n,Es);y=ln(S.firestore,di),C=S._query;const x=new km(y);m={next:V=>{e[c]&&e[c](new lf(y,x,S,V))},error:e[c+1],complete:e[c+2]},kF(n._query)}return function(S,x,V,B){const K=new eS(B),ve=new bk(x,K,V);return S.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return gk(yield Ly(S),ve)})),()=>{K.Ia(),S.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return yk(yield Ly(S),ve)}))}}(er(y),C,h,m)}function Vy(n,e){return function(t,i){const r=new Pr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function NU(n,e,t){return Sk.apply(this,arguments)}(yield eR(t),i,r)})),r.promise}(er(n),e)}function uR(n,e,t){const i=t.docs.get(e._key),r=new km(n);return new dd(n,r,e._key,i,new xm(t.hasPendingWrites,t.fromCache),e.converter)}class Qj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Am(e)}get(e){const t=uf(e,this._firestore),i=new Uj(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return lt();const a=r[0];if(a.isFoundDocument())return new A0(this._firestore,i,a.key,a,t.converter);if(a.isNoDocument())return new A0(this._firestore,i,t._key,null,t.converter);throw lt()})}set(e,t,i){const r=uf(e,this._firestore),a=uS(r.converter,t,i),c=oS(this._dataReader,"Transaction.set",r._key,a,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(e,t,i,...r){const a=uf(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof ud?oR(this._dataReader,"Transaction.update",a._key,t,i,r):sR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=uf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=uf(e,this._firestore),i=new km(this._firestore);return super.get(e).then(r=>new dd(this._firestore,i,t._key,r._document,new xm(!1,!1),t.converter))}}function dR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zF(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function $F(){if(!function _2(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){hy=Zr.SDK_VERSION,(0,Zr._registerComponent)(new Mn.wA("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),a=new di(r,new d2(t.getProvider("auth-internal")),new p2(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),a._setSettings(i),a},"PUBLIC")),(0,Zr.registerVersion)(UN,"3.4.8",n),(0,Zr.registerVersion)(UN,"3.4.8","esm2017")}();class k0{constructor(e){this._delegate=e}static fromBase64String(e){return $F(),new k0(Fc.fromBase64String(e))}static fromUint8Array(e){return zF(),new k0(Fc.fromUint8Array(e))}toBase64(){return $F(),this._delegate.toBase64()}toUint8Array(){return zF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hR(n){return function oG(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class aG{enableIndexedDbPersistence(e,t){return function pj(n,e){EF(n=ln(n,di));const t=er(n),i=n._freezeSettings(),r=new Wk;return bF(t,r,new iF(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function mj(n){EF(n=ln(n,di));const e=er(n),t=n._freezeSettings(),i=new Wk;return bF(e,i,new ZU(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gj(n){if(n._initialized&&!n._terminated)throw new xe(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(i){if(!xl.vt())return Promise.resolve();const r=i+"main";yield xl.delete(r)}),function(i){return t.apply(this,arguments)})(Bx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class qF{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof od||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Kb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function cj(n,e,t,i={}){var r;const a=(n=ln(n,S0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Kb("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let c,h;if("string"==typeof i.mockUserToken)c=i.mockUserToken,h=es.MOCK_USER;else{c=(0,N.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new xe(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new es(m)}n._authCredentials=new u2(new jN(c,h))}}(this._delegate,e,t,i)}enableNetwork(){return function yj(n){return function tj(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield aF(n),t=yield lF(n);return e.setNetworkEnabled(!0),function(i){const r=$e(i);return r.fu.delete(0),D0(r)}(t)}))}(er(n=ln(n,di)))}(this._delegate)}disableNetwork(){return function vj(n){return function nj(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield aF(n),t=yield lF(n);return e.setNetworkEnabled(!1),(i=(0,ye.Z)(function*(r){const a=$e(r);a.fu.add(0),yield xy(a),a.wu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(er(n=ln(n,di)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,hF("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _j(n){return function(e){const t=new Pr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function VU(n,e){return kk.apply(this,arguments)}(yield eR(e),t)})),t.promise}(er(n=ln(n,di)))}(this._delegate)}onSnapshotsInSync(e){return function Zj(n,e){return function sj(n,e){const t=new eS(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return i=yield Ly(n),r=t,$e(i).Eu.add(r),void r.next();var i,r})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return i=yield Ly(n),r=t,void $e(i).Eu.delete(r);var i,r}))}}(er(n=ln(n,di)),iR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new By(this,_F(this._delegate,e))}catch(t){throw eo(t,"collection()","Firestore.collection()")}}doc(e){try{return new za(this,iS(this._delegate,e))}catch(t){throw eo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new to(this,function uj(n,e){if(n=ln(n,S0),nR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Es(n,null,(t=e,new ld(pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw eo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Xj(n,e){return function oj(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const i=yield(r=n,tS(r).then(a=>a.datastore));var r;new JU(n.asyncQueue,i,e,t).run()})),t.promise}(er(n=ln(n,di)),t=>e(new Qj(n,t)))}(this._delegate,t=>e(new WF(this,t)))}batch(){return er(this._delegate),new KF(new BF(this._delegate,e=>Vy(this._delegate,e)))}loadBundle(e){return function wj(n,e){const t=er(n=ln(n,di)),i=new hj;return function aj(n,e,t,i){const r=function(a,c){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,y){if(m instanceof Uint8Array)return rF(m,y);if(m instanceof ArrayBuffer)return rF(new Uint8Array(m),y);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new QU(m,c);var m}(t,C0(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function YU(n,e,t){const i=$e(n);var r;(r=(0,ye.Z)(function*(a,c,h){try{const m=yield c.getMetadata();if(yield function(x,V){const B=$e(x),K=Lr(V.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",ve=>B._s.getBundleMetadata(ve,V.id)).then(ve=>!!ve&&ve.createTime.compareTo(K)>=0)}(a.localStore,m))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(x=m).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);h._updateProgress(W1(m));const y=new AU(m,a.localStore,c.M);let C=yield c.da();for(;C;){const x=yield y.ku(C);x&&h._updateProgress(x),C=yield c.da()}const S=yield y.complete();return yield cd(a,S.Fu,void 0),yield function(x,V){const B=$e(x);return B.persistence.runTransaction("Save bundle","readwrite",K=>B._s.saveBundleMetadata(K,V))}(a.localStore,m),h._completeWith(S.progress),Promise.resolve(S.Ou)}catch(m){return Kb("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var x}),function(a,c,h){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield eR(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function bj(n,e){return function lj(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,i){const r=$e(t);return r.persistence.runTransaction("Get named query","readonly",a=>r._s.getNamedQuery(a,i))}(yield Jk(n),e)}))}(er(n=ln(n,di)),e).then(t=>t?new Es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new to(this,t):null)}}class dS extends cR{constructor(e){super(),this.firestore=e}convertBytes(e){return new k0(new Fc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return za.forKey(t,this.firestore,null)}}class WF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dS(e)}get(e){const t=Om(e);return this._delegate.get(t).then(i=>new R0(this._firestore,new dd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Om(e);return i?(dR("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const a=Om(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,i,...r),this}delete(e){const t=Om(e);return this._delegate.delete(t),this}}class KF{constructor(e){this._delegate=e}set(e,t,i){const r=Om(e);return i?(dR("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const a=Om(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,i,...r),this}delete(e){const t=Om(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rm{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new M0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new O0(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Rm.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let a=r.get(t);return a||(a=new Rm(e,new dS(e),t),r.set(t,a)),a}}Rm.INSTANCES=new WeakMap;class za{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dS(e)}static forPath(e,t,i){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new za(t,new ei(t._delegate,i,new Ge(e)))}static forKey(e,t,i){return new za(t,new ei(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new By(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new By(this.firestore,_F(this._delegate,e))}catch(t){throw eo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof ei&&yF(this._delegate,e)}set(e,t){t=dR("DocumentReference.set",t);try{return t?HF(this._delegate,e,t):HF(this._delegate,e)}catch(i){throw eo(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?UF(this._delegate,e):UF(this._delegate,e,t,...i)}catch(r){throw eo(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Kj(n){return Vy(ln(n.firestore,di),[new a0(n._key,Xi.none())])}(this._delegate)}onSnapshot(...e){const t=YF(e),i=ZF(e,r=>new R0(this.firestore,new dd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return jF(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Gj(n){n=ln(n,ei);const e=ln(n.firestore,di),t=er(e),i=new km(e);return function ij(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(i=(0,ye.Z)(function*(r,a,c){try{const h=yield function(m,y){const C=$e(m);return C.persistence.runTransaction("read document","readonly",S=>C.ci.Ls(S,y))}(r,a);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new xe(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=Oy(h,`Failed to get document '${a} from cache`);c.reject(m)}}),function(r,a,c){return i.apply(this,arguments)})(yield Jk(n),e,t);var i})),t.promise}(t,n._key).then(r=>new dd(e,i,n._key,r,new xm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function zj(n){n=ln(n,ei);const e=ln(n.firestore,di);return cF(er(e),n._key,{source:"server"}).then(t=>uR(e,n,t))}(this._delegate):function jj(n){n=ln(n,ei);const e=ln(n.firestore,di);return cF(er(e),n._key).then(t=>uR(e,n,t))}(this._delegate),t.then(i=>new R0(this.firestore,new dd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new za(this.firestore,this._delegate.withConverter(e?Rm.getInstance(this.firestore,e):null))}}function eo(n,e,t){return n.message=n.message.replace(e,t),n}function YF(n){for(const e of n)if("object"==typeof e&&!hR(e))return e;return{}}function ZF(n,e){var t,i;let r;return r=hR(n[0])?n[0]:hR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{r.next&&r.next(e(a))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class R0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new za(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xF(this._delegate,e._delegate)}}class O0 extends R0{data(e){const t=this._delegate.data(e);return function l2(n,e){n||lt()}(void 0!==t),t}}class to{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dS(e)}where(e,t,i){try{return new to(this.firestore,cf(this._delegate,function Rj(n,e,t){const i=e,r=cS("where",n);return new kj(r,i,t)}(e,t,i)))}catch(r){throw eo(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new to(this.firestore,cf(this._delegate,function Nj(n,e="asc"){const t=e,i=cS("orderBy",n);return new Oj(i,t)}(e,t)))}catch(i){throw eo(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new to(this.firestore,cf(this._delegate,function Pj(n){return mF("limit",n),new RF("limit",n,"F")}(e)))}catch(t){throw eo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new to(this.firestore,cf(this._delegate,function Fj(n){return mF("limitToLast",n),new RF("limitToLast",n,"L")}(e)))}catch(t){throw eo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new to(this.firestore,cf(this._delegate,function Lj(...n){return new OF("startAt",n,!0)}(...e)))}catch(t){throw eo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new to(this.firestore,cf(this._delegate,function Vj(...n){return new OF("startAfter",n,!1)}(...e)))}catch(t){throw eo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new to(this.firestore,cf(this._delegate,function Bj(...n){return new NF("endBefore",n,!1)}(...e)))}catch(t){throw eo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new to(this.firestore,cf(this._delegate,function Hj(...n){return new NF("endAt",n,!0)}(...e)))}catch(t){throw eo(t,"endAt()","Query.endAt()")}}isEqual(e){return vF(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function qj(n){n=ln(n,Es);const e=ln(n.firestore,di),t=er(e),i=new km(e);return function rj(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(i=(0,ye.Z)(function*(r,a,c){try{const h=yield KI(r,a,!0),m=new Z1(a,h.li),y=m.Gu(h.documents),C=m.applyChanges(y,!1);c.resolve(C.snapshot)}catch(h){const m=Oy(h,`Failed to execute query '${a} against cache`);c.reject(m)}}),function(r,a,c){return i.apply(this,arguments)})(yield Jk(n),e,t);var i})),t.promise}(t,n._query).then(r=>new lf(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function Wj(n){n=ln(n,Es);const e=ln(n.firestore,di),t=er(e),i=new km(e);return uF(t,n._query,{source:"server"}).then(r=>new lf(e,i,n,r))}(this._delegate):function $j(n){n=ln(n,Es);const e=ln(n.firestore,di),t=er(e),i=new km(e);return kF(n._query),uF(t,n._query).then(r=>new lf(e,i,n,r))}(this._delegate),t.then(i=>new fR(this.firestore,new lf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=YF(e),i=ZF(e,r=>new fR(this.firestore,new lf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return jF(this._delegate,t,i)}withConverter(e){return new to(this.firestore,this._delegate.withConverter(e?Rm.getInstance(this.firestore,e):null))}}class cG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new O0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new to(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new O0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cG(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new O0(this._firestore,i))})}isEqual(e){return xF(this._delegate,e._delegate)}}class By extends to{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new za(this.firestore,e):null}doc(e){try{return new za(this.firestore,void 0===e?iS(this._delegate):iS(this._delegate,e))}catch(t){throw eo(t,"doc()","CollectionReference.doc()")}}add(e){return function Yj(n,e){const t=ln(n.firestore,di),i=iS(n),r=uS(n.converter,e);return Vy(t,[oS(Am(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Xi.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new za(this.firestore,t))}isEqual(e){return yF(this._delegate,e._delegate)}withConverter(e){return new By(this.firestore,this._delegate.withConverter(e?Rm.getInstance(this.firestore,e):null))}}function Om(n){return ln(n,ei)}class pR{constructor(...e){this._delegate=new ud(...e)}static documentId(){return new pR(Fr.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof ud&&this._delegate._internalPath.isEqual(e._internalPath)}}class Nm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function eG(){return new rR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Nm(e)}static delete(){const e=function Jj(){return new T0("deleteField")}();return e._methodName="FieldValue.delete",new Nm(e)}static arrayUnion(...e){const t=function tG(...n){return new Ij("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Nm(t)}static arrayRemove(...e){const t=function nG(...n){return new Sj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Nm(t)}static increment(e){const t=function iG(n){return new Tj("increment",n)}(e);return t._methodName="FieldValue.increment",new Nm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uG={Firestore:qF,GeoPoint:rS,Timestamp:Hi,Blob:k0,Transaction:WF,WriteBatch:KF,DocumentReference:za,DocumentSnapshot:R0,Query:to,QueryDocumentSnapshot:O0,QuerySnapshot:fR,CollectionReference:By,FieldPath:pR,FieldValue:Nm,setLogLevel:function lG(n){!function a2(n){Yh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function QF(n,e){return function fG(n,e=oi.z){return new an.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function mR(n,e){return QF(n,e).pipe((0,Mt.U)(t=>({payload:t,type:"query"})))}function hS(n,e){return mR(n,e).pipe(Sl(void 0),nb(),(0,Mt.U)(([t,i])=>{const r=i.payload.docChanges(),a=r.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,h)=>{const m=r.find(C=>C.doc.ref.isEqual(c.ref)),y=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),a}))}function XF(n,e,t){return hS(n,t).pipe(La((i,r)=>function mG(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function gG(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return gR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return gR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gR(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(a=>a.payload),e),[]),Tu(),(0,Mt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function gR(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function JF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function hG(n){(function dG(n,e){n.INTERNAL.registerComponent(new Mn.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},uG)))})(n,(e,t)=>new qF(e,t,new aG)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Wf.Z);class eL{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=hS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Mt.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Sl(void 0),nb(),fa(([i,r])=>r.length>0||!i),(0,Mt.U)(([i,r])=>r),An.iC)}auditTrail(e){return this.stateChanges(e).pipe(La((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=JF(e);return XF(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return mR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),An.iC)}get(e){return(0,fs.D)(this.query.get(e)).pipe(An.iC)}add(e){return this.ref.add(e)}doc(e){return new tL(this.ref.doc(e),this.afs)}}class tL{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:a}=rL(i,t);return new eL(r,a,this.afs)}snapshotChanges(){return function pG(n,e){return QF(n,e).pipe(Sl(void 0),nb(),(0,Mt.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fs.D)(this.ref.get(e)).pipe(An.iC)}}class _G{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),fa(t=>t.length>0),An.iC):hS(this.query,this.afs.schedulers.outsideAngular).pipe(An.iC)}auditTrail(e){return this.stateChanges(e).pipe(La((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=JF(e);return XF(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return mR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),An.iC)}get(e){return(0,fs.D)(this.query.get(e)).pipe(An.iC)}}const nL=new u.OlP("angularfire2.enableFirestorePersistence"),iL=new u.OlP("angularfire2.firestore.persistenceSettings"),yG=new u.OlP("angularfire2.firestore.settings"),vG=new u.OlP("angularfire2.firestore.use-emulator");function rL(n,e=(t=>t)){return{query:e(n),ref:n}}let sL=(()=>{class n{constructor(t,i,r,a,c,h,m,y,C,S,x,V,B,K,ve,Xe,rt){this.schedulers=m;const et=(0,Li.on)(t,h,i),nt=C;S&&$w(et,h,x,B,K,ve,V,Xe),[this.firestore,this.persistenceEnabled$]=(0,Li.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const Pt=h.runOutsideAngular(()=>et.firestore());if(a&&Pt.settings(a),nt&&Pt.useEmulator(...nt),r&&!Ci(c)){const Gt=()=>{try{return(0,fs.D)(Pt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(bn){return"undefined"!=typeof console&&console.warn(bn),Tn(!1)}};return[Pt,h.runOutsideAngular(Gt)]}return[Pt,Tn(!1)]},[a,nt,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=rL(r,i),h=this.schedulers.ngZone.run(()=>a);return new eL(h,c,this)}collectionGroup(t,i){const r=i||(c=>c),a=this.firestore.collectionGroup(t);return new _G(r(a),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new tL(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Li.Dh),u.LFG(Li.xv,8),u.LFG(nL,8),u.LFG(yG,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(An.HU),u.LFG(iL,8),u.LFG(vG,8),u.LFG(qw,8),u.LFG(Xu,8),u.LFG(jw,8),u.LFG(Gw,8),u.LFG(zw,8),u.LFG(Vh,8),u.LFG(Bh,8),u.LFG($p,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wG=(()=>{class n{constructor(){OD.Z.registerVersion("angularfire",An.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:nL,useValue:!0},{provide:iL,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[sL]}),n})(),oL=(()=>{class n{constructor(t,i){this.db=t,this.firestore=i,this.dbPath="/exercices",this.exercicesRef=t.list(this.dbPath)}getRealtimeExerciceRef(){return this.exercicesRef}addNewExerciceToDB(t){this.exercicesRef.push(t).then(i=>console.log("successfully created")).catch(i=>"error creating => "+i)}removeExerciceFromDB(t){this.exercicesRef.remove(t).then(i=>console.log("successfully removed")).catch(i=>"error removing => "+i)}updateExerciceFromDB(t,i){this.exercicesRef.update(t,i).then(r=>console.log("successfully updated")).catch(r=>"error updating => "+r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($D),u.LFG(sL))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ln(n){return null!=n&&"false"!=`${n}`}function $a(n,e=0){return aL(n)?Number(n):e}function aL(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function fS(n){return Array.isArray(n)?n:[n]}function tr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function hd(n){return n instanceof u.SBq?n.nativeElement:n}function _R(n,e=oi.z){return(0,ai.e)((t,i)=>{let r=null,a=null,c=null;const h=()=>{if(r){r.unsubscribe(),r=null;const y=a;a=null,i.next(y)}};function m(){const y=c+n,C=e.now();if(C<y)return r=this.schedule(void 0,y-C),void i.add(r);h()}t.subscribe((0,hn.x)(i,y=>{a=y,c=e.now(),r||(r=e.schedule(m,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{a=r=null}))})}let lL=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bG=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=hd(t);return new an.y(r=>{const c=this._observeElement(i).subscribe(r);return()=>{c.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new nn.x,r=this._mutationObserverFactory.create(a=>i.next(a));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(lL))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EG=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Ln(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=$a(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(_R(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bG),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),cL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[lL]}),n})();const CG=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function DG(){return(0,u.f3M)(te)}}),IG=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let yR,Hy=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new u.vpe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function SG(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?IG.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(CG,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),N0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();try{yR="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){yR=!1}let Uy,is=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function qi(n){return n===ho}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!yR)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dL=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function hL(){if(Uy)return Uy;if("object"!=typeof document||!document)return Uy=new Set(dL),Uy;let n=document.createElement("input");return Uy=new Set(dL.filter(e=>(n.setAttribute("type",e),n.type===e))),Uy}let P0,Pm,vR;function F0(n){return function TG(){if(null==P0&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>P0=!0}))}finally{P0=P0||!1}return P0}()?n:!!n.capture}function AG(){if(null==Pm){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Pm=!1,Pm;if("scrollBehavior"in document.documentElement.style)Pm=!0;else{const n=Element.prototype.scrollTo;Pm=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Pm}function fL(n){if(function MG(){if(null==vR){const n="undefined"!=typeof document?document.head:null;vR=!(!n||!n.createShadowRoot&&!n.attachShadow)}return vR}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Fm(n){return n.composedPath?n.composedPath()[0]:n.target}function wR(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}var kl=P(727);class L0 extends nn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function jy(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var _S=P(8505);function yL(n){return fa((e,t)=>n<=t)}function Gn(n){return(0,ai.e)((e,t)=>{(0,Qt.Xf)(n).subscribe((0,hn.x)(t,()=>t.complete(),Dg.Z)),!t.closed&&e.subscribe(t)})}function yS(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}const wL="cdk-describedby-message",vS="cdk-describedby-host";let bL=0,EL=(()=>{class n{constructor(t,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+bL++,this._document=t}describe(t,i,r){if(!this._canBeDescribed(t,i))return;const a=CR(i,r);"string"!=typeof i?(CL(i),this._messageRegistry.set(a,{messageElement:i,referenceCount:0})):this._messageRegistry.has(a)||this._createMessageElement(i,r),this._isElementDescribedByMessage(t,a)||this._addMessageReference(t,a)}removeDescription(t,i,r){var a;if(!i||!this._isElementNode(t))return;const c=CR(i,r);if(this._isElementDescribedByMessage(t,c)&&this._removeMessageReference(t,c),"string"==typeof i){const h=this._messageRegistry.get(c);h&&0===h.referenceCount&&this._deleteMessageElement(c)}0===(null===(a=this._messagesContainer)||void 0===a?void 0:a.childNodes.length)&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){var t;const i=this._document.querySelectorAll(`[${vS}="${this._id}"]`);for(let r=0;r<i.length;r++)this._removeCdkDescribedByReferenceIds(i[r]),i[r].removeAttribute(vS);null===(t=this._messagesContainer)||void 0===t||t.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,i){const r=this._document.createElement("div");CL(r),r.textContent=t,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(CR(t,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){var i,r;null===(r=null===(i=this._messageRegistry.get(t))||void 0===i?void 0:i.messageElement)||void 0===r||r.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let a=0;a<i.length;a++)i[a].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const i=yS(t,"aria-describedby").filter(r=>0!=r.indexOf(wL));t.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(t,i){const r=this._messageRegistry.get(i);(function UG(n,e,t){const i=yS(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(vS,this._id),r.referenceCount++}_removeMessageReference(t,i){const r=this._messageRegistry.get(i);r.referenceCount--,function jG(n,e,t){const r=yS(n,e).filter(a=>a!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(vS)}_isElementDescribedByMessage(t,i){const r=yS(t,"aria-describedby"),a=this._messageRegistry.get(i),c=a&&a.messageElement.id;return!!c&&-1!=r.indexOf(c)}_canBeDescribed(t,i){if(!this._isElementNode(t))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),a=t.getAttribute("aria-label");return!(!r||a&&a.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te),u.LFG(is))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function CR(n,e){return"string"==typeof n?`${e||""}/${n}`:n}function CL(n){n.id||(n.id=`${wL}-${bL++}`)}class zG extends class GG{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new nn.x,this._typeaheadSubscription=kl.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new nn.x,this.change=new nn.x,e instanceof u.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,_S.b)(t=>this._pressedLetters.push(t)),_R(e),fa(()=>this._pressedLetters.length>0),(0,Mt.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const a=(this._activeItemIndex+r)%i.length,c=i[a];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(a);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(a=>!e[a]||this._allowedModifierKeys.indexOf(a)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||jy(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof u.n_E?this._items.toArray():this._items}}{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}function IL(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function SL(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const ZG=new u.OlP("cdk-input-modality-detector-options"),QG={ignoreKeys:[18,17,224,91,16]},Gy=F0({passive:!0,capture:!0});let XG=(()=>{class n{constructor(t,i,r,a){this._platform=t,this._mostRecentTarget=null,this._modality=new L0(null),this._lastTouchMs=0,this._onKeydown=c=>{var h,m;(null===(m=null===(h=this._options)||void 0===h?void 0:h.ignoreKeys)||void 0===m?void 0:m.some(y=>y===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Fm(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(IL(c)?"keyboard":"mouse"),this._mostRecentTarget=Fm(c))},this._onTouchstart=c=>{SL(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Fm(c))},this._options=Object.assign(Object.assign({},QG),a),this.modalityDetected=this._modality.pipe(yL(1)),this.modalityChanged=this.modalityDetected.pipe(Tu()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Gy),r.addEventListener("mousedown",this._onMousedown,Gy),r.addEventListener("touchstart",this._onTouchstart,Gy)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Gy),document.removeEventListener("mousedown",this._onMousedown,Gy),document.removeEventListener("touchstart",this._onTouchstart,Gy))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(is),u.LFG(u.R0b),u.LFG(te),u.LFG(ZG,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JG=new u.OlP("liveAnnouncerElement",{providedIn:"root",factory:function e3(){return null}}),t3=new u.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let n3=(()=>{class n{constructor(t,i,r,a){this._ngZone=i,this._defaultOptions=a,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let a,c;return 1===i.length&&"number"==typeof i[0]?c=i[0]:[a,c]=i,this.clear(),clearTimeout(this._previousTimeout),a||(a=r&&r.politeness?r.politeness:"polite"),null==c&&r&&(c=r.duration),this._liveElement.setAttribute("aria-live",a),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(h=>this._currentResolve=h)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t,i;clearTimeout(this._previousTimeout),null===(t=this._liveElement)||void 0===t||t.remove(),this._liveElement=null,null===(i=this._currentResolve)||void 0===i||i.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let a=0;a<i.length;a++)i[a].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(JG,8),u.LFG(u.R0b),u.LFG(te),u.LFG(t3,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const r3=new u.OlP("cdk-focus-monitor-default-options"),wS=F0({passive:!0,capture:!0});let DR=(()=>{class n{constructor(t,i,r,a,c){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new nn.x,this._rootNodeFocusAndBlurListener=h=>{const m=Fm(h),y="focus"===h.type?this._onFocus:this._onBlur;for(let C=m;C;C=C.parentElement)y.call(this,h,C)},this._document=a,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(t,i=!1){const r=hd(t);if(!this._platform.isBrowser||1!==r.nodeType)return Tn(null);const a=fL(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const h={checkChildren:i,subject:new nn.x,rootNode:a};return this._elementInfo.set(r,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const i=hd(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const a=hd(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([h,m])=>this._originChanged(h,i,m)):(this._setOrigin(i),"function"==typeof a.focus&&a.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),a=Fm(t);!r||!r.checkChildren&&i!==a||this._originChanged(i,this._getFocusOrigin(a),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,wS),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,wS)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Gn(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,wS),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,wS),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,a)=>{(a===t||r.checkChildren&&a.contains(t))&&i.push([a,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(is),u.LFG(XG),u.LFG(te,8),u.LFG(r3,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AL="cdk-high-contrast-black-on-white",ML="cdk-high-contrast-white-on-black",IR="cdk-high-contrast-active";let xL=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,a=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(IR),t.remove(AL),t.remove(ML),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(IR),t.add(AL)):2===i&&(t.add(IR),t.add(ML))}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(is),u.LFG(te))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),s3=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xL))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[cL]]}),n})();class kL{}const fd="*";function qa(n,e){return{type:7,name:n,definitions:e,options:{}}}function rs(n,e=null){return{type:4,styles:e,timings:n}}function RL(n,e=null){return{type:2,steps:n,options:e}}function Jt(n){return{type:6,styles:n,offset:null}}function Ti(n,e,t){return{type:0,name:n,styles:e,options:t}}function V0(n){return{type:5,steps:n}}function br(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function OL(n=null){return{type:9,options:n}}function NL(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function PL(n){Promise.resolve(null).then(n)}class B0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){PL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class FL{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const a=this.players.length;0==a?PL(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==a&&this._onFinish()}),c.onDestroy(()=>{++i==a&&this._onDestroy()}),c.onStart(()=>{++r==a&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const sn=!1;function LL(n){return new u.vHH(3e3,sn)}function H3(){return"undefined"!=typeof window&&void 0!==window.document}function TR(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function df(n){switch(n.length){case 0:return new B0;case 1:return n[0];default:return new FL(n)}}function VL(n,e,t,i,r={},a={}){const c=[],h=[];let m=-1,y=null;if(i.forEach(C=>{const S=C.offset,x=S==m,V=x&&y||{};Object.keys(C).forEach(B=>{let K=B,ve=C[B];if("offset"!==B)switch(K=e.normalizePropertyName(K,c),ve){case"!":ve=r[B];break;case fd:ve=a[B];break;default:ve=e.normalizeStyleValue(B,K,ve,c)}V[K]=ve}),x||h.push(V),y=V,m=S}),c.length)throw function M3(n){return new u.vHH(3502,sn)}();return h}function AR(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&MR(t,"start",n)));break;case"done":n.onDone(()=>i(t&&MR(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&MR(t,"destroy",n)))}}function MR(n,e,t){const i=t.totalTime,a=xR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),c=n._data;return null!=c&&(a._data=c),a}function xR(n,e,t,i,r="",a=0,c){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:a,disabled:!!c}}function ya(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function BL(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let kR=(n,e)=>!1,HL=(n,e,t)=>[],UL=null;function RR(n){const e=n.parentNode||n.host;return e===UL?null:e}(TR()||"undefined"!=typeof Element)&&(H3()?(UL=(()=>document.documentElement)(),kR=(n,e)=>{for(;e;){if(e===n)return!0;e=RR(e)}return!1}):kR=(n,e)=>n.contains(e),HL=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Lm=null,jL=!1;function GL(n){Lm||(Lm=function j3(){return"undefined"!=typeof document?document.body:null}()||{},jL=!!Lm.style&&"WebkitAppearance"in Lm.style);let e=!0;return Lm.style&&!function U3(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Lm.style,!e&&jL&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Lm.style)),e}const zL=kR,$L=HL;let qL=(()=>{class n{validateStyleProperty(t){return GL(t)}matchesElement(t,i){return!1}containsElement(t,i){return zL(t,i)}getParentElement(t){return RR(t)}query(t,i,r){return $L(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,a,c,h=[],m){return new B0(r,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),OR=(()=>{class n{}return n.NOOP=new qL,n})();const NR="ng-enter",ES="ng-leave",CS="ng-trigger",DS=".ng-trigger",KL="ng-animating",PR=".ng-animating";function Vm(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:FR(parseFloat(e[1]),e[2])}function FR(n,e){return"s"===e?1e3*n:n}function IS(n,e,t){return n.hasOwnProperty("duration")?n:function $3(n,e,t){let r,a=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(LL()),{duration:0,delay:0,easing:""};r=FR(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(a=FR(parseFloat(m),h[4]));const y=h[5];y&&(c=y)}else r=n;if(!t){let h=!1,m=e.length;r<0&&(e.push(function a3(){return new u.vHH(3100,sn)}()),h=!0),a<0&&(e.push(function l3(){return new u.vHH(3101,sn)}()),h=!0),h&&e.splice(m,0,LL())}return{duration:r,delay:a,easing:c}}(n,e,t)}function zy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function hf(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else zy(n,t);return t}function ZL(n,e,t){return t?e+":"+t+";":""}function QL(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=ZL(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=ZL(0,K3(t),n.style[t]));n.setAttribute("style",e)}function Lc(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=VR(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),TR()&&QL(n))}function Bm(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=VR(t);n.style[i]=""}),TR()&&QL(n))}function H0(n){return Array.isArray(n)?1==n.length?n[0]:RL(n):n}const LR=new RegExp("{{\\s*(.+?)\\s*}}","g");function XL(n){let e=[];if("string"==typeof n){let t;for(;t=LR.exec(n);)e.push(t[1]);LR.lastIndex=0}return e}function SS(n,e,t){const i=n.toString(),r=i.replace(LR,(a,c)=>{let h=e[c];return e.hasOwnProperty(c)||(t.push(function u3(n){return new u.vHH(3003,sn)}()),h=""),h.toString()});return r==i?n:r}function TS(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const W3=/-+([a-z0-9])/g;function VR(n){return n.replace(W3,(...e)=>e[1].toUpperCase())}function K3(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function va(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function d3(n){return new u.vHH(3004,sn)}()}}function JL(n,e){return window.getComputedStyle(n)[e]}function ez(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function tz(n,e,t){if(":"==n[0]){const m=function nz(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function I3(n){return new u.vHH(3016,sn)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function D3(n){return new u.vHH(3015,sn)}()),e;const r=i[1],a=i[2],c=i[3];e.push(eV(r,c));"<"==a[0]&&!("*"==r&&"*"==c)&&e.push(eV(c,r))}(i,t,e)):t.push(n),t}const kS=new Set(["true","1"]),RS=new Set(["false","0"]);function eV(n,e){const t=kS.has(n)||RS.has(n),i=kS.has(e)||RS.has(e);return(r,a)=>{let c="*"==n||n==r,h="*"==e||e==a;return!c&&t&&"boolean"==typeof r&&(c=r?kS.has(n):RS.has(n)),!h&&i&&"boolean"==typeof a&&(h=a?kS.has(e):RS.has(e)),c&&h}}const iz=new RegExp("s*:selfs*,?","g");function BR(n,e,t,i){return new rz(n).build(e,t,i)}class rz{constructor(e){this._driver=e}build(e,t,i){const r=new az(t);this._resetContextStyleTimingState(r);const a=va(this,H0(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),a}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const a=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function f3(){return new u.vHH(3006,sn)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,y=m.name;y.toString().split(/\s*,\s*/).forEach(C=>{m.name=C,a.push(this.visitState(m,t))}),m.name=y}else if(1==h.type){const m=this.visitTransition(h,t);i+=m.queryCount,r+=m.depCount,c.push(m)}else t.errors.push(function p3(){return new u.vHH(3007,sn)}())}),{type:7,name:e.name,states:a,transitions:c,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const a=new Set,c=r||{};i.styles.forEach(h=>{if(OS(h)){const m=h;Object.keys(m).forEach(y=>{XL(m[y]).forEach(C=>{c.hasOwnProperty(C)||a.add(C)})})}}),a.size&&(TS(a.values()),t.errors.push(function m3(n,e){return new u.vHH(3008,sn)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=va(this,H0(e.animation),t);return{type:1,matchers:ez(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Hm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>va(this,i,t)),options:Hm(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const a=e.steps.map(c=>{t.currentTime=i;const h=va(this,c,t);return r=Math.max(r,t.currentTime),h});return t.currentTime=r,{type:3,steps:a,options:Hm(e.options)}}visitAnimate(e,t){const i=function cz(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return HR(IS(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=HR(0,0,"");return a.dynamic=!0,a.strValue=t,a}const r=IS(t,e);return HR(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,a=e.styles?e.styles:Jt({});if(5==a.type)r=this.visitKeyframes(a,t);else{let c=e.styles,h=!1;if(!c){h=!0;const y={};i.easing&&(y.easing=i.easing),c=Jt(y)}t.currentTime+=i.duration+i.delay;const m=this.visitStyle(c,t);m.isEmptyStep=h,r=m}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==fd?i.push(c):t.errors.push(function g3(n){return new u.vHH(3002,sn)}()):i.push(c)}):i.push(e.styles);let r=!1,a=null;return i.forEach(c=>{if(OS(c)){const h=c,m=h.easing;if(m&&(a=m,delete h.easing),!r)for(let y in h)if(h[y].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:a,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,a=t.currentTime;i&&a>0&&(a-=i.duration+i.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(h=>{if(!this._driver.validateStyleProperty(h))return delete c[h],void t.unsupportedCSSPropertiesFound.add(h);const m=t.collectedStyles[t.currentQuerySelector],y=m[h];let C=!0;y&&(a!=r&&a>=y.startTime&&r<=y.endTime&&(t.errors.push(function _3(n,e,t,i,r){return new u.vHH(3010,sn)}()),C=!1),a=y.startTime),C&&(m[h]={startTime:a,endTime:r}),t.options&&function q3(n,e,t){const i=e.params||{},r=XL(n);r.length&&r.forEach(a=>{i.hasOwnProperty(a)||t.push(function c3(n){return new u.vHH(3001,sn)}())})}(c[h],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function y3(){return new u.vHH(3011,sn)}()),i;let a=0;const c=[];let h=!1,m=!1,y=0;const C=e.steps.map(Xe=>{const rt=this._makeStyleAst(Xe,t);let et=null!=rt.offset?rt.offset:function lz(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(OS(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(OS(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(rt.styles),nt=0;return null!=et&&(a++,nt=rt.offset=et),m=m||nt<0||nt>1,h=h||nt<y,y=nt,c.push(nt),rt});m&&t.errors.push(function v3(){return new u.vHH(3012,sn)}()),h&&t.errors.push(function w3(){return new u.vHH(3200,sn)}());const S=e.steps.length;let x=0;a>0&&a<S?t.errors.push(function b3(){return new u.vHH(3202,sn)}()):0==a&&(x=1/(S-1));const V=S-1,B=t.currentTime,K=t.currentAnimateTimings,ve=K.duration;return C.forEach((Xe,rt)=>{const et=x>0?rt==V?1:x*rt:c[rt],nt=et*ve;t.currentTime=B+K.delay+nt,K.duration=nt,this._validateStyleAst(Xe,t),Xe.offset=et,i.styles.push(Xe)}),i}visitReference(e,t){return{type:8,animation:va(this,H0(e.animation),t),options:Hm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Hm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Hm(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[a,c]=function sz(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(iz,"")),n=n.replace(/@\*/g,DS).replace(/@\w+/g,t=>DS+"-"+t.substr(1)).replace(/:animating/g,PR),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+a:a,ya(t.collectedStyles,t.currentQuerySelector,{});const h=va(this,H0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:a,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:Hm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function E3(){return new u.vHH(3013,sn)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:IS(e.timings,t.errors,!0);return{type:12,animation:va(this,H0(e.animation),t),timings:i,options:null}}}class az{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function OS(n){return!Array.isArray(n)&&"object"==typeof n}function Hm(n){return n?(n=zy(n)).params&&(n.params=function oz(n){return n?zy(n):null}(n.params)):n={},n}function HR(n,e,t){return{duration:n,delay:e,easing:t}}function UR(n,e,t,i,r,a,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:a,totalTime:r+a,easing:c,subTimeline:h}}class NS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const hz=new RegExp(":enter","g"),pz=new RegExp(":leave","g");function jR(n,e,t,i,r,a={},c={},h,m,y=[]){return(new mz).buildKeyframes(n,e,t,i,r,a,c,h,m,y)}class mz{buildKeyframes(e,t,i,r,a,c,h,m,y,C=[]){y=y||new NS;const S=new GR(e,t,y,r,a,C,[]);S.options=m,S.currentTimeline.setStyles([c],null,S.errors,m),va(this,i,S);const x=S.timelines.filter(V=>V.containsAnimation());if(Object.keys(h).length){let V;for(let B=x.length-1;B>=0;B--){const K=x[B];if(K.element===t){V=K;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([h],null,S.errors,m)}return x.length?x.map(V=>V.buildKeyframes()):[UR(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),a=t.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);a!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let a=t.currentTimeline.currentTime;const c=null!=i.duration?Vm(i.duration):null,h=null!=i.delay?Vm(i.delay):null;return 0!==c&&e.forEach(m=>{const y=t.appendInstructionToTimeline(m,c,h);a=Math.max(a,y.duration+y.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),va(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const a=e.options;if(a&&(a.params||a.delay)&&(r=t.createSubContext(a),r.transformIntoNewTimeline(),null!=a.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=PS);const c=Vm(a.delay);r.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>va(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Vm(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);a&&h.delayNextStep(a),va(this,c,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return IS(t.params?SS(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(i.duration),this.visitStyle(a,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const a=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(a):i.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,a=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*a),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(r+a),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},a=r.delay?Vm(r.delay):0;a&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=PS);let c=i;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((y,C)=>{t.currentQueryIndex=C;const S=t.createSubContext(e.options,y);a&&S.delayNextStep(a),y===t.element&&(m=S.currentTimeline),va(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,a=e.timings,c=Math.abs(a.duration),h=c*(t.currentQueryTotal-1);let m=c*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":m=h-m;break;case"full":m=i.currentStaggerTime}const C=t.currentTimeline;m&&C.delayNextStep(m);const S=C.currentTime;va(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-S+(r.startTime-i.currentTimeline.startTime)}}const PS={};class GR{constructor(e,t,i,r,a,c,h,m){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=a,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=PS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new FS(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Vm(i.duration)),null!=i.delay&&(r.delay=Vm(i.delay));const a=i.params;if(a){let c=r.params;c||(c=this.options.params={}),Object.keys(a).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=SS(a[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,a=new GR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=PS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},a=new gz(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(a),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,a,c){let h=[];if(r&&h.push(this.element),e.length>0){e=(e=e.replace(hz,"."+this._enterClassName)).replace(pz,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),h.push(...y)}return!a&&0==h.length&&c.push(function C3(n){return new u.vHH(3014,sn)}()),h}}class FS{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new FS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||fd,this._currentKeyframe[t]=fd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const a=r&&r.params||{},c=function _z(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(a=>{t[a]=fd})):hf(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(h=>{const m=SS(c[h],a,i);this._pendingStyles[h]=m,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:fd),this._updateStyle(h,m)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,m)=>{const y=hf(h,!0);Object.keys(y).forEach(C=>{const S=y[C];"!"==S?e.add(C):S==fd&&t.add(C)}),i||(y.offset=m/this.duration),r.push(y)});const a=e.size?TS(e.values()):[],c=t.size?TS(t.values()):[];if(i){const h=r[0],m=zy(h);h.offset=0,m.offset=1,r=[h,m]}return UR(this.element,r,a,c,this.duration,this.startTime,this.easing,!1)}}class gz extends FS{constructor(e,t,i,r,a,c,h=!1){super(e,t,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=a,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],c=i+t,h=t/c,m=hf(e[0],!1);m.offset=0,a.push(m);const y=hf(e[0],!1);y.offset=iV(h),a.push(y);const C=e.length-1;for(let S=1;S<=C;S++){let x=hf(e[S],!1);x.offset=iV((t+x.offset*i)/c),a.push(x)}i=c,t=0,r="",e=a}return UR(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function iV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class zR{}class yz extends zR{normalizePropertyName(e,t){return VR(e)}normalizeStyleValue(e,t,i,r){let a="";const c=i.toString().trim();if(vz[t]&&0!==i&&"0"!==i)if("number"==typeof i)a="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function h3(n,e){return new u.vHH(3005,sn)}())}return c+a}}const vz=(()=>function wz(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function rV(n,e,t,i,r,a,c,h,m,y,C,S,x){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:a,toState:i,toStyles:c,timelines:h,queriedElements:m,preStyleProps:y,postStyleProps:C,totalTime:S,errors:x}}const $R={};class sV{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function bz(n,e,t,i,r){return n.some(a=>a(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],a=this._stateStyles[e],c=r?r.buildStyles(t,i):{};return a?a.buildStyles(t,i):c}build(e,t,i,r,a,c,h,m,y,C){const S=[],x=this.ast.options&&this.ast.options.params||$R,B=this.buildStyles(i,h&&h.params||$R,S),K=m&&m.params||$R,ve=this.buildStyles(r,K,S),Xe=new Set,rt=new Map,et=new Map,nt="void"===r,Pt={params:Object.assign(Object.assign({},x),K)},Gt=C?[]:jR(e,t,this.ast.animation,a,c,B,ve,Pt,y,S);let bn=0;if(Gt.forEach(_d=>{bn=Math.max(_d.duration+_d.delay,bn)}),S.length)return rV(t,this._triggerName,i,r,nt,B,ve,[],[],rt,et,bn,S);Gt.forEach(_d=>{const yd=_d.element,WB=ya(rt,yd,{});_d.preStyleProps.forEach(Gm=>WB[Gm]=!0);const X0=ya(et,yd,{});_d.postStyleProps.forEach(Gm=>X0[Gm]=!0),yd!==t&&Xe.add(yd)});const os=TS(Xe.values());return rV(t,this._triggerName,i,r,nt,B,ve,Gt,os,rt,et,bn)}}class Ez{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=zy(this.defaultParams);return Object.keys(e).forEach(a=>{const c=e[a];null!=c&&(r[a]=c)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const c=a;Object.keys(c).forEach(h=>{let m=c[h];m.length>1&&(m=SS(m,r,t));const y=this.normalizer.normalizePropertyName(h,t);m=this.normalizer.normalizeStyleValue(h,y,m,t),i[y]=m})}}),i}}class Dz{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new Ez(r.style,r.options&&r.options.params||{},i)}),oV(this.states,"true","1"),oV(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new sV(e,r,this.states))}),this.fallbackTransition=function Iz(n,e,t){return new sV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(c=>c.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function oV(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Sz=new NS;class Tz{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],a=BR(this._driver,t,i,[]);if(i.length)throw function x3(n){return new u.vHH(3503,sn)}();this._animations[e]=a}_buildPlayer(e,t,i){const r=e.element,a=VL(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],a=this._animations[e];let c;const h=new Map;if(a?(c=jR(this._driver,t,a,NR,ES,{},{},i,Sz,r),c.forEach(C=>{const S=ya(h,C.element,{});C.postStyleProps.forEach(x=>S[x]=null)})):(r.push(function k3(){return new u.vHH(3300,sn)}()),c=[]),r.length)throw function R3(n){return new u.vHH(3504,sn)}();h.forEach((C,S)=>{Object.keys(C).forEach(x=>{C[x]=this._driver.computeStyle(S,x,fd)})});const y=df(c.map(C=>{const S=h.get(C.element);return this._buildPlayer(C,{},S)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function O3(n){return new u.vHH(3301,sn)}();return t}listen(e,t,i,r){const a=xR(t,"","","");return AR(this._getPlayer(e),i,a,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const a=this._getPlayer(e);switch(i){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const aV="ng-animate-queued",qR="ng-animate-disabled",Rz=[],lV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Oz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wa="__ng_removed";class WR{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Lz(n){return null!=n?n:null}(i?e.value:e),i){const a=zy(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const U0="void",KR=new WR(U0);class Nz{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ka(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function N3(n,e){return new u.vHH(3302,sn)}();if(null==i||0==i.length)throw function P3(n){return new u.vHH(3303,sn)}();if(!function Vz(n){return"start"==n||"done"==n}(i))throw function F3(n,e){return new u.vHH(3400,sn)}();const a=ya(this._elementListeners,e,[]),c={name:t,phase:i,callback:r};a.push(c);const h=ya(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(Ka(e,CS),Ka(e,CS+"-"+t),h[t]=KR),()=>{this._engine.afterFlush(()=>{const m=a.indexOf(c);m>=0&&a.splice(m,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function L3(n){return new u.vHH(3401,sn)}();return t}trigger(e,t,i,r=!0){const a=this._getTrigger(t),c=new YR(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Ka(e,CS),Ka(e,CS+"-"+t),this._engine.statesByElement.set(e,h={}));let m=h[t];const y=new WR(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&m&&y.absorbOptions(m.options),h[t]=y,m||(m=KR),y.value!==U0&&m.value===y.value){if(!function Uz(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const a=t[r];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(m.params,y.params)){const K=[],ve=a.matchStyles(m.value,m.params,K),Xe=a.matchStyles(y.value,y.params,K);K.length?this._engine.reportError(K):this._engine.afterFlush(()=>{Bm(e,ve),Lc(e,Xe)})}return}const x=ya(this._engine.playersByElement,e,[]);x.forEach(K=>{K.namespaceId==this.id&&K.triggerName==t&&K.queued&&K.destroy()});let V=a.matchTransition(m.value,y.value,e,y.params),B=!1;if(!V){if(!r)return;V=a.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:V,fromState:m,toState:y,player:c,isFallbackTransition:B}),B||(Ka(e,aV),c.onStart(()=>{$y(e,aV)})),c.onDone(()=>{let K=this.players.indexOf(c);K>=0&&this.players.splice(K,1);const ve=this._engine.playersByElement.get(e);if(ve){let Xe=ve.indexOf(c);Xe>=0&&ve.splice(Xe,1)}}),this.players.push(c),x.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,DS,!0);i.forEach(r=>{if(r[Wa])return;const a=this._engine.fetchNamespacesByElement(r);a.size?a.forEach(c=>c.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const a=this._engine.statesByElement.get(e),c=new Map;if(a){const h=[];if(Object.keys(a).forEach(m=>{if(c.set(m,a[m].value),this._triggers[m]){const y=this.trigger(e,m,U0,r);y&&h.push(y)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),i&&df(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(a=>{const c=a.name;if(r.has(c))return;r.add(c);const m=this._triggers[c].fallbackTransition,y=i[c]||KR,C=new WR(U0),S=new YR(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:m,fromState:y,toState:C,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const a=i.players.length?i.playersByQueriedElement.get(e):[];if(a&&a.length)r=!0;else{let c=e;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Wa];(!a||a===lV)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ka(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const a=i.element,c=this._elementListeners.get(a);c&&c.forEach(h=>{if(h.name==i.triggerName){const m=xR(a,i.triggerName,i.fromState.value,i.toState.value);m._data=e,AR(i.player,h.phase,m,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const a=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==a||0==c?a-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Pz{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Nz(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,a=i.length-1;if(a>=0){let c=!1;if(void 0!==this.driver.getParentElement){let h=this.driver.getParentElement(t);for(;h;){const m=r.get(h);if(m){const y=i.indexOf(m);i.splice(y+1,0,e),c=!0;break}h=this.driver.getParentElement(h)}}else for(let h=a;h>=0;h--)if(this.driver.containsElement(i[h].hostElement,t)){i.splice(h+1,0,e),c=!0;break}c||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let a=0;a<r.length;a++){const c=i[r[a]].namespaceId;if(c){const h=this._fetchNamespace(c);h&&t.add(h)}}}return t}trigger(e,t,i,r){if(LS(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!LS(t))return;const a=t[Wa];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ka(e,qR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),$y(e,qR))}removeNode(e,t,i,r){if(LS(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,a){this.collectedLeaveElements.push(t),t[Wa]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,i,r,a){return LS(t)?this._fetchNamespace(e).listen(t,i,r,a):()=>{}}_buildInstruction(e,t,i,r,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,DS,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,PR,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return df(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[Wa];if(i&&i.setForRemoval){if(e[Wa]=lV,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(qR))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Ka(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?df(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function V3(n){return new u.vHH(3402,sn)}()}_flushAnimations(e,t){const i=new NS,r=[],a=new Map,c=[],h=new Map,m=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(dt=>{C.add(dt);const Et=this.driver.query(dt,".ng-animate-queued",!0);for(let Tt=0;Tt<Et.length;Tt++)C.add(Et[Tt])});const S=this.bodyNode,x=Array.from(this.statesByElement.keys()),V=dV(x,this.collectedEnterElements),B=new Map;let K=0;V.forEach((dt,Et)=>{const Tt=NR+K++;B.set(Et,Tt),dt.forEach(yn=>Ka(yn,Tt))});const ve=[],Xe=new Set,rt=new Set;for(let dt=0;dt<this.collectedLeaveElements.length;dt++){const Et=this.collectedLeaveElements[dt],Tt=Et[Wa];Tt&&Tt.setForRemoval&&(ve.push(Et),Xe.add(Et),Tt.hasAnimation?this.driver.query(Et,".ng-star-inserted",!0).forEach(yn=>Xe.add(yn)):rt.add(Et))}const et=new Map,nt=dV(x,Array.from(Xe));nt.forEach((dt,Et)=>{const Tt=ES+K++;et.set(Et,Tt),dt.forEach(yn=>Ka(yn,Tt))}),e.push(()=>{V.forEach((dt,Et)=>{const Tt=B.get(Et);dt.forEach(yn=>$y(yn,Tt))}),nt.forEach((dt,Et)=>{const Tt=et.get(Et);dt.forEach(yn=>$y(yn,Tt))}),ve.forEach(dt=>{this.processLeaveNode(dt)})});const Pt=[],Gt=[];for(let dt=this._namespaceList.length-1;dt>=0;dt--)this._namespaceList[dt].drainQueuedTransitions(t).forEach(Tt=>{const yn=Tt.player,Hr=Tt.element;if(Pt.push(yn),this.collectedEnterElements.length){const no=Hr[Wa];if(no&&no.setForMove){if(no.previousTriggersValues&&no.previousTriggersValues.has(Tt.triggerName)){const zm=no.previousTriggersValues.get(Tt.triggerName),yf=this.statesByElement.get(Tt.element);yf&&yf[Tt.triggerName]&&(yf[Tt.triggerName].value=zm)}return void yn.destroy()}}const Vc=!S||!this.driver.containsElement(S,Hr),wa=et.get(Hr),_f=B.get(Hr),gi=this._buildInstruction(Tt,i,_f,wa,Vc);if(gi.errors&&gi.errors.length)return void Gt.push(gi);if(Vc)return yn.onStart(()=>Bm(Hr,gi.fromStyles)),yn.onDestroy(()=>Lc(Hr,gi.toStyles)),void r.push(yn);if(Tt.isFallbackTransition)return yn.onStart(()=>Bm(Hr,gi.fromStyles)),yn.onDestroy(()=>Lc(Hr,gi.toStyles)),void r.push(yn);const ZB=[];gi.timelines.forEach(no=>{no.stretchStartingKeyframe=!0,this.disabledNodes.has(no.element)||ZB.push(no)}),gi.timelines=ZB,i.append(Hr,gi.timelines),c.push({instruction:gi,player:yn,element:Hr}),gi.queriedElements.forEach(no=>ya(h,no,[]).push(yn)),gi.preStyleProps.forEach((no,zm)=>{const yf=Object.keys(no);if(yf.length){let $m=m.get(zm);$m||m.set(zm,$m=new Set),yf.forEach(AO=>$m.add(AO))}}),gi.postStyleProps.forEach((no,zm)=>{const yf=Object.keys(no);let $m=y.get(zm);$m||y.set(zm,$m=new Set),yf.forEach(AO=>$m.add(AO))})});if(Gt.length){const dt=[];Gt.forEach(Et=>{dt.push(function B3(n,e){return new u.vHH(3505,sn)}())}),Pt.forEach(Et=>Et.destroy()),this.reportError(dt)}const bn=new Map,os=new Map;c.forEach(dt=>{const Et=dt.element;i.has(Et)&&(os.set(Et,Et),this._beforeAnimationBuild(dt.player.namespaceId,dt.instruction,bn))}),r.forEach(dt=>{const Et=dt.element;this._getPreviousPlayers(Et,!1,dt.namespaceId,dt.triggerName,null).forEach(yn=>{ya(bn,Et,[]).push(yn),yn.destroy()})});const _d=ve.filter(dt=>fV(dt,m,y)),yd=new Map;uV(yd,this.driver,rt,y,fd).forEach(dt=>{fV(dt,m,y)&&_d.push(dt)});const X0=new Map;V.forEach((dt,Et)=>{uV(X0,this.driver,new Set(dt),m,"!")}),_d.forEach(dt=>{const Et=yd.get(dt),Tt=X0.get(dt);yd.set(dt,Object.assign(Object.assign({},Et),Tt))});const Gm=[],KB=[],YB={};c.forEach(dt=>{const{element:Et,player:Tt,instruction:yn}=dt;if(i.has(Et)){if(C.has(Et))return Tt.onDestroy(()=>Lc(Et,yn.toStyles)),Tt.disabled=!0,Tt.overrideTotalTime(yn.totalTime),void r.push(Tt);let Hr=YB;if(os.size>1){let wa=Et;const _f=[];for(;wa=wa.parentNode;){const gi=os.get(wa);if(gi){Hr=gi;break}_f.push(wa)}_f.forEach(gi=>os.set(gi,Hr))}const Vc=this._buildAnimation(Tt.namespaceId,yn,bn,a,X0,yd);if(Tt.setRealPlayer(Vc),Hr===YB)Gm.push(Tt);else{const wa=this.playersByElement.get(Hr);wa&&wa.length&&(Tt.parentPlayer=df(wa)),r.push(Tt)}}else Bm(Et,yn.fromStyles),Tt.onDestroy(()=>Lc(Et,yn.toStyles)),KB.push(Tt),C.has(Et)&&r.push(Tt)}),KB.forEach(dt=>{const Et=a.get(dt.element);if(Et&&Et.length){const Tt=df(Et);dt.setRealPlayer(Tt)}}),r.forEach(dt=>{dt.parentPlayer?dt.syncPlayerEvents(dt.parentPlayer):dt.destroy()});for(let dt=0;dt<ve.length;dt++){const Et=ve[dt],Tt=Et[Wa];if($y(Et,ES),Tt&&Tt.hasAnimation)continue;let yn=[];if(h.size){let Vc=h.get(Et);Vc&&Vc.length&&yn.push(...Vc);let wa=this.driver.query(Et,PR,!0);for(let _f=0;_f<wa.length;_f++){let gi=h.get(wa[_f]);gi&&gi.length&&yn.push(...gi)}}const Hr=yn.filter(Vc=>!Vc.destroyed);Hr.length?Bz(this,Et,Hr):this.processLeaveNode(Et)}return ve.length=0,Gm.forEach(dt=>{this.players.push(dt),dt.onDone(()=>{dt.destroy();const Et=this.players.indexOf(dt);this.players.splice(Et,1)}),dt.play()}),Gm}elementContainsData(e,t){let i=!1;const r=t[Wa];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,a){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const m=!a||a==U0;h.forEach(y=>{y.queued||!m&&y.triggerName!=r||c.push(y)})}}return(i||r)&&(c=c.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),c}_beforeAnimationBuild(e,t,i){const a=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const y=m.element,C=y!==a,S=ya(i,y,[]);this._getPreviousPlayers(y,C,c,h,t.toState).forEach(V=>{const B=V.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),V.destroy(),S.push(V)})}Bm(a,t.fromStyles)}_buildAnimation(e,t,i,r,a,c){const h=t.triggerName,m=t.element,y=[],C=new Set,S=new Set,x=t.timelines.map(B=>{const K=B.element;C.add(K);const ve=K[Wa];if(ve&&ve.removedBeforeQueried)return new B0(B.duration,B.delay);const Xe=K!==m,rt=function Hz(n){const e=[];return hV(n,e),e}((i.get(K)||Rz).map(bn=>bn.getRealPlayer())).filter(bn=>!!bn.element&&bn.element===K),et=a.get(K),nt=c.get(K),Pt=VL(0,this._normalizer,0,B.keyframes,et,nt),Gt=this._buildPlayer(B,Pt,rt);if(B.subTimeline&&r&&S.add(K),Xe){const bn=new YR(e,h,K);bn.setRealPlayer(Gt),y.push(bn)}return Gt});y.forEach(B=>{ya(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function Fz(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,B.element,B))}),C.forEach(B=>Ka(B,KL));const V=df(x);return V.onDestroy(()=>{C.forEach(B=>$y(B,KL)),Lc(m,t.toStyles)}),S.forEach(B=>{ya(r,B,[]).push(V)}),V}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new B0(e.duration,e.delay)}}class YR{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new B0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>AR(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ya(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function LS(n){return n&&1===n.nodeType}function cV(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function uV(n,e,t,i,r){const a=[];t.forEach(m=>a.push(cV(m)));const c=[];i.forEach((m,y)=>{const C={};m.forEach(S=>{const x=C[S]=e.computeStyle(y,S,r);(!x||0==x.length)&&(y[Wa]=Oz,c.push(y))}),n.set(y,C)});let h=0;return t.forEach(m=>cV(m,a[h++])),c}function dV(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=new Set(e),a=new Map;function c(h){if(!h)return 1;let m=a.get(h);if(m)return m;const y=h.parentNode;return m=t.has(y)?y:r.has(y)?1:c(y),a.set(h,m),m}return e.forEach(h=>{const m=c(h);1!==m&&t.get(m).push(h)}),t}function Ka(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function $y(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Bz(n,e,t){df(t).onDone(()=>n.processLeaveNode(e))}function hV(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof FL?hV(i.players,e):e.push(i)}}function fV(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(a=>r.add(a)):e.set(n,i),t.delete(n),!0}class VS{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,a)=>{},this._transitionEngine=new Pz(e,t,i),this._timelineEngine=new Tz(e,t,i),this._transitionEngine.onRemovalComplete=(r,a)=>this.onRemovalComplete(r,a)}registerTrigger(e,t,i,r,a){const c=e+"-"+r;let h=this._triggerCache[c];if(!h){const m=[],C=BR(this._driver,a,m,[]);if(m.length)throw function A3(n,e){return new u.vHH(3404,sn)}();h=function Cz(n,e,t){return new Dz(n,e,t)}(r,C,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,r,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[a,c]=BL(i);this._timelineEngine.command(a,t,c,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,a){if("@"==i.charAt(0)){const[c,h]=BL(i);return this._timelineEngine.listen(c,t,h,a)}return this._transitionEngine.listen(e,t,i,r,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Gz=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Lc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Lc(this._element,this._initialStyles),this._endStyles&&(Lc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Bm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Bm(this._element,this._endStyles),this._endStyles=null),Lc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function ZR(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];zz(r)&&(e=e||{},e[r]=n[r])}return e}function zz(n){return"display"===n||"position"===n}class pV{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:JL(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class $z{validateStyleProperty(e){return GL(e)}matchesElement(e,t){return!1}containsElement(e,t){return zL(e,t)}getParentElement(e){return RR(e)}query(e,t,i){return $L(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,a,c=[]){const m={duration:i,delay:r,fill:0==r?"both":"forwards"};a&&(m.easing=a);const y={},C=c.filter(x=>x instanceof pV);(function Y3(n,e){return 0===n||0===e})(i,r)&&C.forEach(x=>{let V=x.currentSnapshot;Object.keys(V).forEach(B=>y[B]=V[B])}),t=function Z3(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let a=e[0],c=[];if(i.forEach(h=>{a.hasOwnProperty(h)||c.push(h),a[h]=t[h]}),c.length)for(var r=1;r<e.length;r++){let h=e[r];c.forEach(function(m){h[m]=JL(n,m)})}}return e}(e,t=t.map(x=>hf(x,!1)),y);const S=function jz(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=ZR(e[0]),e.length>1&&(i=ZR(e[e.length-1]))):e&&(t=ZR(e)),t||i?new Gz(n,t,i):null}(e,t);return new pV(e,t,m,S)}}let qz=(()=>{class n extends kL{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?RL(t):t;return mV(this._renderer,null,i,"register",[r]),new Wz(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(te))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Wz extends class o3{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Kz(this._id,e,t||{},this._renderer)}}class Kz{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return mV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function mV(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const gV="@.disabled";let Yz=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(a,c)=>{const h=null==c?void 0:c.parentNode(a);h&&c.removeChild(h,a)}}createRenderer(t,i){const a=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let C=this._rendererCache.get(a);return C||(C=new _V("",a,this.engine),this._rendererCache.set(a,C)),C}const c=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=C=>{Array.isArray(C)?C.forEach(m):this.engine.registerTrigger(c,h,t,C.name,C)};return i.data.animation.forEach(m),new Zz(this,h,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[c,h]=a;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(VS),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class _V{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==gV?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Zz extends _V{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==gV?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function Qz(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),c="";return"@"!=a.charAt(0)&&([a,c]=function Xz(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,r,a,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,t,i)}}let Jz=(()=>{class n extends VS{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te),u.LFG(OR),u.LFG(zR))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const pd=new u.OlP("AnimationModuleType"),yV=[{provide:kL,useClass:qz},{provide:zR,useFactory:function e$(){return new yz}},{provide:VS,useClass:Jz},{provide:u.FYo,useFactory:function t$(n,e,t){return new Yz(n,e,t)},deps:[In,VS,u.R0b]}],vV=[{provide:OR,useFactory:()=>new $z},{provide:pd,useValue:"BrowserAnimations"},...yV],n$=[{provide:OR,useClass:qL},{provide:pd,useValue:"NoopAnimations"},...yV];let i$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?n$:vV}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:vV,imports:[Aa]}),n})();function r$(n,e){if(1&n&&u._UZ(0,"mat-pseudo-checkbox",4),2&n){const t=u.oxw();u.Q6J("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function s$(n,e){if(1&n&&(u.TgZ(0,"span",5),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij("(",t.group.label,")")}}const o$=["*"];let a$=(()=>{class n{}return n.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",n.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",n.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",n.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",n})(),l$=(()=>{class n{}return n.COMPLEX="375ms",n.ENTERING="225ms",n.EXITING="195ms",n})();const u$=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function c$(){return!0}});let ti=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!wR()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xL),u.LFG(u$,8),u.LFG(te))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[N0],N0]}),n})();function j0(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Ln(e)}}}function HS(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function bV(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Ln(e)}}}function d$(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?$a(t):this.defaultTabIndex}}}function EV(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new nn.x,this.errorState=!1}updateErrorState(){const e=this.errorState,a=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);a!==e&&(this.errorState=a,this.stateChanges.next())}}}function CV(n){return class extends n{constructor(...e){super(...e),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new an.y(t=>{this._isInitialized?this._notifySubscriber(t):this._pendingSubscribers.push(t)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(e){e.next(),e.complete()}}}let QR=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class f${constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const DV={enterDuration:225,exitDuration:150},XR=F0({passive:!0}),IV=["mousedown","touchstart"],SV=["mouseup","mouseleave","touchend","touchcancel"];class m${constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=hd(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=Object.assign(Object.assign({},DV),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const c=i.radius||function _$(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),h=e-r.left,m=t-r.top,y=a.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-c+"px",C.style.top=m-c+"px",C.style.height=2*c+"px",C.style.width=2*c+"px",null!=i.color&&(C.style.backgroundColor=i.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C),function g$(n){window.getComputedStyle(n).getPropertyValue("opacity")}(C),C.style.transform="scale(1)";const S=new f$(this,C,i);return S.state=0,this._activeRipples.add(S),i.persistent||(this._mostRecentTransientRipple=S),this._runTimeoutOutsideZone(()=>{const x=S===this._mostRecentTransientRipple;S.state=1,!i.persistent&&(!x||!this._isPointerDown)&&S.fadeOut()},y),S}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},DV),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=hd(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(IV))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(SV),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=IL(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!SL(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,XR)})})}_removeTriggerEvents(){this._triggerElement&&(IV.forEach(e=>{this._triggerElement.removeEventListener(e,this,XR)}),this._pointerUpEventsRegistered&&SV.forEach(e=>{this._triggerElement.removeEventListener(e,this,XR)}))}}const y$=new u.OlP("mat-ripple-global-options");let JR=(()=>{class n{constructor(t,i,r,a,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new m$(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(is),u.Y36(y$,8),u.Y36(pd,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),TV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ti],ti]}),n})(),v$=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pd,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,i){2&t&&u.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),w$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ti]]}),n})();const AV=new u.OlP("MAT_OPTION_PARENT_COMPONENT"),MV=new u.OlP("MatOptgroup");let b$=0;class E${constructor(e,t=!1){this.source=e,this.isUserInput=t}}let C$=(()=>{class n{constructor(t,i,r,a){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=a,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+b$++,this.onSelectionChange=new u.vpe,this._stateChanges=new nn.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Ln(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!jy(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new E$(this,t))}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),xV=(()=>{class n extends C${constructor(t,i,r,a){super(t,i,r,a)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(AV,8),u.Y36(MV,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,i){1&t&&u.NdJ("click",function(){return i._selectViaInteraction()})("keydown",function(a){return i._handleKeydown(a)}),2&t&&(u.Ikx("id",i.id),u.uIk("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),u.ekj("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[u.qOj],ngContentSelectors:o$,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,i){1&t&&(u.F$t(),u.YNc(0,r$,1,2,"mat-pseudo-checkbox",0),u.TgZ(1,"span",1),u.Hsn(2),u.qZA(),u.YNc(3,s$,2,1,"span",2),u._UZ(4,"div",3)),2&t&&(u.Q6J("ngIf",i.multiple),u.xp6(3),u.Q6J("ngIf",i.group&&i.group._inert),u.xp6(1),u.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},directives:[v$,Ei,JR],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function kV(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),a=0;for(let c=0;c<n+1;c++)i[c].group&&i[c].group===r[a]&&a++;return a}return 0}let RV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[TV,$i,ti,w$]]}),n})();var eO=P(5577),I$=P(1144);const S$=["addListener","removeListener"],T$=["addEventListener","removeEventListener"],A$=["on","off"];function US(n,e,t,i){if((0,pa.m)(t)&&(i=t,t=void 0),i)return US(n,e,t).pipe(Ql(i));const[r,a]=function k$(n){return(0,pa.m)(n.addEventListener)&&(0,pa.m)(n.removeEventListener)}(n)?T$.map(c=>h=>n[c](e,h,t)):function M$(n){return(0,pa.m)(n.addListener)&&(0,pa.m)(n.removeListener)}(n)?S$.map(OV(n,e)):function x$(n){return(0,pa.m)(n.on)&&(0,pa.m)(n.off)}(n)?A$.map(OV(n,e)):[];if(!r&&(0,I$.z)(n))return(0,eO.z)(c=>US(c,e,t))((0,Qt.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new an.y(c=>{const h=(...m)=>c.next(1<m.length?m:m[0]);return r(h),()=>a(h)})}function OV(n,e){return t=>i=>n[t](e,i)}const R$=["connectionContainer"],O$=["inputContainer"],N$=["label"];function P$(n,e){1&n&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15)(3,"div",16)(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15)(7,"div",16)(8,"div",17),u.qZA(),u.BQk())}function F$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.Hsn(1,1),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function L$(n,e){if(1&n&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&n){const t=u.oxw(2);u.xp6(3),u.Oqu(t._control.placeholder)}}function V$(n,e){1&n&&u.Hsn(0,3,["*ngSwitchCase","true"])}function B$(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function H$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.YNc(2,L$,4,1,"ng-container",12),u.YNc(3,V$,1,0,"ng-content",12),u.YNc(4,B$,2,0,"span",22),u.qZA()}if(2&n){const t=u.oxw();u.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function U$(n,e){1&n&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function j$(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function G$(n,e){if(1&n&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function z$(n,e){if(1&n&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function $$(n,e){if(1&n&&(u.TgZ(0,"div",27),u.YNc(1,z$,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const q$=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],W$=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],K$=new u.OlP("MatError"),Y$={transitionMessages:qa("transitionMessages",[Ti("enter",Jt({opacity:1,transform:"translateY(0%)"})),br("void => enter",[Jt({opacity:0,transform:"translateY(-5px)"}),rs("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let jS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const Z$=new u.OlP("MatHint");let tO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})(),Q$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const X$=new u.OlP("MatPrefix"),J$=new u.OlP("MatSuffix");let NV=0;const t6=HS(class{constructor(n){this._elementRef=n}},"primary"),FV=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),nO=new u.OlP("MatFormField");let LV=(()=>{class n extends t6{constructor(t,i,r,a,c,h,m){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=a,this._platform=c,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new nn.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+NV++,this._labelId="mat-form-field-label-"+NV++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==m,this.appearance=a&&a.appearance?a.appearance:"legacy",this._hideRequiredMarker=!(!a||null==a.hideRequiredMarker)&&a.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Ln(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Sl(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Gn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Gn(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Kr.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Sl(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Sl(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Gn(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,US(this._label.nativeElement,"transitionend").pipe((0,Fo.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(a=>"start"===a.align):null,r=this._hintChildren?this._hintChildren.find(a=>"end"===a.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",a=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=i.querySelectorAll(`${r}, ${a}`);for(let S=0;S<C.length;S++)C[S].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,h=0;const m=i.querySelectorAll(r),y=i.querySelectorAll(a);if(this._label&&this._label.nativeElement.children.length){const C=i.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const S=this._getStartEnd(C),x=t.children,V=this._getStartEnd(x[0].getBoundingClientRect());let B=0;for(let K=0;K<x.length;K++)B+=x[K].offsetWidth;c=Math.abs(V-S)-5,h=B>0?.75*B+10:0}for(let C=0;C<m.length;C++)m[C].style.width=`${c}px`;for(let C=0;C<y.length;C++)y[C].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(Hy,8),u.Y36(FV,8),u.Y36(is),u.Y36(u.R0b),u.Y36(pd,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,jS,5),u.Suo(r,jS,7),u.Suo(r,tO,5),u.Suo(r,tO,7),u.Suo(r,Q$,5),u.Suo(r,K$,5),u.Suo(r,Z$,5),u.Suo(r,X$,5),u.Suo(r,J$,5)),2&t){let a;u.iGM(a=u.CRH())&&(i._controlNonStatic=a.first),u.iGM(a=u.CRH())&&(i._controlStatic=a.first),u.iGM(a=u.CRH())&&(i._labelChildNonStatic=a.first),u.iGM(a=u.CRH())&&(i._labelChildStatic=a.first),u.iGM(a=u.CRH())&&(i._placeholderChild=a.first),u.iGM(a=u.CRH())&&(i._errorChildren=a),u.iGM(a=u.CRH())&&(i._hintChildren=a),u.iGM(a=u.CRH())&&(i._prefixChildren=a),u.iGM(a=u.CRH())&&(i._suffixChildren=a)}},viewQuery:function(t,i){if(1&t&&(u.Gf(R$,7),u.Gf(O$,5),u.Gf(N$,5)),2&t){let r;u.iGM(r=u.CRH())&&(i._connectionContainerRef=r.first),u.iGM(r=u.CRH())&&(i._inputContainerRef=r.first),u.iGM(r=u.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&u.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:nO,useExisting:n}]),u.qOj],ngContentSelectors:W$,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(u.F$t(q$),u.TgZ(0,"div",0)(1,"div",1,2),u.NdJ("click",function(a){return i._control.onContainerClick&&i._control.onContainerClick(a)}),u.YNc(3,P$,9,0,"ng-container",3),u.YNc(4,F$,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,H$,5,16,"label",8),u.qZA()(),u.YNc(10,U$,2,0,"div",9),u.qZA(),u.YNc(11,j$,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,G$,2,1,"div",12),u.YNc(14,$$,5,2,"div",13),u.qZA()()),2&t&&(u.xp6(3),u.Q6J("ngIf","outline"==i.appearance),u.xp6(1),u.Q6J("ngIf",i._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",i._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",i._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=i.appearance),u.xp6(1),u.Q6J("ngSwitch",i._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},directives:[Ei,EG,zi,ki],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Y$.transitionMessages]},changeDetection:0}),n})(),GS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[$i,ti,cL],ti]}),n})();var n6=P(515);const VV=F0({passive:!0});let i6=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return n6.E;const i=hd(t),r=this._monitoredElements.get(i);if(r)return r.subject;const a=new nn.x,c="cdk-text-field-autofilled",h=m=>{"cdk-text-field-autofill-start"!==m.animationName||i.classList.contains(c)?"cdk-text-field-autofill-end"===m.animationName&&i.classList.contains(c)&&(i.classList.remove(c),this._ngZone.run(()=>a.next({target:m.target,isAutofilled:!1}))):(i.classList.add(c),this._ngZone.run(()=>a.next({target:m.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",h,VV),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:a,unlisten:()=>{i.removeEventListener("animationstart",h,VV)}}),a}stopMonitoring(t){const i=hd(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(is),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const r6=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),s6=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let o6=0;const a6=EV(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let l6=(()=>{class n extends a6{constructor(t,i,r,a,c,h,m,y,C,S){super(h,a,c,r),this._elementRef=t,this._platform=i,this._autofillMonitor=y,this._formField=S,this._uid="mat-input-"+o6++,this.focused=!1,this.stateChanges=new nn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(B=>hL().has(B)),this._iOSKeyupListener=B=>{const K=B.target;!K.value&&0===K.selectionStart&&0===K.selectionEnd&&(K.setSelectionRange(1,1),K.setSelectionRange(0,0))};const x=this._elementRef.nativeElement,V=x.nodeName.toLowerCase();this._inputValueAccessor=m||x,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===V,this._isTextarea="textarea"===V,this._isInFormField=!!S,this._isNativeSelect&&(this.controlType=x.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Ln(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,i,r,a;return null!==(a=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(zr.required))&&void 0!==a&&a}set required(t){this._required=Ln(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&hL().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Ln(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,i;const r=(null===(i=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===i?void 0:i.call(t))?null:this.placeholder;if(r!==this._previousPlaceholder){const a=this._elementRef.nativeElement;this._previousPlaceholder=r,r?a.setAttribute("placeholder",r):a.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){s6.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(is),u.Y36(Pi,10),u.Y36(Fa,8),u.Y36(bu,8),u.Y36(QR),u.Y36(r6,10),u.Y36(i6),u.Y36(u.R0b),u.Y36(nO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&u.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(u.Ikx("disabled",i.disabled)("required",i.required),u.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),u.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:jS,useExisting:n}]),u.qOj,u.TTD]}),n})(),c6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[QR],imports:[[BV,GS,ti],BV,GS]}),n})();const u6=["mat-button",""],d6=["*"],f6=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],p6=HS(j0(bV(class{constructor(n){this._elementRef=n}})));let iO=(()=>{class n extends p6{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const a of f6)this._hasHostAttributes(a)&&this._getHostElement().classList.add(a);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(DR),u.Y36(pd,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&u.Gf(JR,5),2&t){let r;u.iGM(r=u.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(u.uIk("disabled",i.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:u6,ngContentSelectors:d6,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1)(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),u.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[JR],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),HV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[TV,ti],ti]}),n})();function UV(n){return(0,ai.e)((e,t)=>{let a,i=null,r=!1;i=e.subscribe((0,hn.x)(t,void 0,void 0,c=>{a=(0,Qt.Xf)(n(c,UV(n)(e))),i?(i.unsubscribe(),i=null,a.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,a.subscribe(t))})}class y6{}class ff{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),a=r.toLowerCase(),c=t.slice(i+1).trim();this.maybeSetNormalizedName(r,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ff?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ff;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ff?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===a.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class v6{encodeKey(e){return jV(e)}encodeValue(e){return jV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const b6=/%(\d[a-f0-9])/gi,E6={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function jV(n){return encodeURIComponent(n).replace(b6,(e,t)=>{var i;return null!==(i=E6[t])&&void 0!==i?i:e})}function GV(n){return`${n}`}class pf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new v6,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function w6(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const a=r.indexOf("="),[c,h]=-1==a?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,a)),e.decodeValue(r.slice(a+1))],m=t.get(c)||[];m.push(h),t.set(c,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(a=>{t.push({param:i,value:a,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new pf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(GV(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(GV(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class C6{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function zV(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function $V(n){return"undefined"!=typeof Blob&&n instanceof Blob}function qV(n){return"undefined"!=typeof FormData&&n instanceof FormData}class z0{constructor(e,t,i,r){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function D6(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,a=r):a=i,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new ff),this.context||(this.context=new C6),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new pf,this.urlWithParams=t}serializeBody(){return null===this.body?null:zV(this.body)||$V(this.body)||qV(this.body)||function I6(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof pf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||qV(this.body)?null:$V(this.body)?this.body.type||null:zV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,a=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,C=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((x,V)=>x.set(V,e.setHeaders[V]),y)),e.setParams&&(C=Object.keys(e.setParams).reduce((x,V)=>x.set(V,e.setParams[V]),C)),new z0(i,r,c,{params:C,headers:y,context:S,reportProgress:m,responseType:a,withCredentials:h})}}var ss=(()=>((ss=ss||{})[ss.Sent=0]="Sent",ss[ss.UploadProgress=1]="UploadProgress",ss[ss.ResponseHeader=2]="ResponseHeader",ss[ss.DownloadProgress=3]="DownloadProgress",ss[ss.Response=4]="Response",ss[ss.User=5]="User",ss))();class rO extends class S6{constructor(e,t=200,i="OK"){this.headers=e.headers||new ff,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=ss.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new rO({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function sO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let KV=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let a;if(t instanceof z0)a=t;else{let m,y;m=r.headers instanceof ff?r.headers:new ff(r.headers),r.params&&(y=r.params instanceof pf?r.params:new pf({fromObject:r.params})),a=new z0(t,i,void 0!==r.body?r.body:null,{headers:m,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=Tn(a).pipe(function _6(n,e){return(0,pa.m)(e)?(0,eO.z)(n,e,1):(0,eO.z)(n,1)}(m=>this.handler.handle(m)));if(t instanceof z0||"events"===r.observe)return c;const h=c.pipe(fa(m=>m instanceof rO));switch(r.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,Mt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,Mt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,Mt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,Mt.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new pf).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,sO(r,i))}post(t,i,r={}){return this.request("POST",t,sO(r,i))}put(t,i,r={}){return this.request("PUT",t,sO(r,i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(y6))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const A6=["*"];let zS;function $0(n){var e;return(null===(e=function M6(){if(void 0===zS&&(zS=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(zS=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return zS}())||void 0===e?void 0:e.createHTML(n))||n}function YV(n){return Error(`Unable to find icon with the name "${n}"`)}function ZV(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function QV(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Um{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let $S=(()=>{class n{constructor(t,i,r,a){this._httpClient=t,this._sanitizer=i,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,a){return this._addSvgIconConfig(t,i,new Um(r,null,a))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,a){const c=this._sanitizer.sanitize(u.q3G.HTML,r);if(!c)throw QV(r);const h=$0(c);return this._addSvgIconConfig(t,i,new Um("",h,a))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Um(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const a=this._sanitizer.sanitize(u.q3G.HTML,i);if(!a)throw QV(i);const c=$0(a);return this._addSvgIconSetConfig(t,new Um("",c,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,t);if(!i)throw ZV(t);const r=this._cachedIconsByUrl.get(i);return r?Tn(qS(r)):this._loadSvgIconFromConfig(new Um(t,null)).pipe((0,_S.b)(a=>this._cachedIconsByUrl.set(i,a)),(0,Mt.U)(a=>qS(a)))}getNamedSvgIcon(t,i=""){const r=XV(i,t);let a=this._svgIconConfigs.get(r);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(i,t),a)return this._svgIconConfigs.set(r,a),this._getSvgFromConfig(a);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(t,c):function m6(n,e){const t=(0,pa.m)(n)?n:()=>n,i=r=>r.error(t());return new an.y(e?r=>e.schedule(i,0,r):i)}(YV(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Tn(qS(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Mt.U)(i=>qS(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Tn(r):Fd(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(UV(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,c.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),Tn(null)})))).pipe((0,Mt.U)(()=>{const c=this._extractIconWithNameFromAnySet(t,i);if(!c)throw YV(t);return c}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const a=i[r];if(a.svgText&&a.svgText.toString().indexOf(t)>-1){const c=this._svgElementFromConfig(a),h=this._extractSvgIconFromSet(c,t,a.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,_S.b)(i=>t.svgText=i),(0,Mt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Tn(null):this._fetchIcon(t).pipe((0,_S.b)(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const a=t.querySelector(`[id="${i}"]`);if(!a)return null;const c=a.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const h=this._svgElementFromString($0("<svg></svg>"));return h.appendChild(c),this._setSvgAttributes(h,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString($0("<svg></svg>")),r=t.attributes;for(let a=0;a<r.length;a++){const{name:c,value:h}=r[a];"id"!==c&&i.setAttribute(c,h)}for(let a=0;a<t.childNodes.length;a++)t.childNodes[a].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[a].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:a}=t,c=null!==(i=null==a?void 0:a.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function x6(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const h=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,r);if(!h)throw ZV(r);const m=this._inProgressUrlFetches.get(h);if(m)return m;const y=this._httpClient.get(h,{responseType:"text",withCredentials:c}).pipe((0,Mt.U)(C=>$0(C)),function g6(n){return(0,ai.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(h)),(0,pr.B)());return this._inProgressUrlFetches.set(h,y),y}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(XV(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const a=this._resolvers[r](i,t);if(a)return R6(a)?new Um(a.url,null,a.options):new Um(a,null)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(KV,8),u.LFG(hs),u.LFG(te,8),u.LFG(u.qLn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qS(n){return n.cloneNode(!0)}function XV(n,e){return n+":"+e}function R6(n){return!(!n.url||!n.options)}const O6=HS(class{constructor(n){this._elementRef=n}}),N6=new u.OlP("mat-icon-location",{providedIn:"root",factory:function P6(){const n=(0,u.f3M)(te),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),JV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],F6=JV.map(n=>`[${n}]`).join(", "),L6=/^url\(['"]?#(.*?)['"]?\)$/;let eB=(()=>{class n extends O6{constructor(t,i,r,a,c){super(t),this._iconRegistry=i,this._location=a,this._errorHandler=c,this._inline=!1,this._currentIconFetch=kl.w0.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Ln(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,a)=>{r.forEach(c=>{a.setAttribute(c.name,`url('${t}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(F6),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<i.length;a++)JV.forEach(c=>{const h=i[a],m=h.getAttribute(c),y=m?m.match(L6):null;if(y){let C=r.get(h);C||(C=[],r.set(h,C)),C.push({name:c,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe((0,Fo.q)(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${a.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36($S),u.$8M("aria-hidden"),u.Y36(N6),u.Y36(u.qLn))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(u.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),u.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:A6,decls:1,vars:0,template:function(t,i){1&t&&(u.F$t(),u.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),V6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ti],ti]}),n})(),B6=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Ln(t)}get inset(){return this._inset}set inset(t){this._inset=Ln(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,i){2&t&&(u.uIk("aria-orientation",i.vertical?"vertical":"horizontal"),u.ekj("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),n})(),H6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ti],ti]}),n})();var tB=P(4408);const q0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=q0;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(a=>{t=void 0,n(a)});return new kl.w0(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=q0;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=q0;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var nB=P(7565);new class j6 extends nB.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class U6 extends tB.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=q0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(q0.cancelAnimationFrame(t),e._scheduled=void 0)}});let oO,z6=1;const WS={};function iB(n){return n in WS&&(delete WS[n],!0)}const $6={setImmediate(n){const e=z6++;return WS[e]=!0,oO||(oO=Promise.resolve()),oO.then(()=>iB(e)&&n()),e},clearImmediate(n){iB(n)}},{setImmediate:q6,clearImmediate:W6}=$6,KS={setImmediate(...n){const{delegate:e}=KS;return((null==e?void 0:e.setImmediate)||q6)(...n)},clearImmediate(n){const{delegate:e}=KS;return((null==e?void 0:e.clearImmediate)||W6)(n)},delegate:void 0};new class Y6 extends nB.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class K6 extends tB.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=KS.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(KS.clearImmediate(t),e._scheduled=void 0)}});var X6=P(3532);function rB(n,e=oi.z){return function Q6(n){return(0,ai.e)((e,t)=>{let i=!1,r=null,a=null,c=!1;const h=()=>{if(null==a||a.unsubscribe(),a=null,i){i=!1;const y=r;r=null,t.next(y)}c&&t.complete()},m=()=>{a=null,c&&t.complete()};e.subscribe((0,hn.x)(t,y=>{i=!0,r=y,a||(0,Qt.Xf)(n(y)).subscribe(a=(0,hn.x)(t,h,m))},()=>{c=!0,(!i||!a||a.closed)&&t.complete()}))})}(()=>function eq(n=0,e,t=oi.P){let i=-1;return null!=e&&((0,X6.K)(e)?t=e:i=e),new an.y(r=>{let a=function J6(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},a)})}(n,e))}let sB=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new nn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new an.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(rB(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Tn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(fa(a=>!a||r.indexOf(a)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,a)=>{this._scrollableContainsElement(a,t)&&i.push(a)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=hd(i),a=t.getElementRef().nativeElement;do{if(r==a)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>US(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(is),u.LFG(te,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),W0=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new nn.x,this._changeListener=a=>{this._change.next(a)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,a=r.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-a.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(rB(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(is),u.LFG(u.R0b),u.LFG(te,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),aO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[N0,qy],N0,qy]}),n})();class lO{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class oB extends lO{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class aB extends lO{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class iq extends lO{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class sq extends class rq{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof oB?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof aB?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof iq?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,i,r,a){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const h=c.element,m=this._document.createComment("dom-portal");h.parentNode.insertBefore(m,h),this.outletElement.appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(h,m)})},this._document=a}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||u.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let oq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const lB=AG();class lq{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=tr(-this._previousScrollPosition.left),e.style.top=tr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,a=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),lB&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),lB&&(i.scrollBehavior=a,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class cq{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class cB{enable(){}disable(){}attach(){}}function cO(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function uB(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class uq{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();cO(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let dq=(()=>{class n{constructor(t,i,r,a){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new cB,this.close=c=>new cq(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new lq(this._viewportRuler,this._document),this.reposition=c=>new uq(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=a}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(sB),u.LFG(W0),u.LFG(u.R0b),u.LFG(te))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dB{constructor(e){if(this.scrollStrategy=new cB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class hq{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class fq{constructor(e,t,i,r,a,c,h,m,y){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=a,this._keyboardDispatcher=c,this._document=h,this._location=m,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new nn.x,this._attachments=new nn.x,this._detachments=new nn.x,this._locationChanges=kl.w0.EMPTY,this._backdropClickHandler=C=>this._backdropClick.next(C),this._backdropTransitionendHandler=C=>{this._disposeBackdrop(C.target)},this._keydownEvents=new nn.x,this._outsidePointerEvents=new nn.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Fo.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=tr(this._config.width),e.height=tr(this._config.height),e.minWidth=tr(this._config.minWidth),e.minHeight=tr(this._config.minHeight),e.maxWidth=tr(this._config.maxWidth),e.maxHeight=tr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=fS(t||[]).filter(a=>!!a);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Gn((0,Kr.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let hB=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||wR()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let a=0;a<r.length;a++)r[a].remove()}const i=this._document.createElement("div");i.classList.add(t),wR()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te),u.LFG(is))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fB="cdk-overlay-connected-position-bounding-box",pq=/([A-Za-z%]+)$/;class mq{constructor(e,t,i,r,a){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new nn.x,this._resizeSubscription=kl.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(fB),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,a=[];let c;for(let h of this._preferredPositions){let m=this._getOriginPoint(e,r,h),y=this._getOverlayPoint(m,t,h),C=this._getOverlayFit(y,t,i,h);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,m);this._canFitWithFlexibleDimensions(C,y,i)?a.push({position:h,origin:m,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(m,h)}):(!c||c.overlayFit.visibleArea<C.visibleArea)&&(c={overlayFit:C,overlayPoint:y,originPoint:m,position:h,overlayRect:t})}if(a.length){let h=null,m=-1;for(const y of a){const C=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);C>m&&(m=C,h=y)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&jm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(fB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,a;if("center"==i.originX)r=e.left+e.width/2;else{const c=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;r="start"==i.originX?c:h}return t.left<0&&(r-=t.left),a="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(a-=t.top),{x:r,y:a}}_getOverlayPoint(e,t,i){let r,a;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+a}}_getOverlayFit(e,t,i,r){const a=mB(t);let{x:c,y:h}=e,m=this._getOffset(r,"x"),y=this._getOffset(r,"y");m&&(c+=m),y&&(h+=y);let x=0-h,V=h+a.height-i.height,B=this._subtractOverflows(a.width,0-c,c+a.width-i.width),K=this._subtractOverflows(a.height,x,V),ve=B*K;return{visibleArea:ve,isCompletelyWithinViewport:a.width*a.height===ve,fitsInViewportVertically:K===a.height,fitsInViewportHorizontally:B==a.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,a=i.right-t.x,c=pB(this._overlayRef.getConfig().minHeight),h=pB(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=h&&h<=a;return(e.fitsInViewportVertically||null!=c&&c<=r)&&y}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=mB(t),a=this._viewportRect,c=Math.max(e.x+r.width-a.width,0),h=Math.max(e.y+r.height-a.height,0),m=Math.max(a.top-i.top-e.y,0),y=Math.max(a.left-i.left-e.x,0);let C=0,S=0;return C=r.width<=a.width?y||-c:e.x<this._viewportMargin?a.left-i.left-e.x:0,S=r.height<=a.height?m||-h:e.y<this._viewportMargin?a.top-i.top-e.y:0,this._previousPushAmount={x:C,y:S},{x:e.x+C,y:e.y+S}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new hq(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let a,c,h,C,S,x;if("top"===t.overlayY)c=e.y,a=i.height-c+this._viewportMargin;else if("bottom"===t.overlayY)h=i.height-e.y+2*this._viewportMargin,a=i.height-h+this._viewportMargin;else{const V=Math.min(i.bottom-e.y+i.top,e.y),B=this._lastBoundingBoxSize.height;a=2*V,c=e.y-V,a>B&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-B/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)x=i.width-e.x+this._viewportMargin,C=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)S=e.x,C=i.right-e.x;else{const V=Math.min(i.right-e.x+i.left,e.x),B=this._lastBoundingBoxSize.width;C=2*V,S=e.x-V,C>B&&!this._isInitialRender&&!this._growAfterOpen&&(S=e.x-B/2)}return{top:c,left:S,bottom:h,right:x,width:C,height:a}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=tr(i.height),r.top=tr(i.top),r.bottom=tr(i.bottom),r.width=tr(i.width),r.left=tr(i.left),r.right=tr(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(r.maxHeight=tr(a)),c&&(r.maxWidth=tr(c))}this._lastBoundingBoxSize=i,jm(this._boundingBox.style,r)}_resetBoundingBoxStyles(){jm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){jm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),a=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const C=this._viewportRuler.getViewportScrollPosition();jm(i,this._getExactOverlayY(t,e,C)),jm(i,this._getExactOverlayX(t,e,C))}else i.position="static";let h="",m=this._getOffset(t,"x"),y=this._getOffset(t,"y");m&&(h+=`translateX(${m}px) `),y&&(h+=`translateY(${y}px)`),i.transform=h.trim(),c.maxHeight&&(r?i.maxHeight=tr(c.maxHeight):a&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=tr(c.maxWidth):a&&(i.maxWidth="")),jm(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":r.top=tr(a.y),r}_getExactOverlayX(e,t,i){let c,r={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,i)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":r.left=tr(a.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:uB(e,i),isOriginOutsideView:cO(e,i),isOverlayClipped:uB(t,i),isOverlayOutsideView:cO(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&fS(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function jm(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function pB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(pq);return t&&"px"!==t?null:parseFloat(e)}return n||null}function mB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const gB="cdk-global-overlay-wrapper";class gq{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(gB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:a,maxWidth:c,maxHeight:h}=i,m=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),y=!("100%"!==a&&"100vh"!==a||h&&"100%"!==h&&"100vh"!==h);e.position=this._cssPosition,e.marginLeft=m?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,m?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(gB),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let _q=(()=>{class n{constructor(t,i,r,a){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=a}global(){return new gq}flexibleConnectedTo(t){return new mq(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(W0),u.LFG(te),u.LFG(is),u.LFG(hB))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_B=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yq=(()=>{class n extends _B{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){const h=a[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(r)):h.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vq=(()=>{class n extends _B{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=Fm(a)},this._clickListener=a=>{const c=Fm(a),h="click"===a.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const m=this._attachedOverlays.slice();for(let y=m.length-1;y>-1;y--){const C=m[y];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(c)||C.overlayElement.contains(h))break;const S=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>S.next(a)):S.next(a)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(te),u.LFG(is),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wq=0,Wy=(()=>{class n{constructor(t,i,r,a,c,h,m,y,C,S,x){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=a,this._keyboardDispatcher=c,this._injector=h,this._ngZone=m,this._document=y,this._directionality=C,this._location=S,this._outsideClickDispatcher=x}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),a=this._createPortalOutlet(r),c=new dB(t);return c.direction=c.direction||this._directionality.value,new fq(a,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+wq++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new sq(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(dq),u.LFG(hB),u.LFG(u._Vd),u.LFG(_q),u.LFG(yq),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(te),u.LFG(Hy),u.LFG(be),u.LFG(vq))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const bq=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],yB=new u.OlP("cdk-connected-overlay-scroll-strategy");let vB=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),wB=(()=>{class n{constructor(t,i,r,a,c){this._overlay=t,this._dir=c,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=kl.w0.EMPTY,this._attachSubscription=kl.w0.EMPTY,this._detachSubscription=kl.w0.EMPTY,this._positionSubscription=kl.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new u.vpe,this.positionChange=new u.vpe,this.attach=new u.vpe,this.detach=new u.vpe,this.overlayKeydown=new u.vpe,this.overlayOutsideClick=new u.vpe,this._templatePortal=new aB(i,r),this._scrollStrategyFactory=a,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Ln(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Ln(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Ln(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Ln(t)}get push(){return this._push}set push(t){this._push=Ln(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=bq);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!jy(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new dB({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof vB?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function aq(n,e=!1){return(0,ai.e)((t,i)=>{let r=0;t.subscribe((0,hn.x)(i,a=>{const c=n(a,r++);(c||e)&&i.next(a),!c&&i.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Wy),u.Y36(u.Rgc),u.Y36(u.s_b),u.Y36(yB),u.Y36(Hy,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[u.TTD]}),n})();const Cq={provide:yB,deps:[Wy],useFactory:function Eq(n){return()=>n.scrollStrategies.reposition()}};let bB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Wy,Cq],imports:[[N0,oq,aO],aO]}),n})();function uO(n){return n&&"function"==typeof n.connect}class EB{applyChanges(e,t,i,r,a){e.forEachOperation((c,h,m)=>{let y,C;if(null==c.previousIndex){const S=i(c,h,m);y=t.createEmbeddedView(S.templateRef,S.context,S.index),C=1}else null==m?(t.remove(h),C=3):(y=t.get(h),t.move(y,m),C=2);a&&a({context:null==y?void 0:y.context,operation:C,record:c})})}detach(){}}class Iq{constructor(e=!1,t,i=!0){this._multiple=e,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new nn.x,t&&t.length&&(e?t.forEach(r=>this._markSelected(r)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}const K0=new u.OlP("_ViewRepeater"),Tq=["trigger"],Aq=["panel"];function Mq(n,e){if(1&n&&(u.TgZ(0,"span",8),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.placeholder)}}function xq(n,e){if(1&n&&(u.TgZ(0,"span",12),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Oqu(t.triggerValue)}}function kq(n,e){1&n&&u.Hsn(0,0,["*ngSwitchCase","true"])}function Rq(n,e){if(1&n&&(u.TgZ(0,"span",9),u.YNc(1,xq,2,1,"span",10),u.YNc(2,kq,1,0,"ng-content",11),u.qZA()),2&n){const t=u.oxw();u.Q6J("ngSwitch",!!t.customTrigger),u.xp6(2),u.Q6J("ngSwitchCase",!0)}}function Oq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",13)(1,"div",14,15),u.NdJ("@transformPanel.done",function(r){return u.CHM(t),u.oxw()._panelDoneAnimatingStream.next(r.toState)})("keydown",function(r){return u.CHM(t),u.oxw()._handleKeydown(r)}),u.Hsn(3,1),u.qZA()()}if(2&n){const t=u.oxw();u.Q6J("@transformPanelWrap",void 0),u.xp6(1),u.Gre("mat-select-panel ",t._getPanelTheme(),""),u.Udp("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),u.Q6J("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),u.uIk("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const Nq=[[["mat-select-trigger"]],"*"],Pq=["mat-select-trigger","*"],DB={transformPanelWrap:qa("transformPanelWrap",[br("* => void",NL("@transformPanel",[OL()],{optional:!0}))]),transformPanel:qa("transformPanel",[Ti("void",Jt({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Ti("showing",Jt({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Ti("showing-multiple",Jt({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),br("void => *",rs("120ms cubic-bezier(0, 0, 0.2, 1)")),br("* => void",rs("100ms 25ms linear",Jt({opacity:0})))])};let IB=0;const TB=new u.OlP("mat-select-scroll-strategy"),Bq=new u.OlP("MAT_SELECT_CONFIG"),Hq={provide:TB,deps:[Wy],useFactory:function Vq(n){return()=>n.scrollStrategies.reposition()}};class Uq{constructor(e,t){this.source=e,this.value=t}}const jq=bV(d$(j0(EV(class{constructor(n,e,t,i,r){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=i,this.ngControl=r}})))),Gq=new u.OlP("MatSelectTrigger");let zq=(()=>{class n extends jq{constructor(t,i,r,a,c,h,m,y,C,S,x,V,B,K){var ve,Xe,rt;super(c,a,m,y,S),this._viewportRuler=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=h,this._parentFormField=C,this._liveAnnouncer=B,this._defaultOptions=K,this._panelOpen=!1,this._compareWith=(et,nt)=>et===nt,this._uid="mat-select-"+IB++,this._triggerAriaLabelledBy=null,this._destroy=new nn.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+IB++,this._panelDoneAnimatingStream=new nn.x,this._overlayPanelClass=(null===(ve=this._defaultOptions)||void 0===ve?void 0:ve.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(rt=null===(Xe=this._defaultOptions)||void 0===Xe?void 0:Xe.disableOptionCentering)&&void 0!==rt&&rt,this.ariaLabel="",this.optionSelectionChanges=function Sq(n){return new an.y(e=>{(0,Qt.Xf)(n()).subscribe(e)})}(()=>{const et=this.options;return et?et.changes.pipe(Sl(et),Yr(()=>(0,Kr.T)(...et.map(nt=>nt.onSelectionChange)))):this._ngZone.onStable.pipe((0,Fo.q)(1),Yr(()=>this.optionSelectionChanges))}),this.openedChange=new u.vpe,this._openedStream=this.openedChange.pipe(fa(et=>et),(0,Mt.U)(()=>{})),this._closedStream=this.openedChange.pipe(fa(et=>!et),(0,Mt.U)(()=>{})),this.selectionChange=new u.vpe,this.valueChange=new u.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==K?void 0:K.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=K.typeaheadDebounceInterval),this._scrollStrategyFactory=V,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(x)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){var t,i,r,a;return null!==(a=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(zr.required))&&void 0!==a&&a}set required(t){this._required=Ln(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=Ln(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=Ln(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=$a(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Iq(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Tu(),Gn(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Gn(this._destroy)).subscribe(t=>{t.added.forEach(i=>i.select()),t.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Sl(null),Gn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),i=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var t,i;return this.multiple?(null===(t=this._selectionModel)||void 0===t?void 0:t.selected)||[]:null===(i=this._selectionModel)||void 0===i?void 0:i.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const i=t.keyCode,r=40===i||38===i||37===i||39===i,a=13===i||32===i,c=this._keyManager;if(!c.isTyping()&&a&&!jy(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const h=this.selected;c.onKeydown(t);const m=this.selected;m&&h!==m&&this._liveAnnouncer.announce(m.viewValue,1e4)}}_handleOpenKeydown(t){const i=this._keyManager,r=t.keyCode,a=40===r||38===r,c=i.isTyping();if(a&&t.altKey)t.preventDefault(),this.close();else if(c||13!==r&&32!==r||!i.activeItem||jy(t))if(!c&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const h=this.options.some(m=>!m.disabled&&!m.selected);this.options.forEach(m=>{m.disabled||(h?m.select():m.deselect())})}else{const h=i.activeItemIndex;i.onKeydown(t),this._multiple&&a&&t.shiftKey&&i.activeItem&&i.activeItemIndex!==h&&i.activeItem._selectViaInteraction()}else t.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,Fo.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(t);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch(a){return!1}});return i&&this._selectionModel.select(i),i}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new zG(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Gn(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Gn(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=(0,Kr.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Gn(t)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Kr.T)(...this.options.map(i=>i._stateChanges)).pipe(Gn(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,i){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),i&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),i&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,t):t.indexOf(i)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var t;return!this._panelOpen&&!this.disabled&&(null===(t=this.options)||void 0===t?void 0:t.length)>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){var t;if(this.ariaLabel)return null;const i=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();return this.ariaLabelledby?(i?i+" ":"")+this.ariaLabelledby:i}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var t;if(this.ariaLabel)return null;const i=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();let r=(i?i+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(W0),u.Y36(u.sBO),u.Y36(u.R0b),u.Y36(QR),u.Y36(u.SBq),u.Y36(Hy,8),u.Y36(Fa,8),u.Y36(bu,8),u.Y36(nO,8),u.Y36(Pi,10),u.$8M("tabindex"),u.Y36(TB),u.Y36(n3),u.Y36(Bq,8))},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,i){if(1&t&&(u.Gf(Tq,5),u.Gf(Aq,5),u.Gf(wB,5)),2&t){let r;u.iGM(r=u.CRH())&&(i.trigger=r.first),u.iGM(r=u.CRH())&&(i.panel=r.first),u.iGM(r=u.CRH())&&(i._overlayDir=r.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[u.qOj,u.TTD]}),n})(),$q=(()=>{class n extends zq{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,i,r){const a=this._getItemHeight();return Math.min(Math.max(0,a*t-i+a/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Gn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,Fo.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const i=kV(t,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===i?0:function D$(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}((t+i)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new Uq(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),r=this._isRtl(),a=this.multiple?56:32;let c;if(this.multiple)c=40;else if(this.disableOptionCentering)c=16;else{let y=this._selectionModel.selected[0]||this.options.first;c=y&&y.group?32:16}r||(c*=-1);const h=0-(t.left+c-(r?a:0)),m=t.right+c-i.width+(r?0:a);h>0?c+=h+8:m>0&&(c-=m+8),this._overlayDir.offsetX=Math.round(c),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,i,r){const a=this._getItemHeight(),c=(a-this._triggerRect.height)/2,h=Math.floor(256/a);let m;return this.disableOptionCentering?0:(m=0===this._scrollTop?t*a:this._scrollTop===r?(t-(this._getItemCount()-h))*a+(a-(this._getItemCount()*a-256)%a):i-a/2,Math.round(-1*m-c))}_checkOverlayWithinViewport(t){const i=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),a=this._triggerRect.top-8,c=r.height-this._triggerRect.bottom-8,h=Math.abs(this._offsetY),y=Math.min(this._getItemCount()*i,256)-h-this._triggerRect.height;y>c?this._adjustPanelUp(y,c):h>a?this._adjustPanelDown(h,a,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,i){const r=Math.round(t-i);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,i,r){const a=Math.round(t-i);if(this._scrollTop+=a,this._offsetY+=a,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),i=this._getItemCount(),r=Math.min(i*t,256),c=i*t-r;let h;h=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),h+=kV(h,this.options,this.optionGroups);const m=r/2;this._scrollTop=this._calculateOverlayScroll(h,m,c),this._offsetY=this._calculateOverlayOffsetY(h,m,c),this._checkOverlayWithinViewport(c)}_getOriginBasedOnOption(){const t=this._getItemHeight(),i=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,Gq,5),u.Suo(r,xV,5),u.Suo(r,MV,5)),2&t){let a;u.iGM(a=u.CRH())&&(i.customTrigger=a.first),u.iGM(a=u.CRH())&&(i.options=a),u.iGM(a=u.CRH())&&(i.optionGroups=a)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(t,i){1&t&&u.NdJ("keydown",function(a){return i._handleKeydown(a)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&t&&(u.uIk("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-describedby",i._ariaDescribedby||null)("aria-activedescendant",i._getAriaActiveDescendant()),u.ekj("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[u._Bn([{provide:jS,useExisting:n},{provide:AV,useExisting:n}]),u.qOj],ngContentSelectors:Pq,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,i){if(1&t&&(u.F$t(Nq),u.TgZ(0,"div",0,1),u.NdJ("click",function(){return i.toggle()}),u.TgZ(3,"div",2),u.YNc(4,Mq,2,1,"span",3),u.YNc(5,Rq,3,2,"span",4),u.qZA(),u.TgZ(6,"div",5),u._UZ(7,"div",6),u.qZA()(),u.YNc(8,Oq,4,14,"ng-template",7),u.NdJ("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&t){const r=u.MAs(1);u.uIk("aria-owns",i.panelOpen?i.id+"-panel":null),u.xp6(3),u.Q6J("ngSwitch",i.empty),u.uIk("id",i._valueId),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngSwitchCase",!1),u.xp6(3),u.Q6J("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},directives:[vB,zi,ki,Bc,wB,Ss],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[DB.transformPanelWrap,DB.transformPanel]},changeDetection:0}),n})(),qq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Hq],imports:[[$i,bB,RV,ti],qy,GS,RV,ti]}),n})();var Wq=P(9672);function ZS(...n){const e=(0,Yo.yG)(n),t=(0,Yo.jO)(n),{args:i,keys:r}=Ko(n);if(0===i.length)return(0,fs.D)([],e);const a=new an.y(function Kq(n,e,t=_l.y){return i=>{AB(e,()=>{const{length:r}=n,a=new Array(r);let c=r,h=r;for(let m=0;m<r;m++)AB(e,()=>{const y=(0,fs.D)(n[m],e);let C=!1;y.subscribe((0,hn.x)(i,S=>{a[m]=S,C||(C=!0,h--),h||i.next(t(a.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,e,r?c=>Xl(r,c):_l.y));return t?a.pipe(Ql(t)):a}function AB(n,e,t){n?(0,Wq.f)(t,n,e):e()}const MB=new Set;let Yy,Yq=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Qq}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Zq(n){if(!MB.has(n))try{Yy||(Yy=document.createElement("style"),Yy.setAttribute("type","text/css"),document.head.appendChild(Yy)),Yy.sheet&&(Yy.sheet.insertRule(`@media ${n} {body{ }}`,0),MB.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(is))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qq(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Xq=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new nn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return xB(fS(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let a=ZS(xB(fS(t)).map(c=>this._registerQuery(c).observable));return a=Ac(a.pipe((0,Fo.q)(1)),a.pipe(yL(1),_R(0))),a.pipe((0,Mt.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:m,query:y})=>{h.matches=h.matches||m,h.breakpoints[y]=m}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),a={observable:new an.y(c=>{const h=m=>this._zone.run(()=>c.next(m));return i.addListener(h),()=>{i.removeListener(h)}}).pipe(Sl(i),(0,Mt.U)(({matches:c})=>({query:t,matches:c})),Gn(this._destroySubject)),mql:i};return this._queries.set(t,a),a}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Yq),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xB(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const eW=["tooltip"],kB="tooltip-panel",RB=F0({passive:!0}),OB=new u.OlP("mat-tooltip-scroll-strategy"),rW={provide:OB,deps:[Wy],useFactory:function iW(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},sW=new u.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function oW(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let aW=(()=>{class n{constructor(t,i,r,a,c,h,m,y,C,S,x,V){this._overlay=t,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=a,this._ngZone=c,this._platform=h,this._ariaDescriber=m,this._focusMonitor=y,this._dir=S,this._defaultOptions=x,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new nn.x,this._scrollStrategy=C,this._document=V,x&&(x.position&&(this.position=x.position),x.touchGestures&&(this.touchGestures=x.touchGestures)),S.change.pipe(Gn(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(t){var i;t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(i=this._tooltipInstance)||void 0===i||i.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=Ln(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=$a(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=$a(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Gn(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{t.removeEventListener(i,r,RB)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const i=this._createOverlay();this._detach(),this._portal=this._portal||new oB(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=i.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(Gn(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(t)}hide(t=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(t)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){var t;if(this._overlayRef)return this._overlayRef;const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return r.positionChanges.pipe(Gn(this._destroyed)).subscribe(a=>{this._updateCurrentPositionClass(a.connectionPair),this._tooltipInstance&&a.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${kB}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Gn(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Gn(this._destroyed)).subscribe(()=>{var a;return null===(a=this._tooltipInstance)||void 0===a?void 0:a._handleBodyInteraction()}),this._overlayRef.keydownEvents().pipe(Gn(this._destroyed)).subscribe(a=>{this._isTooltipVisible()&&27===a.keyCode&&!jy(a)&&(a.preventDefault(),a.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),(null===(t=this._defaultOptions)||void 0===t?void 0:t.disableTooltipInteractivity)&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const i=t.getConfig().positionStrategy,r=this._getOrigin(),a=this._getOverlayPosition();i.withPositions([this._addOffset(Object.assign(Object.assign({},r.main),a.main)),this._addOffset(Object.assign(Object.assign({},r.fallback),a.fallback))])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={originX:"end",originY:"center"});const{x:a,y:c}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:a,originY:c}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:a,y:c}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:a,overlayY:c}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,Fo.q)(1),Gn(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:i}}_updateCurrentPositionClass(t){const{overlayY:i,originX:r,originY:a}=t;let c;if(c="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===a?"above":"below",c!==this._currentPosition){const h=this._overlayRef;if(h){const m=`${this._cssClassPrefix}-${kB}-`;h.removePanelClass(m+this._currentPosition),h.addPanelClass(m+c)}this._currentPosition=c}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",i=>{var r;const a=i.relatedTarget;(!a||!(null===(r=this._overlayRef)||void 0===r?void 0:r.overlayElement.contains(a)))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",i],["touchcancel",i])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,RB)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const i=this._elementRef.nativeElement,r=i.style;("on"===t||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),lW=(()=>{class n extends aW{constructor(t,i,r,a,c,h,m,y,C,S,x,V){super(t,i,r,a,c,h,m,y,C,S,x,V),this._tooltipComponent=uW}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Wy),u.Y36(u.SBq),u.Y36(sB),u.Y36(u.s_b),u.Y36(u.R0b),u.Y36(is),u.Y36(EL),u.Y36(DR),u.Y36(OB),u.Y36(Hy,8),u.Y36(sW,8),u.Y36(te))},n.\u0275dir=u.lG2({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[u.qOj]}),n})(),cW=(()=>{class n{constructor(t,i){this._changeDetectorRef=t,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new nn.x,this._animationsDisabled="NoopAnimations"===i}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const i=this._tooltip.nativeElement,r=this._showAnimation,a=this._hideAnimation;if(i.classList.remove(t?a:r),i.classList.add(t?r:a),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const c=getComputedStyle(i);("0s"===c.getPropertyValue("animation-duration")||"none"===c.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(pd,8))},n.\u0275dir=u.lG2({type:n}),n})(),uW=(()=>{class n extends cW{constructor(t,i,r){super(t,r),this._breakpointObserver=i,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(Xq),u.Y36(pd,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(t,i){if(1&t&&u.Gf(eW,7),2&t){let r;u.iGM(r=u.CRH())&&(i._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,i){1&t&&u.NdJ("mouseleave",function(a){return i._handleMouseLeave(a)}),2&t&&u.Udp("zoom",i.isVisible()?1:null)},features:[u.qOj],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(t,i){if(1&t&&(u.TgZ(0,"div",0,1),u.NdJ("animationend",function(a){return i._handleAnimationEnd(a)}),u.ALo(2,"async"),u._uU(3),u.qZA()),2&t){let r;u.ekj("mat-tooltip-handset",null==(r=u.lcZ(2,4,i._isHandset))?null:r.matches),u.Q6J("ngClass",i.tooltipClass),u.xp6(3),u.Oqu(i.message)}},directives:[Ss],pipes:[Hc],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}\n"],encapsulation:2,changeDetection:0}),n})(),dW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[rW],imports:[[s3,$i,bB,ti],ti,qy]}),n})();function hW(n,e){if(1&n&&(u.TgZ(0,"mat-option",19),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("value",t),u.xp6(1),u.hij(" ",t," ")}}function fW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-form-field",16)(1,"mat-select",17),u.NdJ("selectionChange",function(r){return u.CHM(t),u.oxw(2)._changePageSize(r.value)}),u.YNc(2,hW,2,2,"mat-option",18),u.qZA()()}if(2&n){const t=u.oxw(2);u.Q6J("appearance",t._formFieldAppearance)("color",t.color),u.xp6(1),u.Q6J("value",t.pageSize)("disabled",t.disabled)("aria-label",t._intl.itemsPerPageLabel),u.xp6(1),u.Q6J("ngForOf",t._displayedPageSizeOptions)}}function pW(n,e){if(1&n&&(u.TgZ(0,"div",20),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Oqu(t.pageSize)}}function mW(n,e){if(1&n&&(u.TgZ(0,"div",12)(1,"div",13),u._uU(2),u.qZA(),u.YNc(3,fW,3,6,"mat-form-field",14),u.YNc(4,pW,2,1,"div",15),u.qZA()),2&n){const t=u.oxw();u.xp6(2),u.hij(" ",t._intl.itemsPerPageLabel," "),u.xp6(1),u.Q6J("ngIf",t._displayedPageSizeOptions.length>1),u.xp6(1),u.Q6J("ngIf",t._displayedPageSizeOptions.length<=1)}}function gW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",function(){return u.CHM(t),u.oxw().firstPage()}),u.O4$(),u.TgZ(1,"svg",7),u._UZ(2,"path",22),u.qZA()()}if(2&n){const t=u.oxw();u.Q6J("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),u.uIk("aria-label",t._intl.firstPageLabel)}}function _W(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"button",23),u.NdJ("click",function(){return u.CHM(t),u.oxw().lastPage()}),u.O4$(),u.TgZ(1,"svg",7),u._UZ(2,"path",24),u.qZA()()}if(2&n){const t=u.oxw();u.Q6J("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),u.uIk("aria-label",t._intl.lastPageLabel)}}let QS=(()=>{class n{constructor(){this.changes=new nn.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const a=t*i;return`${a+1} \u2013 ${a<(r=Math.max(r,0))?Math.min(a+i,r):a+i} of ${r}`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vW={provide:QS,deps:[[new u.FiY,new u.tp0,QS]],useFactory:function yW(n){return n||new QS}},bW=new u.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),EW=j0(CV(class{}));let CW=(()=>{class n extends EW{constructor(t,i,r){if(super(),this._intl=t,this._changeDetectorRef=i,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new u.vpe,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){const{pageSize:a,pageSizeOptions:c,hidePageSize:h,showFirstLastButtons:m}=r;null!=a&&(this._pageSize=a),null!=c&&(this._pageSizeOptions=c),null!=h&&(this._hidePageSize=h),null!=m&&(this._showFirstLastButtons=m)}}get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max($a(t),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=$a(t),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max($a(t),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(i=>$a(i)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(t){this._hidePageSize=Ln(t)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(t){this._showFirstLastButtons=Ln(t)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const r=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,i)=>t-i),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons"},outputs:{page:"page"},features:[u.qOj]}),n})(),NB=(()=>{class n extends CW{constructor(t,i,r){super(t,i,r),r&&null!=r.formFieldAppearance&&(this._formFieldAppearance=r.formFieldAppearance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(QS),u.Y36(u.sBO),u.Y36(bW,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[u.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,i){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u.YNc(2,mW,5,3,"div",2),u.TgZ(3,"div",3)(4,"div",4),u._uU(5),u.qZA(),u.YNc(6,gW,3,5,"button",5),u.TgZ(7,"button",6),u.NdJ("click",function(){return i.previousPage()}),u.O4$(),u.TgZ(8,"svg",7),u._UZ(9,"path",8),u.qZA()(),u.kcU(),u.TgZ(10,"button",9),u.NdJ("click",function(){return i.nextPage()}),u.O4$(),u.TgZ(11,"svg",7),u._UZ(12,"path",10),u.qZA()(),u.YNc(13,_W,3,5,"button",11),u.qZA()()()),2&t&&(u.xp6(2),u.Q6J("ngIf",!i.hidePageSize),u.xp6(3),u.hij(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),u.xp6(1),u.Q6J("ngIf",i.showFirstLastButtons),u.xp6(1),u.Q6J("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),u.uIk("aria-label",i._intl.previousPageLabel),u.xp6(3),u.Q6J("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),u.uIk("aria-label",i._intl.nextPageLabel),u.xp6(3),u.Q6J("ngIf",i.showFirstLastButtons))},directives:[LV,$q,xV,iO,Ei,bi,lW],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}\n"],encapsulation:2,changeDetection:0}),n})(),DW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[vW],imports:[[$i,HV,qq,dW,ti]]}),n})();const IW=["mat-sort-header",""];function SW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",3),u.NdJ("@arrowPosition.start",function(){return u.CHM(t),u.oxw()._disableViewStateAnimation=!0})("@arrowPosition.done",function(){return u.CHM(t),u.oxw()._disableViewStateAnimation=!1}),u._UZ(1,"div",4),u.TgZ(2,"div",5),u._UZ(3,"div",6)(4,"div",7)(5,"div",8),u.qZA()()}if(2&n){const t=u.oxw();u.Q6J("@arrowOpacity",t._getArrowViewState())("@arrowPosition",t._getArrowViewState())("@allowChildren",t._getArrowDirectionState()),u.xp6(2),u.Q6J("@indicator",t._getArrowDirectionState()),u.xp6(1),u.Q6J("@leftPointer",t._getArrowDirectionState()),u.xp6(1),u.Q6J("@rightPointer",t._getArrowDirectionState())}}const TW=["*"],mf=l$.ENTERING+" "+a$.STANDARD_CURVE,Zy={indicator:qa("indicator",[Ti("active-asc, asc",Jt({transform:"translateY(0px)"})),Ti("active-desc, desc",Jt({transform:"translateY(10px)"})),br("active-asc <=> active-desc",rs(mf))]),leftPointer:qa("leftPointer",[Ti("active-asc, asc",Jt({transform:"rotate(-45deg)"})),Ti("active-desc, desc",Jt({transform:"rotate(45deg)"})),br("active-asc <=> active-desc",rs(mf))]),rightPointer:qa("rightPointer",[Ti("active-asc, asc",Jt({transform:"rotate(45deg)"})),Ti("active-desc, desc",Jt({transform:"rotate(-45deg)"})),br("active-asc <=> active-desc",rs(mf))]),arrowOpacity:qa("arrowOpacity",[Ti("desc-to-active, asc-to-active, active",Jt({opacity:1})),Ti("desc-to-hint, asc-to-hint, hint",Jt({opacity:.54})),Ti("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",Jt({opacity:0})),br("* => asc, * => desc, * => active, * => hint, * => void",rs("0ms")),br("* <=> *",rs(mf))]),arrowPosition:qa("arrowPosition",[br("* => desc-to-hint, * => desc-to-active",rs(mf,V0([Jt({transform:"translateY(-25%)"}),Jt({transform:"translateY(0)"})]))),br("* => hint-to-desc, * => active-to-desc",rs(mf,V0([Jt({transform:"translateY(0)"}),Jt({transform:"translateY(25%)"})]))),br("* => asc-to-hint, * => asc-to-active",rs(mf,V0([Jt({transform:"translateY(25%)"}),Jt({transform:"translateY(0)"})]))),br("* => hint-to-asc, * => active-to-asc",rs(mf,V0([Jt({transform:"translateY(0)"}),Jt({transform:"translateY(-25%)"})]))),Ti("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",Jt({transform:"translateY(0)"})),Ti("hint-to-desc, active-to-desc, desc",Jt({transform:"translateY(-25%)"})),Ti("hint-to-asc, active-to-asc, asc",Jt({transform:"translateY(25%)"}))]),allowChildren:qa("allowChildren",[br("* <=> *",[NL("@*",OL(),{optional:!0})])])};let XS=(()=>{class n{constructor(){this.changes=new nn.x}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const MW={provide:XS,deps:[[new u.FiY,new u.tp0,XS]],useFactory:function AW(n){return n||new XS}},xW=new u.OlP("MAT_SORT_DEFAULT_OPTIONS"),kW=CV(j0(class{}));let dO=(()=>{class n extends kW{constructor(t){super(),this._defaultOptions=t,this.sortables=new Map,this._stateChanges=new nn.x,this.start="asc",this._direction="",this.sortChange=new u.vpe}get direction(){return this._direction}set direction(t){this._direction=t}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=Ln(t)}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){var i,r,a;if(!t)return"";const c=null!==(r=null!==(i=null==t?void 0:t.disableClear)&&void 0!==i?i:this.disableClear)&&void 0!==r?r:!!(null===(a=this._defaultOptions)||void 0===a?void 0:a.disableClear);let h=function RW(n,e){let t=["asc","desc"];return"desc"==n&&t.reverse(),e||t.push(""),t}(t.start||this.start,c),m=h.indexOf(this.direction)+1;return m>=h.length&&(m=0),h[m]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xW,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],active:["matSortActive","active"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[u.qOj,u.TTD]}),n})();const OW=j0(class{});let NW=(()=>{class n extends OW{constructor(t,i,r,a,c,h,m){super(),this._intl=t,this._changeDetectorRef=i,this._sort=r,this._columnDef=a,this._focusMonitor=c,this._elementRef=h,this._ariaDescriber=m,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._sortActionDescription="Sort",this._handleStateChanges()}get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(t){this._updateSortActionDescription(t)}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=Ln(t)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{const i=!!t;i!==this._showIndicatorHint&&(this._setIndicatorHintVisible(i),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(t){this._isDisabled()&&t||(this._showIndicatorHint=t,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(t){this._viewState=t||{},this._disableViewStateAnimation&&(this._viewState={toState:t.toState})}_toggleOnInteraction(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(t){!this._isDisabled()&&(32===t.keyCode||13===t.keyCode)&&(t.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const t=this._viewState.fromState;return(t?`${t}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(t){var i,r;this._sortButton&&(null===(i=this._ariaDescriber)||void 0===i||i.removeDescription(this._sortButton,this._sortActionDescription),null===(r=this._ariaDescriber)||void 0===r||r.describe(this._sortButton,t)),this._sortActionDescription=t}_handleStateChanges(){this._rerenderSubscription=(0,Kr.T)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(XS),u.Y36(u.sBO),u.Y36(dO,8),u.Y36("MAT_SORT_HEADER_COLUMN_DEF",8),u.Y36(DR),u.Y36(u.SBq),u.Y36(EL,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(t,i){1&t&&u.NdJ("click",function(){return i._handleClick()})("keydown",function(a){return i._handleKeydown(a)})("mouseenter",function(){return i._setIndicatorHintVisible(!0)})("mouseleave",function(){return i._setIndicatorHintVisible(!1)}),2&t&&(u.uIk("aria-sort",i._getAriaSortAttribute()),u.ekj("mat-sort-header-disabled",i._isDisabled()))},inputs:{disabled:"disabled",id:["mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",sortActionDescription:"sortActionDescription",disableClear:"disableClear"},exportAs:["matSortHeader"],features:[u.qOj],attrs:IW,ngContentSelectors:TW,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(t,i){1&t&&(u.F$t(),u.TgZ(0,"div",0)(1,"div",1),u.Hsn(2),u.qZA(),u.YNc(3,SW,6,6,"div",2),u.qZA()),2&t&&(u.ekj("mat-sort-header-sorted",i._isSorted())("mat-sort-header-position-before","before"==i.arrowPosition),u.uIk("tabindex",i._isDisabled()?null:0)("role",i._isDisabled()?null:"button"),u.xp6(3),u.Q6J("ngIf",i._renderArrow()))},directives:[Ei],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}\n"],encapsulation:2,data:{animation:[Zy.indicator,Zy.leftPointer,Zy.rightPointer,Zy.arrowOpacity,Zy.arrowPosition,Zy.allowChildren]},changeDetection:0}),n})(),PW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[MW],imports:[[$i,ti]]}),n})();const LW=[[["caption"]],[["colgroup"],["col"]]],VW=["caption","colgroup, col"];function hO(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=Ln(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const Qy=new u.OlP("CDK_TABLE");let Xy=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),Jy=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),JS=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class jW{}const GW=hO(jW);let md=(()=>{class n extends GW{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=Ln(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Qy,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,Xy,5),u.Suo(r,Jy,5),u.Suo(r,JS,5)),2&t){let a;u.iGM(a=u.CRH())&&(i.cell=a.first),u.iGM(a=u.CRH())&&(i.headerCell=a.first),u.iGM(a=u.CRH())&&(i.footerCell=a.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[u._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),u.qOj]}),n})();class fO{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let pO=(()=>{class n extends fO{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(md),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[u.qOj]}),n})(),mO=(()=>{class n extends fO{constructor(t,i){var r;if(super(t,i),1===(null===(r=t._table)||void 0===r?void 0:r._elementRef.nativeElement.nodeType)){const a=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===a||"treegrid"===a?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(md),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[u.qOj]}),n})();class FB{constructor(){this.tasks=[],this.endTasks=[]}}const gO=new u.OlP("_COALESCED_STYLE_SCHEDULER");let LB=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new nn.x}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new FB,this._getScheduleObservable().pipe(Gn(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new FB;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,fs.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe((0,Fo.q)(1))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),_O=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Z0?t.headerCell.template:this instanceof Q0?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();class zW extends _O{}const $W=hO(zW);let Z0=(()=>{class n extends $W{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4),u.Y36(Qy,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[u.qOj,u.TTD]}),n})();class qW extends _O{}const WW=hO(qW);let Q0=(()=>{class n extends WW{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4),u.Y36(Qy,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[u.qOj,u.TTD]}),n})(),eT=(()=>{class n extends _O{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4),u.Y36(Qy,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[u.qOj]}),n})(),gd=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),yO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&u.GkF(0,0)},directives:[gd],encapsulation:2}),n})(),wO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&u.GkF(0,0)},directives:[gd],encapsulation:2}),n})(),tT=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const VB=["top","bottom","left","right"];class KW{constructor(e,t,i,r,a=!0,c=!0,h){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=a,this._needsPositionStickyOnElement=c,this._positionListener=h,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let a=0;a<r.children.length;a++)i.push(r.children[a])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(x=>x)&&!i.some(x=>x))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const a=e[0],c=a.children.length,h=this._getCellWidths(a,r),m=this._getStickyStartColumnPositions(h,t),y=this._getStickyEndColumnPositions(h,i),C=t.lastIndexOf(!0),S=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const x="rtl"===this.direction,V=x?"right":"left",B=x?"left":"right";for(const K of e)for(let ve=0;ve<c;ve++){const Xe=K.children[ve];t[ve]&&this._addStickyStyle(Xe,V,m[ve],ve===C),i[ve]&&this._addStickyStyle(Xe,B,y[ve],ve===S)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===C?[]:h.slice(0,C+1).map((K,ve)=>t[ve]?K:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===S?[]:h.slice(S).map((K,ve)=>i[ve+S]?K:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,a="bottom"===i?t.slice().reverse():t,c=[],h=[],m=[];for(let C=0,S=0;C<r.length;C++){if(!a[C])continue;c[C]=S;const x=r[C];m[C]=this._isNativeHtmlTable?Array.from(x.children):[x];const V=x.getBoundingClientRect().height;S+=V,h[C]=V}const y=a.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var C,S;for(let x=0;x<r.length;x++){if(!a[x])continue;const V=c[x],B=x===y;for(const K of m[x])this._addStickyStyle(K,i,V,B)}"top"===i?null===(C=this._positionListener)||void 0===C||C.stickyHeaderRowsUpdated({sizes:h,offsets:c,elements:m}):null===(S=this._positionListener)||void 0===S||S.stickyFooterRowsUpdated({sizes:h,offsets:c,elements:m})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);VB.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of VB)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let a=0;a<r.length;a++)i.push(r[a].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let a=0;a<e.length;a++)t[a]&&(i[a]=r,r+=e[a]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let a=e.length;a>0;a--)t[a]&&(i[a]=r,r+=e[a]);return i}}const bO=new u.OlP("CDK_SPL");let nT=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),iT=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),rT=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),sT=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),oT=(()=>{class n{constructor(t,i,r,a,c,h,m,y,C,S,x,V){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=c,this._platform=m,this._viewRepeater=y,this._coalescedStyleScheduler=C,this._viewportRuler=S,this._stickyPositioningListener=x,this._ngZone=V,this._onDestroy=new nn.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new u.vpe,this.viewChange=new L0({start:0,end:Number.MAX_VALUE}),a||this._elementRef.nativeElement.setAttribute("role","table"),this._document=h,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=Ln(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=Ln(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(Gn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),uO(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,a,c)=>this._getEmbeddedViewArgs(r.item,c),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&u.R0b.isInAngularZone()?this._ngZone.onStable.pipe((0,Fo.q)(1),Gn(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const a=this._headerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,a,"top"),this._headerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const a=this._footerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,a,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,a),this._footerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((a,c)=>{this._addStickyColumnStyles([a],this._headerRowDefs[c])}),this._rowDefs.forEach(a=>{const c=[];for(let h=0;h<i.length;h++)this._renderRows[h].rowDef===a&&c.push(i[h]);this._addStickyColumnStyles(c,a)}),r.forEach((a,c)=>{this._addStickyColumnStyles([a],this._footerRowDefs[c])}),Array.from(this._columnDefsByName.values()).forEach(a=>a.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let a=this._data[r];const c=this._getRenderRowsForData(a,r,i.get(a));this._cachedRenderRowsMap.has(a)||this._cachedRenderRowsMap.set(a,new WeakMap);for(let h=0;h<c.length;h++){let m=c[h];const y=this._cachedRenderRowsMap.get(m.data);y.has(m.rowDef)?y.get(m.rowDef).push(m):y.set(m.rowDef,[m]),t.push(m)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(c=>{const h=r&&r.has(c)?r.get(c):[];if(h.length){const m=h.shift();return m.dataIndex=i,m}return{data:t,rowDef:c,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),aT(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=aT(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=aT(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=aT(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(c,h)=>c||!!h.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const a=this._footerRowDefs.reduce(t,!1);return a&&this._forceRenderFooterRows(),i||r||a}_switchDataSource(t){this._data=[],uO(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;uO(this.dataSource)?t=this.dataSource.connect(this):function FW(n){return!!n&&(n instanceof an.y||(0,pa.m)(n.lift)&&(0,pa.m)(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=Tn(this.dataSource)),this._renderChangeSubscription=t.pipe(Gn(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(h=>this._columnDefsByName.get(h)),a=r.map(h=>h.sticky),c=r.map(h=>h.stickyEnd);this._stickyStyler.updateStickyColumns(t,a,c,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const a=t.viewContainer.get(r);i.push(a.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(a=>!a.when||a.when(i,t));else{let a=this._rowDefs.find(c=>c.when&&c.when(i,t))||this._defaultRowDef;a&&r.push(a)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,a={}){const c=t.viewContainer.createEmbeddedView(i.template,a,r);return this._renderCellTemplateForItem(i,a),c}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))gd.mostRecentCellOutlet&&gd.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const c=t.get(i).context;c.count=r,c.first=0===i,c.last=i===r-1,c.even=i%2==0,c.odd=!c.even,this.multiTemplateDataRows?(c.dataIndex=this._renderRows[i].dataIndex,c.renderIndex=i):c.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const a=this._document.createElement(r.tag);a.setAttribute("role","rowgroup");for(const c of r.outlets)a.appendChild(c.elementRef.nativeElement);t.appendChild(a)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new KW(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Tn()).pipe(Gn(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const a=r.createEmbeddedView(t.templateRef),c=a.rootNodes[0];1===a.rootNodes.length&&(null==c?void 0:c.nodeType)===this._document.ELEMENT_NODE&&(c.setAttribute("role","row"),c.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.sBO),u.Y36(u.SBq),u.$8M("role"),u.Y36(Hy,8),u.Y36(te),u.Y36(is),u.Y36(K0),u.Y36(gO),u.Y36(W0),u.Y36(bO,12),u.Y36(u.R0b,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,tT,5),u.Suo(r,md,5),u.Suo(r,eT,5),u.Suo(r,Z0,5),u.Suo(r,Q0,5)),2&t){let a;u.iGM(a=u.CRH())&&(i._noDataRow=a.first),u.iGM(a=u.CRH())&&(i._contentColumnDefs=a),u.iGM(a=u.CRH())&&(i._contentRowDefs=a),u.iGM(a=u.CRH())&&(i._contentHeaderRowDefs=a),u.iGM(a=u.CRH())&&(i._contentFooterRowDefs=a)}},viewQuery:function(t,i){if(1&t&&(u.Gf(nT,7),u.Gf(iT,7),u.Gf(rT,7),u.Gf(sT,7)),2&t){let r;u.iGM(r=u.CRH())&&(i._rowOutlet=r.first),u.iGM(r=u.CRH())&&(i._headerRowOutlet=r.first),u.iGM(r=u.CRH())&&(i._footerRowOutlet=r.first),u.iGM(r=u.CRH())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[u._Bn([{provide:Qy,useExisting:n},{provide:K0,useClass:EB},{provide:gO,useClass:LB},{provide:bO,useValue:null}])],ngContentSelectors:VW,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(u.F$t(LW),u.Hsn(0),u.Hsn(1,1),u.GkF(2,0)(3,1)(4,2)(5,3))},directives:[iT,nT,sT,rT],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function aT(n,e){return n.concat(Array.from(e))}let ZW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[aO]]}),n})();const QW=[[["caption"]],[["colgroup"],["col"]]],XW=["caption","colgroup, col"];let HB=(()=>{class n extends oT{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[u._Bn([{provide:K0,useClass:EB},{provide:oT,useExisting:n},{provide:Qy,useExisting:n},{provide:gO,useClass:LB},{provide:bO,useValue:null}]),u.qOj],ngContentSelectors:XW,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(u.F$t(QW),u.Hsn(0),u.Hsn(1,1),u.GkF(2,0)(3,1)(4,2)(5,3))},directives:[iT,nT,sT,rT],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),EO=(()=>{class n extends Xy{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matCellDef",""]],features:[u._Bn([{provide:Xy,useExisting:n}]),u.qOj]}),n})(),CO=(()=>{class n extends Jy{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[u._Bn([{provide:Jy,useExisting:n}]),u.qOj]}),n})(),DO=(()=>{class n extends md{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[u._Bn([{provide:md,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),u.qOj]}),n})(),IO=(()=>{class n extends pO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[u.qOj]}),n})(),SO=(()=>{class n extends mO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[u.qOj]}),n})(),UB=(()=>{class n extends Z0{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[u._Bn([{provide:Z0,useExisting:n}]),u.qOj]}),n})(),jB=(()=>{class n extends eT{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[u._Bn([{provide:eT,useExisting:n}]),u.qOj]}),n})(),GB=(()=>{class n extends yO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[u._Bn([{provide:yO,useExisting:n}]),u.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&u.GkF(0,0)},directives:[gd],encapsulation:2}),n})(),zB=(()=>{class n extends wO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[u._Bn([{provide:wO,useExisting:n}]),u.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&u.GkF(0,0)},directives:[gd],encapsulation:2}),n})(),c5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ZW,ti],ti]}),n})();class $B extends class d5 extends class Dq{}{constructor(e=[]){super(),this._renderData=new L0([]),this._filter=new L0(""),this._internalPageChanges=new nn.x,this._renderChangesSubscription=null,this.sortingDataAccessor=(t,i)=>{const r=t[i];if(aL(r)){const a=Number(r);return a<9007199254740991?a:r}return r},this.sortData=(t,i)=>{const r=i.active,a=i.direction;return r&&""!=a?t.sort((c,h)=>{let m=this.sortingDataAccessor(c,r),y=this.sortingDataAccessor(h,r);const C=typeof m,S=typeof y;C!==S&&("number"===C&&(m+=""),"number"===S&&(y+=""));let x=0;return null!=m&&null!=y?m>y?x=1:m<y&&(x=-1):null!=m?x=1:null!=y&&(x=-1),x*("asc"==a?1:-1)}):t},this.filterPredicate=(t,i)=>{const r=Object.keys(t).reduce((c,h)=>c+t[h]+"\u25ec","").toLowerCase(),a=i.trim().toLowerCase();return-1!=r.indexOf(a)},this._data=new L0(e),this._updateChangeSubscription()}get data(){return this._data.value}set data(e){e=Array.isArray(e)?e:[],this._data.next(e),this._renderChangesSubscription||this._filterData(e)}get filter(){return this._filter.value}set filter(e){this._filter.next(e),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(e){this._sort=e,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(e){this._paginator=e,this._updateChangeSubscription()}_updateChangeSubscription(){var e;const t=this._sort?(0,Kr.T)(this._sort.sortChange,this._sort.initialized):Tn(null),i=this._paginator?(0,Kr.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):Tn(null),a=ZS([this._data,this._filter]).pipe((0,Mt.U)(([m])=>this._filterData(m))),c=ZS([a,t]).pipe((0,Mt.U)(([m])=>this._orderData(m))),h=ZS([c,i]).pipe((0,Mt.U)(([m])=>this._pageData(m)));null===(e=this._renderChangesSubscription)||void 0===e||e.unsubscribe(),this._renderChangesSubscription=h.subscribe(m=>this._renderData.next(m))}_filterData(e){return this.filteredData=null==this.filter||""===this.filter?e:e.filter(t=>this.filterPredicate(t,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(e){return this.sort?this.sortData(e.slice(),this.sort):e}_pageData(e){if(!this.paginator)return e;const t=this.paginator.pageIndex*this.paginator.pageSize;return e.slice(t,t+this.paginator.pageSize)}_updatePaginator(e){Promise.resolve().then(()=>{const t=this.paginator;if(t&&(t.length=e,t.pageIndex>0)){const i=Math.ceil(t.length/t.pageSize)-1||0,r=Math.min(t.pageIndex,i);r!==t.pageIndex&&(t.pageIndex=r,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){var e;null===(e=this._renderChangesSubscription)||void 0===e||e.unsubscribe(),this._renderChangesSubscription=null}}{}function h5(n,e){1&n&&(u.TgZ(0,"th",13),u._uU(1,"Id"),u.qZA())}function f5(n,e){if(1&n&&(u.TgZ(0,"td",14),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t.id)}}function p5(n,e){1&n&&(u.TgZ(0,"th",13),u._uU(1,"Exercice"),u.qZA())}function m5(n,e){if(1&n&&(u.TgZ(0,"td",14),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t.name)}}function g5(n,e){1&n&&(u.TgZ(0,"th",13),u._uU(1,"Charge de travail"),u.qZA())}function _5(n,e){if(1&n&&(u.TgZ(0,"td",14),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij("",t.weight," Kg")}}function y5(n,e){1&n&&(u.TgZ(0,"th",13),u._uU(1,"Nombre de s\xe9ries"),u.qZA())}function v5(n,e){if(1&n&&(u.TgZ(0,"td",14),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t.nbSeries)}}function w5(n,e){1&n&&(u.TgZ(0,"th",13),u._uU(1,"Actions"),u.qZA())}function b5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"td",14)(1,"button",15),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw().onClickEdit(a.id)}),u.TgZ(2,"mat-icon"),u._uU(3,"edit"),u.qZA()(),u.TgZ(4,"button",16),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw().onClickDelete(a.id)}),u.TgZ(5,"mat-icon"),u._uU(6,"delete"),u.qZA()()()}}function E5(n,e){1&n&&u._UZ(0,"tr",17)}function C5(n,e){1&n&&u._UZ(0,"tr",18)}const D5=function(){return[5,10,20]};let I5=(()=>{class n{constructor(t){this.exerciceService=t,this.subs=new kl.w0,this.exercices=[],this.editExerciceEvent=new u.vpe,this.displayedColumns=["name","weight","nbSeries","actions"],this.dataSource=new $B,console.log("const")}ngOnInit(){this.subs.add(this.getAllExerciceFromDB()),console.log("onInit")}ngOnDestroy(){this.subs&&this.subs.unsubscribe()}getAllExerciceFromDB(){this.exerciceService.getRealtimeExerciceRef().snapshotChanges().subscribe(t=>{this.exercices=[],t.forEach(i=>{var r,a,c;this.exo={},this.exo.id=i.key,this.exo.name=null===(r=i.payload.val())||void 0===r?void 0:r.name,this.exo.weight=null===(a=i.payload.val())||void 0===a?void 0:a.weight,this.exo.nbSeries=null===(c=i.payload.val())||void 0===c?void 0:c.nbSeries,this.exercices.push(this.exo)}),this.dataSource=new $B(this.exercices),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},t=>{console.error(t)})}onClickEdit(t){console.log("Edit "+t);const i=this.exercices.find(r=>r.id===t);this.editExerciceEvent.emit(JSON.stringify(i))}onClickDelete(t){console.log("Delete "+t),this.removeExercice(t)}removeExercice(t){this.exerciceService.removeExerciceFromDB(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(oL))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-trainings-table"]],viewQuery:function(t,i){if(1&t&&(u.Gf(NB,7),u.Gf(dO,7)),2&t){let r;u.iGM(r=u.CRH())&&(i.paginator=r.first),u.iGM(r=u.CRH())&&(i.sort=r.first)}},outputs:{editExerciceEvent:"editExerciceEvent"},decls:21,vars:8,consts:[[1,"mat-elevation-z8"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","weight"],["matColumnDef","nbSeries"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-mini-fab","",3,"click"],["mat-mini-fab","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(u.TgZ(0,"div",0)(1,"table",1),u.ynx(2,2),u.YNc(3,h5,2,0,"th",3),u.YNc(4,f5,2,1,"td",4),u.BQk(),u.ynx(5,5),u.YNc(6,p5,2,0,"th",3),u.YNc(7,m5,2,1,"td",4),u.BQk(),u.ynx(8,6),u.YNc(9,g5,2,0,"th",3),u.YNc(10,_5,2,1,"td",4),u.BQk(),u.ynx(11,7),u.YNc(12,y5,2,0,"th",3),u.YNc(13,v5,2,1,"td",4),u.BQk(),u.ynx(14,8),u.YNc(15,w5,2,0,"th",3),u.YNc(16,b5,7,0,"td",4),u.BQk(),u.YNc(17,E5,1,0,"tr",9),u.YNc(18,C5,1,0,"tr",10),u.qZA(),u._UZ(19,"mat-paginator",11,12),u.qZA()),2&t&&(u.xp6(1),u.Q6J("dataSource",i.dataSource),u.xp6(16),u.Q6J("matHeaderRowDef",i.displayedColumns),u.xp6(1),u.Q6J("matRowDefColumns",i.displayedColumns),u.xp6(1),u.Q6J("length",null==i.dataSource||null==i.dataSource.data?null:i.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",u.DdM(7,D5)))},directives:[HB,dO,DO,CO,IO,NW,EO,SO,iO,eB,UB,GB,jB,zB,NB],styles:[".full-width-table[_ngcontent-%COMP%]{margin-top:10px;width:100%}.mat-mini-fab[_ngcontent-%COMP%]{margin-right:10px}"],data:{animation:[qa("detailExpand",[Ti("collapsed",Jt({height:"0px",minHeight:"0",display:"none"})),Ti("expanded",Jt({height:"*"})),br("expanded <=> collapsed",rs("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),n})();function S5(n,e){1&n&&(u.TgZ(0,"button",8)(1,"mat-icon"),u._uU(2,"add"),u.qZA()())}function T5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",9),u.NdJ("click",function(){return u.CHM(t),u.oxw().onSave()}),u.TgZ(1,"mat-icon"),u._uU(2,"save"),u.qZA()(),u.TgZ(3,"button",10),u.NdJ("click",function(){return u.CHM(t),u.oxw().onCancel()}),u.TgZ(4,"mat-icon"),u._uU(5,"close"),u.qZA()()}}let A5=(()=>{class n{constructor(t){this.exerciceService=t,this.newExercice={name:"",weight:0,nbSeries:0},this.inEditMode=!1}ngOnInit(){}onCancel(){console.log("cancel"),this.inEditMode=!1,this.emptyTheFields()}onReset(){console.log("reset")}onSave(){console.log("save"),this.newExercice.name.length>0&&this.newExercice.weight>0&&this.newExercice.nbSeries>0&&(this.exerciceService.updateExerciceFromDB(this.newExercice.id,{name:this.newExercice.name,weight:this.newExercice.weight,nbSeries:this.newExercice.nbSeries}),this.inEditMode=!1,this.emptyTheFields())}onSubmit(){console.log("submit"),this.newExercice.name.length>0&&this.newExercice.weight>0&&this.newExercice.nbSeries>0&&(this.addExercice(),this.emptyTheFields())}addExercice(){this.exerciceService.addNewExerciceToDB(this.newExercice)}editExercice(t){this.inEditMode=!0,console.log("editExo : ",JSON.parse(t)),this.newExercice=JSON.parse(t)}emptyTheFields(){this.newExercice={name:"",weight:0,nbSeries:0}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(oL))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-trainings"]],decls:19,vars:5,consts:[[1,"container"],[3,"ngSubmit"],["matInput","","type","text","placeholder","Ex. Squat","name","name",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","Ex. 60","name","weight",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","Ex. 4","name","nbSeries",3,"ngModel","ngModelChange"],["mat-fab","","color","primary","aria-label","Ajouter l'exercice","type","submit",4,"ngIf","ngIfElse"],["editButtons",""],[3,"editExerciceEvent"],["mat-fab","","color","primary","aria-label","Ajouter l'exercice","type","submit"],["mat-fab","","color","primary","aria-label","Ajouter l'exercice",3,"click"],["mat-fab","","color","","aria-label","Ajouter l'exercice","type","reset",3,"click"]],template:function(t,i){if(1&t&&(u.TgZ(0,"div",0)(1,"form",1),u.NdJ("ngSubmit",function(){return i.onSubmit()}),u.TgZ(2,"mat-form-field")(3,"mat-label"),u._uU(4,"Exercice"),u.qZA(),u.TgZ(5,"input",2),u.NdJ("ngModelChange",function(a){return i.newExercice.name=a}),u.qZA()(),u.TgZ(6,"mat-form-field")(7,"mat-label"),u._uU(8,"Poids"),u.qZA(),u.TgZ(9,"input",3),u.NdJ("ngModelChange",function(a){return i.newExercice.weight=a}),u.qZA()(),u.TgZ(10,"mat-form-field")(11,"mat-label"),u._uU(12,"Nombre de s\xe9ries"),u.qZA(),u.TgZ(13,"input",4),u.NdJ("ngModelChange",function(a){return i.newExercice.nbSeries=a}),u.qZA()(),u.YNc(14,S5,3,0,"button",5),u.YNc(15,T5,6,0,"ng-template",null,6,u.W1O),u.qZA(),u._UZ(17,"mat-divider"),u.TgZ(18,"app-trainings-table",7),u.NdJ("editExerciceEvent",function(a){return i.editExercice(a)}),u.qZA()()),2&t){const r=u.MAs(16);u.xp6(5),u.Q6J("ngModel",i.newExercice.name),u.xp6(4),u.Q6J("ngModel",i.newExercice.weight),u.xp6(4),u.Q6J("ngModel",i.newExercice.nbSeries),u.xp6(1),u.Q6J("ngIf",!i.inEditMode)("ngIfElse",r)}},directives:[lg,Ls,Fa,LV,tO,l6,ka,mu,ia,Ff,Ei,iO,eB,B6,I5],styles:[".mat-form-field[_ngcontent-%COMP%]{margin:5px}.mat-fab[_ngcontent-%COMP%]{margin:10px}"]}),n})(),M5=(()=>{class n{constructor(){this.title="training-log"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,i){1&t&&(u.TgZ(0,"h1"),u._uU(1,"Mon entrainement actuel"),u.qZA(),u._UZ(2,"app-trainings"))},directives:[A5],styles:[""]}),n})(),k5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[$i,ti,qy],qy,ti]}),n})();function R5(n,e){if(1&n&&(u.O4$(),u._UZ(0,"circle",4)),2&n){const t=u.oxw(),i=u.MAs(1);u.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),u.uIk("r",t._getCircleRadius())}}function O5(n,e){if(1&n&&(u.O4$(),u._UZ(0,"circle",4)),2&n){const t=u.oxw(),i=u.MAs(1);u.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),u.uIk("r",t._getCircleRadius())}}const P5=HS(class{constructor(n){this._elementRef=n}},"primary"),F5=new u.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function L5(){return{diameter:100}}});class gf extends P5{constructor(e,t,i,r,a,c,h,m){super(e),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=kl.w0.EMPTY,this.mode="determinate";const y=gf._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),y.has(i.head)||y.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!a&&!a._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),a&&(a.diameter&&(this.diameter=a.diameter),a.strokeWidth&&(this.strokeWidth=a.strokeWidth)),t.isBrowser&&t.SAFARI&&h&&c&&m&&(this._resizeSubscription=h.change(150).subscribe(()=>{"indeterminate"===this.mode&&m.run(()=>c.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=$a(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=$a(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,$a(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=fL(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){var t;const i=50*(null!==(t=e.currentScale)&&void 0!==t?t:1);return`${i}% ${i}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,i=gf._diameters;let r=i.get(e);if(!r||!r.has(t)){const a=this._document.createElement("style");a.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),a.textContent=this._getAnimationText(),e.appendChild(a),r||(r=new Set,i.set(e,r)),r.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}gf._diameters=new WeakMap,gf.\u0275fac=function(e){return new(e||gf)(u.Y36(u.SBq),u.Y36(is),u.Y36(te,8),u.Y36(pd,8),u.Y36(F5),u.Y36(u.sBO),u.Y36(W0),u.Y36(u.R0b))},gf.\u0275cmp=u.Xpm({type:gf,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(u.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),u.Udp("width",t.diameter,"px")("height",t.diameter,"px"),u.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[u.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(u.O4$(),u.TgZ(0,"svg",0,1),u.YNc(2,R5,1,11,"circle",2),u.YNc(3,O5,1,9,"circle",3),u.qZA()),2&e&&(u.Udp("width",t.diameter,"px")("height",t.diameter,"px"),u.Q6J("ngSwitch","indeterminate"===t.mode),u.uIk("viewBox",t._getViewBox()),u.xp6(2),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngSwitchCase",!1))},directives:[zi,ki],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let B5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ti,$i],ti]}),n})();const qB_firebase={apiKey:"AIzaSyBAhijN1ANP26o5UONoitgYg1iFAru1eVE",authDomain:"training-log-e8c2d.firebaseapp.com",projectId:"training-log-e8c2d",storageBucket:"training-log-e8c2d.appspot.com",messagingSenderId:"784940770700",appId:"1:784940770700:web:8200a9868b9af0f71222a9",measurementId:"G-09ZMXV22F0",databaseURL:"https://training-log-e8c2d-default-rtdb.europe-west1.firebasedatabase.app"};let H5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[M5]}),n.\u0275inj=u.cJS({providers:[{provide:FV,useValue:{appearance:"outline"}}],imports:[[B5,Li.hO.initializeApp(qB_firebase),wG,qD,Aa,i$,Su,HV,c5,DW,PW,GS,c6,k5,H6,V6]]}),n})();(0,u.G48)(),Jc().bootstrapModule(H5).catch(n=>console.error(n))},5867:(ct,Se,P)=>{P.d(Se,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=P(9681);(0,u.registerVersion)("firebase","9.6.11","app")},127:(ct,Se,P)=>{P.d(Se,{Z:()=>u.Z});var u=P(3942);u.Z.registerVersion("firebase","9.6.11","app-compat")},820:(ct,Se,P)=>{P.r(Se);var u=P(5861),X=P(3942),F=P(2090),le=P(9681),ne=P(655),me=P(1877),te=P(4859);const Oe=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),it=new me.Yd("@firebase/auth");function We(v,...p){it.logLevel<=me.in.ERROR&&it.error(`Auth (${le.SDK_VERSION}): ${v}`,...p)}function Ae(v,...p){throw Ue(v,...p)}function be(v,...p){return Ue(v,...p)}function Ee(v,p,_){const b=Object.assign(Object.assign({},Ve()),{[p]:_});return new F.LL("auth","Firebase",b).create(p,{appName:v.name})}function je(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Ae(v,"argument-error"),Ee(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(v,...p){if("string"!=typeof v){const _=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(_,...b)}return ge.create(v,...p)}function se(v,p,..._){if(!v)throw Ue(p,..._)}function Y(v){const p="INTERNAL ASSERTION FAILED: "+v;throw We(p),new Error(p)}function oe(v,p){v||Y(p)}const _e=new Map;function ae(v){oe(v instanceof Function,"Expected a class definition");let p=_e.get(v);return p?(oe(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,_e.set(v,p),p)}function Ct(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function en(){return"http:"===zn()||"https:"===zn()}function zn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class gn{constructor(p,_){this.shortDelay=p,this.longDelay=_,oe(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(en()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _n(v,p){oe(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Ur{static initialize(p,_,b){this.fetchImpl=p,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Y("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Y("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Y("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},as=new gn(3e4,6e4);function tn(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function zt(v,p,_,b){return _i.apply(this,arguments)}function _i(){return(_i=(0,u.Z)(function*(v,p,_,b,A={}){return nr(v,A,(0,u.Z)(function*(){let O={},W={};b&&("GET"===p?W=b:O={body:JSON.stringify(b)});const ie=(0,F.xO)(Object.assign({key:v.config.apiKey},W)).slice(1),Le=yield v._getAdditionalHeaders();return Le["Content-Type"]="application/json",v.languageCode&&(Le["X-Firebase-Locale"]=v.languageCode),Ur.fetch()(Gi(v,v.config.apiHost,_,ie),Object.assign({method:p,headers:Le,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function nr(v,p,_){return io.apply(this,arguments)}function io(){return(io=(0,u.Z)(function*(v,p,_){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},on),p);try{const A=new Cs(v),O=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const W=yield O.json();if("needConfirmation"in W)throw cs(v,"account-exists-with-different-credential",W);if(O.ok&&!("errorMessage"in W))return W;{const ie=O.ok?W.errorMessage:W.error.message,[Le,Ze]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw cs(v,"credential-already-in-use",W);if("EMAIL_EXISTS"===Le)throw cs(v,"email-already-in-use",W);const at=b[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Ee(v,at,Ze);Ae(v,at)}}catch(A){if(A instanceof F.ZR)throw A;Ae(v,"network-request-failed")}})).apply(this,arguments)}function ji(v,p,_,b){return ls.apply(this,arguments)}function ls(){return(ls=(0,u.Z)(function*(v,p,_,b,A={}){const O=yield zt(v,p,_,b,A);return"mfaPendingCredential"in O&&Ae(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Gi(v,p,_,b){const A=`${p}${_}?${b}`;return v.config.emulator?_n(v.config,A):`${v.config.apiScheme}://${A}`}class Cs{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(be(this.auth,"network-request-failed")),as.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cs(v,p,_){const b={appName:v.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const A=be(v,p,b);return A.customData._tokenResponse=_,A}function ir(){return(ir=(0,u.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function hi(v,p){return ni.apply(this,arguments)}function ni(){return(ni=(0,u.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Er(v,p){return ro.apply(this,arguments)}function ro(){return(ro=(0,u.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function En(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function ba(){return(ba=(0,u.Z)(function*(v,p=!1){const _=(0,F.m9)(v),b=yield _.getIdToken(p),A=st(b);se(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,W=null==O?void 0:O.sign_in_provider;return{claims:A,token:b,authTime:En($t(A.auth_time)),issuedAtTime:En($t(A.iat)),expirationTime:En($t(A.exp)),signInProvider:W||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(v){return 1e3*Number(v)}function st(v){const[p,_,b]=v.split(".");if(void 0===p||void 0===_||void 0===b)return We("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(_);return A?JSON.parse(A):(We("Failed to decode base64 JWT payload"),null)}catch(A){return We("Caught error parsing JWT payload as JSON",A),null}}function yi(v,p){return us.apply(this,arguments)}function us(){return(us=(0,u.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(b){throw b instanceof F.ZR&&qt(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}function qt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Bo{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),b)}iteration(){var p=this;return(0,u.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&p.schedule(!0))}p.schedule()})()}}class Ai{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=En(this.lastLoginAt),this.creationTime=En(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vi(v){return ft.apply(this,arguments)}function ft(){return(ft=(0,u.Z)(function*(v){var p;const _=v.auth,b=yield v.getIdToken(),A=yield yi(v,Er(_,{idToken:b}));se(null==A?void 0:A.users.length,_,"internal-error");const O=A.users[0];v._notifyReloadListener(O);const W=(null===(p=O.providerUserInfo)||void 0===p?void 0:p.length)?Te(O.providerUserInfo):[],ie=Ke(v.providerData,W),at=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==ie?void 0:ie.length)),qe={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ie,metadata:new Ai(O.createdAt,O.lastLoginAt),isAnonymous:at};Object.assign(v,qe)})).apply(this,arguments)}function Vt(){return(Vt=(0,u.Z)(function*(v){const p=(0,F.m9)(v);yield vi(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ke(v,p){return[...v.filter(b=>!p.some(A=>A.providerId===b.providerId)),...p]}function Te(v){return v.map(p=>{var{providerId:_}=p,b=(0,ne._T)(p,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function pt(){return(pt=(0,u.Z)(function*(v,p){const _=yield nr(v,{},(0,u.Z)(function*(){const b=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:O}=v.config,W=Gi(v,A,"/v1/token",`key=${O}`),ie=yield v._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",Ur.fetch()(W,{method:"POST",headers:ie,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ht{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){se(p.idToken,"internal-error"),se(void 0!==p.idToken,"internal-error"),se(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function bt(v){const p=st(v);return se(p,"internal-error"),se(void 0!==p.exp,"internal-error"),se(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var b=this;return(0,u.Z)(function*(){return se(!b.accessToken||b.refreshToken,p,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var b=this;return(0,u.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:W}=yield function Je(v,p){return pt.apply(this,arguments)}(p,_);b.updateTokensAndExpiration(A,O,Number(W))})()}updateTokensAndExpiration(p,_,b){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,_){const{refreshToken:b,accessToken:A,expirationTime:O}=_,W=new Ht;return b&&(se("string"==typeof b,"internal-error",{appName:p}),W.refreshToken=b),A&&(se("string"==typeof A,"internal-error",{appName:p}),W.accessToken=A),O&&(se("number"==typeof O,"internal-error",{appName:p}),W.expirationTime=O),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ht,this.toJSON())}_performRefresh(){return Y("not implemented")}}function Ft(v,p){se("string"==typeof v||void 0===v,"internal-error",{appName:p})}class G{constructor(p){var{uid:_,auth:b,stsTokenManager:A}=p,O=(0,ne._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Ai(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,u.Z)(function*(){const b=yield yi(_,_.stsTokenManager.getToken(_.auth,p));return se(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(p){return function Ds(v){return ba.apply(this,arguments)}(this,p)}reload(){return function Mi(v){return Vt.apply(this,arguments)}(this)}_assign(p){this!==p&&(se(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new G(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var b=this;return(0,u.Z)(function*(){let A=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),A=!0),_&&(yield vi(b)),yield b.auth._persistUserIfCurrent(b),A&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,u.Z)(function*(){const _=yield p.getIdToken();return yield yi(p,function ht(v,p){return ir.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var b,A,O,W,ie,Le,Ze,at;const qe=null!==(b=_.displayName)&&void 0!==b?b:void 0,Un=null!==(A=_.email)&&void 0!==A?A:void 0,mr=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Au=null!==(W=_.photoURL)&&void 0!==W?W:void 0,_s=null!==(ie=_.tenantId)&&void 0!==ie?ie:void 0,xr=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,ra=null!==(Ze=_.createdAt)&&void 0!==Ze?Ze:void 0,gv=null!==(at=_.lastLoginAt)&&void 0!==at?at:void 0,{uid:ys,emailVerified:cc,isAnonymous:th,providerData:li,stsTokenManager:Mu}=_;se(ys&&Mu,p,"internal-error");const _v=Ht.fromJSON(this.name,Mu);se("string"==typeof ys,p,"internal-error"),Ft(qe,p.name),Ft(Un,p.name),se("boolean"==typeof cc,p,"internal-error"),se("boolean"==typeof th,p,"internal-error"),Ft(mr,p.name),Ft(Au,p.name),Ft(_s,p.name),Ft(xr,p.name),Ft(ra,p.name),Ft(gv,p.name);const Zf=new G({uid:ys,auth:p,email:Un,emailVerified:cc,displayName:qe,isAnonymous:th,photoURL:Au,phoneNumber:mr,tenantId:_s,stsTokenManager:_v,createdAt:ra,lastLoginAt:gv});return li&&Array.isArray(li)&&(Zf.providerData=li.map(yv=>Object.assign({},yv))),xr&&(Zf._redirectEventId=xr),Zf}static _fromIdTokenResponse(p,_,b=!1){return(0,u.Z)(function*(){const A=new Ht;A.updateFromServerResponse(_);const O=new G({uid:_.localId,auth:p,stsTokenManager:A,isAnonymous:b});return yield vi(O),O})()}}const q=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,b){var A=this;return(0,u.Z)(function*(){A.storage[_]=b})()}_get(_){var b=this;return(0,u.Z)(function*(){const A=b.storage[_];return void 0===A?null:A})()}_remove(_){var b=this;return(0,u.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return v.type="NONE",v})();function de(v,p,_){return`firebase:${v}:${p}:${_}`}class J{constructor(p,_,b){this.persistence=p,this.auth=_,this.userKey=b;const{config:A,name:O}=this.auth;this.fullUserKey=de(this.userKey,A.apiKey,O),this.fullPersistenceKey=de("persistence",A.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,u.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?G._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,u.Z)(function*(){if(_.persistence===p)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,b="authUser"){return(0,u.Z)(function*(){if(!_.length)return new J(ae(q),p,b);const A=(yield Promise.all(_.map(function(){var Ze=(0,u.Z)(function*(at){if(yield at._isAvailable())return at});return function(at){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let O=A[0]||ae(q);const W=de(b,p.config.apiKey,p.name);let ie=null;for(const Ze of _)try{const at=yield Ze._get(W);if(at){const qe=G._fromJSON(p,at);Ze!==O&&(ie=qe),O=Ze;break}}catch(at){}const Le=A.filter(Ze=>Ze._shouldAllowMigration);return O._shouldAllowMigration&&Le.length?(O=Le[0],ie&&(yield O._set(W,ie.toJSON())),yield Promise.all(_.map(function(){var Ze=(0,u.Z)(function*(at){if(at!==O)try{yield at._remove(W)}catch(qe){}});return function(at){return Ze.apply(this,arguments)}}())),new J(O,p,b)):new J(O,p,b)})()}}function He(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Yt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(yt(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Rt(p))return"Blackberry";if(vn(p))return"Webos";if(Xt(p))return"Safari";if((p.includes("chrome/")||xi(p))&&!p.includes("edge/"))return"Chrome";if(Vn(p))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function yt(v=(0,F.z$)()){return/firefox\//i.test(v)}function Xt(v=(0,F.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function xi(v=(0,F.z$)()){return/crios\//i.test(v)}function Yt(v=(0,F.z$)()){return/iemobile/i.test(v)}function Vn(v=(0,F.z$)()){return/android/i.test(v)}function Rt(v=(0,F.z$)()){return/blackberry/i.test(v)}function vn(v=(0,F.z$)()){return/webos/i.test(v)}function pi(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)}function Is(v=(0,F.z$)()){return pi(v)||Vn(v)||vn(v)||Rt(v)||/windows phone/i.test(v)||Yt(v)}function Za(v,p=[]){let _;switch(v){case"Browser":_=He((0,F.z$)());break;case"Worker":_=`${He((0,F.z$)())}-${v}`;break;default:_=v}const b=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${le.SDK_VERSION}/${b}`}class Cr{constructor(p,_,b){this.app=p,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ot(this),this.idTokenSubscription=new Ot(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(p,_){var b=this;return _&&(this._popupRedirectResolver=ae(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var A,O;if(!b._deleted&&(b.persistenceManager=yield J.create(b,p),!b._deleted)){if(null===(A=b._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(W){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(O=b.currentUser)||void 0===O?void 0:O.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,u.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_)}})()}initializeCurrentUser(p){var _=this;return(0,u.Z)(function*(){var b;let A=yield _.assertedPersistence.getCurrentUser();if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const O=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,W=null==A?void 0:A._redirectEventId,ie=yield _.tryRedirectSignIn(p);(!O||O===W)&&(null==ie?void 0:ie.user)&&(A=ie.user)}return A?A._redirectEventId?(se(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===A._redirectEventId?_.directlySetCurrentUser(A):_.reloadAndSetCurrentUserOrClear(A)):_.reloadAndSetCurrentUserOrClear(A):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var _=this;return(0,u.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(A){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,u.Z)(function*(){try{yield vi(p)}catch(b){if("auth/network-request-failed"!==b.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function _t(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,u.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,u.Z)(function*(){const b=p?(0,F.m9)(p):null;return b&&se(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(p){var _=this;return(0,u.Z)(function*(){if(!_._deleted)return p&&se(_.tenantId===p.tenantId,_,"tenant-id-mismatch"),_.queue((0,u.Z)(function*(){yield _.directlySetCurrentUser(p),_.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,u.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(ae(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,_,b){return this.registerStateListener(this.authStateSubscription,p,_,b)}onIdTokenChanged(p,_,b){return this.registerStateListener(this.idTokenSubscription,p,_,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var b=this;return(0,u.Z)(function*(){const A=yield b.getOrInitRedirectPersistenceManager(_);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const b=p&&ae(p)||_._popupRedirectResolver;se(b,_,"argument-error"),_.redirectPersistenceManager=yield J.create(_,[ae(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,u.Z)(function*(){var b,A;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===p?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,u.Z)(function*(){if(p===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,b,A){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),W=this._isInitialized?Promise.resolve():this._initializationPromise;return se(W,this,"internal-error"),W.then(()=>O(this.currentUser)),"function"==typeof _?p.addObserver(_,b,A):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Za(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,u.Z)(function*(){var _;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(b["X-Firebase-Client"]=A),b})()}}function Ne(v){return(0,F.m9)(v)}class Ot{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(_=>this.observer=_)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wi(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Kn(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class cn{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Y("not implemented")}_getIdTokenResponse(p){return Y("not implemented")}_linkToIdToken(p,_){return Y("not implemented")}_getReauthenticationResolver(p){return Y("not implemented")}}function $n(v,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,u.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:resetPassword",tn(v,p))})).apply(this,arguments)}function At(v,p){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,u.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ss(v,p){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,u.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",tn(v,p))})).apply(this,arguments)}function bi(){return(bi=(0,u.Z)(function*(v,p){return ji(v,"POST","/v1/accounts:signInWithPassword",tn(v,p))})).apply(this,arguments)}function Ts(v,p){return As.apply(this,arguments)}function As(){return(As=(0,u.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:sendOobCode",tn(v,p))})).apply(this,arguments)}function Ei(v,p){return un.apply(this,arguments)}function un(){return(un=(0,u.Z)(function*(v,p){return Ts(v,p)})).apply(this,arguments)}function Ol(v,p){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,u.Z)(function*(v,p){return Ts(v,p)})).apply(this,arguments)}function zi(v,p){return ki.apply(this,arguments)}function ki(){return(ki=(0,u.Z)(function*(v,p){return Ts(v,p)})).apply(this,arguments)}function Bc(v,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,u.Z)(function*(v,p){return Ts(v,p)})).apply(this,arguments)}function rr(){return(rr=(0,u.Z)(function*(v,p){return ji(v,"POST","/v1/accounts:signInWithEmailLink",tn(v,p))})).apply(this,arguments)}function vd(){return(vd=(0,u.Z)(function*(v,p){return ji(v,"POST","/v1/accounts:signInWithEmailLink",tn(v,p))})).apply(this,arguments)}class Fl extends cn{constructor(p,_,b,A=null){super("password",b),this._email=p,this._password=_,this._tenantId=A}static _fromEmailAndPassword(p,_){return new Fl(p,_,"password")}static _fromEmailAndCode(p,_,b=null){return new Fl(p,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function ao(v,p){return bi.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Pl(v,p){return rr.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Ae(p,"internal-error")}})()}_linkToIdToken(p,_){var b=this;return(0,u.Z)(function*(){switch(b.signInMethod){case"password":return At(p,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function vf(v,p){return vd.apply(this,arguments)}(p,{idToken:_,email:b._email,oobCode:b._password});default:Ae(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Yn(v,p){return wd.apply(this,arguments)}function wd(){return(wd=(0,u.Z)(function*(v,p){return ji(v,"POST","/v1/accounts:signInWithIdp",tn(v,p))})).apply(this,arguments)}class Ms extends cn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Ms(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Ae("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:A}=_,O=(0,ne._T)(_,["providerId","signInMethod"]);if(!b||!A)return null;const W=new Ms(b,A);return W.idToken=O.idToken||void 0,W.accessToken=O.accessToken||void 0,W.secret=O.secret,W.nonce=O.nonce,W.pendingToken=O.pendingToken||null,W}_getIdTokenResponse(p){return Yn(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,Yn(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Yn(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,F.xO)(_)}return p}}function Wm(v,p){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,u.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:sendVerificationCode",tn(v,p))})).apply(this,arguments)}function co(){return(co=(0,u.Z)(function*(v,p){return ji(v,"POST","/v1/accounts:signInWithPhoneNumber",tn(v,p))})).apply(this,arguments)}function bd(){return(bd=(0,u.Z)(function*(v,p){const _=yield ji(v,"POST","/v1/accounts:signInWithPhoneNumber",tn(v,p));if(_.temporaryProof)throw cs(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ym={USER_NOT_FOUND:"user-not-found"};function Ed(){return(Ed=(0,u.Z)(function*(v,p){return ji(v,"POST","/v1/accounts:signInWithPhoneNumber",tn(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Ym)})).apply(this,arguments)}class Ca extends cn{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Ca({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Ca({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Uc(v,p){return co.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Km(v,p){return bd.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Zm(v,p){return Ed.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:b,verificationCode:A}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:b,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:b,phoneNumber:A,temporaryProof:O}=p;return b||_||A||O?new Ca({verificationId:_,verificationCode:b,phoneNumber:A,temporaryProof:O}):null}}class Uo{constructor(p){var _,b,A,O,W,ie;const Le=(0,F.zd)((0,F.pd)(p)),Ze=null!==(_=Le.apiKey)&&void 0!==_?_:null,at=null!==(b=Le.oobCode)&&void 0!==b?b:null,qe=function ev(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);se(Ze&&at&&qe,"argument-error"),this.apiKey=Ze,this.operation=qe,this.code=at,this.continueUrl=null!==(O=Le.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(W=Le.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ie=Le.tenantId)&&void 0!==ie?ie:null}static parseLink(p){const _=function Ll(v){const p=(0,F.zd)((0,F.pd)(v)).link,_=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,b=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(b?(0,F.zd)((0,F.pd)(b)).link:null)||b||_||p||v}(p);try{return new Uo(_)}catch(b){return null}}}let jc=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,b){return Fl._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const A=Uo.parseLink(b);return se(A,"argument-error"),Fl._fromEmailAndCode(_,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class uo{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class sr extends uo{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Da extends sr{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return se("providerId"in _&&"signInMethod"in _,"argument-error"),Ms._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return se(p.idToken||p.accessToken,"argument-error"),Ms._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Da.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Da.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:A,pendingToken:O,nonce:W,providerId:ie}=p;if(!b&&!A&&!_&&!O||!ie)return null;try{return new Da(ie)._credential({idToken:_,accessToken:b,nonce:W,pendingToken:O})}catch(Le){return null}}}let jo=(()=>{class v extends sr{constructor(){super("facebook.com")}static credential(_){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(b){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Xa=(()=>{class v extends sr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:A}=_;if(!b&&!A)return null;try{return v.credential(b,A)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Cd=(()=>{class v extends sr{constructor(){super("github.com")}static credential(_){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(b){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class $i extends cn{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Yn(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,Yn(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Yn(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:A,pendingToken:O}=_;return b&&A&&O&&b===A?new $i(b,O):null}static _create(p,_){return new $i(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dr extends uo{constructor(p){se(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Dr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Dr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=$i.fromJSON(p);return se(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:b}=p;if(!_||!b)return null;try{return $i._create(b,_)}catch(A){return null}}}let Vl=(()=>{class v extends sr{constructor(){super("twitter.com")}static credential(_,b){return Ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:A}=_;if(!b||!A)return null;try{return v.credential(b,A)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Bl(v,p){return qi.apply(this,arguments)}function qi(){return(qi=(0,u.Z)(function*(v,p){return ji(v,"POST","/v1/accounts:signUp",tn(v,p))})).apply(this,arguments)}class Ci{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,b,A=!1){return(0,u.Z)(function*(){const O=yield G._fromIdTokenResponse(p,b,A),W=bf(b);return new Ci({user:O,providerId:W,_tokenResponse:b,operationType:_})})()}static _forOperation(p,_,b){return(0,u.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const A=bf(b);return new Ci({user:p,providerId:A,_tokenResponse:b,operationType:_})})()}}function bf(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Dd(){return(Dd=(0,u.Z)(function*(v){var p;const _=Ne(v);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new Ci({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield Bl(_,{returnSecureToken:!0}),A=yield Ci._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Gc extends F.ZR{constructor(p,_,b,A){var O;super(_.code,_.message),this.operationType=b,this.user=A,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,_,b,A){return new Gc(p,_,b,A)}}function zc(v,p,_,b){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Gc._fromErrorAndOperation(v,O,p,b):O})}function xs(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function $c(){return($c=(0,u.Z)(function*(v,p){const _=(0,F.m9)(v);yield fo(!0,_,p);const{providerUserInfo:b}=yield hi(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),A=xs(b||[]);return _.providerData=_.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Cn(v,p){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,u.Z)(function*(v,p,_=!1){const b=yield yi(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return Ci._forOperation(v,"link",b)})).apply(this,arguments)}function fo(v,p,_){return dn.apply(this,arguments)}function dn(){return(dn=(0,u.Z)(function*(v,p,_){yield vi(p);const A=!1===v?"provider-already-linked":"no-such-provider";se(xs(p.providerData).has(_)===v,p.auth,A)})).apply(this,arguments)}function Id(v,p){return Go.apply(this,arguments)}function Go(){return(Go=(0,u.Z)(function*(v,p,_=!1){const{auth:b}=v,A="reauthenticate";try{const O=yield yi(v,zc(b,A,p,v),_);se(O.idToken,b,"internal-error");const W=st(O.idToken);se(W,b,"internal-error");const{sub:ie}=W;return se(v.uid===ie,b,"user-mismatch"),Ci._forOperation(v,A,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Ae(b,"user-mismatch"),O}})).apply(this,arguments)}function zo(v,p){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,u.Z)(function*(v,p,_=!1){const b="signIn",A=yield zc(v,b,p),O=yield Ci._fromIdTokenResponse(v,b,A);return _||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function qn(v,p){return el.apply(this,arguments)}function el(){return(el=(0,u.Z)(function*(v,p){return zo(Ne(v),p)})).apply(this,arguments)}function jr(v,p){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,u.Z)(function*(v,p){const _=(0,F.m9)(v);return yield fo(!1,_,p.providerId),Cn(_,p)})).apply(this,arguments)}function po(v,p){return ks.apply(this,arguments)}function ks(){return(ks=(0,u.Z)(function*(v,p){return Id((0,F.m9)(v),p)})).apply(this,arguments)}function Ul(v,p){return or.apply(this,arguments)}function or(){return(or=(0,u.Z)(function*(v,p){return ji(v,"POST","/v1/accounts:signInWithCustomToken",tn(v,p))})).apply(this,arguments)}function go(){return(go=(0,u.Z)(function*(v,p){const _=Ne(v),b=yield Ul(_,{token:p,returnSecureToken:!0}),A=yield Ci._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class mt{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?jl._fromServerResponse(p,_):Ae(p,"internal-error")}}class jl extends mt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new jl(_)}}function tl(v,p,_){var b;se((null===(b=_.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),se(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(se(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(se(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function zl(){return(zl=(0,u.Z)(function*(v,p,_){const b=(0,F.m9)(v),A={requestType:"PASSWORD_RESET",email:p};_&&tl(b,A,_),yield Ol(b,A)})).apply(this,arguments)}function qc(){return(qc=(0,u.Z)(function*(v,p,_){yield $n((0,F.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function De(){return(De=(0,u.Z)(function*(v,p){yield Ss((0,F.m9)(v),{oobCode:p})})).apply(this,arguments)}function Lt(v,p){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,u.Z)(function*(v,p){const _=(0,F.m9)(v),b=yield $n(_,{oobCode:p}),A=b.requestType;switch(se(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(b.mfaInfo,_,"internal-error");default:se(b.email,_,"internal-error")}let O=null;return b.mfaInfo&&(O=mt._fromServerResponse(Ne(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function Sa(){return(Sa=(0,u.Z)(function*(v,p){const{data:_}=yield Lt((0,F.m9)(v),p);return _.email})).apply(this,arguments)}function ar(){return(ar=(0,u.Z)(function*(v,p,_){const b=Ne(v),A=yield Bl(b,{returnSecureToken:!0,email:p,password:_}),O=yield Ci._fromIdTokenResponse(b,"signIn",A);return yield b._updateCurrentUser(O.user),O})).apply(this,arguments)}function Sd(){return(Sd=(0,u.Z)(function*(v,p,_){const b=(0,F.m9)(v),A={requestType:"EMAIL_SIGNIN",email:p};se(_.handleCodeInApp,b,"argument-error"),_&&tl(b,A,_),yield zi(b,A)})).apply(this,arguments)}function _o(){return(_o=(0,u.Z)(function*(v,p,_){const b=(0,F.m9)(v),A=jc.credentialWithLink(p,_||Ct());return se(A._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),qn(b,A)})).apply(this,arguments)}function Di(v,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,u.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:createAuthUri",tn(v,p))})).apply(this,arguments)}function yo(){return(yo=(0,u.Z)(function*(v,p){const b={identifier:p,continueUri:en()?Ct():"http://localhost"},{signinMethods:A}=yield Di((0,F.m9)(v),b);return A||[]})).apply(this,arguments)}function Xc(){return(Xc=(0,u.Z)(function*(v,p){const _=(0,F.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&tl(_.auth,A,p);const{email:O}=yield Ei(_.auth,A);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function Yl(){return(Yl=(0,u.Z)(function*(v,p,_){const b=(0,F.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&tl(b.auth,O,_);const{email:W}=yield Bc(b.auth,O);W!==v.email&&(yield v.reload())})).apply(this,arguments)}function Jc(v,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,u.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function eu(){return(eu=(0,u.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const b=(0,F.m9)(v),O={idToken:yield b.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},W=yield yi(b,Jc(b.auth,O));b.displayName=W.displayName||null,b.photoURL=W.photoUrl||null;const ie=b.providerData.find(({providerId:Le})=>"password"===Le);ie&&(ie.displayName=b.displayName,ie.photoURL=b.photoURL),yield b._updateTokensIfNecessary(W)})).apply(this,arguments)}function nu(v,p,_){return $o.apply(this,arguments)}function $o(){return($o=(0,u.Z)(function*(v,p,_){const{auth:b}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(O.email=p),_&&(O.password=_);const W=yield yi(v,At(b,O));yield v._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class qo{constructor(p,_,b={}){this.isNewUser=p,this.providerId=_,this.profile=b}}class Md extends qo{constructor(p,_,b,A){super(p,_,b),this.username=A}}class xd extends qo{constructor(p,_){super(p,"facebook.com",_)}}class Wo extends Md{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class vo extends qo{constructor(p,_){super(p,"google.com",_)}}class iu extends Md{constructor(p,_,b){super(p,"twitter.com",_,b)}}function Ni(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ad(v){var p,_;if(!v)return null;const{providerId:b}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&(null==v?void 0:v.idToken)){const W=null===(_=null===(p=st(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(W)return new qo(O,"anonymous"!==W&&"custom"!==W?W:null)}if(!b)return null;switch(b){case"facebook.com":return new xd(O,A);case"github.com":return new Wo(O,A);case"google.com":return new vo(O,A);case"twitter.com":return new iu(O,A,v.screenName||null);case"custom":case"anonymous":return new qo(O,null);default:return new qo(O,b,A)}}(_)}class Rs{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new Rs("enroll",p)}static _fromMfaPendingCredential(p){return new Rs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,b;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Rs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(b=p.multiFactorSession)||void 0===b?void 0:b.idToken)return Rs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class il{constructor(p,_,b){this.session=p,this.hints=_,this.signInResolver=b}static _fromError(p,_){const b=Ne(p),A=_.customData._serverResponse,O=(A.mfaInfo||[]).map(ie=>mt._fromServerResponse(b,ie));se(A.mfaPendingCredential,b,"internal-error");const W=Rs._fromMfaPendingCredential(A.mfaPendingCredential);return new il(W,O,function(){var ie=(0,u.Z)(function*(Le){const Ze=yield Le._process(b,W);delete A.mfaInfo,delete A.mfaPendingCredential;const at=Object.assign(Object.assign({},A),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(_.operationType){case"signIn":const qe=yield Ci._fromIdTokenResponse(b,_.operationType,at);return yield b._updateCurrentUser(qe.user),qe;case"reauthenticate":return se(_.user,b,"internal-error"),Ci._forOperation(_.user,_.operationType,at);default:Ae(b,"internal-error")}});return function(Le){return ie.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,u.Z)(function*(){return _.signInResolver(p)})()}}function Zn(v,p){return zt(v,"POST","/v2/accounts/mfaEnrollment:start",tn(v,p))}class Os{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>mt._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Os(p)}getSession(){var p=this;return(0,u.Z)(function*(){return Rs._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var b=this;return(0,u.Z)(function*(){const A=p,O=yield b.getSession(),W=yield yi(b.user,A._process(b.user.auth,O,_));return yield b.user._updateTokensIfNecessary(W),b.user.reload()})()}unenroll(p){var _=this;return(0,u.Z)(function*(){const b="string"==typeof p?p:p.uid,A=yield _.user.getIdToken(),O=yield yi(_.user,function Xm(v,p){return zt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(v,p))}(_.user.auth,{idToken:A,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:W})=>W!==b),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const Ma=new WeakMap,ou="__sak";class hs{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ou,"1"),this.storage.removeItem(ou),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const an=(()=>{class v extends hs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function au(){const v=(0,F.z$)();return Xt(v)||pi(v)}()&&function ii(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Is(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const A=this.storage.getItem(b),O=this.localCache[b];A!==O&&_(b,O,A)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((ie,Le,Ze)=>{this.notifyListeners(ie,Ze)});const A=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(A);if(_.newValue!==ie)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!b)return}const O=()=>{const ie=this.storage.getItem(A);!b&&this.localCache[A]===ie||this.notifyListeners(A,ie)},W=this.storage.getItem(A);!function Ya(){return(0,F.w1)()&&10===document.documentMode}()||W===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,b){this.localCache[_]=b;const A=this.listeners[_];if(A)for(const O of Array.from(A))O(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var A=()=>super._set,O=this;return(0,u.Z)(function*(){yield A().call(O,_,b),O.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,A=this;return(0,u.Z)(function*(){const O=yield b().call(A,_);return A.localCache[_]=JSON.stringify(O),O})()}_remove(_){var b=()=>super._remove,A=this;return(0,u.Z)(function*(){yield b().call(A,_),delete A.localCache[_]})()}}return v.type="LOCAL",v})(),Ns=(()=>{class v extends hs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return v.type="SESSION",v})();let rl=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(O=>O.isListeningto(_));if(b)return b;const A=new v(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,u.Z)(function*(){const A=_,{eventId:O,eventType:W,data:ie}=A.data,Le=b.handlersMap[W];if(!(null==Le?void 0:Le.size))return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:W});const Ze=Array.from(Le).map(function(){var qe=(0,u.Z)(function*(Un){return Un(A.origin,ie)});return function(Un){return qe.apply(this,arguments)}}()),at=yield function cu(v){return Promise.all(v.map(function(){var p=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return p.apply(this,arguments)}}()))}(Ze);A.ports[0].postMessage({status:"done",eventId:O,eventType:W,response:at})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ko(v="",p=10){let _="";for(let b=0;b<p;b++)_+=Math.floor(10*Math.random());return v+_}class Pd{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,b=50){var A=this;return(0,u.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let W,ie;return new Promise((Le,Ze)=>{const at=Ko("",20);O.port1.start();const qe=setTimeout(()=>{Ze(new Error("unsupported_event"))},b);ie={messageChannel:O,onMessage(Un){const mr=Un;if(mr.data.eventId===at)switch(mr.data.status){case"ack":clearTimeout(qe),W=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Le(mr.data.response);break;default:clearTimeout(qe),clearTimeout(W),Ze(new Error("invalid_response"))}}},A.handlers.add(ie),O.port1.addEventListener("message",ie.onMessage),A.target.postMessage({eventType:p,eventId:at,data:_},[O.port2])}).finally(()=>{ie&&A.removeMessageHandler(ie)})})()}}function Qt(){return window}function hn(){return void 0!==Qt().WorkerGlobalScope&&"function"==typeof Qt().importScripts}function bo(){return(bo=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Xl="firebaseLocalStorageDb",Zo="firebaseLocalStorage",Sr="fbase_key";class ri{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function xa(v,p){return v.transaction([Zo],p?"readwrite":"readonly").objectStore(Zo)}function Qo(){const v=indexedDB.open(Xl,1);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(Zo,{keyPath:Sr})}catch(A){_(A)}}),v.addEventListener("success",(0,u.Z)(function*(){const b=v.result;b.objectStoreNames.contains(Zo)?p(b):(b.close(),yield function lr(){const v=indexedDB.deleteDatabase(Xl);return new ri(v).toPromise()}(),p(yield Qo()))}))})}function uu(v,p,_){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,u.Z)(function*(v,p,_){const b=xa(v,!0).put({[Sr]:p,value:_});return new ri(b).toPromise()})).apply(this,arguments)}function Tr(){return(Tr=(0,u.Z)(function*(v,p){const _=xa(v,!1).get(p),b=yield new ri(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Eo(v,p){const _=xa(v,!0).delete(p);return new ri(_).toPromise()}const zr=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield Qo()),_.db})()}_withRetries(_){var b=this;return(0,u.Z)(function*(){let A=0;for(;;)try{const O=yield b._openDb();return yield _(O)}catch(O){if(A++>3)throw O;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return hn()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=rl._getInstance(function Ql(){return hn()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,u.Z)(function*(A,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(A,O){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,u.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var b,A;if(_.activeServiceWorker=yield function Mt(){return bo.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Pd(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(b=O[0])||void 0===b?void 0:b.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,u.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function eg(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Qo();return yield uu(_,ou,"1"),yield Eo(_,ou),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,u.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var A=this;return(0,u.Z)(function*(){return A._withPendingWrite((0,u.Z)(function*(){return yield A._withRetries(O=>uu(O,_,b)),A.localCache[_]=b,A.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,u.Z)(function*(){const A=yield b._withRetries(O=>function ka(v,p){return Tr.apply(this,arguments)}(O,_));return b.localCache[_]=A,A})()}_remove(_){var b=this;return(0,u.Z)(function*(){return b._withPendingWrite((0,u.Z)(function*(){return yield b._withRetries(A=>Eo(A,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const b=yield _._withRetries(W=>{const ie=xa(W,!1).getAll();return new ri(ie).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:W,value:ie}of b)O.add(W),JSON.stringify(_.localCache[W])!==JSON.stringify(ie)&&(_.notifyListeners(W,ie),A.push(W));for(const W of Object.keys(_.localCache))_.localCache[W]&&!O.has(W)&&(_.notifyListeners(W,null),A.push(W));return A})()}notifyListeners(_,b){this.localCache[_]=b;const A=this.listeners[_];if(A)for(const O of Array.from(A))O(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ld(v,p){return zt(v,"POST","/v2/accounts/mfaSignIn:start",tn(v,p))}function $r(){return($r=(0,u.Z)(function*(v){return(yield zt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ea(v){return new Promise((p,_)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=p,b.onerror=A=>{const O=be("internal-error");O.customData=A,_(O)},b.type="text/javascript",b.charset="UTF-8",function fu(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(b)})}function ol(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Ar=1e12;class Vd{constructor(p){this.auth=p,this.counter=Ar,this._widgets=new Map}render(p,_){const b=this.counter;return this._widgets.set(b,new Jl(p,this.auth.name,_||{})),this.counter++,b}reset(p){var _;const b=p||Ar;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Ar))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,u.Z)(function*(){var b;return null===(b=_._widgets.get(p||Ar))||void 0===b||b.execute(),""})()}}class Jl{constructor(p,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;se(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ta(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<v;b++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ec=ol("rcb"),Ef=new gn(3e4,6e4);class Cf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Qt().grecaptcha}load(p,_=""){return se(function tg(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Qt().grecaptcha):new Promise((b,A)=>{const O=Qt().setTimeout(()=>{A(be(p,"network-request-failed"))},Ef.get());Qt()[ec]=()=>{Qt().clearTimeout(O),delete Qt()[ec];const ie=Qt().grecaptcha;if(!ie)return void A(be(p,"internal-error"));const Le=ie.render;ie.render=(Ze,at)=>{const qe=Le(Ze,at);return this.counter++,qe},this.hostLanguage=_,b(ie)},ea(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:ec,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),A(be(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Qt().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bd{load(p){return(0,u.Z)(function*(){return new Vd(p)})()}clearedOneInstance(){}}const pu="recaptcha",Hd={theme:"light",type:"image"};class Df{constructor(p,_=Object.assign({},Hd),b){this.parameters=_,this.type=pu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ne(b),this.isInvisible="invisible"===this.parameters.size,se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;se(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bd:new Cf,this.validateStartingState()}verify(){var p=this;return(0,u.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(_)||new Promise(O=>{const W=ie=>{!ie||(p.tokenChangeListeners.delete(W),O(ie))};p.tokenChangeListeners.add(W),p.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof p)p(_);else if("string"==typeof p){const b=Qt()[p];"function"==typeof b&&b(_)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,u.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,u.Z)(function*(){se(en()&&!hn(),p.auth,"internal-error"),yield function Ud(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function hu(v){return $r.apply(this,arguments)}(p.auth);se(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ps{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Ca._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function kn(){return(kn=(0,u.Z)(function*(v,p,_){const b=Ne(v),A=yield Ki(b,p,(0,F.m9)(_));return new ps(A,O=>qn(b,O))})).apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(v,p,_){const b=(0,F.m9)(v);yield fo(!1,b,"phone");const A=yield Ki(b.auth,p,(0,F.m9)(_));return new ps(A,O=>jr(b,O))})).apply(this,arguments)}function nc(){return(nc=(0,u.Z)(function*(v,p,_){const b=(0,F.m9)(v),A=yield Ki(b.auth,p,(0,F.m9)(_));return new ps(A,O=>po(b,O))})).apply(this,arguments)}function Ki(v,p,_){return qr.apply(this,arguments)}function qr(){return(qr=(0,u.Z)(function*(v,p,_){var b;const A=yield _.verify();try{let O;if(se("string"==typeof A,v,"argument-error"),se(_.type===pu,v,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const W=O.session;if("phoneNumber"in O)return se("enroll"===W.type,v,"internal-error"),(yield Zn(v,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{se("signin"===W.type,v,"internal-error");const ie=(null===(b=O.multiFactorHint)||void 0===b?void 0:b.uid)||O.multiFactorUid;return se(ie,v,"missing-multi-factor-info"),(yield Ld(v,{mfaPendingCredential:W.credential,mfaEnrollmentId:ie,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Wm(v,{phoneNumber:O.phoneNumber,recaptchaToken:A});return W}}finally{_._reset()}})).apply(this,arguments)}function Ls(){return(Ls=(0,u.Z)(function*(v,p){yield Cn((0,F.m9)(v),p)})).apply(this,arguments)}let cr=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Ne(_)}verifyPhoneNumber(_,b){return Ki(this.auth,_,(0,F.m9)(b))}static credential(_,b){return Ca._fromVerification(_,b)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:A}=_;return b&&A?Ca._fromTokenResponse(b,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ur(v,p){return p?ae(p):(se(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class al extends cn{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Yn(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Yn(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Yn(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function ll(v){return zo(v.auth,new al(v),v.bypassAuthState)}function jd(v){const{auth:p,user:_}=v;return se(_,p,"internal-error"),Id(_,new al(v),v.bypassAuthState)}function Sf(v){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,u.Z)(function*(v){const{auth:p,user:_}=v;return se(_,p,"internal-error"),Cn(_,new al(v),v.bypassAuthState)})).apply(this,arguments)}class Mr{constructor(p,_,b,A,O=!1){this.auth=p,this.resolver=b,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,u.Z)(function*(b,A){p.pendingPromise={resolve:b,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(b,A){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,u.Z)(function*(){const{urlResponse:b,sessionId:A,postBody:O,tenantId:W,error:ie,type:Le}=p;if(ie)return void _.reject(ie);const Ze={auth:_.auth,requestUri:b,sessionId:A,tenantId:W||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)(Ze))}catch(at){_.reject(at)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ll;case"linkViaPopup":case"linkViaRedirect":return Sf;case"reauthViaPopup":case"reauthViaRedirect":return jd;default:Ae(this.auth,"internal-error")}}resolve(p){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tf=new gn(2e3,1e4);function Af(){return(Af=(0,u.Z)(function*(v,p,_){const b=Ne(v);je(v,p,uo);const A=ur(b,_);return new Vs(b,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function ul(){return(ul=(0,u.Z)(function*(v,p,_){const b=(0,F.m9)(v);je(b.auth,p,uo);const A=ur(b.auth,_);return new Vs(b.auth,"reauthViaPopup",p,A,b).executeNotNull()})).apply(this,arguments)}function gu(){return(gu=(0,u.Z)(function*(v,p,_){const b=(0,F.m9)(v);je(b.auth,p,uo);const A=ur(b.auth,_);return new Vs(b.auth,"linkViaPopup",p,A,b).executeNotNull()})).apply(this,arguments)}let Vs=(()=>{class v extends Mr{constructor(_,b,A,O,W){super(_,b,O,W),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const b=yield _.execute();return se(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,u.Z)(function*(){oe(1===_.filter.length,"Popup operations only handle one event");const b=Ko();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(be(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,A;this.pollId=(null===(A=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Tf.get())};_()}}return v.currentPopupAction=null,v})();const Fi=new Map;class dl extends Mr{constructor(p,_,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,u.Z)(function*(){let b=Fi.get(_.auth._key());if(!b){try{const O=(yield function Ra(v,p){return _u.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;b=()=>Promise.resolve(O)}catch(A){b=()=>Promise.reject(A)}Fi.set(_.auth._key(),b)}return _.bypassAuthState||Fi.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,b=this;return(0,u.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(b,p);if("unknown"!==p.type){if(p.eventId){const A=yield b.auth._redirectUserForId(p.eventId);if(A)return b.user=A,_().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function _u(){return(_u=(0,u.Z)(function*(v,p){const _=T(p),b=I(v);if(!(yield b._isAvailable()))return!1;const A="true"===(yield b._get(_));return yield b._remove(_),A})).apply(this,arguments)}function Bs(v,p){return Co.apply(this,arguments)}function Co(){return(Co=(0,u.Z)(function*(v,p){return I(v)._set(T(p),"true")})).apply(this,arguments)}function I(v){return ae(v._redirectPersistence)}function T(v){return de("pendingRedirect",v.config.apiKey,v.name)}function Z(){return(Z=(0,u.Z)(function*(v,p,_){const b=Ne(v);je(v,p,uo);const A=ur(b,_);return yield Bs(A,b),A._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function Ye(){return(Ye=(0,u.Z)(function*(v,p,_){const b=(0,F.m9)(v);je(b.auth,p,uo);const A=ur(b.auth,_);yield Bs(A,b.auth);const O=yield Oa(b);return A._openRedirect(b.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function Wt(){return(Wt=(0,u.Z)(function*(v,p,_){const b=(0,F.m9)(v);je(b.auth,p,uo);const A=ur(b.auth,_);yield fo(!1,b,p.providerId),yield Bs(A,b.auth);const O=yield Oa(b);return A._openRedirect(b.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function Wn(){return(Wn=(0,u.Z)(function*(v,p){return yield Ne(v)._initializationPromise,Rn(v,p,!1)})).apply(this,arguments)}function Rn(v,p){return hl.apply(this,arguments)}function hl(){return(hl=(0,u.Z)(function*(v,p,_=!1){const b=Ne(v),A=ur(b,p),W=yield new dl(b,A,_).execute();return W&&!_&&(delete W.user._redirectEventId,yield b._persistUserIfCurrent(W.user),yield b._setRedirectUser(null,p)),W})).apply(this,arguments)}function Oa(v){return dr.apply(this,arguments)}function dr(){return(dr=(0,u.Z)(function*(v){const p=Ko(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class hr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(_=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function zd(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ng(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var b;if(p.error&&!ng(p)){const A=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(be(this.auth,A))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const b=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wr(p))}saveEventToCache(p){this.cachedEventUids.add(Wr(p)),this.lastProcessedEventTime=Date.now()}}function Wr(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function ng({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function vu(v){return Na.apply(this,arguments)}function Na(){return(Na=(0,u.Z)(function*(v,p={}){return zt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const xf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$d=/^https?/;function Do(){return(Do=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield vu(v);for(const _ of p)try{if(wu(_))return}catch(b){}Ae(v,"unauthorized-domain")})).apply(this,arguments)}function wu(v){const p=Ct(),{protocol:_,hostname:b}=new URL(p);if(v.startsWith("chrome-extension://")){const W=new URL(v);return""===W.hostname&&""===b?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&W.hostname===b}if(!$d.test(_))return!1;if(xf.test(v))return b===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(b)}const rg=new gn(3e4,6e4);function sg(){const v=Qt().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let rc=null;function iv(v){return rc=rc||function kf(v){return new Promise((p,_)=>{var b,A,O;function W(){sg(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{sg(),_(be(v,"network-request-failed"))},timeout:rg.get()})}if(null===(A=null===(b=Qt().gapi)||void 0===b?void 0:b.iframes)||void 0===A?void 0:A.Iframe)p(gapi.iframes.getContext());else{if(!(null===(O=Qt().gapi)||void 0===O?void 0:O.load)){const ie=ol("iframefcb");return Qt()[ie]=()=>{gapi.load?W():_(be(v,"network-request-failed"))},ea(`https://apis.google.com/js/api.js?onload=${ie}`).catch(Le=>_(Le))}W()}}).catch(p=>{throw rc=null,p})}(v),rc}const Rf=new gn(5e3,15e3),Pa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fl(v){const p=v.config;se(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?_n(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:v.name,v:le.SDK_VERSION},A=Fa.get(v.config.apiHost);A&&(b.eid=A);const O=v._getFrameworks();return O.length&&(b.fw=O.join(",")),`${_}?${(0,F.xO)(b).slice(1)}`}function og(){return og=(0,u.Z)(function*(v){const p=yield iv(v),_=Qt().gapi;return se(_,v,"internal-error"),p.open({where:document.body,url:fl(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pa,dontclear:!0},b=>new Promise(function(){var A=(0,u.Z)(function*(O,W){yield b.restyle({setHideOnLeave:!1});const ie=be(v,"network-request-failed"),Le=Qt().setTimeout(()=>{W(ie)},Rf.get());function Ze(){Qt().clearTimeout(Le),O(b)}b.ping(Ze).then(Ze,()=>{W(ie)})});return function(O,W){return A.apply(this,arguments)}}()))}),og.apply(this,arguments)}const lT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qd{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Lf(v,p,_,b,A,O){se(v.config.authDomain,v,"auth-domain-config-required"),se(v.config.apiKey,v,"invalid-api-key");const W={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:b,v:le.SDK_VERSION,eventId:A};if(p instanceof uo){p.setDefaultLanguage(v.languageCode),W.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(W.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Le,Ze]of Object.entries(O||{}))W[Le]=Ze}if(p instanceof sr){const Le=p.getScopes().filter(Ze=>""!==Ze);Le.length>0&&(W.scopes=Le.join(","))}v.tenantId&&(W.tid=v.tenantId);const ie=W;for(const Le of Object.keys(ie))void 0===ie[Le]&&delete ie[Le];return`${function tE({config:v}){return v.emulator?_n(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,F.xO)(ie).slice(1)}`}const ms="webStorageSupport";class Kd extends class av{constructor(p){this.factorId=p}_process(p,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,b);case"signin":return this._finalizeSignIn(p,_.credential);default:return Y("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Kd(p)}_finalizeEnroll(p,_,b){return function Rd(v,p){return zt(v,"POST","/v2/accounts/mfaEnrollment:finalize",tn(v,p))}(p,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function sl(v,p){return zt(v,"POST","/v2/accounts/mfaSignIn:finalize",tn(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let cg=(()=>{class v{constructor(){}static assertion(_){return Kd._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var ug="@firebase/auth",Vf="0.19.12";class dg{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(b=>{var A;p((null===(A=b)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pl(){return window}function ml(){return(ml=(0,u.Z)(function*(v,p,_){var b;const{BuildInfo:A}=pl();oe(p.sessionId,"AuthEvent did not contain a session ID");const O=yield nE(p.sessionId),W={};return pi()?W.ibi=A.packageName:Vn()?W.apn=A.packageName:Ae(v,"operation-not-supported-in-this-environment"),A.displayName&&(W.appDisplayName=A.displayName),W.sessionId=O,Lf(v,_,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,W)})).apply(this,arguments)}function gs(){return(gs=(0,u.Z)(function*(v){const{BuildInfo:p}=pl(),_={};pi()?_.iosBundleId=p.packageName:Vn()?_.androidPackageName=p.packageName:Ae(v,"operation-not-supported-in-this-environment"),yield vu(v,_)})).apply(this,arguments)}function ac(){return(ac=(0,u.Z)(function*(v,p,_){const{cordova:b}=pl();let A=()=>{};try{yield new Promise((O,W)=>{let ie=null;function Le(){var qe;O();const Un=null===(qe=b.plugins.browsertab)||void 0===qe?void 0:qe.close;"function"==typeof Un&&Un(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function Ze(){ie||(ie=window.setTimeout(()=>{W(be(v,"redirect-cancelled-by-user"))},2e3))}function at(){"visible"===(null==document?void 0:document.visibilityState)&&Ze()}p.addPassiveListener(Le),document.addEventListener("resume",Ze,!1),Vn()&&document.addEventListener("visibilitychange",at,!1),A=()=>{p.removePassiveListener(Le),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",at,!1),ie&&window.clearTimeout(ie)}})}finally{A()}})).apply(this,arguments)}function nE(v){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,u.Z)(function*(v){const p=iE(v),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function iE(v){if(oe(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),_=new Uint8Array(p);for(let b=0;b<v.length;b++)_[b]=v.charCodeAt(b);return _}!function lv(v){(0,le._registerComponent)(new te.wA("auth",(p,{options:_})=>{const b=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),{apiKey:O,authDomain:W}=b.options;return((ie,Le)=>{se(O&&!O.includes(":"),"invalid-api-key",{appName:ie.name}),se(!(null==W?void 0:W.includes(":")),"argument-error",{appName:ie.name});const Ze={apiKey:O,authDomain:W,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Za(v)},at=new Cr(ie,Le,Ze);return function ce(v,p){const _=(null==p?void 0:p.persistence)||[],b=(Array.isArray(_)?_:[_]).map(ae);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(b,null==p?void 0:p.popupRedirectResolver)}(at,_),at})(b,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,b)=>{p.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new te.wA("auth-internal",p=>{const _=Ne(p.getProvider("auth").getImmediate());return new dg(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(ug,Vf,function bu(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,le.registerVersion)(ug,Vf,"esm2017")}("Browser");class Eu extends hr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,u.Z)(function*(){yield p.initPromise})()}}function uv(v){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,u.Z)(function*(v){const p=yield Yd()._get(jf(v));return p&&(yield Yd()._remove(jf(v))),p})).apply(this,arguments)}function dv(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const b=Math.floor(Math.random()*p.length);v.push(p.charAt(b))}return v.join("")}function Yd(){return ae(an)}function jf(v){return de("authEvent",v.config.apiKey,v.name)}function Du(v){if(!(null==v?void 0:v.includes("?")))return{};const[p,..._]=v.split("?");return(0,F.zd)(_.join("?"))}function zf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:be("no-auth-event")}}function Qd(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function fv(v=(0,F.z$)()){return!("file:"!==Qd()&&"ionic:"!==Qd()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function fr(){try{const v=self.localStorage,p=Ko();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Su(v=(0,F.z$)()){return function cT(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function sE(v=(0,F.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,F.hl)()}catch(v){return Xd()&&(0,F.hl)()}return!1}function Xd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function qf(){return(function bg(){return"http:"===Qd()||"https:"===Qd()}()||(0,F.ru)()||fv())&&!function rE(){return(0,F.b$)()||(0,F.UG)()}()&&fr()&&!Xd()}function Eg(){return fv()&&"undefined"!=typeof document}function Tn(){return(Tn=(0,u.Z)(function*(){return!!Eg()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const pr={LOCAL:"local",NONE:"none",SESSION:"session"},ai=se,Yr="persistence";function La(v){return _l.apply(this,arguments)}function _l(){return(_l=(0,u.Z)(function*(v){yield v._initializationPromise;const p=Cg(),_=de(Yr,v.config.apiKey,v.name);p&&p.setItem(_,v._getPersistence())})).apply(this,arguments)}function Cg(){var v;try{return(null===(v=function Kr(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(p){return null}}const Dg=se;class Io{constructor(){this.browserResolver=ae(class sc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ns,this._completeRedirectFn=Rn}_openPopup(p,_,b,A){var O=this;return(0,u.Z)(function*(){var W;oe(null===(W=O.eventManagers[p._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ie=Lf(p,_,b,Ct(),A);return function ia(v,p,_,b=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),W=Math.max((window.screen.availWidth-b)/2,0).toString();let ie="";const Le=Object.assign(Object.assign({},lT),{width:b.toString(),height:A.toString(),top:O,left:W}),Ze=(0,F.z$)().toLowerCase();_&&(ie=xi(Ze)?"_blank":_),yt(Ze)&&(p=p||"http://localhost",Le.scrollbars="yes");const at=Object.entries(Le).reduce((Un,[mr,Au])=>`${Un}${mr}=${Au},`,"");if(function Rl(v=(0,F.z$)()){var p;return pi(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ze)&&"_self"!==ie)return function lg(v,p){const _=document.createElement("a");_.href=v,_.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(p||"",ie),new qd(null);const qe=window.open(p||"",ie,at);se(qe,v,"popup-blocked");try{qe.focus()}catch(Un){}return new qd(qe)}(p,ie,Ko())})()}_openRedirect(p,_,b,A){var O=this;return(0,u.Z)(function*(){return yield O._originValidation(p),function Yo(v){Qt().location.href=v}(Lf(p,_,b,Ct(),A)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:A,promise:O}=this.eventManagers[_];return A?Promise.resolve(A):(oe(O,"If manager is not set, promise should be"),O)}const b=this.initAndGetManager(p);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(p){var _=this;return(0,u.Z)(function*(){const b=yield function eE(v){return og.apply(this,arguments)}(p),A=new hr(p);return b.register("authEvent",O=>(se(null==O?void 0:O.authEvent,p,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:A},_.iframes[p._key()]=b,A})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(ms,{type:ms},A=>{var O;const W=null===(O=null==A?void 0:A[0])||void 0===O?void 0:O[ms];void 0!==W&&_(!!W),Ae(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ig(v){return Do.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Is()||Xt()||pi()}}),this.cordovaResolver=ae(class yg{constructor(){this._redirectPersistence=Ns,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Rn}_initialize(p){var _=this;return(0,u.Z)(function*(){const b=p._key();let A=_.eventManagers.get(b);return A||(A=new Eu(p),_.eventManagers.set(b,A),_.attachCallbackListeners(p,A)),A})()}_openPopup(p){Ae(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,b,A){var O=this;return(0,u.Z)(function*(){!function gg(v){var p,_,b,A,O,W,ie,Le,Ze,at;const qe=pl();se("function"==typeof(null===(p=null==qe?void 0:qe.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),se(void 0!==(null===(_=null==qe?void 0:qe.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),se("function"==typeof(null===(O=null===(A=null===(b=null==qe?void 0:qe.cordova)||void 0===b?void 0:b.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(Le=null===(ie=null===(W=null==qe?void 0:qe.cordova)||void 0===W?void 0:W.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Le?void 0:Le.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(at=null===(Ze=null==qe?void 0:qe.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===at?void 0:at.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const W=yield O._initialize(p);yield W.initialized(),W.resetRedirect(),function yu(){Fi.clear()}(),yield O._originValidation(p);const ie=function Uf(v,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:dv(),postBody:null,tenantId:v.tenantId,error:be(v,"no-auth-event")}}(p,b,A);yield function cv(v,p){return Yd()._set(jf(v),p)}(p,ie);const Le=yield function pg(v,p,_){return ml.apply(this,arguments)}(p,ie,_),Ze=yield function oc(v){const{cordova:p}=pl();return new Promise(_=>{p.plugins.browsertab.isAvailable(b=>{let A=null;b?p.plugins.browsertab.openUrl(v):A=p.InAppBrowser.open(v,function Ho(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(A)})})}(Le);return function mg(v,p,_){return ac.apply(this,arguments)}(p,W,Ze)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Bf(v){return gs.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:b,handleOpenURL:A,BuildInfo:O}=pl(),W=setTimeout((0,u.Z)(function*(){yield uv(p),_.onEvent(zf())}),500),ie=function(){var at=(0,u.Z)(function*(qe){clearTimeout(W);const Un=yield uv(p);let mr=null;Un&&(null==qe?void 0:qe.url)&&(mr=function gl(v,p){var _,b;const A=function Zd(v){const p=Du(v),_=p.link?decodeURIComponent(p.link):void 0,b=Du(_).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Du(A).link||A||b||_||v}(p);if(A.includes("/__/auth/callback")){const O=Du(A),W=O.firebaseError?function Gf(v){try{return JSON.parse(v)}catch(p){return null}}(decodeURIComponent(O.firebaseError)):null,ie=null===(b=null===(_=null==W?void 0:W.code)||void 0===_?void 0:_.split("auth/"))||void 0===b?void 0:b[1],Le=ie?be(ie):null;return Le?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(Un,qe.url)),_.onEvent(mr||zf())});return function(Un){return at.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,ie);const Le=A,Ze=`${O.packageName.toLowerCase()}://`;pl().handleOpenURL=function(){var at=(0,u.Z)(function*(qe){if(qe.toLowerCase().startsWith(Ze)&&ie({url:qe}),"function"==typeof Le)try{Le(qe)}catch(Un){console.error(Un)}});return function(qe){return at.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ns,this._completeRedirectFn=Rn}_initialize(p){var _=this;return(0,u.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,b,A){var O=this;return(0,u.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(p,_,b,A)})()}_openRedirect(p,_,b,A){var O=this;return(0,u.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(p,_,b,A)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Eg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,u.Z)(function*(){if(p.underlyingResolver)return;const _=yield function oi(){return Tn.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function Ig(v){return v.unwrap()}function Li(v){return Wf(v)}function Wf(v){const{_tokenResponse:p}=v instanceof F.ZR?v.customData:v;if(!p)return null;if(!(v instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return cr.credentialFromResult(v);const _=p.providerId;if(!_||"password"===_)return null;let b;switch(_){case"google.com":b=Xa;break;case"facebook.com":b=jo;break;case"github.com":b=Cd;break;case"twitter.com":b=Vl;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:W,pendingToken:ie,nonce:Le}=p;return O||W||A||ie?ie?_.startsWith("saml.")?$i._create(_,ie):Ms._fromParams({providerId:_,signInMethod:_,pendingToken:ie,idToken:A,accessToken:O}):new Da(_).credential({idToken:A,accessToken:O,rawNonce:Le}):null}return v instanceof F.ZR?b.credentialFromError(v):b.credentialFromResult(v)}function Mn(v,p){return p.catch(_=>{throw _ instanceof F.ZR&&function oE(v,p){var _;const b=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new N(v,function Zl(v,p){var _;const b=(0,F.m9)(v),A=p;return se(p.customData.operationType,b,"argument-error"),se(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),il._fromError(b,A)}(v,p));else if(b){const A=Wf(p),O=p;A&&(O.credential=A,O.tenantId=b.tenantId||void 0,O.email=b.email||void 0,O.phoneNumber=b.phoneNumber||void 0)}}(v,_),_}).then(_=>{const A=_.user;return{operationType:_.operationType,credential:Li(_),additionalUserInfo:Ni(_),user:mi.getOrCreate(A)}})}function ye(v,p){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,u.Z)(function*(v,p){const _=yield p;return{verificationId:_.verificationId,confirm:b=>Mn(v,_.confirm(b))}})).apply(this,arguments)}class N{constructor(p,_){this.resolver=_,this.auth=function An(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Mn(Ig(this.auth),this.resolver.resolveSignIn(p))}}class mi{constructor(p){this._delegate=p,this.multiFactor=function Od(v){const p=(0,F.m9)(v);return Ma.has(p)||Ma.set(p,Os._fromUser(p)),Ma.get(p)}(p)}static getOrCreate(p){return mi.USER_MAP.has(p)||mi.USER_MAP.set(p,new mi(p)),mi.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,u.Z)(function*(){return Mn(_.auth,jr(_._delegate,p))})()}linkWithPhoneNumber(p,_){var b=this;return(0,u.Z)(function*(){return ye(b.auth,function tc(v,p,_){return Pi.apply(this,arguments)}(b._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,u.Z)(function*(){return Mn(_.auth,function Mf(v,p,_){return gu.apply(this,arguments)}(_._delegate,p,Io))})()}linkWithRedirect(p){var _=this;return(0,u.Z)(function*(){return yield La(Ne(_.auth)),function ot(v,p,_){return function vt(v,p,_){return Wt.apply(this,arguments)}(v,p,_)}(_._delegate,p,Io)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,u.Z)(function*(){return Mn(_.auth,po(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return ye(this.auth,function Wi(v,p,_){return nc.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Mn(this.auth,function na(v,p,_){return ul.apply(this,arguments)}(this._delegate,p,Io))}reauthenticateWithRedirect(p){var _=this;return(0,u.Z)(function*(){return yield La(Ne(_.auth)),function re(v,p,_){return function ke(v,p,_){return Ye.apply(this,arguments)}(v,p,_)}(_._delegate,p,Io)})()}sendEmailVerification(p){return function Gr(v,p){return Xc.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,u.Z)(function*(){return yield function Ja(v,p){return $c.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function tu(v,p){return nu((0,F.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Td(v,p){return nu((0,F.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function mu(v,p){return Ls.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Aa(v,p){return eu.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Kl(v,p,_){return Yl.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}mi.USER_MAP=new WeakMap;const lc=se;let Jd=(()=>{class v{constructor(_,b){if(this.app=_,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=_.options;lc(A,"invalid-api-key",{appName:_.name}),lc(A,"invalid-api-key",{appName:_.name});const O="undefined"!=typeof window?Io:void 0;this._delegate=b.initialize({options:{persistence:Sg(A,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,b){!function wn(v,p,_){const b=Ne(v);se(b._canInitEmulator,b,"emulator-config-failed"),se(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const A=!!(null==_?void 0:_.disableWarnings),O=wi(p),{host:W,port:ie}=function so(v){const p=wi(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(b);if(A){const O=A[1];return{host:O,port:Kn(b.substr(O.length+1))}}{const[O,W]=b.split(":");return{host:O,port:Kn(W)}}}(p);b.config.emulator={url:`${O}//${W}${null===ie?"":`:${ie}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:W,port:ie,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function ds(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,b)}applyActionCode(_){return function Wc(v,p){return De.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Lt(this._delegate,_)}confirmPasswordReset(_,b){return function $l(v,p,_){return qc.apply(this,arguments)}(this._delegate,_,b)}createUserWithEmailAndPassword(_,b){var A=this;return(0,u.Z)(function*(){return Mn(A._delegate,function Ta(v,p,_){return ar.apply(this,arguments)}(A._delegate,_,b))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Wl(v,p){return yo.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Qc(v,p){const _=Uo.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,u.Z)(function*(){lc(qf(),_._delegate,"operation-not-supported-in-this-environment");const b=yield function Dt(v,p){return Wn.apply(this,arguments)}(_._delegate,Io);return b?Mn(_._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function hv(v,p){Ne(v)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,b,A){const{next:O,error:W,complete:ie}=eh(_,b,A);return this._delegate.onAuthStateChanged(O,W,ie)}onIdTokenChanged(_,b,A){const{next:O,error:W,complete:ie}=eh(_,b,A);return this._delegate.onIdTokenChanged(O,W,ie)}sendSignInLinkToEmail(_,b){return function Zc(v,p,_){return Sd.apply(this,arguments)}(this._delegate,_,b)}sendPasswordResetEmail(_,b){return function Gl(v,p,_){return zl.apply(this,arguments)}(this._delegate,_,b||void 0)}setPersistence(_){var b=this;return(0,u.Z)(function*(){let A;switch(function pv(v,p){ai(Object.values(pr).includes(p),v,"invalid-persistence-type"),(0,F.b$)()?ai(p!==pr.SESSION,v,"unsupported-persistence-type"):(0,F.UG)()?ai(p===pr.NONE,v,"unsupported-persistence-type"):Xd()?ai(p===pr.NONE||p===pr.LOCAL&&(0,F.hl)(),v,"unsupported-persistence-type"):ai(p===pr.NONE||fr(),v,"unsupported-persistence-type")}(b._delegate,_),_){case pr.SESSION:A=Ns;break;case pr.LOCAL:A=(yield ae(zr)._isAvailable())?zr:an;break;case pr.NONE:A=q;break;default:return Ae("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Mn(this._delegate,function Hl(v){return Dd.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Mn(this._delegate,qn(this._delegate,_))}signInWithCustomToken(_){return Mn(this._delegate,function mo(v,p){return go.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,b){return Mn(this._delegate,function Yc(v,p,_){return qn((0,F.m9)(v),jc.credential(p,_))}(this._delegate,_,b))}signInWithEmailLink(_,b){return Mn(this._delegate,function ql(v,p,_){return _o.apply(this,arguments)}(this._delegate,_,b))}signInWithPhoneNumber(_,b){return ye(this._delegate,function If(v,p,_){return kn.apply(this,arguments)}(this._delegate,_,b))}signInWithPopup(_){var b=this;return(0,u.Z)(function*(){return lc(qf(),b._delegate,"operation-not-supported-in-this-environment"),Mn(b._delegate,function cl(v,p,_){return Af.apply(this,arguments)}(b._delegate,_,Io))})()}signInWithRedirect(_){var b=this;return(0,u.Z)(function*(){return lc(qf(),b._delegate,"operation-not-supported-in-this-environment"),yield La(b._delegate),function R(v,p,_){return function H(v,p,_){return Z.apply(this,arguments)}(v,p,_)}(b._delegate,_,Io)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function In(v,p){return Sa.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=pr,v})();function eh(v,p,_){let b=v;"function"!=typeof v&&({next:b,error:p,complete:_}=v);const A=b;return{next:W=>A(W&&mi.getOrCreate(W)),error:p,complete:_}}function Sg(v,p){const _=function Tu(v,p){const _=Cg();if(!_)return[];const b=de(Yr,v,p);switch(_.getItem(b)){case pr.NONE:return[q];case pr.LOCAL:return[zr,Ns];case pr.SESSION:return[Ns];default:return[]}}(v,p);if("undefined"!=typeof self&&!_.includes(zr)&&_.push(zr),"undefined"!=typeof window)for(const b of[an,Ns])_.includes(b)||_.push(b);return _.includes(q)||_.push(q),_}class Kf{constructor(){this.providerId="phone",this._delegate=new cr(Ig(X.Z.auth()))}static credential(p,_){return cr.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Kf.PHONE_SIGN_IN_METHOD=cr.PHONE_SIGN_IN_METHOD,Kf.PROVIDER_ID=cr.PROVIDER_ID;const mv=se;class Tg{constructor(p,_,b=X.Z.app()){var A;mv(null===(A=b.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new Df(p,_,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Yf(v){v.INTERNAL.registerComponent(new te.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new Jd(_,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:jc,FacebookAuthProvider:jo,GithubAuthProvider:Cd,GoogleAuthProvider:Xa,OAuthProvider:Da,SAMLAuthProvider:Dr,PhoneAuthProvider:Kf,PhoneMultiFactorGenerator:cg,RecaptchaVerifier:Tg,TwitterAuthProvider:Vl,Auth:Jd,AuthCredential:cn,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.12")}(X.Z)},8306:(ct,Se,P)=>{P.d(Se,{y:()=>$});var u=P(930),X=P(727),F=P(8822),le=P(4671);var te=P(2416),fe=P(576),ue=P(2806);let $=(()=>{class Me{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const ge=new Me;return ge.source=this,ge.operator=Ve,ge}subscribe(Ve,ge,Ce){const it=function ze(Me){return Me&&Me instanceof u.Lv||function ee(Me){return Me&&(0,fe.m)(Me.next)&&(0,fe.m)(Me.error)&&(0,fe.m)(Me.complete)}(Me)&&(0,X.Nn)(Me)}(Ve)?Ve:new u.Hp(Ve,ge,Ce);return(0,ue.x)(()=>{const{operator:We,source:Ae}=this;it.add(We?We.call(it,Ae):Ae?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(ge){Ve.error(ge)}}forEach(Ve,ge){return new(ge=z(ge))((Ce,it)=>{const We=new u.Hp({next:Ae=>{try{Ve(Ae)}catch(be){it(be),We.unsubscribe()}},error:it,complete:Ce});this.subscribe(We)})}_subscribe(Ve){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(Ve)}[F.L](){return this}pipe(...Ve){return function me(Me){return 0===Me.length?le.y:1===Me.length?Me[0]:function(Ve){return Me.reduce((ge,Ce)=>Ce(ge),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=z(Ve))((ge,Ce)=>{let it;this.subscribe(We=>it=We,We=>Ce(We),()=>ge(it))})}}return Me.create=Oe=>new Me(Oe),Me})();function z(Me){var Oe;return null!==(Oe=null!=Me?Me:te.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(ct,Se,P)=>{P.d(Se,{x:()=>te});var u=P(8306),X=P(727);const le=(0,P(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=P(8737),me=P(2806);let te=(()=>{class ue extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const ee=new fe(this,this);return ee.operator=z,ee}_throwIfClosed(){if(this.closed)throw new le}next(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(z)}})}error(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:ee}=this;for(;ee.length;)ee.shift().error(z)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:ee,isStopped:ze,observers:Me}=this;return ee||ze?X.Lc:(this.currentObservers=null,Me.push(z),new X.w0(()=>{this.currentObservers=null,(0,ne.P)(Me,z)}))}_checkFinalizedStatuses(z){const{hasError:ee,thrownError:ze,isStopped:Me}=this;ee?z.error(ze):Me&&z.complete()}asObservable(){const z=new u.y;return z.source=this,z}}return ue.create=($,z)=>new fe($,z),ue})();class fe extends te{constructor($,z){super(),this.destination=$,this.source=z}next($){var z,ee;null===(ee=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===ee||ee.call(z,$)}error($){var z,ee;null===(ee=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===ee||ee.call(z,$)}complete(){var $,z;null===(z=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===z||z.call($)}_subscribe($){var z,ee;return null!==(ee=null===(z=this.source)||void 0===z?void 0:z.subscribe($))&&void 0!==ee?ee:X.Lc}}},930:(ct,Se,P)=>{P.d(Se,{Hp:()=>Ve,Lv:()=>ee});var u=P(576),X=P(727),F=P(2416),le=P(7849),ne=P(5032);const me=ue("C",void 0,void 0);function ue(Ae,be,Ee){return{kind:Ae,value:be,error:Ee}}var $=P(3410),z=P(2806);class ee extends X.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,X.Nn)(be)&&be.add(this)):this.destination=We}static create(be,Ee,je){return new Ve(be,Ee,je)}next(be){this.isStopped?it(function fe(Ae){return ue("N",Ae,void 0)}(be),this):this._next(be)}error(be){this.isStopped?it(function te(Ae){return ue("E",void 0,Ae)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?it(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Me(Ae,be){return ze.call(Ae,be)}class Oe{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(be)}catch(je){ge(je)}}error(be){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(be)}catch(je){ge(je)}else ge(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Ee){ge(Ee)}}}class Ve extends ee{constructor(be,Ee,je){let Ue;if(super(),(0,u.m)(be)||!be)Ue={next:null!=be?be:void 0,error:null!=Ee?Ee:void 0,complete:null!=je?je:void 0};else{let se;this&&F.v.useDeprecatedNextContext?(se=Object.create(be),se.unsubscribe=()=>this.unsubscribe(),Ue={next:be.next&&Me(be.next,se),error:be.error&&Me(be.error,se),complete:be.complete&&Me(be.complete,se)}):Ue=be}this.destination=new Oe(Ue)}}function ge(Ae){F.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Ae):(0,le.h)(Ae)}function it(Ae,be){const{onStoppedNotification:Ee}=F.v;Ee&&$.z.setTimeout(()=>Ee(Ae,be))}const We={closed:!0,next:ne.Z,error:function Ce(Ae){throw Ae},complete:ne.Z}},727:(ct,Se,P)=>{P.d(Se,{Lc:()=>me,w0:()=>ne,Nn:()=>te});var u=P(576);const F=(0,P(3888).d)(ue=>function(z){ue(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((ee,ze)=>`${ze+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var le=P(8737);class ne{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Me of z)Me.remove(this);else z.remove(this);const{initialTeardown:ee}=this;if((0,u.m)(ee))try{ee()}catch(Me){$=Me instanceof F?Me.errors:[Me]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Me of ze)try{fe(Me)}catch(Oe){$=null!=$?$:[],Oe instanceof F?$=[...$,...Oe.errors]:$.push(Oe)}}if($)throw new F($)}}add($){var z;if($&&$!==this)if(this.closed)fe($);else{if($ instanceof ne){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push($)}}_hasParent($){const{_parentage:z}=this;return z===$||Array.isArray(z)&&z.includes($)}_addParent($){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push($),z):z?[z,$]:$}_removeParent($){const{_parentage:z}=this;z===$?this._parentage=null:Array.isArray(z)&&(0,le.P)(z,$)}remove($){const{_finalizers:z}=this;z&&(0,le.P)(z,$),$ instanceof ne&&$._removeParent(this)}}ne.EMPTY=(()=>{const ue=new ne;return ue.closed=!0,ue})();const me=ne.EMPTY;function te(ue){return ue instanceof ne||ue&&"closed"in ue&&(0,u.m)(ue.remove)&&(0,u.m)(ue.add)&&(0,u.m)(ue.unsubscribe)}function fe(ue){(0,u.m)(ue)?ue():ue.unsubscribe()}},2416:(ct,Se,P)=>{P.d(Se,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ct,Se,P)=>{P.d(Se,{E:()=>X});const X=new(P(8306).y)(ne=>ne.complete())},8996:(ct,Se,P)=>{P.d(Se,{D:()=>be});var u=P(8421),X=P(5363),F=P(9468),me=P(8306),fe=P(2202),ue=P(576),$=P(9672);function ee(Ee,je){if(!Ee)throw new Error("Iterable cannot be null");return new me.y(Ue=>{(0,$.f)(Ue,je,()=>{const se=Ee[Symbol.asyncIterator]();(0,$.f)(Ue,je,()=>{se.next().then(Y=>{Y.done?Ue.complete():Ue.next(Y.value)})},0,!0)})})}var ze=P(3670),Me=P(8239),Oe=P(1144),Ve=P(6495),ge=P(2206),Ce=P(4532),it=P(3260);function be(Ee,je){return je?function Ae(Ee,je){if(null!=Ee){if((0,ze.c)(Ee))return function le(Ee,je){return(0,u.Xf)(Ee).pipe((0,F.R)(je),(0,X.Q)(je))}(Ee,je);if((0,Oe.z)(Ee))return function te(Ee,je){return new me.y(Ue=>{let se=0;return je.schedule(function(){se===Ee.length?Ue.complete():(Ue.next(Ee[se++]),Ue.closed||this.schedule())})})}(Ee,je);if((0,Me.t)(Ee))return function ne(Ee,je){return(0,u.Xf)(Ee).pipe((0,F.R)(je),(0,X.Q)(je))}(Ee,je);if((0,ge.D)(Ee))return ee(Ee,je);if((0,Ve.T)(Ee))return function z(Ee,je){return new me.y(Ue=>{let se;return(0,$.f)(Ue,je,()=>{se=Ee[fe.h](),(0,$.f)(Ue,je,()=>{let Y,oe;try{({value:Y,done:oe}=se.next())}catch(_e){return void Ue.error(_e)}oe?Ue.complete():Ue.next(Y)},0,!0)}),()=>(0,ue.m)(null==se?void 0:se.return)&&se.return()})}(Ee,je);if((0,it.L)(Ee))return function We(Ee,je){return ee((0,it.Q)(Ee),je)}(Ee,je)}throw(0,Ce.z)(Ee)}(Ee,je):(0,u.Xf)(Ee)}},8421:(ct,Se,P)=>{P.d(Se,{Xf:()=>ze});var u=P(655),X=P(1144),F=P(8239),le=P(8306),ne=P(3670),me=P(2206),te=P(4532),fe=P(6495),ue=P(3260),$=P(576),z=P(7849),ee=P(8822);function ze(Ae){if(Ae instanceof le.y)return Ae;if(null!=Ae){if((0,ne.c)(Ae))return function Me(Ae){return new le.y(be=>{const Ee=Ae[ee.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,X.z)(Ae))return function Oe(Ae){return new le.y(be=>{for(let Ee=0;Ee<Ae.length&&!be.closed;Ee++)be.next(Ae[Ee]);be.complete()})}(Ae);if((0,F.t)(Ae))return function Ve(Ae){return new le.y(be=>{Ae.then(Ee=>{be.closed||(be.next(Ee),be.complete())},Ee=>be.error(Ee)).then(null,z.h)})}(Ae);if((0,me.D)(Ae))return Ce(Ae);if((0,fe.T)(Ae))return function ge(Ae){return new le.y(be=>{for(const Ee of Ae)if(be.next(Ee),be.closed)return;be.complete()})}(Ae);if((0,ue.L)(Ae))return function it(Ae){return Ce((0,ue.Q)(Ae))}(Ae)}throw(0,te.z)(Ae)}function Ce(Ae){return new le.y(be=>{(function We(Ae,be){var Ee,je,Ue,se;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,u.KL)(Ae);!(je=yield Ee.next()).done;)if(be.next(je.value),be.closed)return}catch(Y){Ue={error:Y}}finally{try{je&&!je.done&&(se=Ee.return)&&(yield se.call(Ee))}finally{if(Ue)throw Ue.error}}be.complete()})})(Ae,be).catch(Ee=>be.error(Ee))})}},6451:(ct,Se,P)=>{P.d(Se,{T:()=>me});var u=P(8189),X=P(8421),F=P(515),le=P(3269),ne=P(8996);function me(...te){const fe=(0,le.yG)(te),ue=(0,le._6)(te,1/0),$=te;return $.length?1===$.length?(0,X.Xf)($[0]):(0,u.J)(ue)((0,ne.D)($,fe)):F.E}},5403:(ct,Se,P)=>{P.d(Se,{x:()=>X});var u=P(930);function X(le,ne,me,te,fe){return new F(le,ne,me,te,fe)}class F extends u.Lv{constructor(ne,me,te,fe,ue,$){super(ne),this.onFinalize=ue,this.shouldUnsubscribe=$,this._next=me?function(z){try{me(z)}catch(ee){ne.error(ee)}}:super._next,this._error=fe?function(z){try{fe(z)}catch(ee){ne.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=te?function(){try{te()}catch(z){ne.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(ct,Se,P)=>{P.d(Se,{U:()=>F});var u=P(4482),X=P(5403);function F(le,ne){return(0,u.e)((me,te)=>{let fe=0;me.subscribe((0,X.x)(te,ue=>{te.next(le.call(ne,ue,fe++))}))})}},8189:(ct,Se,P)=>{P.d(Se,{J:()=>F});var u=P(5577),X=P(4671);function F(le=1/0){return(0,u.z)(X.y,le)}},5577:(ct,Se,P)=>{P.d(Se,{z:()=>fe});var u=P(4004),X=P(8421),F=P(4482),le=P(9672),ne=P(5403),te=P(576);function fe(ue,$,z=1/0){return(0,te.m)($)?fe((ee,ze)=>(0,u.U)((Me,Oe)=>$(ee,Me,ze,Oe))((0,X.Xf)(ue(ee,ze))),z):("number"==typeof $&&(z=$),(0,F.e)((ee,ze)=>function me(ue,$,z,ee,ze,Me,Oe,Ve){const ge=[];let Ce=0,it=0,We=!1;const Ae=()=>{We&&!ge.length&&!Ce&&$.complete()},be=je=>Ce<ee?Ee(je):ge.push(je),Ee=je=>{Me&&$.next(je),Ce++;let Ue=!1;(0,X.Xf)(z(je,it++)).subscribe((0,ne.x)($,se=>{null==ze||ze(se),Me?be(se):$.next(se)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(Ce--;ge.length&&Ce<ee;){const se=ge.shift();Oe?(0,le.f)($,Oe,()=>Ee(se)):Ee(se)}Ae()}catch(se){$.error(se)}}))};return ue.subscribe((0,ne.x)($,be,()=>{We=!0,Ae()})),()=>{null==Ve||Ve()}}(ee,ze,ue,z)))}},5363:(ct,Se,P)=>{P.d(Se,{Q:()=>le});var u=P(9672),X=P(4482),F=P(5403);function le(ne,me=0){return(0,X.e)((te,fe)=>{te.subscribe((0,F.x)(fe,ue=>(0,u.f)(fe,ne,()=>fe.next(ue),me),()=>(0,u.f)(fe,ne,()=>fe.complete(),me),ue=>(0,u.f)(fe,ne,()=>fe.error(ue),me)))})}},3099:(ct,Se,P)=>{P.d(Se,{B:()=>me});var u=P(8996),X=P(5698),F=P(7579),le=P(930),ne=P(4482);function me(fe={}){const{connector:ue=(()=>new F.x),resetOnError:$=!0,resetOnComplete:z=!0,resetOnRefCountZero:ee=!0}=fe;return ze=>{let Me=null,Oe=null,Ve=null,ge=0,Ce=!1,it=!1;const We=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Ae=()=>{We(),Me=Ve=null,Ce=it=!1},be=()=>{const Ee=Me;Ae(),null==Ee||Ee.unsubscribe()};return(0,ne.e)((Ee,je)=>{ge++,!it&&!Ce&&We();const Ue=Ve=null!=Ve?Ve:ue();je.add(()=>{ge--,0===ge&&!it&&!Ce&&(Oe=te(be,ee))}),Ue.subscribe(je),Me||(Me=new le.Hp({next:se=>Ue.next(se),error:se=>{it=!0,We(),Oe=te(Ae,$,se),Ue.error(se)},complete:()=>{Ce=!0,We(),Oe=te(Ae,z),Ue.complete()}}),(0,u.D)(Ee).subscribe(Me))})(ze)}}function te(fe,ue,...$){return!0===ue?(fe(),null):!1===ue?null:ue(...$).pipe((0,X.q)(1)).subscribe(()=>fe())}},9468:(ct,Se,P)=>{P.d(Se,{R:()=>X});var u=P(4482);function X(F,le=0){return(0,u.e)((ne,me)=>{me.add(F.schedule(()=>ne.subscribe(me),le))})}},5698:(ct,Se,P)=>{P.d(Se,{q:()=>le});var u=P(515),X=P(4482),F=P(5403);function le(ne){return ne<=0?()=>u.E:(0,X.e)((me,te)=>{let fe=0;me.subscribe((0,F.x)(te,ue=>{++fe<=ne&&(te.next(ue),ne<=fe&&te.complete())}))})}},8505:(ct,Se,P)=>{P.d(Se,{b:()=>ne});var u=P(576),X=P(4482),F=P(5403),le=P(4671);function ne(me,te,fe){const ue=(0,u.m)(me)||te||fe?{next:me,error:te,complete:fe}:me;return ue?(0,X.e)(($,z)=>{var ee;null===(ee=ue.subscribe)||void 0===ee||ee.call(ue);let ze=!0;$.subscribe((0,F.x)(z,Me=>{var Oe;null===(Oe=ue.next)||void 0===Oe||Oe.call(ue,Me),z.next(Me)},()=>{var Me;ze=!1,null===(Me=ue.complete)||void 0===Me||Me.call(ue),z.complete()},Me=>{var Oe;ze=!1,null===(Oe=ue.error)||void 0===Oe||Oe.call(ue,Me),z.error(Me)},()=>{var Me,Oe;ze&&(null===(Me=ue.unsubscribe)||void 0===Me||Me.call(ue)),null===(Oe=ue.finalize)||void 0===Oe||Oe.call(ue)}))}):le.y}},4408:(ct,Se,P)=>{P.d(Se,{o:()=>ne});var u=P(727);class X extends u.w0{constructor(te,fe){super()}schedule(te,fe=0){return this}}const F={setInterval(me,te,...fe){const{delegate:ue}=F;return(null==ue?void 0:ue.setInterval)?ue.setInterval(me,te,...fe):setInterval(me,te,...fe)},clearInterval(me){const{delegate:te}=F;return((null==te?void 0:te.clearInterval)||clearInterval)(me)},delegate:void 0};var le=P(8737);class ne extends X{constructor(te,fe){super(te,fe),this.scheduler=te,this.work=fe,this.pending=!1}schedule(te,fe=0){if(this.closed)return this;this.state=te;const ue=this.id,$=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId($,ue,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId($,this.id,fe),this}requestAsyncId(te,fe,ue=0){return F.setInterval(te.flush.bind(te,this),ue)}recycleAsyncId(te,fe,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return fe;F.clearInterval(fe)}execute(te,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(te,fe);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(te,fe){let $,ue=!1;try{this.work(te)}catch(z){ue=!0,$=z||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:te,scheduler:fe}=this,{actions:ue}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(ue,this),null!=te&&(this.id=this.recycleAsyncId(fe,te,null)),this.delay=null,super.unsubscribe()}}}},7565:(ct,Se,P)=>{P.d(Se,{v:()=>F});var u=P(6063);class X{constructor(ne,me=X.now){this.schedulerActionCtor=ne,this.now=me}schedule(ne,me=0,te){return new this.schedulerActionCtor(this,ne).schedule(te,me)}}X.now=u.l.now;class F extends X{constructor(ne,me=X.now){super(ne,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:me}=this;if(this._active)return void me.push(ne);let te;this._active=!0;do{if(te=ne.execute(ne.state,ne.delay))break}while(ne=me.shift());if(this._active=!1,te){for(;ne=me.shift();)ne.unsubscribe();throw te}}}},4986:(ct,Se,P)=>{P.d(Se,{P:()=>le,z:()=>F});var u=P(4408);const F=new(P(7565).v)(u.o),le=F},6063:(ct,Se,P)=>{P.d(Se,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ct,Se,P)=>{P.d(Se,{z:()=>u});const u={setTimeout(X,F,...le){const{delegate:ne}=u;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(X,F,...le):setTimeout(X,F,...le)},clearTimeout(X){const{delegate:F}=u;return((null==F?void 0:F.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(ct,Se,P)=>{P.d(Se,{h:()=>X});const X=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ct,Se,P)=>{P.d(Se,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ct,Se,P)=>{P.d(Se,{_6:()=>me,jO:()=>le,yG:()=>ne});var u=P(576),X=P(3532);function F(te){return te[te.length-1]}function le(te){return(0,u.m)(F(te))?te.pop():void 0}function ne(te){return(0,X.K)(F(te))?te.pop():void 0}function me(te,fe){return"number"==typeof F(te)?te.pop():fe}},8737:(ct,Se,P)=>{function u(X,F){if(X){const le=X.indexOf(F);0<=le&&X.splice(le,1)}}P.d(Se,{P:()=>u})},3888:(ct,Se,P)=>{function u(X){const le=X(ne=>{Error.call(ne),ne.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}P.d(Se,{d:()=>u})},2806:(ct,Se,P)=>{P.d(Se,{O:()=>le,x:()=>F});var u=P(2416);let X=null;function F(ne){if(u.v.useDeprecatedSynchronousErrorHandling){const me=!X;if(me&&(X={errorThrown:!1,error:null}),ne(),me){const{errorThrown:te,error:fe}=X;if(X=null,te)throw fe}}else ne()}function le(ne){u.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ne)}},9672:(ct,Se,P)=>{function u(X,F,le,ne=0,me=!1){const te=F.schedule(function(){le(),me?X.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(X.add(te),!me)return te}P.d(Se,{f:()=>u})},4671:(ct,Se,P)=>{function u(X){return X}P.d(Se,{y:()=>u})},1144:(ct,Se,P)=>{P.d(Se,{z:()=>u});const u=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(ct,Se,P)=>{P.d(Se,{D:()=>X});var u=P(576);function X(F){return Symbol.asyncIterator&&(0,u.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(ct,Se,P)=>{function u(X){return"function"==typeof X}P.d(Se,{m:()=>u})},3670:(ct,Se,P)=>{P.d(Se,{c:()=>F});var u=P(8822),X=P(576);function F(le){return(0,X.m)(le[u.L])}},6495:(ct,Se,P)=>{P.d(Se,{T:()=>F});var u=P(2202),X=P(576);function F(le){return(0,X.m)(null==le?void 0:le[u.h])}},8239:(ct,Se,P)=>{P.d(Se,{t:()=>X});var u=P(576);function X(F){return(0,u.m)(null==F?void 0:F.then)}},3260:(ct,Se,P)=>{P.d(Se,{L:()=>le,Q:()=>F});var u=P(655),X=P(576);function F(ne){return(0,u.FC)(this,arguments,function*(){const te=ne.getReader();try{for(;;){const{value:fe,done:ue}=yield(0,u.qq)(te.read());if(ue)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(fe)}}finally{te.releaseLock()}})}function le(ne){return(0,X.m)(null==ne?void 0:ne.getReader)}},3532:(ct,Se,P)=>{P.d(Se,{K:()=>X});var u=P(576);function X(F){return F&&(0,u.m)(F.schedule)}},4482:(ct,Se,P)=>{P.d(Se,{e:()=>F});var u=P(576);function F(le){return ne=>{if(function X(le){return(0,u.m)(null==le?void 0:le.lift)}(ne))return ne.lift(function(me){try{return le(me,this)}catch(te){this.error(te)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ct,Se,P)=>{function u(){}P.d(Se,{Z:()=>u})},7849:(ct,Se,P)=>{P.d(Se,{h:()=>F});var u=P(2416),X=P(3410);function F(le){X.z.setTimeout(()=>{const{onUnhandledError:ne}=u.v;if(!ne)throw le;ne(le)})}},4532:(ct,Se,P)=>{function u(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Se,{z:()=>u})},655:(ct,Se,P)=>{function le(Y,oe){var _e={};for(var ae in Y)Object.prototype.hasOwnProperty.call(Y,ae)&&oe.indexOf(ae)<0&&(_e[ae]=Y[ae]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(ae=Object.getOwnPropertySymbols(Y);Re<ae.length;Re++)oe.indexOf(ae[Re])<0&&Object.prototype.propertyIsEnumerable.call(Y,ae[Re])&&(_e[ae[Re]]=Y[ae[Re]])}return _e}function fe(Y,oe,_e,ae){return new(_e||(_e=Promise))(function(ce,Ct){function en(_t){try{ut(ae.next(_t))}catch(gn){Ct(gn)}}function zn(_t){try{ut(ae.throw(_t))}catch(gn){Ct(gn)}}function ut(_t){_t.done?ce(_t.value):function Re(ce){return ce instanceof _e?ce:new _e(function(Ct){Ct(ce)})}(_t.value).then(en,zn)}ut((ae=ae.apply(Y,oe||[])).next())})}function ge(Y){return this instanceof ge?(this.v=Y,this):new ge(Y)}function Ce(Y,oe,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,ae=_e.apply(Y,oe||[]),ce=[];return Re={},Ct("next"),Ct("throw"),Ct("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function Ct(_n){ae[_n]&&(Re[_n]=function(Ur){return new Promise(function(on,as){ce.push([_n,Ur,on,as])>1||en(_n,Ur)})})}function en(_n,Ur){try{!function zn(_n){_n.value instanceof ge?Promise.resolve(_n.value.v).then(ut,_t):gn(ce[0][2],_n)}(ae[_n](Ur))}catch(on){gn(ce[0][3],on)}}function ut(_n){en("next",_n)}function _t(_n){en("throw",_n)}function gn(_n,Ur){_n(Ur),ce.shift(),ce.length&&en(ce[0][0],ce[0][1])}}function We(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,oe=Y[Symbol.asyncIterator];return oe?oe.call(Y):(Y=function ee(Y){var oe="function"==typeof Symbol&&Symbol.iterator,_e=oe&&Y[oe],ae=0;if(_e)return _e.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ae>=Y.length&&(Y=void 0),{value:Y&&Y[ae++],done:!Y}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),_e={},ae("next"),ae("throw"),ae("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function ae(ce){_e[ce]=Y[ce]&&function(Ct){return new Promise(function(en,zn){!function Re(ce,Ct,en,zn){Promise.resolve(zn).then(function(ut){ce({value:ut,done:en})},Ct)}(en,zn,(Ct=Y[ce](Ct)).done,Ct.value)})}}}P.d(Se,{FC:()=>Ce,KL:()=>We,_T:()=>le,mG:()=>fe,qq:()=>ge})},5e3:(ct,Se,P)=>{P.d(Se,{$8M:()=>ol,$Z:()=>p_,AFp:()=>vr,ALo:()=>CM,AaK:()=>fe,BQk:()=>Ec,CHM:()=>Kc,CRH:()=>tb,CZH:()=>gb,CqO:()=>xh,DdM:()=>_M,EJc:()=>vb,EiD:()=>Du,EpF:()=>cw,F$t:()=>mC,F4k:()=>Mh,FYo:()=>ED,FiY:()=>Yi,G48:()=>pI,Gf:()=>UD,GfV:()=>Lw,GkF:()=>lw,Gpc:()=>z,Gre:()=>bw,Hsn:()=>dw,Ikx:()=>Ew,JOm:()=>ie,JVY:()=>av,L6k:()=>Kd,LAX:()=>ug,LFG:()=>ot,Lbi:()=>OM,MAs:()=>Cl,NdJ:()=>uw,O4$:()=>kd,OlP:()=>Hn,Oqu:()=>ww,Q6J:()=>ow,QGY:()=>Mp,Qsj:()=>F_,R0b:()=>Qs,RDi:()=>xs,Rgc:()=>Xu,SBq:()=>Ku,Suo:()=>jD,TTD:()=>jo,TgZ:()=>Ah,Udp:()=>y_,VLi:()=>HM,W1O:()=>WD,X6Q:()=>em,Xpm:()=>Ft,Y36:()=>Dl,YNc:()=>o_,Yjl:()=>xi,Yz7:()=>on,ZZ4:()=>Wh,_Bn:()=>N_,_UZ:()=>m_,_Vd:()=>Lh,_c5:()=>sm,_uU:()=>AC,aQg:()=>Pn,cJS:()=>tn,cg1:()=>Dw,dDg:()=>dI,dqk:()=>qt,eBb:()=>cg,eFA:()=>Gh,ekj:()=>v_,f3M:()=>Wt,g9A:()=>aI,h0i:()=>Zu,hGG:()=>JM,hij:()=>Rh,iGM:()=>eb,ifc:()=>$t,ip1:()=>oI,kL8:()=>YC,kcU:()=>tv,lG2:()=>Xt,lcZ:()=>kD,mCW:()=>ml,n5z:()=>fu,n_E:()=>j_,oAB:()=>J,oxw:()=>Ws,pB0:()=>Vf,q3G:()=>Qn,q4F:()=>CD,qLn:()=>Mn,qOj:()=>qv,qZA:()=>ju,qzn:()=>sc,sBO:()=>J_,sIi:()=>Dp,s_b:()=>Bh,soG:()=>Zp,tp0:()=>Wr,uIk:()=>vh,vHH:()=>Oe,vpe:()=>Il,wAp:()=>wt,xp6:()=>vE,yhl:()=>Wd,ynx:()=>$s,z2F:()=>xb,z3N:()=>ms,zSh:()=>Lu,zs3:()=>aa});var u=P(7579),X=P(727),F=P(8306),le=P(6451),ne=P(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function te(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ue(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=me({__forward_ref__:me});function z(s){return s.__forward_ref__=z,s.toString=function(){return fe(this())},s}function ee(s){return ze(s)?s():s}function ze(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===z}class Oe extends Error{constructor(o,l){super(function Ve(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}function be(s,o){const l=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${Ce(s)} found${l}`)}function ut(s,o){null==s&&function _t(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function on(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function tn(s){return{providers:s.providers||[],imports:s.imports||[]}}function zt(s){return _i(s,ls)||_i(s,Cs)}function _i(s,o){return s.hasOwnProperty(o)?s[o]:null}function ji(s){return s&&(s.hasOwnProperty(Gi)||s.hasOwnProperty(cs))?s[Gi]:null}const ls=me({\u0275prov:me}),Gi=me({\u0275inj:me}),Cs=me({ngInjectableDef:me}),cs=me({ngInjectorDef:me});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let ir;function ni(s){const o=ir;return ir=s,o}function Er(s,o,l){const d=zt(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&ht.Optional?null:void 0!==o?o:void be(fe(s),"Injector")}function En(s){return{toString:s}.toString()}var fi=(()=>((fi=fi||{})[fi.OnPush=0]="OnPush",fi[fi.Default=1]="Default",fi))(),$t=(()=>{return(s=$t||($t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",$t;var s})();const st="undefined"!=typeof globalThis&&globalThis,bt="undefined"!=typeof window&&window,yi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,qt=st||"undefined"!=typeof global&&global||bt||yi,vi={},ft=[],Mi=me({\u0275cmp:me}),Vt=me({\u0275dir:me}),Ke=me({\u0275pipe:me}),Te=me({\u0275mod:me}),Je=me({\u0275fac:me}),pt=me({__NG_ELEMENT_ID__:me});let Ht=0;function Ft(s){return En(()=>{const l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===fi.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ft,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||$t.Emulated,id:"c",styles:s.styles||ft,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.directives,g=s.features,w=s.pipes;return d.id+=Ht++,d.inputs=yt(s.inputs,l),d.outputs=yt(s.outputs),g&&g.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(U):null,d.pipeDefs=w?()=>("function"==typeof w?w():w).map(q):null,d})}function U(s){return Yt(s)||function Vn(s){return s[Vt]||null}(s)}function q(s){return function Rt(s){return s[Ke]||null}(s)}const de={};function J(s){return En(()=>{const o={type:s.type,bootstrap:s.bootstrap||ft,declarations:s.declarations||ft,imports:s.imports||ft,exports:s.exports||ft,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(de[s.id]=s.type),o})}function yt(s,o){if(null==s)return vi;const l={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=d,o&&(o[f]=g)}return l}const Xt=Ft;function xi(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Yt(s){return s[Mi]||null}function vn(s,o){const l=s[Te]||null;if(!l&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return l}function zi(s){return Array.isArray(s)&&"object"==typeof s[1]}function ki(s){return Array.isArray(s)&&!0===s[1]}function Bc(s){return 0!=(8&s.flags)}function lo(s){return 2==(2&s.flags)}function Pl(s){return 1==(1&s.flags)}function rr(s){return null!==s.template}function vf(s){return 0!=(512&s[2])}function sr(s,o){return s.hasOwnProperty(Je)?s[Je]:null}class Da{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function jo(){return Xa}function Xa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Qm),Cd}function Cd(){const s=ho(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===vi)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Qm(s,o,l,d){const f=ho(s)||function Dr(s,o){return s[$i]=o}(s,{previous:vi,current:null}),g=f.current||(f.current={}),w=f.previous,E=this.declaredInputs[l],D=w[E];g[E]=new Da(D&&D.currentValue,o,w===vi),s[d]=o}jo.ngInherit=!0;const $i="__ngSimpleChanges__";function ho(s){return s[$i]||null}let zc;function xs(s){zc=s}function Cn(s){return!!s.listen}const Ia={createRenderer:(s,o)=>function Ja(){return void 0!==zc?zc:"undefined"!=typeof document?document:void 0}()};function dn(s){for(;Array.isArray(s);)s=s[0];return s}function zo(s,o){return dn(o[s])}function Ri(s,o){return dn(o[s.index])}function el(s,o){return s.data[o]}function jr(s,o){return s[o]}function Oi(s,o){const l=o[s];return zi(l)?l:l[0]}function po(s){return 4==(4&s[2])}function ks(s){return 128==(128&s[2])}function or(s,o){return null==o?null:s[o]}function mo(s){s[18]=0}function go(s,o){s[5]+=o;let l=s,d=s[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const mt={lFrame:qo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $l(){return mt.bindingsEnabled}function De(){return mt.lFrame.lView}function Lt(){return mt.lFrame.tView}function Kc(s){return mt.lFrame.contextLView=s,s[8]}function In(){let s=Sa();for(;null!==s&&64===s.type;)s=s.parent;return s}function Sa(){return mt.lFrame.currentTNode}function ar(s,o){const l=mt.lFrame;l.currentTNode=s,l.isParent=o}function Yc(){return mt.lFrame.isParent}function Zc(){mt.lFrame.isParent=!1}function ql(){return mt.isInCheckNoChangesMode}function _o(s){mt.isInCheckNoChangesMode=s}function Di(){const s=mt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function yo(){return mt.lFrame.bindingIndex++}function Gr(s){const o=mt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function Yl(s,o){const l=mt.lFrame;l.bindingIndex=l.bindingRootIndex=s,nl(o)}function nl(s){mt.lFrame.currentDirectiveIndex=s}function eu(){return mt.lFrame.currentQueryIndex}function tu(s){mt.lFrame.currentQueryIndex=s}function Td(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function nu(s,o,l){if(l&ht.SkipSelf){let f=o,g=s;for(;!(f=f.parent,null!==f||l&ht.Host||(f=Td(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;o=f,s=g}const d=mt.lFrame=Ad();return d.currentTNode=o,d.lView=s,!0}function $o(s){const o=Ad(),l=s[1];mt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Ad(){const s=mt.lFrame,o=null===s?null:s.child;return null===o?qo(s):o}function qo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Md(){const s=mt.lFrame;return mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const xd=Md;function Wo(){const s=Md();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Ni(){return mt.lFrame.selectedIndex}function wo(s){mt.lFrame.selectedIndex=s}function Bn(){const s=mt.lFrame;return el(s.tView,s.selectedIndex)}function kd(){mt.lFrame.currentNamespace="svg"}function tv(){!function ru(){mt.lFrame.currentNamespace=null}()}function Rs(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:M,ngOnDestroy:k}=g;w&&(s.contentHooks||(s.contentHooks=[])).push(-l,w),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),D&&(s.viewHooks||(s.viewHooks=[])).push(-l,D),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=k&&(s.destroyHooks||(s.destroyHooks=[])).push(l,k)}}function il(s,o,l){Rd(s,o,3,l)}function Zl(s,o,l,d){(3&s[2])===l&&Rd(s,o,l,d)}function Zn(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Rd(s,o,l,d){const g=null!=d?d:-1,w=o.length-1;let E=0;for(let D=void 0!==d?65535&s[18]:0;D<w;D++)if("number"==typeof o[D+1]){if(E=o[D],null!=d&&E>=d)break}else o[D]<0&&(s[18]+=65536),(E<g||-1==g)&&(Xm(s,l,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Xm(s,o,l,d){const f=l[d]<0,g=l[d+1],E=s[f?-l[d]:l[d]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Ma{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function lu(s,o,l){const d=Cn(s);let f=0;for(;f<l.length;){const g=l[f];if("number"==typeof g){if(0!==g)break;f++;const w=l[f++],E=l[f++],D=l[f++];d?s.setAttribute(o,E,D,w):o.setAttributeNS(w,E,D)}else{const w=g,E=l[++f];cu(w)?d&&s.setProperty(o,w,E):d?s.setAttribute(o,w,E):o.setAttribute(w,E),f++}}return f}function Ns(s){return 3===s||4===s||6===s}function cu(s){return 64===s.charCodeAt(0)}function rl(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const f=o[d];"number"==typeof f?l=f:0===l||Ko(s,l,f,null,-1===l||2===l?o[++d]:null)}}return s}function Ko(s,o,l,d,f){let g=0,w=s.length;if(-1===o)w=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){w=-1;break}if(E>o){w=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===l){if(null===d)return void(null!==f&&(s[g+1]=f));if(d===s[g+1])return void(s[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==w&&(s.splice(w,0,o),g=w+1),s.splice(g++,0,l),null!==d&&s.splice(g++,0,d),null!==f&&s.splice(g++,0,f)}function Pd(s){return-1!==s}function Qt(s){return 32767&s}function hn(s,o){let l=function Yo(s){return s>>16}(s),d=o;for(;l>0;)d=d[15],l--;return d}let Mt=!0;function bo(s){const o=Mt;return Mt=s,o}let Fd=0;function Sr(s,o){const l=xa(s,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,ri(d.data,s),ri(o,null),ri(d.blueprint,null));const f=lr(s,o),g=s.injectorIndex;if(Pd(f)){const w=Qt(f),E=hn(f,o),D=E[1].data;for(let M=0;M<8;M++)o[g+M]=E[w+M]|D[w+M]}return o[g+8]=f,g}function ri(s,o){s.push(0,0,0,0,0,0,0,0,o)}function xa(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function lr(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,f=o;for(;null!==f;){const g=f[1],w=g.type;if(d=2===w?g.declTNode:1===w?f[6]:null,null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Qo(s,o,l){!function Zo(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(pt)&&(d=l[pt]),null==d&&(d=l[pt]=Fd++);const f=255&d;o.data[s+(f>>5)]|=1<<f}(s,o,l)}function Xo(s,o,l){if(l&ht.Optional)return s;be(o,"NodeInjector")}function ka(s,o,l,d){if(l&ht.Optional&&void 0===d&&(d=null),0==(l&(ht.Self|ht.Host))){const f=s[9],g=ni(void 0);try{return f?f.get(o,d,l&ht.Optional):Er(o,d,l&ht.Optional)}finally{ni(g)}}return Xo(d,o,l)}function Tr(s,o,l,d=ht.Default,f){if(null!==s){const g=function Ld(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(pt)?s[pt]:void 0;return"number"==typeof o?o>=0?255&o:si:o}(l);if("function"==typeof g){if(!nu(o,s,d))return d&ht.Host?Xo(f,l,d):ka(o,l,d,f);try{const w=g(d);if(null!=w||d&ht.Optional)return w;be(l)}finally{xd()}}else if("number"==typeof g){let w=null,E=xa(s,o),D=-1,M=d&ht.Host?o[16][6]:null;for((-1===E||d&ht.SkipSelf)&&(D=-1===E?lr(s,o):o[E+8],-1!==D&&hu(d,!1)?(w=o[1],E=Qt(D),o=hn(D,o)):E=-1);-1!==E;){const k=o[1];if(sl(g,E,k.data)){const L=Jo(E,o,l,w,d,M);if(L!==Eo)return L}D=o[E+8],-1!==D&&hu(d,o[1].data[E+8]===M)&&sl(g,E,o)?(w=k,E=Qt(D),o=hn(D,o)):E=-1}}}return ka(o,l,d,f)}const Eo={};function si(){return new $r(In(),De())}function Jo(s,o,l,d,f,g){const w=o[1],E=w.data[s+8],k=du(E,w,l,null==d?lo(E)&&Mt:d!=w&&0!=(3&E.type),f&ht.Host&&g===E);return null!==k?zr(o,w,k,E):Eo}function du(s,o,l,d,f){const g=s.providerIndexes,w=o.data,E=1048575&g,D=s.directiveStart,k=g>>20,j=f?E+k:s.directiveEnd;for(let Q=d?E:E+k;Q<j;Q++){const we=w[Q];if(Q<D&&l===we||Q>=D&&we.type===l)return Q}if(f){const Q=w[D];if(Q&&rr(Q)&&Q.type===l)return D}return null}function zr(s,o,l,d){let f=s[l];const g=o.data;if(function Od(s){return s instanceof Ma}(f)){const w=f;w.resolving&&function it(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${l}`)}(Ce(g[l]));const E=bo(w.canSeeViewProviders);w.resolving=!0;const D=w.injectImpl?ni(w.injectImpl):null;nu(s,d,ht.Default);try{f=s[l]=w.factory(void 0,g,s,d),o.firstCreatePass&&l>=d.directiveStart&&function su(s,o,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=o.type.prototype;if(d){const w=Xa(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,w),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,w)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],o)}finally{null!==D&&ni(D),bo(E),w.resolving=!1,xd()}}return f}function sl(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function hu(s,o){return!(s&ht.Self||s&ht.Host&&o)}class $r{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return Tr(this._tNode,this._lView,o,d,l)}}function fu(s){return En(()=>{const o=s.prototype.constructor,l=o[Je]||ea(o),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const g=f[Je]||ea(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function ea(s){return ze(s)?()=>{const o=ea(ee(s));return o&&o()}:sr(s)}function ol(s){return function uu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const g=l[f];if(Ns(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(g===o)return l[f+1];f+=2}}}return null}(In(),s)}const Fs="__parameters__";function ta(s,o,l){return En(()=>{const d=function Jl(s){return function(...l){if(s){const d=s(...l);for(const f in d)this[f]=d[f]}}}(o);function f(...g){if(this instanceof f)return d.apply(this,g),this;const w=new f(...g);return E.annotation=w,E;function E(D,M,k){const L=D.hasOwnProperty(Fs)?D[Fs]:Object.defineProperty(D,Fs,{value:[]})[Fs];for(;L.length<=k;)L.push(null);return(L[k]=L[k]||[]).push(w),D}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Hn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=on({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Ki(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(o===s&&(o=s.slice(0,l)),Ki(d,o)):o!==s&&o.push(d)}return o}function qr(s,o){s.forEach(l=>Array.isArray(l)?qr(l,o):o(l))}function mu(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Ls(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function cr(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}function Mr(s,o,l){let d=cl(s,o);return d>=0?s[1|d]=l:(d=~d,function ll(s,o,l,d){let f=s.length;if(f==o)s.push(l,d);else if(1===f)s.push(d,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>o;)s[f]=s[f-2],f--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function Tf(s,o){const l=cl(s,o);if(l>=0)return s[1|l]}function cl(s,o){return function na(s,o,l){let d=0,f=s.length>>l;for(;f!==d;){const g=d+(f-d>>1),w=s[g<<l];if(o===w)return g<<l;w>o?f=g:d=g+1}return~(f<<l)}(s,o,1)}const Bs={},Co="__NG_DI_FLAG__",yu="ngTempTokenPath",T=/\n/gm,H="__source",Z=me({provide:String,useValue:me});let re;function ke(s){const o=re;return re=s,o}function Ye(s,o=ht.Default){if(void 0===re)throw new Oe(203,"");return null===re?Er(s,void 0,o):re.get(s,o&ht.Optional?null:void 0,o)}function ot(s,o=ht.Default){return(function hi(){return ir}()||Ye)(ee(s),o)}const Wt=ot;function Dt(s){const o=[];for(let l=0;l<s.length;l++){const d=ee(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Oe(900,"");let f,g=ht.Default;for(let w=0;w<d.length;w++){const E=d[w],D=Rn(E);"number"==typeof D?-1===D?f=E.token:g|=D:f=E}o.push(ot(f,g))}else o.push(ot(d))}return o}function Wn(s,o){return s[Co]=o,s.prototype[Co]=o,s}function Rn(s){return s[Co]}const Yi=Wn(ta("Optional"),8),Wr=Wn(ta("SkipSelf"),4);let Pa;function fl(s){var o;return(null===(o=function Fa(){if(void 0===Pa&&(Pa=null,qt.trustedTypes))try{Pa=qt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Pa}())||void 0===o?void 0:o.createHTML(s))||s}class ia{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class lg extends ia{getTypeName(){return"HTML"}}class ov extends ia{getTypeName(){return"Style"}}class Ff extends ia{getTypeName(){return"Script"}}class Lf extends ia{getTypeName(){return"URL"}}class tE extends ia{getTypeName(){return"ResourceURL"}}function ms(s){return s instanceof ia?s.changingThisBreaksApplicationSecurity:s}function sc(s,o){const l=Wd(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function Wd(s){return s instanceof ia&&s.getTypeName()||null}function av(s){return new lg(s)}function Kd(s){return new ov(s)}function cg(s){return new Ff(s)}function ug(s){return new Lf(s)}function Vf(s){return new tE(s)}class bu{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(fl(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class lv{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=fl(o),l;const d=this.inertDocument.createElement("body");return d.innerHTML=fl(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(o){const l=o.attributes;for(let f=l.length-1;0<f;f--){const w=l.item(f).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&o.removeAttribute(w)}let d=o.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const pl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,pg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ml(s){return(s=String(s)).match(pl)||s.match(pg)?s:"unsafe:"+s}function gs(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function oc(...s){const o={};for(const l of s)for(const d in l)l.hasOwnProperty(d)&&(o[d]=!0);return o}const mg=gs("area,br,col,hr,img,wbr"),ac=gs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gg=gs("rp,rt"),_g=oc(mg,oc(ac,gs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),oc(gg,gs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),oc(gg,ac)),Eu=gs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Uf=gs("srcset"),Cu=oc(Eu,Uf,gs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),gs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),gl=gs("script,style,template");class dv{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!_g.hasOwnProperty(l))return this.sanitizedSomething=!0,!gl.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=o.attributes;for(let f=0;f<d.length;f++){const g=d.item(f),w=g.name,E=w.toLowerCase();if(!Cu.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let D=g.value;Eu[E]&&(D=ml(D)),Uf[E]&&(s=D,D=(s=String(s)).split(",").map(o=>ml(o.trim())).join(", ")),this.buf.push(" ",w,'="',Gf(D),'"')}var s;return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();_g.hasOwnProperty(l)&&!mg.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(Gf(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const Yd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jf=/([^\#-~ |!])/g;function Gf(s){return s.replace(/&/g,"&amp;").replace(Yd,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(jf,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zd;function Du(s,o){let l=null;try{Zd=Zd||function dg(s){const o=new lv(s);return function hg(){try{return!!(new window.DOMParser).parseFromString(fl(""),"text/html")}catch(s){return!1}}()?new bu(o):o}(s);let d=o?String(o):"";l=Zd.getInertBodyElement(d);let f=5,g=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=g,g=l.innerHTML,l=Zd.getInertBodyElement(d)}while(d!==g);return fl((new dv).sanitizeChildren(Iu(l)||l))}finally{if(l){const d=Iu(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Iu(s){return"content"in s&&function yg(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Qn=(()=>((Qn=Qn||{})[Qn.NONE=0]="NONE",Qn[Qn.HTML=1]="HTML",Qn[Qn.STYLE=2]="STYLE",Qn[Qn.SCRIPT=3]="SCRIPT",Qn[Qn.URL=4]="URL",Qn[Qn.RESOURCE_URL=5]="RESOURCE_URL",Qn))();const Eg="__ngContext__";function oi(s,o){s[Eg]=o}function Kr(s){const o=function Tn(s){return s[Eg]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Li(s){return s.ngOriginalError}function Wf(s,...o){s.error(...o)}class Mn{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),d=function oE(s){return s&&s.ngErrorLogger||Wf}(o);d(this._console,"ERROR",o),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Li(o);for(;l&&Li(l);)l=Li(l);return l||null}}const Tg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(qt))();function _(s){return s instanceof Function?s():s}var ie=(()=>((ie=ie||{})[ie.Important=1]="Important",ie[ie.DashCase=2]="DashCase",ie))();function Ze(s,o){return undefined(s,o)}function Un(s){const o=s[3];return ki(o)?o[3]:o}function _s(s){return ra(s[13])}function xr(s){return ra(s[4])}function ra(s){for(;null!==s&&!ki(s);)s=s[4];return s}function ys(s,o,l,d,f){if(null!=d){let g,w=!1;ki(d)?g=d:zi(d)&&(w=!0,d=d[0]);const E=dn(d);0===s&&null!==l?null==f?wv(o,l,E):dc(o,l,E,f||null,!0):1===s&&null!==l?dc(o,l,E,f||null,!0):2===s?function Rg(s,o,l){const d=Jf(s,o);d&&function cE(s,o,l,d){Cn(s)?s.removeChild(o,l,d):o.removeChild(l)}(s,d,o,l)}(o,E,w):3===s&&o.destroyNode(E),null!=g&&function pT(s,o,l,d,f){const g=l[7];g!==dn(l)&&ys(o,s,d,g,f);for(let E=10;E<l.length;E++){const D=l[E];ip(D[1],D,s,o,d,g)}}(o,s,g,l,f)}}function Mu(s,o,l){if(Cn(s))return s.createElement(o,l);{const d=null!==l?function Gc(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===d?s.createElement(o):s.createElementNS(d,o)}}function Qf(s,o){const l=s[9],d=l.indexOf(o),f=o[3];1024&o[2]&&(o[2]&=-1025,go(f,-1)),l.splice(d,1)}function uc(s,o){if(s.length<=10)return;const l=10+o,d=s[l];if(d){const f=d[17];null!==f&&f!==s&&Qf(f,d),o>0&&(s[l-1][4]=d[4]);const g=Ls(s,10+o);!function _v(s,o){ip(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const w=g[19];null!==w&&w.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function lE(s,o){if(!(256&o[2])){const l=o[11];Cn(l)&&l.destroyNode&&ip(s,o,l,3,null,null),function uT(s){let o=s[13];if(!o)return xu(s[1],s);for(;o;){let l=null;if(zi(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==s;)zi(o)&&xu(o[1],o),o=o[3];null===o&&(o=s),zi(o)&&xu(o[1],o),l=o&&o[4]}o=l}}(o)}}function xu(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function hT(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const f=o[l[d]];if(!(f instanceof Ma)){const g=l[d+1];if(Array.isArray(g))for(let w=0;w<g.length;w+=2){const E=f[g[w]],D=g[w+1];try{D.call(E)}finally{}}else try{g.call(f)}finally{}}}}(s,o),function dT(s,o){const l=s.cleanup,d=o[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const w=l[g+1],E="function"==typeof w?w(o):dn(o[w]),D=d[f=l[g+2]],M=l[g+3];"boolean"==typeof M?E.removeEventListener(l[g],D,M):M>=0?d[f=M]():d[f=-M].unsubscribe(),g+=2}else{const w=d[f=l[g+1]];l[g].call(w)}if(null!==d){for(let g=f+1;g<d.length;g++)d[g]();o[7]=null}}(s,o),1===o[1].type&&Cn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&ki(o[3])){l!==o[3]&&Qf(l,o);const d=o[19];null!==d&&d.detachView(s)}}}function nh(s,o,l){return function Xf(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const f=s.data[d.directiveStart].encapsulation;if(f===$t.None||f===$t.Emulated)return null}return Ri(d,l)}(s,o.parent,l)}function dc(s,o,l,d,f){Cn(s)?s.insertBefore(o,l,d,f):o.insertBefore(l,d,f)}function wv(s,o,l){Cn(s)?s.appendChild(o,l):o.appendChild(l)}function bv(s,o,l,d,f){null!==d?dc(s,o,l,d,f):wv(s,o,l)}function Jf(s,o){return Cn(s)?s.parentNode(o):o.parentNode}function dE(s,o,l){return Ev(s,o,l)}let Ev=function Ag(s,o,l){return 40&s.type?Ri(s,l):null};function kg(s,o,l,d){const f=nh(s,d,o),g=o[11],E=dE(d.parent||o[6],d,o);if(null!=f)if(Array.isArray(l))for(let D=0;D<l.length;D++)bv(g,f,l[D],E,!1);else bv(g,f,l,E,!1)}function ep(s,o){if(null!==o){const l=o.type;if(3&l)return Ri(o,s);if(4&l)return tp(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return ep(s,d);{const f=s[o.index];return ki(f)?tp(-1,f):dn(f)}}if(32&l)return Ze(o,s)()||dn(s[o.index]);{const d=hE(s,o);return null!==d?Array.isArray(d)?d[0]:ep(Un(s[16]),d):ep(s,o.next)}}return null}function hE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function tp(s,o){const l=10+s+1;if(l<o.length){const d=o[l],f=d[1].firstChild;if(null!==f)return ep(d,f)}return o[7]}function np(s,o,l,d,f,g,w){for(;null!=l;){const E=d[l.index],D=l.type;if(w&&0===o&&(E&&oi(dn(E),d),l.flags|=4),64!=(64&l.flags))if(8&D)np(s,o,l.child,d,f,g,!1),ys(o,s,f,E,g);else if(32&D){const M=Ze(l,d);let k;for(;k=M();)ys(o,s,f,k,g);ys(o,s,f,E,g)}else 16&D?Cv(s,o,d,l,f,g):ys(o,s,f,E,g);l=w?l.projectionNext:l.next}}function ip(s,o,l,d,f,g){np(l,d,s.firstChild,o,f,g,!1)}function Cv(s,o,l,d,f,g){const w=l[16],D=w[6].projection[d.projection];if(Array.isArray(D))for(let M=0;M<D.length;M++)ys(o,s,f,D[M],g);else np(s,o,D,w[3],f,g,!0)}function fE(s,o,l){Cn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Og(s,o,l){Cn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function Dv(s,o,l){let d=s.length;for(;;){const f=s.indexOf(o,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=o.length;if(f+g===d||s.charCodeAt(f+g)<=32)return f}l=f+1}}const pE="ng-template";function _T(s,o,l){let d=0;for(;d<s.length;){let f=s[d++];if(l&&"class"===f){if(f=s[d],-1!==Dv(f.toLowerCase(),o,0))return!0}else if(1===f){for(;d<s.length&&"string"==typeof(f=s[d++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function mE(s){return 4===s.type&&s.value!==pE}function yT(s,o,l){return o===(4!==s.type||l?s.value:pE)}function vT(s,o,l){let d=4;const f=s.attrs||[],g=function bT(s){for(let o=0;o<s.length;o++)if(Ns(s[o]))return o;return s.length}(f);let w=!1;for(let E=0;E<o.length;E++){const D=o[E];if("number"!=typeof D){if(!w)if(4&d){if(d=2|1&d,""!==D&&!yT(s,D,l)||""===D&&1===o.length){if(So(d))return!1;w=!0}}else{const M=8&d?D:o[++E];if(8&d&&null!==s.attrs){if(!_T(s.attrs,M,l)){if(So(d))return!1;w=!0}continue}const L=gE(8&d?"class":D,f,mE(s),l);if(-1===L){if(So(d))return!1;w=!0;continue}if(""!==M){let j;j=L>g?"":f[L+1].toLowerCase();const Q=8&d?j:null;if(Q&&-1!==Dv(Q,M,0)||2&d&&M!==j){if(So(d))return!1;w=!0}}}}else{if(!w&&!So(d)&&!So(D))return!1;if(w&&So(D))continue;w=!1,d=D|1&d}}return So(d)||w}function So(s){return 0==(1&s)}function gE(s,o,l,d){if(null===o)return-1;let f=0;if(d||!l){let g=!1;for(;f<o.length;){const w=o[f];if(w===s)return f;if(3===w||6===w)g=!0;else{if(1===w||2===w){let E=o[++f];for(;"string"==typeof E;)E=o[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=g?1:2}return-1}return function ih(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function _E(s,o,l=!1){for(let d=0;d<o.length;d++)if(vT(s,o[d],l))return!0;return!1}function Iv(s,o){e:for(let l=0;l<o.length;l++){const d=o[l];if(s.length===d.length){for(let f=0;f<s.length;f++)if(s[f]!==d[f])continue e;return!0}}return!1}function yE(s,o){return s?":not("+o.trim()+")":o}function ET(s){let o=s[0],l=1,d=2,f="",g=!1;for(;l<s.length;){let w=s[l];if("string"==typeof w)if(2&d){const E=s[++l];f+="["+w+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+w:4&d&&(f+=" "+w);else""!==f&&!So(w)&&(o+=yE(g,f),f=""),d=w,g=g||!So(d);l++}return""!==f&&(o+=yE(g,f)),o}const St={};function vE(s){wE(Lt(),De(),Ni()+s,ql())}function wE(s,o,l,d){if(!d)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&il(o,g,l)}else{const g=s.preOrderHooks;null!==g&&Zl(o,g,0,l)}wo(l)}function Ng(s,o){return s<<17|o<<2}function Hs(s){return s>>17&32767}function Pg(s){return 2|s}function vl(s){return(131068&s)>>2}function Fg(s,o){return-131069&s|o<<2}function Lg(s){return 1|s}function Ao(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],g=l[d+1];if(-1!==g){const w=s.data[g];tu(f),w.contentQueries(2,o[g],g)}}}function up(s,o,l,d,f,g,w,E,D,M){const k=o.blueprint.slice();return k[0]=f,k[2]=140|d,mo(k),k[3]=k[15]=s,k[8]=l,k[10]=w||s&&s[10],k[11]=E||s&&s[11],k[12]=D||s&&s[12]||null,k[9]=M||s&&s[9]||null,k[6]=g,k[16]=2==o.type?s[16]:k,k}function pc(s,o,l,d,f){let g=s.data[o];if(null===g)g=function dp(s,o,l,d,f){const g=Sa(),w=Yc(),D=s.data[o]=function lh(s,o,l,d,f,g){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?g:g&&g.parent,l,o,d,f);return null===s.firstChild&&(s.firstChild=D),null!==g&&(w?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(s,o,l,d,f),function Xc(){return mt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=d,g.attrs=f;const w=function Ta(){const s=mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===w?-1:w.injectorIndex}return ar(g,!0),g}function oh(s,o,l,d){if(0===l)return-1;const f=o.length;for(let g=0;g<l;g++)o.push(d),s.blueprint.push(d),s.data.push(null);return f}function ah(s,o,l){$o(o);try{const d=s.viewQuery;null!==d&&Qg(1,d,l);const f=s.template;null!==f&&Ru(s,o,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ao(s,o),s.staticViewQueries&&Qg(2,s.viewQuery,l);const g=s.components;null!==g&&function vs(s,o){for(let l=0;l<o.length;l++)LE(s,o[l])}(o,g)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Wo()}}function ku(s,o,l,d){const f=o[2];if(256==(256&f))return;$o(o);const g=ql();try{mo(o),function Wl(s){return mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Ru(s,o,l,2,d);const w=3==(3&f);if(!g)if(w){const M=s.preOrderCheckHooks;null!==M&&il(o,M,null)}else{const M=s.preOrderHooks;null!==M&&Zl(o,M,0,null),Zn(o,0)}if(function Pv(s){for(let o=_s(s);null!==o;o=xr(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const f=l[d],g=f[3];0==(1024&f[2])&&go(g,1),f[2]|=1024}}}(o),function NT(s){for(let o=_s(s);null!==o;o=xr(o))for(let l=10;l<o.length;l++){const d=o[l],f=d[1];ks(d)&&ku(f,d,f.template,d[8])}}(o),null!==s.contentQueries&&Ao(s,o),!g)if(w){const M=s.contentCheckHooks;null!==M&&il(o,M)}else{const M=s.contentHooks;null!==M&&Zl(o,M,1),Zn(o,1)}!function Gg(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)wo(~f);else{const g=f,w=l[++d],E=l[++d];Yl(w,g),E(2,o[g])}}}finally{wo(-1)}}(s,o);const E=s.components;null!==E&&function MT(s,o){for(let l=0;l<o.length;l++)PT(s,o[l])}(o,E);const D=s.viewQuery;if(null!==D&&Qg(2,D,d),!g)if(w){const M=s.viewCheckHooks;null!==M&&il(o,M)}else{const M=s.viewHooks;null!==M&&Zl(o,M,2),Zn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,go(o[3],-1))}finally{Wo()}}function TE(s,o,l,d){const f=o[10],g=!ql(),w=po(o);try{g&&!w&&f.begin&&f.begin(),w&&ah(s,o,d),ku(s,o,l,d)}finally{g&&!w&&f.end&&f.end()}}function Ru(s,o,l,d,f){const g=Ni(),w=2&d;try{wo(-1),w&&o.length>20&&wE(s,o,20,ql()),l(d,f)}finally{wo(g)}}function kv(s,o,l){if(Bc(o)){const f=o.directiveEnd;for(let g=o.directiveStart;g<f;g++){const w=s.data[g];w.contentQueries&&w.contentQueries(1,l[g],g)}}}function zg(s,o,l){!$l()||(function kT(s,o,l,d){const f=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||Sr(l,o),oi(d,o);const w=l.initialInputs;for(let E=f;E<g;E++){const D=s.data[E],M=rr(D);M&&yp(o,l,D);const k=zr(o,s,E,l);oi(k,o),null!==w&&RT(0,E-f,k,D,0,w),M&&(Oi(l.index,o)[8]=k)}}(s,o,l,Ri(l,o)),128==(128&l.flags)&&function NE(s,o,l){const d=l.directiveStart,f=l.directiveEnd,w=l.index,E=function Jc(){return mt.lFrame.currentDirectiveIndex}();try{wo(w);for(let D=d;D<f;D++){const M=s.data[D],k=o[D];nl(D),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Nv(M,k)}}finally{wo(-1),nl(E)}}(s,o,l))}function Rv(s,o,l=Ri){const d=o.localNames;if(null!==d){let f=o.index+1;for(let g=0;g<d.length;g+=2){const w=d[g+1],E=-1===w?l(o,s):s[w];s[f++]=E}}}function AE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=$g(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function $g(s,o,l,d,f,g,w,E,D,M){const k=20+d,L=k+f,j=function On(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:St);return l}(k,L),Q="function"==typeof M?M():M;return j[1]={type:s,blueprint:j,template:l,queries:null,viewQuery:E,declTNode:o,data:j.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:D,consts:Q,incompleteFirstPass:!1}}function qg(s,o,l,d){const f=BE(o);null===l?f.push(d):(f.push(l),s.firstCreatePass&&js(s).push(d,f.length-1))}function Va(s,o,l){for(let d in s)if(s.hasOwnProperty(d)){const f=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,f):l[d]=[o,f]}return l}function Us(s,o,l,d,f,g,w,E){const D=Ri(o,l);let k,M=o.inputs;!E&&null!=M&&(k=M[d])?(e_(s,l,k,d,f),lo(o)&&function pp(s,o){const l=Oi(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(d=function Nt(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=w?w(f,o.value||"",d):f,Cn(g)?g.setProperty(D,d,f):cu(d)||(D.setProperty?D.setProperty(d,f):D[d]=f))}function mp(s,o,l,d){let f=!1;if($l()){const g=function PE(s,o,l){const d=s.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const w=d[g];_E(l,w.selectors,!1)&&(f||(f=[]),Qo(Sr(l,o),s,w.type),rr(w)?(Ou(s,l),f.unshift(w)):f.push(w))}return f}(s,o,l),w=null===d?null:{"":-1};if(null!==g){f=!0,FE(l,s.data.length,g.length);for(let k=0;k<g.length;k++){const L=g[k];L.providersResolver&&L.providersResolver(L)}let E=!1,D=!1,M=oh(s,o,g.length,null);for(let k=0;k<g.length;k++){const L=g[k];l.mergedAttrs=rl(l.mergedAttrs,L.hostAttrs),Wg(s,l,o,M,L),_p(M,L,w),null!==L.contentQueries&&(l.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(l.flags|=128);const j=L.type.prototype;!E&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!D&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),D=!0),M++}!function fp(s,o){const d=o.directiveEnd,f=s.data,g=o.attrs,w=[];let E=null,D=null;for(let M=o.directiveStart;M<d;M++){const k=f[M],L=k.inputs,j=null===g||mE(o)?null:OT(L,g);w.push(j),E=Va(L,M,E),D=Va(k.outputs,M,D)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=w,o.inputs=E,o.outputs=D}(s,l)}w&&function gp(s,o,l){if(o){const d=s.localNames=[];for(let f=0;f<o.length;f+=2){const g=l[o[f+1]];if(null==g)throw new Oe(-301,!1);d.push(o[f],g)}}}(l,d,w)}return l.mergedAttrs=rl(l.mergedAttrs,l.attrs),f}function Ov(s,o,l,d,f,g){const w=g.hostBindings;if(w){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const D=~o.index;(function OE(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(E)!=D&&E.push(D),E.push(d,f,w)}}function Nv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Ou(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function _p(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;rr(o)&&(l[""]=s)}}function FE(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function Wg(s,o,l,d,f){s.data[d]=f;const g=f.factory||(f.factory=sr(f.type)),w=new Ma(g,rr(f),null);s.blueprint[d]=w,l[d]=w,Ov(s,o,0,d,oh(s,l,f.hostVars,St),f)}function yp(s,o,l){const d=Ri(o,s),f=AE(l),g=s[10],w=Nu(s,up(s,f,null,l.onPush?64:16,d,o,g,g.createRenderer(d,l),null,null));s[o.index]=w}function Ba(s,o,l,d,f,g){const w=Ri(s,o);!function uh(s,o,l,d,f,g,w){if(null==g)Cn(s)?s.removeAttribute(o,f,l):o.removeAttribute(f);else{const E=null==w?ge(g):w(g,d||"",f);Cn(s)?s.setAttribute(o,f,E,l):l?o.setAttributeNS(l,f,E):o.setAttribute(f,E)}}(o[11],w,g,s.value,l,d,f)}function RT(s,o,l,d,f,g){const w=g[o];if(null!==w){const E=d.setInput;for(let D=0;D<w.length;){const M=w[D++],k=w[D++],L=w[D++];null!==E?d.setInput(l,L,M,k):l[k]=L}}}function OT(s,o){let l=null,d=0;for(;d<o.length;){const f=o[d];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],o[d+1])),d+=2}else d+=2;else d+=4}return l}function Kg(s,o,l,d){return new Array(s,!0,!1,o,null,0,d,l,null,null)}function PT(s,o){const l=Oi(o,s);if(ks(l)){const d=l[1];80&l[2]?ku(d,l,d.template,l[8]):l[5]>0&&dh(l)}}function dh(s){for(let d=_s(s);null!==d;d=xr(d))for(let f=10;f<d.length;f++){const g=d[f];if(1024&g[2]){const w=g[1];ku(w,g,w.template,g[8])}else g[5]>0&&dh(g)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=Oi(l[d],s);ks(f)&&f[5]>0&&dh(f)}}function LE(s,o){const l=Oi(o,s),d=l[1];(function VE(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(d,l),ah(d,l,l[8])}function Nu(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Fv(s){for(;s;){s[2]|=64;const o=Un(s);if(vf(s)&&!o)return s;s=o}return null}function vp(s,o,l){const d=o[10];d.begin&&d.begin();try{ku(s,o,s.template,l)}catch(f){throw Jg(o,f),f}finally{d.end&&d.end()}}function Zg(s){!function mc(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],d=Kr(l),f=d[1];TE(f,d,f.template,l)}}(s[8])}function Qg(s,o,l){tu(0),o(s,l)}const VT=(()=>Promise.resolve(null))();function BE(s){return s[7]||(s[7]=[])}function js(s){return s.cleanup||(s.cleanup=[])}function Jg(s,o){const l=s[9],d=l?l.get(Mn,null):null;d&&d.handleError(o)}function e_(s,o,l,d,f){for(let g=0;g<l.length;){const w=l[g++],E=l[g++],D=o[w],M=s.data[w];null!==M.setInput?M.setInput(D,f,d,E):D[E]=f}}function Mo(s,o,l){const d=zo(o,s);!function th(s,o,l){Cn(s)?s.setValue(o,l):o.textContent=l}(s[11],d,l)}function gc(s,o,l){let d=l?s.styles:null,f=l?s.classes:null,g=0;if(null!==o)for(let w=0;w<o.length;w++){const E=o[w];"number"==typeof E?g=E:1==g?f=ue(f,E):2==g&&(d=ue(d,E+": "+o[++w]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=f:s.classesWithoutHost=f}const Lv=new Hn("INJECTOR",-1);class HE{get(o,l=Bs){if(l===Bs){const d=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw d.name="NullInjectorError",d}return l}}const Lu=new Hn("Set Injector scope."),wp={},BT={};let fh;function ph(){return void 0===fh&&(fh=new HE),fh}function Vv(s,o=null,l=null,d){const f=bp(s,o,l,d);return f._resolveInjectorDefTypes(),f}function bp(s,o=null,l=null,d){return new Vu(s,l,o||ph(),d)}class Vu{constructor(o,l,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&qr(l,E=>this.processProvider(E,o,l)),qr([o],E=>this.processInjectorType(E,[],g)),this.records.set(Lv,Ha(void 0,this));const w=this.records.get(Lu);this.scope=null!=w?w.value:null,this.source=f||("object"==typeof o?null:fe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=Bs,d=ht.Default){this.assertNotDestroyed();const f=ke(this),g=ni(void 0);try{if(!(d&ht.SkipSelf)){let E=this.records.get(o);if(void 0===E){const D=function mh(s){return"function"==typeof s||"object"==typeof s&&s instanceof Hn}(o)&&zt(o);E=D&&this.injectableDefInScope(D)?Ha(Ep(o),wp):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(d&ht.Self?ph():this.parent).get(o,l=d&ht.Optional&&l===Bs?null:l)}catch(w){if("NullInjectorError"===w.name){if((w[yu]=w[yu]||[]).unshift(fe(o)),f)throw w;return function hl(s,o,l,d){const f=s[yu];throw o[H]&&f.unshift(o[H]),s.message=function Oa(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let f=fe(o);if(Array.isArray(o))f=o.map(fe).join(" -> ");else if("object"==typeof o){let g=[];for(let w in o)if(o.hasOwnProperty(w)){let E=o[w];g.push(w+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}f=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${s.replace(T,"\n  ")}`}("\n"+s.message,f,l,d),s.ngTokenPath=f,s[yu]=null,s}(w,o,"R3InjectorError",this.source)}throw w}finally{ni(g),ke(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,f)=>o.push(fe(f))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,l,d){if(!(o=ee(o)))return!1;let f=ji(o);const g=null==f&&o.ngModule||void 0,w=void 0===g?o:g,E=-1!==d.indexOf(w);if(void 0!==g&&(f=ji(g)),null==f)return!1;if(null!=f.imports&&!E){let k;d.push(w);try{qr(f.imports,L=>{this.processInjectorType(L,l,d)&&(void 0===k&&(k=[]),k.push(L))})}finally{}if(void 0!==k)for(let L=0;L<k.length;L++){const{ngModule:j,providers:Q}=k[L];qr(Q,we=>this.processProvider(we,j,Q||ft))}}this.injectorDefTypes.add(w);const D=sr(w)||(()=>new w);this.records.set(w,Ha(D,wp));const M=f.providers;if(null!=M&&!E){const k=o;qr(M,L=>this.processProvider(L,k,M))}return void 0!==g&&void 0!==o.providers}processProvider(o,l,d){let f=ko(o=ee(o))?o:ee(o&&o.provide);const g=function Nn(s,o,l){return t_(s)?Ha(void 0,s.useValue):Ha(xo(s),wp)}(o);if(ko(o)||!0!==o.multi)this.records.get(f);else{let w=this.records.get(f);w||(w=Ha(void 0,wp,!0),w.factory=()=>Dt(w.multi),this.records.set(f,w)),f=o,w.multi.push(o)}this.records.set(f,g)}hydrate(o,l){return l.value===wp&&(l.value=BT,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Hv(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=ee(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Ep(s){const o=zt(s),l=null!==o?o.factory:sr(s);if(null!==l)return l;if(s instanceof Hn)throw new Oe(204,!1);if(s instanceof Function)return function HT(s){const o=s.length;if(o>0)throw cr(o,"?"),new Oe(204,!1);const l=function nr(s){const o=s&&(s[ls]||s[Cs]);if(o){const l=function io(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Oe(204,!1)}function xo(s,o,l){let d;if(ko(s)){const f=ee(s);return sr(f)||Ep(f)}if(t_(s))d=()=>ee(s.useValue);else if(function Bv(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Dt(s.deps||[]));else if(function UE(s){return!(!s||!s.useExisting)}(s))d=()=>ot(ee(s.useExisting));else{const f=ee(s&&(s.useClass||s.provide));if(!function _c(s){return!!s.deps}(s))return sr(f)||Ep(f);d=()=>new f(...Dt(s.deps))}return d}function Ha(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function t_(s){return null!==s&&"object"==typeof s&&Z in s}function ko(s){return"function"==typeof s}let aa=(()=>{class s{static create(l,d){var f;if(Array.isArray(l))return Vv({name:""},d,l,"");{const g=null!==(f=l.name)&&void 0!==f?f:"";return Vv({name:g},l.parent,l.providers,g)}}}return s.THROW_IF_NOT_FOUND=Bs,s.NULL=new HE,s.\u0275prov=on({token:s,providedIn:"any",factory:()=>ot(Lv)}),s.__NG_ELEMENT_ID__=-1,s})();function $v(s,o){Rs(Kr(s)[1],In())}function qv(s){let o=function QE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let f;if(rr(s))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");f=o.\u0275dir}if(f){if(l){d.push(f);const w=s;w.inputs=n_(s.inputs),w.declaredInputs=n_(s.declaredInputs),w.outputs=n_(s.outputs);const E=f.hostBindings;E&&XE(s,E);const D=f.viewQuery,M=f.contentQueries;if(D&&i_(s,D),M&&Wv(s,M),te(s.inputs,f.inputs),te(s.declaredInputs,f.declaredInputs),te(s.outputs,f.outputs),rr(f)&&f.data.animation){const k=s.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let w=0;w<g.length;w++){const E=g[w];E&&E.ngInherit&&E(s),E===qv&&(l=!1)}}o=Object.getPrototypeOf(o)}!function KT(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=o+=f.hostVars,f.hostAttrs=rl(f.hostAttrs,l=rl(l,f.hostAttrs))}}(d)}function n_(s){return s===vi?{}:s===ft?[]:s}function i_(s,o){const l=s.viewQuery;s.viewQuery=l?(d,f)=>{o(d,f),l(d,f)}:o}function Wv(s,o){const l=s.contentQueries;s.contentQueries=l?(d,f,g)=>{o(d,f,g),l(d,f,g)}:o}function XE(s,o){const l=s.hostBindings;s.hostBindings=l?(d,f)=>{o(d,f),l(d,f)}:o}let r_=null;function yh(){if(!r_){const s=qt.Symbol;if(s&&s.iterator)r_=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(r_=d)}}}return r_}function Dp(s){return!!Yv(s)&&(Array.isArray(s)||!(s instanceof Map)&&yh()in s)}function Yv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function la(s,o,l){return s[o]=l}function gr(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function vh(s,o,l,d){const f=De();return gr(f,yo(),o)&&(Lt(),Ba(Bn(),f,s,o,l,d)),vh}function wh(s,o,l,d){return gr(s,yo(),l)?o+ge(l)+d:St}function o_(s,o,l,d,f,g,w,E){const D=De(),M=Lt(),k=s+20,L=M.firstCreatePass?function iC(s,o,l,d,f,g,w,E,D){const M=o.consts,k=pc(o,s,4,w||null,or(M,E));mp(o,l,k,or(M,D)),Rs(o,k);const L=k.tViews=$g(2,k,d,f,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,M);return null!==o.queries&&(o.queries.template(o,k),L.queries=o.queries.embeddedTView(k)),k}(k,M,D,o,l,d,f,g,w):M.data[k];ar(L,!1);const j=D[11].createComment("");kg(M,D,j,L),oi(j,D),Nu(D,D[k]=Kg(j,D,j,L)),Pl(L)&&zg(M,D,L),null!=w&&Rv(D,L,E)}function Cl(s){return jr(function Qc(){return mt.lFrame.contextLView}(),20+s)}function Dl(s,o=ht.Default){const l=De();return null===l?ot(s,o):Tr(In(),l,ee(s),o)}function p_(){throw new Error("invalid")}function ow(s,o,l){const d=De();return gr(d,yo(),o)&&Us(Lt(),Bn(),d,s,o,d[11],l,!1),ow}function aw(s,o,l,d,f){const w=f?"class":"style";e_(s,l,o.inputs[w],w,d)}function Ah(s,o,l,d){const f=De(),g=Lt(),w=20+s,E=f[11],D=f[w]=Mu(E,o,function nv(){return mt.lFrame.currentNamespace}()),M=g.firstCreatePass?function dA(s,o,l,d,f,g,w){const E=o.consts,M=pc(o,s,2,f,or(E,g));return mp(o,l,M,or(E,w)),null!==M.attrs&&gc(M,M.attrs,!1),null!==M.mergedAttrs&&gc(M,M.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,M),M}(w,g,f,0,o,l,d):g.data[w];ar(M,!0);const k=M.mergedAttrs;null!==k&&lu(E,D,k);const L=M.classes;null!==L&&Og(E,D,L);const j=M.styles;return null!==j&&fE(E,D,j),64!=(64&M.flags)&&kg(g,f,D,M),0===function tl(){return mt.lFrame.elementDepthCount}()&&oi(D,f),function Gl(){mt.lFrame.elementDepthCount++}(),Pl(M)&&(zg(g,f,M),kv(g,M,f)),null!==d&&Rv(f,M),Ah}function ju(){let s=In();Yc()?Zc():(s=s.parent,ar(s,!1));const o=s;!function zl(){mt.lFrame.elementDepthCount--}();const l=Lt();return l.firstCreatePass&&(Rs(l,s),Bc(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Nd(s){return 0!=(16&s.flags)}(o)&&aw(l,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Jm(s){return 0!=(32&s.flags)}(o)&&aw(l,o,De(),o.stylesWithoutHost,!1),ju}function m_(s,o,l,d){return Ah(s,o,l,d),ju(),m_}function $s(s,o,l){const d=De(),f=Lt(),g=s+20,w=f.firstCreatePass?function Ap(s,o,l,d,f){const g=o.consts,w=or(g,d),E=pc(o,s,8,"ng-container",w);return null!==w&&gc(E,w,!0),mp(o,l,E,or(g,f)),null!==o.queries&&o.queries.elementStart(o,E),E}(g,f,d,o,l):f.data[g];ar(w,!0);const E=d[g]=d[11].createComment("");return kg(f,d,E,w),oi(E,d),Pl(w)&&(zg(f,d,w),kv(f,w,d)),null!=l&&Rv(d,w),$s}function Ec(){let s=In();const o=Lt();return Yc()?Zc():(s=s.parent,ar(s,!1)),o.firstCreatePass&&(Rs(o,s),Bc(s)&&o.queries.elementEnd(s)),Ec}function lw(s,o,l){return $s(s,o,l),Ec(),lw}function cw(){return De()}function Mp(s){return!!s&&"function"==typeof s.then}function Mh(s){return!!s&&"function"==typeof s.subscribe}const xh=Mh;function uw(s,o,l,d){const f=De(),g=Lt(),w=In();return function fC(s,o,l,d,f,g,w,E){const D=Pl(d),k=s.firstCreatePass&&js(s),L=o[8],j=BE(o);let Q=!0;if(3&d.type||E){const Be=Ri(d,o),Qe=E?E(Be):Be,Ie=j.length,gt=E?Bt=>E(dn(Bt[d.index])):d.index;if(Cn(l)){let Bt=null;if(!E&&D&&(Bt=function hC(s,o,l,d){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const w=f[g];if(w===l&&f[g+1]===d){const E=o[7],D=f[g+2];return E.length>D?E[D]:null}"string"==typeof w&&(g+=2)}return null}(s,o,f,d.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=g,Bt.__ngLastListenerFn__=g,Q=!1;else{g=kp(d,o,L,g,!1);const rn=l.listen(Qe,f,g);j.push(g,rn),k&&k.push(f,gt,Ie,Ie+1)}}else g=kp(d,o,L,g,!0),Qe.addEventListener(f,g,w),j.push(g),k&&k.push(f,gt,Ie,w)}else g=kp(d,o,L,g,!1);const we=d.outputs;let Pe;if(Q&&null!==we&&(Pe=we[f])){const Be=Pe.length;if(Be)for(let Qe=0;Qe<Be;Qe+=2){const Xs=o[Pe[Qe]][Pe[Qe+1]].subscribe(g),Fn=j.length;j.push(g,Xs),k&&k.push(f,d.index,Fn,-(Fn+1))}}}(g,f,f[11],w,s,o,!!l,d),uw}function xp(s,o,l,d){try{return!1!==l(d)}catch(f){return Jg(s,f),!1}}function kp(s,o,l,d,f){return function g(w){if(w===Function)return d;const E=2&s.flags?Oi(s.index,o):o;0==(32&o[2])&&Fv(E);let D=xp(o,0,d,w),M=g.__ngNextListenerFn__;for(;M;)D=xp(o,0,M,w)&&D,M=M.__ngNextListenerFn__;return f&&!1===D&&(w.preventDefault(),w.returnValue=!1),D}}function Ws(s=1){return function vo(s){return(mt.lFrame.contextLView=function iu(s,o){for(;s>0;)o=o[15],s--;return o}(s,mt.lFrame.contextLView))[8]}(s)}function pC(s,o){let l=null;const d=function wT(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let f=0;f<o.length;f++){const g=o[f];if("*"!==g){if(null===d?_E(s,g,!0):Iv(d,g))return f}else l=f}return l}function mC(s){const o=De()[16][6];if(!o.projection){const d=o.projection=cr(s?s.length:1,null),f=d.slice();let g=o.child;for(;null!==g;){const w=s?pC(g,s):0;null!==w&&(f[w]?f[w].projectionNext=g:d[w]=g,f[w]=g),g=g.next}}}function dw(s,o=0,l){const d=De(),f=Lt(),g=pc(f,20+s,16,null,l||null);null===g.projection&&(g.projection=o),Zc(),64!=(64&g.flags)&&function fT(s,o,l){Cv(o[11],0,o,l,nh(s,l,o),dE(l.parent||o[6],l,o))}(f,d,g)}function vC(s,o,l,d,f){const g=s[l+1],w=null===o;let E=d?Hs(g):vl(g),D=!1;for(;0!==E&&(!1===D||w);){const k=s[E+1];fA(s[E],o)&&(D=!0,s[E+1]=d?Lg(k):Pg(k)),E=d?Hs(k):vl(k)}D&&(s[l+1]=d?Pg(g):Lg(g))}function fA(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&cl(s,o)>=0}const Ii={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wC(s){return s.substring(Ii.key,Ii.keyEnd)}function __(s,o){const l=Ii.textEnd;return l===o?-1:(o=Ii.keyEnd=function gA(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Ii.key=o,l),Ks(s,o,l))}function Ks(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function y_(s,o,l){return ua(s,o,l,!1),y_}function v_(s,o){return ua(s,o,null,!0),v_}function Ro(s,o){for(let l=function mA(s){return function Gu(s){Ii.key=0,Ii.keyEnd=0,Ii.value=0,Ii.valueEnd=0,Ii.textEnd=s.length}(s),__(s,Ks(s,0,Ii.textEnd))}(o);l>=0;l=__(o,l))Mr(s,wC(o),!0)}function ua(s,o,l,d){const f=De(),g=Lt(),w=Gr(2);g.firstUpdatePass&&CC(g,s,w,d),o!==St&&gr(f,w,o)&&Ic(g,g.data[Ni()],f,f[11],s,f[w+1]=function $u(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(ms(s)))),s}(o,l),d,w)}function b_(s,o){return o>=s.expandoStartIndex}function CC(s,o,l,d){const f=s.data;if(null===f[l+1]){const g=f[Ni()],w=b_(s,l);yA(g,d)&&null===o&&!w&&(o=!1),o=function DC(s,o,l,d){const f=function Aa(s){const o=mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=d?o.residualClasses:o.residualStyles;if(null===f)0===(d?o.classBindings:o.styleBindings)&&(l=Cc(l=kr(null,s,o,l,d),o.attrs,d),g=null);else{const w=o.directiveStylingLast;if(-1===w||s[w]!==f)if(l=kr(f,s,o,l,d),null===g){let D=function IC(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==vl(d))return s[Hs(d)]}(s,o,d);void 0!==D&&Array.isArray(D)&&(D=kr(null,s,o,D[1],d),D=Cc(D,o.attrs,d),function SC(s,o,l,d){s[Hs(l?o.classBindings:o.styleBindings)]=d}(s,o,d,D))}else g=function TC(s,o,l){let d;const f=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<f;g++)d=Cc(d,s[g].hostAttrs,l);return Cc(d,o.attrs,l)}(s,o,d)}return void 0!==g&&(d?o.residualClasses=g:o.residualStyles=g),l}(f,g,o,d),function gw(s,o,l,d,f,g){let w=g?o.classBindings:o.styleBindings,E=Hs(w),D=vl(w);s[d]=l;let k,M=!1;if(Array.isArray(l)){const L=l;k=L[1],(null===k||cl(L,k)>0)&&(M=!0)}else k=l;if(f)if(0!==D){const j=Hs(s[E+1]);s[d+1]=Ng(j,E),0!==j&&(s[j+1]=Fg(s[j+1],d)),s[E+1]=function CT(s,o){return 131071&s|o<<17}(s[E+1],d)}else s[d+1]=Ng(E,0),0!==E&&(s[E+1]=Fg(s[E+1],d)),E=d;else s[d+1]=Ng(D,0),0===E?E=d:s[D+1]=Fg(s[D+1],d),D=d;M&&(s[d+1]=Pg(s[d+1])),vC(s,k,d,!0),vC(s,k,d,!1),function hA(s,o,l,d,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&cl(g,o)>=0&&(l[d+1]=Lg(l[d+1]))}(o,k,s,d,g),w=Ng(E,D),g?o.classBindings=w:o.styleBindings=w}(f,g,o,l,w,d)}}function kr(s,o,l,d,f){let g=null;const w=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<w&&(g=o[E],d=Cc(d,g.hostAttrs,f),g!==s);)E++;return null!==s&&(l.directiveStylingLast=E),d}function Cc(s,o,l){const d=l?1:2;let f=-1;if(null!==o)for(let g=0;g<o.length;g++){const w=o[g];"number"==typeof w?f=w:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Mr(s,w,!!l||o[++g]))}return void 0===s?null:s}function Ic(s,o,l,d,f,g,w,E){if(!(3&o.type))return;const D=s.data,M=D[E+1];Pp(function Tv(s){return 1==(1&s)}(M)?vw(D,o,l,f,vl(M),w):void 0)||(Pp(g)||function Sv(s){return 2==(2&s)}(M)&&(g=vw(D,null,l,f,E,w)),function mT(s,o,l,d,f){const g=Cn(s);if(o)f?g?s.addClass(l,d):l.classList.add(d):g?s.removeClass(l,d):l.classList.remove(d);else{let w=-1===d.indexOf("-")?void 0:ie.DashCase;if(null==f)g?s.removeStyle(l,d,w):l.style.removeProperty(d);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),w|=ie.Important),g?s.setStyle(l,d,f,w):l.style.setProperty(d,f,E?"important":"")}}}(d,w,zo(Ni(),l),f,g))}function vw(s,o,l,d,f,g){const w=null===o;let E;for(;f>0;){const D=s[f],M=Array.isArray(D),k=M?D[1]:D,L=null===k;let j=l[f+1];j===St&&(j=L?ft:void 0);let Q=L?Tf(j,d):k===d?j:void 0;if(M&&!Pp(Q)&&(Q=Tf(D,d)),Pp(Q)&&(E=Q,w))return E;const we=s[f+1];f=w?Hs(we):vl(we)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(E=Tf(D,d))}return E}function Pp(s){return void 0!==s}function yA(s,o){return 0!=(s.flags&(o?16:32))}function AC(s,o=""){const l=De(),d=Lt(),f=s+20,g=d.firstCreatePass?pc(d,f,1,o,null):d.data[f],w=l[f]=function cc(s,o){return Cn(s)?s.createText(o):s.createTextNode(o)}(l[11],o);kg(d,l,w,g),ar(g,!1)}function ww(s){return Rh("",s,""),ww}function Rh(s,o,l){const d=De(),f=wh(d,s,o,l);return f!==St&&Mo(d,Ni(),f),Rh}function bw(s,o,l){!function da(s,o,l,d){const f=Lt(),g=Gr(2);f.firstUpdatePass&&CC(f,null,g,d);const w=De();if(l!==St&&gr(w,g,l)){const E=f.data[Ni()];if(yA(E,d)&&!b_(f,g)){let D=d?E.classesWithoutHost:E.stylesWithoutHost;null!==D&&(l=ue(D,l||"")),aw(f,E,w,l,d)}else!function Oo(s,o,l,d,f,g,w,E){f===St&&(f=ft);let D=0,M=0,k=0<f.length?f[0]:null,L=0<g.length?g[0]:null;for(;null!==k||null!==L;){const j=D<f.length?f[D+1]:void 0,Q=M<g.length?g[M+1]:void 0;let Pe,we=null;k===L?(D+=2,M+=2,j!==Q&&(we=L,Pe=Q)):null===L||null!==k&&k<L?(D+=2,we=k):(M+=2,we=L,Pe=Q),null!==we&&Ic(s,o,l,d,we,Pe,w,E),k=D<f.length?f[D]:null,L=M<g.length?g[M]:null}}(f,E,w,w[11],w[g+1],w[g+1]=function Dc(s,o,l){if(null==l||""===l)return ft;const d=[],f=ms(l);if(Array.isArray(f))for(let g=0;g<f.length;g++)s(d,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&s(d,g,f[g]);else"string"==typeof f&&o(d,f);return d}(s,o,l),d,g)}}(Mr,Ro,wh(De(),s,o,l),!0)}function Ew(s,o,l){const d=De();return gr(d,yo(),o)&&Us(Lt(),Bn(),d,s,o,d[11],l,!0),Ew}const qu=void 0;var KC=["en",[["a","p"],["AM","PM"],qu],[["AM","PM"],qu,qu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qu,"{1} 'at' {0}",qu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Cw(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Nh={};function Dw(s){const o=function xA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=ZC(o);if(l)return l;const d=o.split("-")[0];if(l=ZC(d),l)return l;if("en"===d)return KC;throw new Error(`Missing locale data for the locale "${s}".`)}function YC(s){return Dw(s)[wt.PluralCase]}function ZC(s){return s in Nh||(Nh[s]=qt.ng&&qt.ng.common&&qt.ng.common.locales&&qt.ng.common.locales[s]),Nh[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const C_="en-US";let NA=C_;function O_(s,o,l,d,f){if(s=ee(s),Array.isArray(s))for(let g=0;g<s.length;g++)O_(s[g],o,l,d,f);else{const g=Lt(),w=De();let E=ko(s)?s:ee(s.provide),D=xo(s);const M=In(),k=1048575&M.providerIndexes,L=M.directiveStart,j=M.providerIndexes>>20;if(ko(s)||!s.multi){const Q=new Ma(D,f,Dl),we=Ow(E,o,f?k:k+j,L);-1===we?(Qo(Sr(M,w),g,E),Rw(g,s,o.length),o.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(Q),w.push(Q)):(l[we]=Q,w[we]=Q)}else{const Q=Ow(E,o,k+j,L),we=Ow(E,o,k,k+j),Pe=Q>=0&&l[Q],Be=we>=0&&l[we];if(f&&!Be||!f&&!Pe){Qo(Sr(M,w),g,E);const Qe=function vD(s,o,l,d,f){const g=new Ma(s,l,Dl);return g.multi=[],g.index=o,g.componentProviders=0,_D(g,f,d&&!l),g}(f?yD:rM,l.length,f,d,D);!f&&Be&&(l[we].providerFactory=Qe),Rw(g,s,o.length,0),o.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(Qe),w.push(Qe)}else Rw(g,s,Q>-1?Q:we,_D(l[f?we:Q],D,!f&&d));!f&&d&&Be&&l[we].componentProviders++}}}function Rw(s,o,l,d){const f=ko(o),g=function jE(s){return!!s.useClass}(o);if(f||g){const D=(g?ee(o.useClass):o).prototype.ngOnDestroy;if(D){const M=s.destroyHooks||(s.destroyHooks=[]);if(!f&&o.multi){const k=M.indexOf(l);-1===k?M.push(l,[d,D]):M[k+1].push(d,D)}else M.push(l,D)}}}function _D(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Ow(s,o,l,d){for(let f=l;f<d;f++)if(o[f]===s)return f;return-1}function rM(s,o,l,d){return Gp(this.multi,[])}function yD(s,o,l,d){const f=this.multi;let g;if(this.providerFactory){const w=this.providerFactory.componentProviders,E=zr(l,l[1],this.providerFactory.index,d);g=E.slice(0,w),Gp(f,g);for(let D=w;D<E.length;D++)g.push(E[D])}else g=[],Gp(f,g);return g}function Gp(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function N_(s,o=[]){return l=>{l.providersResolver=(d,f)=>function R_(s,o,l){const d=Lt();if(d.firstCreatePass){const f=rr(s);O_(l,d.data,d.blueprint,f,!0),O_(o,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,o)}}class Fh{}class aM{resolveComponentFactory(o){throw function sM(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Lh=(()=>{class s{}return s.NULL=new aM,s})();function bD(){return Wu(In(),De())}function Wu(s,o){return new Ku(Ri(s,o))}let Ku=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=bD,s})();function lM(s){return s instanceof Ku?s.nativeElement:s}class ED{}let F_=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Pw(){const s=De(),l=Oi(In().index,s);return function Nw(s){return s[11]}(zi(l)?l:s)}(),s})(),Fw=(()=>{class s{}return s.\u0275prov=on({token:s,providedIn:"root",factory:()=>null}),s})();class Lw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const CD=new Lw("13.3.3"),L_={};function Yu(s,o,l,d,f=!1){for(;null!==l;){const g=o[l.index];if(null!==g&&d.push(dn(g)),ki(g))for(let E=10;E<g.length;E++){const D=g[E],M=D[1].firstChild;null!==M&&Yu(D[1],D,M,d)}const w=l.type;if(8&w)Yu(s,o,l.child,d);else if(32&w){const E=Ze(l,o);let D;for(;D=E();)d.push(D)}else if(16&w){const E=hE(o,l);if(Array.isArray(E))d.push(...E);else{const D=Un(o[16]);Yu(D[1],D,E,d,!0)}}l=f?l.projectionNext:l.next}return d}class zp{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Yu(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ki(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(uc(o,d),Ls(l,d))}this._attachedToViewContainer=!1}lE(this._lView[1],this._lView)}onDestroy(o){qg(this._lView[1],this._lView,null,o)}markForCheck(){Fv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){vp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function FT(s,o,l){_o(!0);try{vp(s,o,l)}finally{_o(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function yv(s,o){ip(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class cM extends zp{constructor(o){super(o),this._view=o}detectChanges(){Zg(this._view)}checkNoChanges(){!function LT(s){_o(!0);try{Zg(s)}finally{_o(!1)}}(this._view)}get context(){return null}}class DD extends Lh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Yt(o);return new Vw(l,this.ngModule)}}function ID(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class Vw extends Fh{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function rp(s){return s.map(ET).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return ID(this.componentDef.inputs)}get outputs(){return ID(this.componentDef.outputs)}create(o,l,d,f){const g=(f=f||this.ngModule)?function dM(s,o){return{get:(l,d,f)=>{const g=s.get(l,L_,f);return g!==L_||d===L_?g:o.get(l,d,f)}}}(o,f.injector):o,w=g.get(ED,Ia),E=g.get(Fw,null),D=w.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=d?function hp(s,o,l){if(Cn(s))return s.selectRootElement(o,l===$t.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(D,d,this.componentDef.encapsulation):Mu(w.createRenderer(null,this.componentDef),M,function uM(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),L=this.componentDef.onPush?576:528,j=function zv(s,o){return{components:[],scheduler:s||Tg,clean:VT,playerHandler:o||null,flags:0}}(),Q=$g(0,null,null,1,0,null,null,null,null,null),we=up(null,Q,j,L,null,null,w,D,E,g);let Pe,Be;$o(we);try{const Qe=function YE(s,o,l,d,f,g){const w=l[1];l[20]=s;const D=pc(w,20,2,"#host",null),M=D.mergedAttrs=o.hostAttrs;null!==M&&(gc(D,M,!0),null!==s&&(lu(f,s,M),null!==D.classes&&Og(f,s,D.classes),null!==D.styles&&fE(f,s,D.styles)));const k=d.createRenderer(s,o),L=up(l,AE(o),null,o.onPush?64:16,l[20],D,d,k,g||null,null);return w.firstCreatePass&&(Qo(Sr(D,l),w,o.type),Ou(w,D),FE(D,l.length,1)),Nu(l,L),l[20]=L}(k,this.componentDef,we,w,D);if(k)if(d)lu(D,k,["ng-version",CD.full]);else{const{attrs:Ie,classes:gt}=function sp(s){const o=[],l=[];let d=1,f=2;for(;d<s.length;){let g=s[d];if("string"==typeof g)2===f?""!==g&&o.push(g,s[++d]):8===f&&l.push(g);else{if(!So(f))break;f=g}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Ie&&lu(D,k,Ie),gt&&gt.length>0&&Og(D,k,gt.join(" "))}if(Be=el(Q,20),void 0!==l){const Ie=Be.projection=[];for(let gt=0;gt<this.ngContentSelectors.length;gt++){const Bt=l[gt];Ie.push(null!=Bt?Array.from(Bt):null)}}Pe=function ZE(s,o,l,d,f){const g=l[1],w=function ch(s,o,l){const d=In();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Wg(s,d,o,oh(s,o,1,null),l));const f=zr(o,s,d.directiveStart,d);oi(f,o);const g=Ri(d,o);return g&&oi(g,o),f}(g,l,o);if(d.components.push(w),s[8]=w,f&&f.forEach(D=>D(w,o)),o.contentQueries){const D=In();o.contentQueries(1,w,D.directiveStart)}const E=In();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(wo(E.index),Ov(l[1],E,0,E.directiveStart,E.directiveEnd,o),Nv(o,w)),w}(Qe,this.componentDef,we,j,[$v]),ah(Q,we,null)}finally{Wo()}return new fM(this.componentType,Pe,Wu(Be,we),we,Be)}}class fM extends class wD{}{constructor(o,l,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new cM(f),this.componentType=o}get injector(){return new $r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Zu{}const Tc=new Map;class Hw extends Zu{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new DD(this);const d=vn(o);this._bootstrapComponents=_(d.bootstrap),this._r3Injector=bp(o,l,[{provide:Zu,useValue:this},{provide:Lh,useValue:this.componentFactoryResolver}],fe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=aa.THROW_IF_NOT_FOUND,d=ht.Default){return o===aa||o===Zu||o===Lv?this:this._r3Injector.get(o,l,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class B_ extends class SD{}{constructor(o){super(),this.moduleType=o,null!==vn(o)&&function pM(s){const o=new Set;!function l(d){const f=vn(d,!0),g=f.id;null!==g&&(function TD(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${fe(o)} vs ${fe(o.name)}`)}(g,Tc.get(g),d),Tc.set(g,d));const w=_(f.imports);for(const E of w)o.has(E)||(o.add(E),l(E))}(s)}(o)}create(o){return new Hw(this.moduleType,o)}}function _M(s,o,l){const d=Di()+s,f=De();return f[d]===St?la(f,d,l?o.call(l):o()):function Ip(s,o){return s[o]}(f,d)}function $p(s,o,l,d,f,g){const w=o+l;return gr(s,w,f)?la(s,w+1,g?d.call(g,f):d(f)):function Qu(s,o){const l=s[o];return l===St?void 0:l}(s,w+1)}function CM(s,o){const l=Lt();let d;const f=s+20;l.firstCreatePass?(d=function DM(s,o){if(o)for(let l=o.length-1;l>=0;l--){const d=o[l];if(s===d.name)return d}}(o,l.pipeRegistry),l.data[f]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,d.onDestroy)):d=l.data[f];const g=d.factory||(d.factory=sr(d.type)),w=ni(Dl);try{const E=bo(!1),D=g();return bo(E),function JT(s,o,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=d}(l,De(),f,D),D}finally{ni(w)}}function kD(s,o,l){const d=s+20,f=De(),g=jr(f,d);return function U_(s,o){return s[1].data[o].pure}(f,d)?$p(f,Di(),o,g.transform,l,g):g.transform(l)}function RD(s){return o=>{setTimeout(s,void 0,o)}}const Il=class hN extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){var f,g,w;let E=o,D=l||(()=>null),M=d;if(o&&"object"==typeof o){const L=o;E=null===(f=L.next)||void 0===f?void 0:f.bind(L),D=null===(g=L.error)||void 0===g?void 0:g.bind(L),M=null===(w=L.complete)||void 0===w?void 0:w.bind(L)}this.__isAsync&&(D=RD(D),E&&(E=RD(E)),M&&(M=RD(M)));const k=super.subscribe({next:E,error:D,complete:M});return o instanceof X.w0&&o.add(k),k}};function OD(){return this._results[yh()]()}class j_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=yh(),d=j_.prototype;d[l]||(d[l]=OD)}get changes(){return this._changes||(this._changes=new Il)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const f=Ki(o);(this._changesDetected=!function nc(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],g=o[d];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Xu=(()=>{class s{}return s.__NG_ELEMENT_ID__=zw,s})();const jw=Xu,Gw=class extends jw{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o){const l=this._declarationTContainer.tViews,d=up(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(d[19]=g.createEmbeddedView(l)),ah(l,d,o),new zp(d)}};function zw(){return Vh(In(),De())}function Vh(s,o){return 4&s.type?new Gw(o,s,Wu(s,o)):null}let Bh=(()=>{class s{}return s.__NG_ELEMENT_ID__=$w,s})();function $w(){return Kw(In(),De())}const qw=Bh,SM=class extends qw{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return Wu(this._hostTNode,this._hostLView)}get injector(){return new $r(this._hostTNode,this._hostLView)}get parentInjector(){const o=lr(this._hostTNode,this._hostLView);if(Pd(o)){const l=hn(o,this._hostLView),d=Qt(o);return new $r(l[1].data[d+8],l)}return new $r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=ND(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){const f=o.createEmbeddedView(l||{});return this.insert(f,d),f}createComponent(o,l,d,f,g){const w=o&&!function Pi(s){return"function"==typeof s}(o);let E;if(w)E=l;else{const L=l||{};E=L.index,d=L.injector,f=L.projectableNodes,g=L.ngModuleRef}const D=w?o:new Vw(Yt(o)),M=d||this.parentInjector;if(!g&&null==D.ngModule){const j=(w?M:this.parentInjector).get(Zu,null);j&&(g=j)}const k=D.create(M,f,void 0,g);return this.insert(k.hostView,E),k}insert(o,l){const d=o._lView,f=d[1];if(function Ul(s){return ki(s[3])}(d)){const k=this.indexOf(o);if(-1!==k)this.detach(k);else{const L=d[3],j=new SM(L,L[6],L[3]);j.detach(j.indexOf(o))}}const g=this._adjustIndex(l),w=this._lContainer;!function aE(s,o,l,d){const f=10+d,g=l.length;d>0&&(l[f-1][4]=o),d<g-10?(o[4]=l[f],mu(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const w=o[17];null!==w&&l!==w&&function vv(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(w,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(f,d,w,g);const E=tp(g,w),D=d[11],M=Jf(D,w[7]);return null!==M&&function Zf(s,o,l,d,f,g){d[0]=f,d[6]=o,ip(s,d,l,1,f,g)}(f,w[6],D,d,M,E),o.attachToViewContainerRef(),mu(Ww(w),g,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=ND(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=uc(this._lContainer,l);d&&(Ls(Ww(this._lContainer),l),lE(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=uc(this._lContainer,l);return d&&null!=Ls(Ww(this._lContainer),l)?new zp(d):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function ND(s){return s[8]}function Ww(s){return s[8]||(s[8]=[])}function Kw(s,o){let l;const d=o[s.index];if(ki(d))l=d;else{let f;if(8&s.type)f=dn(d);else{const g=o[11];f=g.createComment("");const w=Ri(s,o);dc(g,Jf(g,w),f,function uE(s,o){return Cn(s)?s.nextSibling(o):o.nextSibling}(g,w),!1)}o[s.index]=l=Kg(d,o,f,s),Nu(o,l)}return new SM(l,s,o)}class Ju{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ju(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yw{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,f=[];for(let g=0;g<d;g++){const w=l.getByIndex(g);f.push(this.queries[w.indexInDeclarationView].clone())}return new Yw(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==qD(o,l).matches&&this.queries[l].setDirty()}}class Zw{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class Qw{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(o,f);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new Qw(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Xw{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Xw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(o,l,LD(l,g)),this.matchTNodeWithReadOption(o,l,du(l,o,g,!1,!1))}else d===Xu?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,du(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Ku||f===Bh||f===Xu&&4&l.type)this.addMatch(l.index,-2);else{const g=du(l,o,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function LD(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function BD(s,o,l,d){return-1===l?function VD(s,o){return 11&s.type?Wu(s,o):4&s.type?Vh(s,o):null}(o,s):-2===l?function AM(s,o,l){return l===Ku?Wu(o,s):l===Xu?Vh(o,s):l===Bh?Kw(o,s):void 0}(s,o,d):zr(s,s[1],l,o)}function HD(s,o,l,d){const f=o[19].queries[d];if(null===f.matches){const g=s.data,w=l.matches,E=[];for(let D=0;D<w.length;D+=2){const M=w[D];E.push(M<0?null:BD(o,g[M],w[D+1],l.metadata.read))}f.matches=E}return f.matches}function Jw(s,o,l,d){const f=s.queries.getByIndex(l),g=f.matches;if(null!==g){const w=HD(s,o,f,l);for(let E=0;E<g.length;E+=2){const D=g[E];if(D>0)d.push(w[E/2]);else{const M=g[E+1],k=o[-D];for(let L=10;L<k.length;L++){const j=k[L];j[17]===j[3]&&Jw(j[1],j,M,d)}if(null!==k[9]){const L=k[9];for(let j=0;j<L.length;j++){const Q=L[j];Jw(Q[1],Q,M,d)}}}}}return d}function eb(s){const o=De(),l=Lt(),d=eu();tu(d+1);const f=qD(l,d);if(s.dirty&&po(o)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?Jw(l,o,d,[]):HD(l,o,f,d);s.reset(g,lM),s.notifyOnChanges()}return!0}return!1}function UD(s,o,l){const d=Lt();d.firstCreatePass&&(zD(d,new Zw(s,o,l),-1),2==(2&o)&&(d.staticViewQueries=!0)),GD(d,De(),o)}function jD(s,o,l,d){const f=Lt();if(f.firstCreatePass){const g=In();zD(f,new Zw(o,l,d),g.index),function $D(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}GD(f,De(),l)}function tb(){return function MM(s,o){return s[19].queries[o].queryList}(De(),eu())}function GD(s,o,l){const d=new j_(4==(4&l));qg(s,o,d,d.destroy),null===o[19]&&(o[19]=new Yw),o[19].queries.push(new Ju(d))}function zD(s,o,l){null===s.queries&&(s.queries=new Qw),s.queries.track(new Xw(o,l))}function qD(s,o){return s.queries.getByIndex(o)}function WD(s,o){return Vh(s,o)}function Uh(...s){}const oI=new Hn("Application Initializer");let gb=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Uh,this.reject=Uh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(Mp(g))l.push(g);else if(xh(g)){const w=new Promise((E,D)=>{g.subscribe({complete:E,error:D})});l.push(w)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(ot(oI,8))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const vr=new Hn("AppId",{providedIn:"root",factory:function jh(){return`${ed()}${ed()}${ed()}`}});function ed(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aI=new Hn("Platform Initializer"),OM=new Hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Y_=new Hn("appBootstrapListener"),Zp=new Hn("LocaleId",{providedIn:"root",factory:()=>Wt(Zp,ht.Optional|ht.SkipSelf)||function yb(){return"undefined"!=typeof $localize&&$localize.locale||C_}()}),vb=new Hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),VM=(()=>Promise.resolve(0))();function Qp(s){"undefined"==typeof Zone?VM.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Qs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Il(!1),this.onMicrotaskEmpty=new Il(!1),this.onStable=new Il(!1),this.onError=new Il(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function bb(){let s=qt.requestAnimationFrame,o=qt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Eb(s){const o=()=>{!function Z_(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(qt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Cb(s),s.isCheckStableRunning=!0,Bi(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Cb(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,g,w,E)=>{try{return uI(s),l.invokeTask(f,g,w,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Db(s)}},onInvoke:(l,d,f,g,w,E,D)=>{try{return uI(s),l.invoke(f,g,w,E,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),Db(s)}},onHasTask:(l,d,f,g)=>{l.hasTask(f,g),d===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Cb(s),Bi(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,f,g)=>(l.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,f){const g=this._inner,w=g.scheduleEventTask("NgZoneEvent: "+f,o,Zi,Uh,Uh);try{return g.runTask(w,l,d)}finally{g.cancelTask(w)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const Zi={};function Bi(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Cb(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function uI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Db(s){s._nesting--,Bi(s)}class BM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Il,this.onMicrotaskEmpty=new Il,this.onStable=new Il,this.onError=new Il}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,f){return o.apply(l,d)}}let dI=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qs.assertNotInAngularZone(),Qp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qp(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==g),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(ot(Qs))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})(),Ib=(()=>{class s{constructor(){this._applications=new Map,Xp.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Xp.findTestabilityInTree(this,l,d)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class Sb{addToWindow(o){}findTestabilityInTree(o,l,d){return null}}function HM(s){Xp=s}let Lo,Xp=new Sb;const Q_=new Hn("AllowMultipleToken");function Gh(s,o,l=[]){const d=`Platform: ${o}`,f=new Hn(d);return(g=[])=>{let w=Mb();if(!w||w.injector.get(Q_,!1))if(s)s(l.concat(g).concat({provide:f,useValue:!0}));else{const E=l.concat(g).concat({provide:f,useValue:!0},{provide:Lu,useValue:"platform"});!function GM(s){if(Lo&&!Lo.destroyed&&!Lo.injector.get(Q_,!1))throw new Oe(400,"");Lo=s.get(X_);const o=s.get(aI,null);o&&o.forEach(l=>l())}(aa.create({providers:E,name:d}))}return function hI(s){const o=Mb();if(!o)throw new Oe(401,"");return o}()}}function Mb(){return Lo&&!Lo.destroyed?Lo:null}let X_=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const E=function $M(s,o){let l;return l="noop"===s?new BM:("zone.js"===s?void 0:s)||new Qs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),D=[{provide:Qs,useValue:E}];return E.run(()=>{const M=aa.create({providers:D,parent:this.injector,name:l.moduleType.name}),k=l.create(M),L=k.injector.get(Mn,null);if(!L)throw new Oe(402,"");return E.runOutsideAngular(()=>{const j=E.onError.subscribe({next:Q=>{L.handleError(Q)}});k.onDestroy(()=>{kb(this._modules,k),j.unsubscribe()})}),function qM(s,o,l){try{const d=l();return Mp(d)?d.catch(f=>{throw o.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(L,E,()=>{const j=k.injector.get(gb);return j.runInitializers(),j.donePromise.then(()=>(function YO(s){ut(s,"Expected localeId to be defined"),"string"==typeof s&&(NA=s.toLowerCase().replace(/_/g,"-"))}(k.injector.get(Zp,C_)||C_),this._moduleDoBootstrap(k),k))})})}bootstrapModule(l,d=[]){const f=td({},d);return function UM(s,o,l){const d=new B_(l);return Promise.resolve(d)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const d=l.injector.get(xb);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Oe(403,"");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(ot(aa))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function td(s,o){return Array.isArray(o)?o.reduce(td,s):Object.assign(Object.assign({},s),o)}let xb=(()=>{class s{constructor(l,d,f,g){this._zone=l,this._injector=d,this._exceptionHandler=f,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new F.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),E=new F.y(D=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Qs.assertNotInAngularZone(),Qp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Qs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{M.unsubscribe(),k.unsubscribe()}});this.isStable=(0,le.T)(w,E.pipe((0,ne.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Oe(405,"");let f;f=l instanceof Fh?l:this._injector.get(Lh).resolveComponentFactory(l),this.componentTypes.push(f.componentType);const g=function Ab(s){return s.isBoundToModule}(f)?void 0:this._injector.get(Zu),E=f.create(aa.NULL,[],d||f.selector,g),D=E.location.nativeElement,M=E.injector.get(dI,null),k=M&&E.injector.get(Ib);return M&&k&&k.registerApplication(D,M),E.onDestroy(()=>{this.detachView(E.hostView),kb(this.components,E),k&&k.unregisterApplication(D)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;kb(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Y_,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(ot(Qs),ot(aa),ot(Mn),ot(gb))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function kb(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let Jp=!0,Rb=!1;function em(){return Rb=!0,Jp}function pI(){if(Rb)throw new Error("Cannot enable prod mode after platform setup.");Jp=!1}let J_=(()=>{class s{}return s.__NG_ELEMENT_ID__=mI,s})();function mI(s){return function Ob(s,o,l){if(lo(s)&&!l){const d=Oi(s.index,o);return new zp(d,d)}return 47&s.type?new zp(o[16],o):null}(In(),De(),16==(16&s))}class ry{constructor(){}supports(o){return Dp(o)}create(o){return new Lb(o)}}const QM=(s,o)=>o;class Lb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||QM}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,f=0,g=null;for(;l||d;){const w=!d||l&&l.currentIndex<Bb(d,f,g)?l:d,E=Bb(w,f,g),D=w.currentIndex;if(w===d)f--,d=d._nextRemoved;else if(l=l._next,null==w.previousIndex)f++;else{g||(g=[]);const M=E-f,k=D-f;if(M!=k){for(let j=0;j<M;j++){const Q=j<g.length?g[j]:g[j]=0,we=Q+j;k<=we&&we<M&&(g[j]=Q+1)}g[w.previousIndex]=k-M}}E!==D&&o(w,E,D)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Dp(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,g,w,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],w=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,w)?(d&&(l=this._verifyReinsertion(l,g,w,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,w,E),d=!0),l=l._next}else f=0,function XT(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[yh()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,E=>{w=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,w)?(d&&(l=this._verifyReinsertion(l,E,w,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,w,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,f){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,g,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,g,f)):o=this._addAfter(new qh(l,d),g,f),o}_verifyReinsertion(o,l,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?o=this._reinsertAfter(g,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,g=o._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const f=null===l?this._itHead:l._next;return o._next=f,o._prev=l,null===f?this._itTail=o:f._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new kc),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kc),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class qh{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class kc{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new Vb,this.map.set(l,d)),d.add(o)}get(o,l){const f=this.map.get(o);return f?f.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bb(s,o,l){const d=s.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+o+f}class bI{constructor(){}supports(o){return o instanceof Map||Yv(o)}create(){return new id}}class id{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Yv(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,l);const g=f._prev,w=f._next;return g&&(g._next=w),w&&(w._prev=g),f._next=null,f._prev=null,f}const d=new Ml(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class Ml{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rm(){return new Wh([new ry])}let Wh=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||rm()),deps:[[s,new Wr,new Yi]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new Oe(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:rm}),s})();function Ub(){return new Pn([new bI])}let Pn=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||Ub()),deps:[[s,new Wr,new Yi]]}}find(l){const d=this.factories.find(g=>g.supports(l));if(d)return d;throw new Oe(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:Ub}),s})();const sm=Gh(null,"core",[]);let JM=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(ot(xb))},s.\u0275mod=J({type:s}),s.\u0275inj=tn({}),s})()},3942:(ct,Se,P)=>{P.d(Se,{Z:()=>Oe});var u=P(2090),X=P(4859),F=P(9681),le=P(1877);class ne{constructor(ge,Ce){this._delegate=ge,this.firebase=Ce,(0,F._addComponent)(ge,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ge,Ce=F._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(ge);return!We.isInitialized()&&"EXPLICIT"===(null===(it=We.getComponent())||void 0===it?void 0:it.instantiationMode)&&We.initialize(),We.getImmediate({identifier:Ce})}_removeServiceInstance(ge,Ce=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Ce)}_addComponent(ge){(0,F._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,F._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const te=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ue(){const Ve=function fe(Ve){const ge={},Ce={__esModule:!0,initializeApp:function Ae(Ue,se={}){const Y=F.initializeApp(Ue,se);if((0,u.r3)(ge,Y.name))return ge[Y.name];const oe=new Ve(Y,Ce);return ge[Y.name]=oe,oe},app:We,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Ue){const se=Ue.name,Y=se.replace("-compat","");if(F._registerComponent(Ue)&&"PUBLIC"===Ue.type){const oe=(_e=We())=>{if("function"!=typeof _e[Y])throw te.create("invalid-app-argument",{appName:se});return _e[Y]()};void 0!==Ue.serviceProps&&(0,u.ZB)(oe,Ue.serviceProps),Ce[Y]=oe,Ve.prototype[Y]=function(..._e){return this._getService.bind(this,se).apply(this,Ue.multipleInstances?_e:[])}}return"PUBLIC"===Ue.type?Ce[Y]:null},removeApp:function it(Ue){delete ge[Ue]},useAsService:function je(Ue,se){return"serverAuth"===se?null:se},modularAPIs:F}};function We(Ue){if(!(0,u.r3)(ge,Ue=Ue||F._DEFAULT_ENTRY_NAME))throw te.create("no-app",{appName:Ue});return ge[Ue]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function be(){return Object.keys(ge).map(Ue=>ge[Ue])}}),We.App=Ve,Ce}(ne);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function ge(Ce){(0,u.ZB)(Ve,Ce)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Ve}(),z=new le.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=$;!function Me(Ve){(0,F.registerVersion)("@firebase/app-compat","0.1.22",Ve)}()},9681:(ct,Se,P)=>{P.r(Se),P.d(Se,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>ji,_DEFAULT_ENTRY_NAME:()=>zn,_addComponent:()=>_n,_addOrOverwriteComponent:()=>Ur,_apps:()=>_t,_clearComponents:()=>zt,_components:()=>gn,_getProvider:()=>as,_registerComponent:()=>on,_removeServiceInstance:()=>tn,deleteApp:()=>cs,getApp:()=>Gi,getApps:()=>Cs,initializeApp:()=>ls,onLog:()=>hi,registerVersion:()=>ir,setLogLevel:()=>ni});var u=P(5861),X=P(4859),F=P(1877),le=P(2090);class ne{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function me(Ke){const Te=Ke.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(Je)){const pt=Je.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Je=>Je).join(" ")}}const te="@firebase/app",ue=new F.Yd("@firebase/app"),zn="[DEFAULT]",ut={[te]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_t=new Map,gn=new Map;function _n(Ke,Te){try{Ke.container.addComponent(Te)}catch(Je){ue.debug(`Component ${Te.name} failed to register with FirebaseApp ${Ke.name}`,Je)}}function Ur(Ke,Te){Ke.container.addOrOverwriteComponent(Te)}function on(Ke){const Te=Ke.name;if(gn.has(Te))return ue.debug(`There were multiple attempts to register component ${Te}.`),!1;gn.set(Te,Ke);for(const Je of _t.values())_n(Je,Ke);return!0}function as(Ke,Te){const Je=Ke.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),Ke.container.getProvider(Te)}function tn(Ke,Te,Je=zn){as(Ke,Te).clearInstance(Je)}function zt(){gn.clear()}const nr=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class io{constructor(Te,Je,pt){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}}const ji="9.6.11";function ls(Ke,Te={}){"object"!=typeof Te&&(Te={name:Te});const Je=Object.assign({name:zn,automaticDataCollectionEnabled:!1},Te),pt=Je.name;if("string"!=typeof pt||!pt)throw nr.create("bad-app-name",{appName:String(pt)});const Ht=_t.get(pt);if(Ht){if((0,le.vZ)(Ke,Ht.options)&&(0,le.vZ)(Je,Ht.config))return Ht;throw nr.create("duplicate-app",{appName:pt})}const Ft=new X.H0(pt);for(const U of gn.values())Ft.addComponent(U);const G=new io(Ke,Je,Ft);return _t.set(pt,G),G}function Gi(Ke=zn){const Te=_t.get(Ke);if(!Te)throw nr.create("no-app",{appName:Ke});return Te}function Cs(){return Array.from(_t.values())}function cs(Ke){return ht.apply(this,arguments)}function ht(){return(ht=(0,u.Z)(function*(Ke){const Te=Ke.name;_t.has(Te)&&(_t.delete(Te),yield Promise.all(Ke.container.getProviders().map(Je=>Je.delete())),Ke.isDeleted=!0)})).apply(this,arguments)}function ir(Ke,Te,Je){var pt;let Ht=null!==(pt=ut[Ke])&&void 0!==pt?pt:Ke;Je&&(Ht+=`-${Je}`);const Ft=Ht.match(/\s|\//),G=Te.match(/\s|\//);if(Ft||G){const U=[`Unable to register library "${Ht}" with version "${Te}":`];return Ft&&U.push(`library name "${Ht}" contains illegal characters (whitespace or "/")`),Ft&&G&&U.push("and"),G&&U.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void ue.warn(U.join(" "))}on(new X.wA(`${Ht}-version`,()=>({library:Ht,version:Te}),"VERSION"))}function hi(Ke,Te){if(null!==Ke&&"function"!=typeof Ke)throw nr.create("invalid-log-argument");(0,F.Am)(Ke,Te)}function ni(Ke){(0,F.Ub)(Ke)}const En="firebase-heartbeat-store";let fi=null;function Ds(){return fi||(fi=(0,le.X3)("firebase-heartbeat-database",1,(Ke,Te)=>{0===Te&&Ke.createObjectStore(En)}).catch(Ke=>{throw nr.create("storage-open",{originalErrorMessage:Ke.message})})),fi}function $t(){return($t=(0,u.Z)(function*(Ke){try{return(yield Ds()).transaction(En).objectStore(En).get(yi(Ke))}catch(Te){throw nr.create("storage-get",{originalErrorMessage:Te.message})}})).apply(this,arguments)}function st(Ke,Te){return bt.apply(this,arguments)}function bt(){return(bt=(0,u.Z)(function*(Ke,Te){try{const pt=(yield Ds()).transaction(En,"readwrite");return yield pt.objectStore(En).put(Te,yi(Ke)),pt.complete}catch(Je){throw nr.create("storage-set",{originalErrorMessage:Je.message})}})).apply(this,arguments)}function yi(Ke){return`${Ke.name}!${Ke.options.appId}`}class Bo{constructor(Te){this.container=Te,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new ft(Je),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var Te=this;return(0,u.Z)(function*(){const pt=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ht=Ai();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==Ht&&!Te._heartbeatsCache.heartbeats.some(Ft=>Ft.date===Ht))return Te._heartbeatsCache.heartbeats.push({date:Ht,agent:pt}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Ft=>{const G=new Date(Ft.date).valueOf();return Date.now()-G<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,u.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const Je=Ai(),{heartbeatsToSend:pt,unsentEntries:Ht}=function vi(Ke,Te=1024){const Je=[];let pt=Ke.slice();for(const Ht of Ke){const Ft=Je.find(G=>G.agent===Ht.agent);if(Ft){if(Ft.dates.push(Ht.date),Mi(Je)>Te){Ft.dates.pop();break}}else if(Je.push({agent:Ht.agent,dates:[Ht.date]}),Mi(Je)>Te){Je.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Je,unsentEntries:pt}}(Te._heartbeatsCache.heartbeats),Ft=(0,le.L)(JSON.stringify({version:2,heartbeats:pt}));return Te._heartbeatsCache.lastSentHeartbeatDate=Je,Ht.length>0?(Te._heartbeatsCache.heartbeats=Ht,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Ft})()}}function Ai(){return(new Date).toISOString().substring(0,10)}class ft{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,u.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function ba(Ke){return $t.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var Je=this;return(0,u.Z)(function*(){var pt;if(yield Je._canUseIndexedDBPromise){const Ft=yield Je.read();return st(Je.app,{lastSentHeartbeatDate:null!==(pt=Te.lastSentHeartbeatDate)&&void 0!==pt?pt:Ft.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var Je=this;return(0,u.Z)(function*(){var pt;if(yield Je._canUseIndexedDBPromise){const Ft=yield Je.read();return st(Je.app,{lastSentHeartbeatDate:null!==(pt=Te.lastSentHeartbeatDate)&&void 0!==pt?pt:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...Te.heartbeats]})}})()}}function Mi(Ke){return(0,le.L)(JSON.stringify({version:2,heartbeats:Ke})).length}!function Vt(Ke){on(new X.wA("platform-logger",Te=>new ne(Te),"PRIVATE")),on(new X.wA("heartbeat",Te=>new Bo(Te),"PRIVATE")),ir(te,"0.7.21",Ke),ir(te,"0.7.21","esm2017"),ir("fire-js","")}("")},4859:(ct,Se,P)=>{P.d(Se,{H0:()=>fe,wA:()=>F,zt:()=>ne});var u=P(5861),X=P(2090);class F{constructor($,z,ee){this.name=$,this.instanceFactory=z,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const le="[DEFAULT]";class ne{constructor($,z){this.name=$,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(z)){const ee=new X.BH;if(this.instancesDeferred.set(z,ee),this.isInitialized(z)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:z});ze&&ee.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(z).promise}getImmediate($){var z;const ee=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),ze=null!==(z=null==$?void 0:$.optional)&&void 0!==z&&z;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Me){if(ze)return null;throw Me}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function te(ue){return"EAGER"===ue.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:le})}catch(z){}for(const[z,ee]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(z);try{const Me=this.getOrInitializeService({instanceIdentifier:ze});ee.resolve(Me)}catch(Me){}}}}clearInstance($=le){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,u.Z)(function*(){const z=Array.from($.instances.values());yield Promise.all([...z.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...z.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=le){return this.instances.has($)}getOptions($=le){return this.instancesOptions.get($)||{}}initialize($={}){const{options:z={}}=$,ee=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:ee,options:z});for(const[Me,Oe]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Me)&&Oe.resolve(ze);return ze}onInit($,z){var ee;const ze=this.normalizeInstanceIdentifier(z),Me=null!==(ee=this.onInitCallbacks.get(ze))&&void 0!==ee?ee:new Set;Me.add($),this.onInitCallbacks.set(ze,Me);const Oe=this.instances.get(ze);return Oe&&$(Oe,ze),()=>{Me.delete($)}}invokeOnInitCallbacks($,z){const ee=this.onInitCallbacks.get(z);if(ee)for(const ze of ee)try{ze($,z)}catch(Me){}}getOrInitializeService({instanceIdentifier:$,options:z={}}){let ee=this.instances.get($);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=$,ue===le?void 0:ue),options:z}),this.instances.set($,ee),this.instancesOptions.set($,z),this.invokeOnInitCallbacks(ee,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ee)}catch(ze){}var ue;return ee||null}normalizeInstanceIdentifier($=le){return this.component?this.component.multipleInstances?$:le:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor($){this.name=$,this.providers=new Map}addComponent($){const z=this.getProvider($.name);if(z.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);z.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const z=new ne($,this);return this.providers.set($,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(ct,Se,P)=>{P.d(Se,{Am:()=>ue,Ub:()=>fe,Yd:()=>te,in:()=>X});const u=[];var X=(()=>{return($=X||(X={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",X;var $})();const F={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},le=X.INFO,ne={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},me=($,z,...ee)=>{if(z<$.logLevel)return;const ze=(new Date).toISOString(),Me=ne[z];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Me](`[${ze}]  ${$.name}:`,...ee)};class te{constructor(z){this.name=z,this._logLevel=le,this._logHandler=me,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in X))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?F[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...z),this._logHandler(this,X.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...z),this._logHandler(this,X.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,X.INFO,...z),this._logHandler(this,X.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,X.WARN,...z),this._logHandler(this,X.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...z),this._logHandler(this,X.ERROR,...z)}}function fe($){u.forEach(z=>{z.setLogLevel($)})}function ue($,z){for(const ee of u){let ze=null;z&&z.level&&(ze=F[z.level]),ee.userLogHandler=null===$?null:(Me,Oe,...Ve)=>{const ge=Ve.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(it){return null}}).filter(Ce=>Ce).join(" ");Oe>=(null!=ze?ze:Me.logLevel)&&$({level:X[Oe].toLowerCase(),message:ge,args:Ve,type:Me.name})}}}},5861:(ct,Se,P)=>{function u(F,le,ne,me,te,fe,ue){try{var $=F[fe](ue),z=$.value}catch(ee){return void ne(ee)}$.done?le(z):Promise.resolve(z).then(me,te)}function X(F){return function(){var le=this,ne=arguments;return new Promise(function(me,te){var fe=F.apply(le,ne);function ue(z){u(fe,me,te,ue,$,"next",z)}function $(z){u(fe,me,te,ue,$,"throw",z)}ue(void 0)})}}P.d(Se,{Z:()=>X})}},ct=>{ct(ct.s=1592)}]);